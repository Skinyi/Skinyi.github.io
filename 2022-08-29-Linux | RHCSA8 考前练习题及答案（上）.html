<!DOCTYPE html>
<html  lang="zh-CN,en,default" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰ | Avery Ma çš„ä¸ªäººç½‘ç«™</title>
    <meta name="description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  åœ¨ Node1 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡ é…ç½®ç½‘ç»œ åœ¨ node1 ä¸Šé…ç½®ç½‘å¡ ens160 çš„ç½‘ç»œï¼Œè¦æ±‚å¦‚ä¸‹ï¼š  ä¸»æœºåï¼šnode1.domain8.example.com IP åœ°å€: 192.168.30.10&#x2F;24 ç½‘å…³ï¼š192.168.30.254 DNSï¼š114.114.114.114  12345678910111213">
<meta property="og:type" content="article">
<meta property="og:title" content="RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰">
<meta property="og:url" content="https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.html">
<meta property="og:site_name" content="Avery Ma çš„ä¸ªäººç½‘ç«™">
<meta property="og:description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  åœ¨ Node1 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡ é…ç½®ç½‘ç»œ åœ¨ node1 ä¸Šé…ç½®ç½‘å¡ ens160 çš„ç½‘ç»œï¼Œè¦æ±‚å¦‚ä¸‹ï¼š  ä¸»æœºåï¼šnode1.domain8.example.com IP åœ°å€: 192.168.30.10&#x2F;24 ç½‘å…³ï¼š192.168.30.254 DNSï¼š114.114.114.114  12345678910111213">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-29T14:56:35.740Z">
<meta property="article:modified_time" content="2022-08-29T15:03:19.474Z">
<meta property="article:author" content="skinyi">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="RHEL">
<meta property="article:tag" content="RHCE">
<meta property="article:tag" content="è®¤è¯è€ƒè¯•">
<meta name="twitter:card" content="summary">

    
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    
<link rel="stylesheet" href="/css/common.min.css">



    
    
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/css/iconfont.min.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://github.com/skinyi" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer" >
                <img src="/images/avatar.jpg" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block">Avery Ma</h2>
            <h3 id="title" class="hidden xl:block">IT ä»ä¸šè€…</h3>
            
            <small id="location" class="hidden lg:block">
                <i class="iconfont icon-map-icon"></i>
                å®å¤, ä¸­å›½
            </small>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" placeholder="æœç´¢" class="inline-block w-full bg-gray-100 lg:bg-white">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<div id="content-json" data-placeholder="æœç´¢" class="invisible hidden">/content.json</div>
<script id="search-teamplate" type="text/html" data-path="/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="æœç´¢" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">é¦–é¡µ</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">å½’æ¡£</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-categories" role="menuitem">
                <a href="/categories">
                    <i class="iconfont icon-folder" aria-hidden="true"></i>
                    <span class="menu-title">åˆ†ç±»</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-tags" role="menuitem">
                <a href="/tags">
                    <i class="iconfont icon-tag" aria-hidden="true"></i>
                    <span class="menu-title">æ ‡ç­¾</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">é¡¹ç›®</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-about" role="menuitem">
                <a href="/about">
                    <i class="iconfont icon-cup" aria-hidden="true"></i>
                    <span class="menu-title">å…³äº</span>
                </a>
            </div>
        
        

    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                <span class="article-date">
    <i class="iconfont icon-calendar-check"></i>
	<a href="/2022-08-29-Linux%20%7C%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.html" class="article-date">
	  <time datetime="2022-08-29T14:56:35.740Z" itemprop="datePublished">8æœˆ 29</time>
	</a>
</span>

                
    <span class="article-category">
    <i class="iconfont icon-folder"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a> , <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/Linux/">Linux</a> , <a class="article-category-link" href="/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/">æ—¥å¸¸è®°å½•</a> , <a class="article-category-link" href="/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/">è¿ç§»æ–‡ç« </a>
  </span>


                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-none-link" href="/tags/Linux/" rel="tag">Linux</a>, <a class="article-tag-none-link" href="/tags/RHCE/" rel="tag">RHCE</a>, <a class="article-tag-none-link" href="/tags/RHEL/" rel="tag">RHEL</a>, <a class="article-tag-none-link" href="/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/" rel="tag">è®¤è¯è€ƒè¯•</a>
  </span>


                
                
    
        <span class="post-wordcount" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 2.6k(å­—)</span>
    
    
        <span class="post-readcount" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 12(åˆ†)</span>
    


            </p>
        </header>
        <div class="marked-body article-body">
            <blockquote>
<p>ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚</p>
</blockquote>
<h2 id="åœ¨-Node1-ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡">åœ¨ Node1 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡</h2>
<h3 id="é…ç½®ç½‘ç»œ">é…ç½®ç½‘ç»œ</h3>
<p>åœ¨ node1 ä¸Šé…ç½®ç½‘å¡ ens160 çš„ç½‘ç»œï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸»æœºåï¼š<a target="_blank" rel="noopener" href="http://node1.domain8.example.com">node1.domain8.example.com</a></li>
<li>IP åœ°å€: 192.168.30.10/24</li>
<li>ç½‘å…³ï¼š192.168.30.254</li>
<li>DNSï¼š114.114.114.114</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># hostnamectl set-hostname node1.domain8.example.com</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># hostname</span></span><br><span class="line">node1.domain8.example.com</span><br><span class="line">[root@node1 ~]\<span class="comment"># nmcli con mod ens160 connection.autoconnect yes \ </span></span><br><span class="line">&gt; ipv4.method manual \</span><br><span class="line">&gt; ipv4.address 192.168.30.10/24 \</span><br><span class="line">&gt; ipv4.gateway 192.168.30.254 \</span><br><span class="line">&gt; ipv4.dns 114.114.114.114</span><br><span class="line">[root@node1 ~]\<span class="comment"># nmcli con up ens160</span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/6)</span><br><span class="line">[root@node1 ~]\<span class="comment"># nmcli con show ens160 | grep ipv4</span></span><br><span class="line">ipv4.method:                            manual</span><br><span class="line">ipv4.dns:                               114.114.114.114</span><br><span class="line">ipv4.dns-search:                        --</span><br><span class="line">ipv4.dns-options:                       --</span><br><span class="line">ipv4.dns-priority:                      0</span><br><span class="line">ipv4.addresses:                         192.168.30.10/24</span><br><span class="line">ipv4.gateway:                           192.168.30.254</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-yum-dnf-ä½¿ç”¨æŒ‡å®šå­˜å‚¨åº“">é…ç½® yum/dnf ä½¿ç”¨æŒ‡å®šå­˜å‚¨åº“</h3>
<p>ç»™ç³»ç»Ÿé…ç½®é»˜è®¤å­˜å‚¨åº“ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š YUM çš„ ä¸¤ ä¸ª å­˜ å‚¨ åº“ çš„ åœ° å€ åˆ† åˆ« æ˜¯ ï¼š</p>
<ul>
<li><a href="ftp://host.domain8.example.com/dvd/BaseOS">ftp://host.domain8.example.com/dvd/BaseOS</a></li>
<li><a href="ftp://host.domain8.example.com/dvd/AppStream">ftp://host.domain8.example.com/dvd/AppStream</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. æ–¹æ³•ä¸€ï¼šåˆ©ç”¨ dnf-utils è½¯ä»¶åŒ…ï¼ˆéœ€æå‰æ‰¾åˆ°è¯¥åŒ…åï¼‰</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># rpm -ivh ftp://host.domain8.example.com/dvd/BaseOS/Packages/dnf-utils-4.0.2.2-3.el8.noarch.rpm</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># dnf-config-manager --add-repo ftp://host.domain8.example.com/dvd/BaseOS</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># dnf-config-manager --add-repo ftp://host.domain8.example.com/dvd/AppStream</span></span><br><span class="line">vim /etc/yum.conf <span class="comment"># ç¼–è¾‘ä¿®æ”¹ gpgcheck=0,å¦‚æ–¹æ³•äºŒæ‰€ç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ç¼–è¾‘æ·»åŠ </span></span><br><span class="line">[root@node1 ~]\<span class="comment"># vim /etc/yum.repos.d/default.repo</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># cat !$</span></span><br><span class="line"><span class="built_in">cat</span> /etc/yum.repos.d/default.repo</span><br><span class="line">[baseos]</span><br><span class="line">name=baseos</span><br><span class="line">baseurl=ftp://host.domain8.example.com/dvd/BaseOS</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=base</span><br><span class="line">baseurl=ftp://host.domain8.example.com/dvd/AppStream</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. éªŒè¯ï¼š</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># yum repolist</span></span><br><span class="line">Updating Subscription Management repositories.</span><br><span class="line">Unable to <span class="built_in">read</span> consumer identity</span><br><span class="line"></span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line"></span><br><span class="line">repo <span class="built_in">id</span>                              repo name</span><br><span class="line">base                                 base</span><br><span class="line">baseos                               baseos</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒè¯•-SELinux">è°ƒè¯• SELinux</h3>
<p>éæ ‡å‡†ç«¯å£ 82 ä¸Šè¿è¡Œçš„ WEB æœåŠ¡å™¨åœ¨æä¾›å†…å®¹æ—¶é‡åˆ°é—®é¢˜ã€‚æ ¹æ®éœ€è¦è°ƒè¯•å¹¶è§£å†³é—®é¢˜ï¼Œ å¹¶ä½¿å…¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>ç³»ç»Ÿä¸Šçš„ web æœåŠ¡å™¨èƒ½å¤Ÿæä¾› /var/www/html ä¸­æ‰€æœ‰ç°åœ¨æœ‰çš„ html æ–‡ä»¶ï¼ˆæ³¨æ„ï¼šä¸è¦åˆ é™¤æˆ–è€…å…¶ä»–æ–¹å¼æ”¹åŠ¨ç°æœ‰çš„æ–‡ä»¶å†…å®¹ï¼‰</li>
<li>Web æœåŠ¡å™¨é€šè¿‡ 82 ç«¯å£è®¿é—®</li>
<li>Web æœåŠ¡å™¨åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹åŸæœ¬çš„ SELinux è®¾ç½®</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># semanage port -l | grep ^http_port_t        # æŸ¥çœ‹å±äº http_port_t ç±»å‹ä¸Šä¸‹æ–‡çš„ç«¯å£</span></span><br><span class="line">http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000</span><br><span class="line">[root@node1 ~]\<span class="comment"># ls -lZ /var/www/html | grep html$        # æŸ¥çœ‹ /var/www/html ä¸­çš„ html æ–‡ä»¶çš„å®‰å…¨ä¸Šä¸‹æ–‡</span></span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--. 1 root root unconfined_u:object_r:var_t:s0 0 Aug  4 22:52 1.html</span><br><span class="line">-rw-r--r--. 1 root root unconfined_u:object_r:var_t:s0 0 Aug  4 22:52 index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ¶‰åŠçš„ç«¯å£åŠæ–‡ä»¶çš„ SELinux è®¾ç½®</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># semanage port -a -t http_port_t -p tcp 82</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># restorecon -RFv /var/www/html</span></span><br><span class="line">Relabeled /var/www/html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">Relabeled /var/www/html/1.html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">Relabeled /var/www/html/index.html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">[root@node1 ~]\<span class="comment"># systemctl enable --now httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•è®¿é—®ã€‚å®¿ä¸»æœºè®¿é—®è¿˜éœ€æ”¾å¼€é˜²ç«å¢™</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># curl localhost:82</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºç”¨æˆ·è´¦æˆ·">åˆ›å»ºç”¨æˆ·è´¦æˆ·</h3>
<p>åˆ›å»ºä¸‹åˆ—ç”¨æˆ·ã€ç”¨æˆ·ç»„ï¼Œå¹¶æŒ‰è¦æ±‚å®Œæˆè®¾ç½®ï¼š</p>
<ol>
<li>ç»„åä¸º sysmgrs</li>
<li>natasha ç”¨æˆ·çš„é™„å±ç»„æ˜¯ sysmgrs</li>
<li>harry ç”¨æˆ·çš„é™„å±ç»„æ˜¯ sysmgrs</li>
<li>john ç”¨æˆ·çš„ shell æ˜¯éäº¤äº’å¼ shellï¼Œä¸”ä¸æ˜¯ sysmgrs ç»„çš„æˆå‘˜</li>
<li>natashaã€harryã€john çš„å¯†ç æ˜¯ redhat</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># groupadd sysmgrs</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># useradd -G sysmgrs natasha    # -p é€‰é¡¹æŒ‡å®šçš„åŠ å¯†åçš„å¯†ç ï¼Œä¸æ¨èä½¿ç”¨</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># useradd -G sysmgrs harry</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># useradd -s /sbin/nologin john</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># for i in natasha harry john; do echo redhat | passwd --stdin $i; done</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-Cron-ä½œä¸š">é…ç½® Cron ä½œä¸š</h3>
<p>é…ç½® cron ä½œä¸šï¼Œè¯¥ä½œä¸šæ¯éš” 5 åˆ†é’Ÿè¿è¡Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br />
logger â€œEX200 in progressâ€ï¼Œä»¥ç”¨æˆ· natasha èº«ä»½è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># crontab -e -u natasha</span></span><br><span class="line">*/5 * * * * logger <span class="string">&quot;EX200 in progress&quot;</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># tail -f /var/log/cron    # éªŒè¯ä»»åŠ¡</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºåä½œç›®å½•">åˆ›å»ºåä½œç›®å½•</h3>
<p>åˆ›å»ºå…·æœ‰ç‰¹æ®Šæƒé™çš„ç›®å½• /home/managersï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<ol>
<li>/home/managers ç›®å½•å±äº sysmgrs ç»„</li>
<li>æ­¤ç›®å½•å¯ä»¥è¢« sysmgrs çš„ç»„æˆå‘˜è¯»å–ã€å†™å…¥å’Œè®¿é—®ï¼Œä½†æ˜¯å…¶ä»–ä»»ä½•ç”¨æˆ·ä¸å…·å¤‡è¿™äº›æƒé™ã€‚ï¼ˆä¸åŒ…æ‹¬ root ç”¨æˆ·ï¼‰</li>
<li>åœ¨ /home/managers ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶çš„æ‰€å±ç»„è‡ªåŠ¨å˜æˆ sysmgrs</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># mkdir /home/managers</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># chgrp sysmgrs /home/managers</span></span><br><span class="line"><span class="comment"># [root@node1 ~]\# chmod 2770 /home/managers</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># chmod g=rws,o=- /home/managers    # g+s å®ç°ç›®å½•å†…æ–°å»ºæ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿ç›®å½•çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># éªŒè¯</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># ls -ld /home/managers</span></span><br><span class="line">drwxrws---. 2 root sysmgrs 6 Aug  8 10:46 /home/managers</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-NTP">é…ç½® NTP</h3>
<p>é…ç½® node1 ä½œä¸º NTP çš„å®¢æˆ·ç«¯ï¼Œé…ç½®åŒæ­¥é˜¿é‡Œäº‘çš„ ntp æˆæ—¶æœåŠ¡ï¼š<a target="_blank" rel="noopener" href="http://ntp.aliyun.com">ntp.aliyun.com</a>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># timedatectl | grep NTP</span></span><br><span class="line">              NTP service: active</span><br><span class="line">[root@node1 ~]\<span class="comment"># systemctl status chronyd</span></span><br><span class="line">â— chronyd.service - NTP client/server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) (thawing) since Mon 2022-08-08 11:14:54 CST; 10min ago</span><br><span class="line">   ......</span><br><span class="line">[root@node1 ~]\<span class="comment"># vim /etc/chrony.conf</span></span><br><span class="line"><span class="comment"># Use public servers from the pool.ntp.org project.</span></span><br><span class="line"><span class="comment"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span></span><br><span class="line">server ntp.aliyun.com iburst</span><br><span class="line">pool 2.rhel.pool.ntp.org iburst</span><br><span class="line"></span><br><span class="line"><span class="comment"># Record the rate at which the system clock gains/losses time.</span></span><br><span class="line">driftfile /var/lib/chrony/drift</span><br><span class="line">......</span><br><span class="line">[root@node1 ~]\<span class="comment"># systemctl restart chronyd</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># chronyc sources    # 203.107.6.88 æ˜¯åŸŸå ntp.aliyun.com è¿”å›çš„æˆæ—¶æœåŠ¡ ip</span></span><br><span class="line">210 Number of sources = 7</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^* 203.107.6.88                  2   7   357    70  -6780us[  -10ms] +/-   37ms</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-autofs">é…ç½® autofs</h3>
<p>é…ç½® autofsï¼ŒæŒ‰ç…§ä»¥ä¸‹è¦æ±‚è‡ªåŠ¨æŒ‚è½½è¿œç¨‹ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://host.domain8.example.com">host.domain8.example.com</a> ( 172.25.250.250 ) NFS å¯¼å‡º /rhome åˆ°æ‚¨çš„ç³»ç»Ÿ</li>
<li>æ­¤æ–‡ä»¶ç³»ç»ŸåŒ…å«ä¸ºç”¨æˆ· remoteuser1 é¢„é…ç½®çš„ä¸»ç›®å½•</li>
<li>remoteuser1 çš„ä¸»ç›®å½•æ˜¯ <a target="_blank" rel="noopener" href="http://host.domain8.example.com">host.domain8.example.com</a>:/rhome/remoteuser1</li>
<li>remoteuser1 çš„ä¸»ç›®å½•åº”è‡ªåŠ¨æŒ‚è½½åˆ°æœ¬åœ° /rhome ä¸‹çš„ /rhome/remoteuser1</li>
<li>ä¸»ç›®å½•å¿…é¡»å¯ä¾›å…¶ç”¨æˆ·å†™å…¥</li>
<li>remoteuser1 çš„å¯†ç æ˜¯ redhat</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># systemctl status autofs</span></span><br><span class="line">â— autofs.service - Automounts filesystems on demand</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/autofs.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line">[root@node1 ~]\<span class="comment"># vim /etc/auto.master    # ç¼–è¾‘ autofs çš„ä¸»é…ç½®æ–‡ä»¶</span></span><br><span class="line">/misc   /etc/auto.misc</span><br><span class="line"><span class="comment"># æ·»åŠ  nfs æ¡ç›® - rhome ä½œä¸ºåŸºæœ¬æŒ‚è½½ç‚¹</span></span><br><span class="line"><span class="comment"># | æœ¬åœ° autofs æŒ‚è½½ç‚¹    | é’ˆå¯¹è¯¥æŒ‚è½½ç‚¹çš„é…ç½®æ–‡ä»¶    | (å¯é€‰)æŒ‚è½½é€‰é¡¹</span></span><br><span class="line">/rhome    /etc/auto.nfs</span><br><span class="line">[root@node1 ~]\<span class="comment"># vim /etc/auto.nfs    # ç¼–è¾‘ nfs autofs çš„é…ç½®</span></span><br><span class="line"><span class="comment"># æ·»åŠ ç”¨æˆ·ç›®å½•åŠè¿œç¨‹ nfs è·¯å¾„</span></span><br><span class="line"><span class="comment"># | æŒ‚è½½ç‚¹ï¼ˆç›¸å¯¹äºåŸºæœ¬æŒ‚è½½ç‚¹ï¼š/rhome/remoteuser1ï¼‰    | æŒ‚è½½é€‰é¡¹ï¼ˆå¯è¯»å†™ï¼‰    | è¿œç¨‹ä½ç½®</span></span><br><span class="line">remoteuser1    -fstype=nfs,rw    host.domain8.example.com:/rhome/remoteuser1    <span class="comment"># ä»¥ç©ºæ ¼éš”å¼€</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># systemctl enable --now autofs</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># echo flectrag | passwd --stdin remoteuser1</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># su - remoteuser1</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-var-tmp-fstab-çš„æƒé™">é…ç½® /var/tmp/fstab çš„æƒé™</h3>
<p>é…ç½®æ–‡ä»¶æƒé™ï¼Œå°†æ–‡ä»¶ /etc/fstab å¤åˆ¶åˆ° /var/tmp/fstabã€‚é…ç½® /var/tmp/fstab çš„æƒé™ä»¥æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>/var/tmp/fstab å±äº root ç”¨æˆ·å’Œ root ç»„</li>
<li>/var/tmp/fstab ä¸èƒ½è¢«ä»»ä½•äººæ‰§è¡Œ</li>
<li>ç”¨æˆ· natasha æœ‰è¯»å†™æƒé™</li>
<li>ç”¨æˆ· harry æ²¡æœ‰è¯»å†™æƒé™</li>
<li>æ‰€æœ‰å…¶ä»–ç”¨æˆ·ï¼ˆå½“å‰æˆ–è€…æœªæ¥ï¼‰èƒ½å¤Ÿè¯»å– /var/tmp/fstab</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># cp /etc/fstab /var/tmp/fstab</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># setfacl -m u:natasha:rw /var/tmp/fstab</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># setfacl -m u:harry:- /var/tmp/fstab</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># getfacl /var/tmp/fstab    # éªŒè¯</span></span><br><span class="line">getfacl: Removing leading <span class="string">&#x27;/&#x27;</span> from absolute path names</span><br><span class="line"><span class="comment"># file: var/tmp/fstab</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:natasha:rw-</span><br><span class="line">user:harry:---</span><br><span class="line">group::r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç”¨æˆ·è´¦æˆ·">é…ç½®ç”¨æˆ·è´¦æˆ·</h3>
<p>é…ç½®ç”¨æˆ· manalo ï¼Œå…¶ç”¨æˆ· ID ä¸º 3533ã€‚æ­¤ç”¨æˆ·çš„å¯†ç åº”å½“ä¸º redhat</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># useradd -u 3533 manalo</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># echo redhat | passwd --stdin manalo</span></span><br><span class="line">Changing password <span class="keyword">for</span> user manalo.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾æ–‡ä»¶">æŸ¥æ‰¾æ–‡ä»¶</h3>
<p>æŸ¥æ‰¾å±äº manalo ç”¨æˆ·æ‰€å±çš„æ–‡ä»¶ï¼Œå¹¶æ‹·è´åˆ° /root/findfiles ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># mkdir /root/findfiles</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># find / -user manalo -exec cp -a &#123;&#125; /root/findfiles \;</span></span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾å­—ç¬¦ä¸²">æŸ¥æ‰¾å­—ç¬¦ä¸²</h3>
<p>æŸ¥æ‰¾æ–‡ä»¶ /usr/share/xml/iso-codes/iso_639_3.xml ä¸­åŒ…å«å­—ç¬¦ä¸² ng çš„æ‰€æœ‰è¡Œã€‚å¹¶å°†æ‰€æœ‰è¿™ äº›è¡Œçš„å†…å®¹æ”¾åˆ°æ–‡ä»¶/root/list ä¸­ï¼Œ/root/list ä¸å¾—åŒ…å«ç©ºè¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># grep ng /usr/share/xml/iso-codes/iso_639_3.xml &gt; /root/list</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºå½’æ¡£">åˆ›å»ºå½’æ¡£</h3>
<p>åˆ›å»ºä¸€ä¸ªåä¸º /root/backup.tar.gz çš„ tar åŒ…ï¼Œç”¨æ¥å‹ç¼© /usr/local ç›®å½•ã€‚ å¦‚æœè€ƒè¯•è®©ä½ ç”¨çš„ /root/backup.tar.bz2 çš„ tar åŒ…å‘¢ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\<span class="comment"># tar -czvf /root/backup.tar.gz /usr/local/    # å‹ç¼©ä¸º tar.gz</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># tar -cjvf /root/backup.tar.bz2 /usr/local/    # å‹ç¼©ä¸º tar.bz2</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># tar -tf /root/backup.tar.gz    # éªŒè¯</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨">é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨</h3>
<p>åˆ©ç”¨ä»“åº“æœåŠ¡å™¨ä¸Šçš„ rsyslog é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º logserver çš„å®¹å™¨</p>
<blockquote>
<p>ä»“åº“åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://registry.domain250.example.com">registry.domain250.example.com</a>ï¼Œç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šredhatã€‚</p>
</blockquote>
<ol>
<li>
<p>é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡</p>
</li>
<li>
<p>è¯¥æœåŠ¡å‘½åä¸º container-logserver ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„</p>
</li>
</ol>
<h3 id="å®Œæˆä¸ºå®¹å™¨é…ç½®æŒä¹…å­˜å‚¨">å®Œæˆä¸ºå®¹å™¨é…ç½®æŒä¹…å­˜å‚¨</h3>
<p>é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•ä¸Šä¸€ä¸ªä»»åŠ¡çš„æœåŠ¡</p>
<ol>
<li>
<p>é…ç½®ä¸»æœºç³»ç»Ÿçš„ journald æ—¥å¿—ä»¥åœ¨ç³»ç»Ÿé‡å¯åä¿ç•™æ•°æ®ï¼Œå¹¶é‡æ–°å¯åŠ¨æ—¥å¿—è®°å½•æœåŠ¡</p>
</li>
<li>
<p>å°†ä¸»æœº /var/log/journal ç›®å½•ä¸‹ä»»ä½•ä»¥ *.journal çš„æ–‡ä»¶å¤åˆ¶åˆ° /home/wallah/container_logfile ä¸­</p>
</li>
<li>
<p>å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°†/home/wallah/container_logfile æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /var/log/journal ä¸‹</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># jouranld çš„æ—¥å¿—ä¸´æ—¶å­˜å‚¨åœ¨ /run/log/journal/ ç›®å½•ä¸­ï¼ŒæŒä¹…åŒ–æ—¶ä¼šä¿å­˜åœ¨ /var/log/journal/ ç›®å½•ä¸­ï¼Œè¯¥ç›®å½•æ— éœ€æ‰‹åŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment"># journald æ—¥å¿—çš„å­˜å‚¨æ–¹å¼åœ¨ /etc/systemd/journald.conf é…ç½®æ–‡ä»¶ä¸­å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»»åŠ¡ä¹ 1-2ï¼š</span></span><br><span class="line"><span class="comment">## 1. ä¿®æ”¹ journald é…ç½®æ–‡ä»¶ä½¿å…¶æŒä¹…åŒ–å­˜å‚¨æ—¥å¿—</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># vim /etc/systemd/journald.conf</span></span><br><span class="line">[Journal]</span><br><span class="line"><span class="comment">#Storage=auto</span></span><br><span class="line">Storge=persistent</span><br><span class="line"><span class="comment">#Compress=yes</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># systemctl enable --now systemd-journald    # é‡å¯ï¼ˆè®¾ç½®è‡ªå¯ï¼‰journald æœåŠ¡</span></span><br><span class="line"><span class="comment">## 2. å¤åˆ¶æ—¥å¿—</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># journalctl -u systemd-journald    # æŸ¥çœ‹æ—¥å¿—æœåŠ¡ç”Ÿæˆçš„æ—¥å¿—å­˜å‚¨è·¯å¾„ï¼ˆä¸»è¦æ˜¯éšæœºå­—ç¬¦ä¸²ç›®å½•ï¼‰</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># cp /var/run/journal/&lt;long_random_string&gt;/*.journal /home/wallah/containe_logfile/</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># chown -R wallah:wallah /home/wallah/container_logfile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»»åŠ¡å…« 1-2ï¼Œä»»åŠ¡ä¹ 3ï¼š</span></span><br><span class="line">[root@node1 ~]\<span class="comment"># ssh wallah@node1    # ä½¿ç”¨ ssh æœ¬åœ°è¿œç¨‹ wallah ç”¨æˆ·</span></span><br><span class="line"><span class="comment">## 1. é…ç½® logserver å®¹å™¨</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># podman login registry.domain250.example.com    # ç™»å½•åˆ°é•œåƒä»“åº“</span></span><br><span class="line">Username: admin</span><br><span class="line">Password: redhat</span><br><span class="line">Login Succeeded!</span><br><span class="line">[wallah@node1 ~]\<span class="comment"># podman search registry.domain250.example.com/    # æŸ¥çœ‹ä»“åº“å†…çš„é•œåƒåˆ—è¡¨</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># podman pull registry.domain250.example.com/rhel/rsyslog    # æ‹‰å–é•œåƒåˆ°æœ¬åœ°</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># podman run -d --name logserver -v /home/wallah/container_logfile:/var/log/journal:Z registry.domain250.example.com/rhel/rsyslog    # å¯åŠ¨å®¹å™¨ï¼Œ-d åå°è¿è¡Œï¼Œ--name æŒ‡å®šå®¹å™¨åå­—ï¼Œ-v æŒ‡å®šç›®å½•æ˜ å°„(å†’å·å’ŒZä¸å¯ç¼º)</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># podman ps # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span></span><br><span class="line"><span class="comment">## 2. ä¸ºå®¹å™¨åˆ›å»ºç”¨æˆ·æœåŠ¡</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># loginctl enable-linger [wallah]    # å…è®¸ wallah ç”¨æˆ·é€—ç•™ï¼ˆç”¨æˆ·ç™»å‡ºåå…¶æœåŠ¡ä¿æŒè¿è¡Œï¼‰</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># mkdir -p ~/.config/systemd/user/    # åˆ›å»ºç”¨æˆ· systemd æœåŠ¡é…ç½®ç›®å½•</span></span><br><span class="line">[wallah@node1 ~]\<span class="comment"># cd ~/.config/systemd/user/</span></span><br><span class="line">[wallah@node1 user]\<span class="comment"># podman generate systemd -n logserver -f    # åˆ›å»ºç”¨æˆ·æœåŠ¡</span></span><br><span class="line">/home/wallah/.config/systemd/user/container-logserver.service</span><br><span class="line">[wallah@node1 user]\<span class="comment"># podman stop logserver    # å…ˆåœæ­¢å®¹å™¨ä»¥è¿›è¡Œåç»­æµ‹è¯•</span></span><br><span class="line">[wallah@node1 user]\<span class="comment"># systemctl --user enable --now container-logserver.service    # å¯ç”¨ç”¨æˆ·æœåŠ¡å¹¶è®¾ç½® container-logserver æœåŠ¡çš„è‡ªå¯</span></span><br><span class="line"><span class="comment">## 3. éªŒè¯</span></span><br><span class="line">[wallah@node1 user]\<span class="comment"># podman ps    # éªŒè¯å®¹å™¨æ˜¯å¦è‡ªå¯</span></span><br></pre></td></tr></table></figure>

        </div>
        
<blockquote class="copyright">
    <p><strong>æœ¬æ–‡é“¾æ¥ : </strong><a class="permalink" href="https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.html">https://skinyi.github.io/2022-08-29-Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰.html</a></p>
    <p><strong>è¿™ç¯‡æ–‡ç« ç”±ä½œè€…èƒ¡ç¼–ä¹±é€ æˆ–è€…ç”±å…¶ä»–æ–‡ç« å¤åˆ¶ç²˜è´´è€Œæ¥ï¼Œå…¶ä¸­æœ‰äº›å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ï¼Œè¯·è°¨æ…å‚è€ƒå¤åˆ¶æ–‡ç« ä¸­çš„å†…å®¹ã€‚</strong></p>
</blockquote>


    </article>
    
    <section id="comments">
        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">æ–‡ç« ç›®å½•</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-Node1-%E4%B8%8A%E5%AE%8C%E6%88%90%E4%BB%A5%E4%B8%8B%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">åœ¨ Node1 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C"><span class="toc-number">1.1.</span> <span class="toc-text">é…ç½®ç½‘ç»œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-yum-dnf-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AE%9A%E5%AD%98%E5%82%A8%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">é…ç½® yum&#x2F;dnf ä½¿ç”¨æŒ‡å®šå­˜å‚¨åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E8%AF%95-SELinux"><span class="toc-number">1.3.</span> <span class="toc-text">è°ƒè¯• SELinux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7"><span class="toc-number">1.4.</span> <span class="toc-text">åˆ›å»ºç”¨æˆ·è´¦æˆ·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Cron-%E4%BD%9C%E4%B8%9A"><span class="toc-number">1.5.</span> <span class="toc-text">é…ç½® Cron ä½œä¸š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%8F%E4%BD%9C%E7%9B%AE%E5%BD%95"><span class="toc-number">1.6.</span> <span class="toc-text">åˆ›å»ºåä½œç›®å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-NTP"><span class="toc-number">1.7.</span> <span class="toc-text">é…ç½® NTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-autofs"><span class="toc-number">1.8.</span> <span class="toc-text">é…ç½® autofs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-var-tmp-fstab-%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-number">1.9.</span> <span class="toc-text">é…ç½® &#x2F;var&#x2F;tmp&#x2F;fstab çš„æƒé™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7"><span class="toc-number">1.10.</span> <span class="toc-text">é…ç½®ç”¨æˆ·è´¦æˆ·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6"><span class="toc-number">1.11.</span> <span class="toc-text">æŸ¥æ‰¾æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.12.</span> <span class="toc-text">æŸ¥æ‰¾å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%BD%92%E6%A1%A3"><span class="toc-number">1.13.</span> <span class="toc-text">åˆ›å»ºå½’æ¡£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%B9%E5%99%A8%E4%BD%BF%E5%85%B6%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8"><span class="toc-number">1.14.</span> <span class="toc-text">é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E4%B8%BA%E5%AE%B9%E5%99%A8%E9%85%8D%E7%BD%AE%E6%8C%81%E4%B9%85%E5%AD%98%E5%82%A8"><span class="toc-number">1.15.</span> <span class="toc-text">å®Œæˆä¸ºå®¹å™¨é…ç½®æŒä¹…å­˜å‚¨</span></a></li></ol></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 bg-gray-100 z-40">
    
    
        <p class="footer-custom">â¤ Powered by <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a> with <a href="https://github.com/fengkx/hexo-theme-purer" target="_blank" rel="noopener noreferrer">Purer theme</a>.</p>
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/js/dom-event.min.js"></script>



<script src="/js/local-search.min.js"></script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/js/light-gallery.min.js"></script>






    </body>
</html>
