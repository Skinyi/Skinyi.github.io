<!DOCTYPE html>
<html  lang="zh-CN,en,default" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰ | Avery Ma çš„ä¸ªäººç½‘ç«™</title>
    <meta name="description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA æˆ– Node1ï¼‰ æ·»åŠ  sudo å…å¯†æ“ä½œ å…è®¸ sysmgrs ç»„æˆå‘˜ sudo æ—¶ä¸éœ€è¦å¯†ç ã€‚ 123456789# visudo åŒºåˆ«äºç›´æ¥æ”¹é…ç½®æ–‡ä»¶ï¼Œé€€å‡ºå‰æœ‰è¯­æ³•æ£€æŸ¥[root@node1 ~]\# visudo# %wheel        ALL&#x3D;(ALL)       NOPA">
<meta property="og:type" content="article">
<meta property="og:title" content="RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰">
<meta property="og:url" content="https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.html">
<meta property="og:site_name" content="Avery Ma çš„ä¸ªäººç½‘ç«™">
<meta property="og:description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA æˆ– Node1ï¼‰ æ·»åŠ  sudo å…å¯†æ“ä½œ å…è®¸ sysmgrs ç»„æˆå‘˜ sudo æ—¶ä¸éœ€è¦å¯†ç ã€‚ 123456789# visudo åŒºåˆ«äºç›´æ¥æ”¹é…ç½®æ–‡ä»¶ï¼Œé€€å‡ºå‰æœ‰è¯­æ³•æ£€æŸ¥[root@node1 ~]\# visudo# %wheel        ALL&#x3D;(ALL)       NOPA">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-29T15:00:19.147Z">
<meta property="article:modified_time" content="2022-08-29T15:03:16.013Z">
<meta property="article:author" content="skinyi">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="RHEL">
<meta property="article:tag" content="RHCE">
<meta property="article:tag" content="è®¤è¯è€ƒè¯•">
<meta name="twitter:card" content="summary">

    
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    
<link rel="stylesheet" href="/css/common.min.css">



    
    
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/css/iconfont.min.css">

    
<meta name="generator" content="Hexo 6.2.0"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://github.com/skinyi" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer" >
                <img src="/images/avatar.jpg" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block">Avery Ma</h2>
            <h3 id="title" class="hidden xl:block">IT ä»ä¸šè€…</h3>
            
            <small id="location" class="hidden lg:block">
                <i class="iconfont icon-map-icon"></i>
                å®å¤, ä¸­å›½
            </small>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" placeholder="æœç´¢" class="inline-block w-full bg-gray-100 lg:bg-white">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<div id="content-json" data-placeholder="æœç´¢" class="invisible hidden">/content.json</div>
<script id="search-teamplate" type="text/html" data-path="/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="æœç´¢" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">é¦–é¡µ</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">å½’æ¡£</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-categories" role="menuitem">
                <a href="/categories">
                    <i class="iconfont icon-folder" aria-hidden="true"></i>
                    <span class="menu-title">åˆ†ç±»</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-tags" role="menuitem">
                <a href="/tags">
                    <i class="iconfont icon-tag" aria-hidden="true"></i>
                    <span class="menu-title">æ ‡ç­¾</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">é¡¹ç›®</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-about" role="menuitem">
                <a href="/about">
                    <i class="iconfont icon-cup" aria-hidden="true"></i>
                    <span class="menu-title">å…³äº</span>
                </a>
            </div>
        
        

    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                <span class="article-date">
    <i class="iconfont icon-calendar-check"></i>
	<a href="/2022-08-29-Linux%20%7C%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.html" class="article-date">
	  <time datetime="2022-08-29T15:00:19.147Z" itemprop="datePublished">8æœˆ 29</time>
	</a>
</span>

                
    <span class="article-category">
    <i class="iconfont icon-folder"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a> , <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/Linux/">Linux</a> , <a class="article-category-link" href="/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/">æ—¥å¸¸è®°å½•</a> , <a class="article-category-link" href="/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/">è¿ç§»æ–‡ç« </a>
  </span>


                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-none-link" href="/tags/Linux/" rel="tag">Linux</a>, <a class="article-tag-none-link" href="/tags/RHCE/" rel="tag">RHCE</a>, <a class="article-tag-none-link" href="/tags/RHEL/" rel="tag">RHEL</a>, <a class="article-tag-none-link" href="/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/" rel="tag">è®¤è¯è€ƒè¯•</a>
  </span>


                
                
    
        <span class="post-wordcount" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 2.6k(å­—)</span>
    
    
        <span class="post-readcount" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 12(åˆ†)</span>
    


            </p>
        </header>
        <div class="marked-body article-body">
            <blockquote>
<p>ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚</p>
</blockquote>
<h2 id="é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA-æˆ–-Node1ï¼‰">é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA æˆ– Node1ï¼‰</h2>
<h3 id="æ·»åŠ -sudo-å…å¯†æ“ä½œ">æ·»åŠ  sudo å…å¯†æ“ä½œ</h3>
<p>å…è®¸ sysmgrs ç»„æˆå‘˜ sudo æ—¶ä¸éœ€è¦å¯†ç ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">visudo åŒºåˆ«äºç›´æ¥æ”¹é…ç½®æ–‡ä»¶ï¼Œé€€å‡ºå‰æœ‰è¯­æ³•æ£€æŸ¥</span></span><br><span class="line">[root@node1 ~]\# visudo</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">%wheel        ALL=(ALL)       NOPASSWD: ALL</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">sysmgrs ALL=(ALL) NOPASSWD: ALL</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[root@node1 ~]\# su - natasha</span><br><span class="line">[natasha@node1 ~]$ sudo useradd zhangsan</span><br><span class="line">[natasha@node1 ~]$ sudo userdel -r zhangsan</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®åˆ›å»ºæ–°ç”¨æˆ·çš„å¯†ç ç­–ç•¥">é…ç½®åˆ›å»ºæ–°ç”¨æˆ·çš„å¯†ç ç­–ç•¥</h3>
<p>åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œé»˜è®¤å¯†ç ç­–ç•¥ä¸º 20 å¤©åï¼Œå¯†ç ä¼šè¿‡æœŸã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\# vim /etc/login.defs</span><br><span class="line">PASS_MAX_DAYS 20</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•ï¼š</span></span><br><span class="line">[root@node1 ~]\# useradd ligoudan</span><br><span class="line">[root@node1 ~]\# chage -l ligoudan</span><br><span class="line">Last password change : Apr 29, 2021</span><br><span class="line">Password expires : May 19, 2021</span><br><span class="line">Password inactive : never</span><br><span class="line">Account expires : never</span><br><span class="line">Minimum number of days between password change : 0</span><br><span class="line">Maximum number of days between password change : 20</span><br><span class="line">Number of days of warning before password expires : </span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè„šæœ¬">åˆ›å»ºè„šæœ¬</h3>
<p>åˆ›å»ºä¸€ä¸ªåä¸º myresearch çš„è„šæœ¬è¯¥è„šæœ¬æ”¾ç½®åœ¨ /usr/bin ä¸‹è¯¥è„šæœ¬ç”¨æ¥æŸ¥æ‰¾ /usr ä¸‹æ‰€æœ‰å°äº 10m ä¸”å…·æœ‰ä¿®æ”¹ç»„ ID æƒé™çš„æ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶æ”¾ç½®äº/root/myfiles ä¸‹</p>
<blockquote>
<p>ğŸ“Œ -sizeçš„å‚æ•°æ³¨æ„ M å¤§å†™ï¼Œk å°å†™</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\# vim /usr/bin/myresearch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">if [ ! -d /root/myfiles ]; then</span><br><span class="line">mkdir /root/myfiles</span><br><span class="line">fi</span><br><span class="line">find /usr -size -10M -perm /g=s -exec cp -a &#123;&#125; /root/myfiles \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">mkdir /root/myfiles </span><br><span class="line">find /usr -size -10M -perm -g=s -exec cp -a &#123;&#125; /root/myfiles \;</span><br><span class="line"></span><br><span class="line">[root@node1 ~]\# chmod +x /usr/bin/myresearch</span><br><span class="line">[root@node1 ~]\# /usr/bin/myresearch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[root@node1 ~]\# ll -h /root/myfiles</span><br><span class="line">-rwx--s--x. 1 root slocate 47K Aug 12 2018 locate</span><br><span class="line">-rwx--s--x. 1 root lock 22K Aug 12 2018 lockdev</span><br><span class="line">-r-xr-sr-x. 1 root ssh_keys 464K Nov 26 2018 ssh-keysign</span><br><span class="line">-rwx--s--x. 1 root utmp 13K Aug 12 2018 utempter</span><br><span class="line">-rwxr-sr-x. 1 root tty 23K Dec 11 2018 write</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè„šæœ¬-2">åˆ›å»ºè„šæœ¬</h3>
<p>åˆ›å»ºä¸€ä¸ªåä¸º newsearch çš„è„šæœ¬1ã€è¯¥è„šæœ¬æ”¾ç½®åœ¨ /usr/bin ä¸‹2ã€è¯¥è„šæœ¬ç”¨æ¥æŸ¥æ‰¾ /usr ä¸‹æ‰€æœ‰å¤§äº 30k ï¼Œä½†æ˜¯å°äº 50k ä¸”å…·æœ‰ SUID æƒé™çš„æ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶æ”¾ç½®äº /root/newfiles ä¸‹</p>
<blockquote>
<p>ğŸ“Œ UID æƒé™åˆ™ä¸º -u=s æˆ– /u=sï¼ŒGID æƒé™åˆ™ä¸º -g=s æˆ– /g=s</p>
<p>ğŸ“Œ -size çš„å‚æ•°æ³¨æ„ M å¤§å†™ï¼Œk å°å†™</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œåˆ¤æ–­è¯­æ³•ä»¥ <span class="keyword">if</span> å¼€å¤´ <span class="keyword">fi</span> ç»“å°¾ï¼Œ-d æ£€æŸ¥æ˜¯å¦ç›®å½•</span></span><br><span class="line">[root@node1 ~]\# vim /usr/bin/newsearch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">if [ ! -d /root/newfiles ];then</span><br><span class="line">mkdir /root/newfiles</span><br><span class="line">fi</span><br><span class="line">find /usr -size +30k -size -50k -perm /u=s -exec cp -a &#123;&#125; /root/newfiles \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">mkdir /root/newfiles</span><br><span class="line">find /usr -size +30k -size -50k -perm /u=s -exec cp -a &#123;&#125; /root/newfiles \;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰€æœ‰äººéƒ½æœ‰æƒé™</span></span><br><span class="line">[root@node1 ~]\# chmod +x /usr/bin/newsearch</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œè„šæœ¬</span></span><br><span class="line">[root@node1 ~]\# /usr/bin/newsearch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥</span></span><br><span class="line">[root@node1 ~]\# ll -h /root/newfiles </span><br><span class="line">-rws--x--x. 1 root root 33K Dec 17 2019 chfn</span><br><span class="line">-rwsr-x---. 1 root cockpit-wsinstance 46K Mar 12 2020 cockpit-session</span><br><span class="line">-rwsr-xr-x. 1 root root 33K Dec 13 2019 passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 33K Dec 17 2019 umount</span><br><span class="line">-rwsr-xr-x. 1 root root 37K Dec 19 2019 unix_chkpwd</span><br><span class="line">-rws--x--x. 1 root root 47K Nov 20 2018</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®é»˜è®¤æƒé™">è®¾ç½®é»˜è®¤æƒé™</h3>
<p>ç”¨æˆ· manalo åœ¨ node1 ä¸Šï¼Œæ‰€æœ‰æ–°åˆ›å»ºçš„æ–‡ä»¶éƒ½åº”å…·æœ‰ -r--r--r-- çš„é»˜è®¤æƒé™ï¼Œæ­¤ç”¨æˆ·çš„æ‰€æœ‰æ–°åˆ›å»ºç›®å½•åº”å…·æœ‰ dr-xr-xr-x çš„é»˜è®¤æƒã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\# su - manalo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">umask</span> ä¹‹é—´æ²¡æœ‰ç­‰å·ï¼Œ~/.bashrc = /home/manalo/.bashrc</span></span><br><span class="line">[manalo@node1 ~]$ vim ~/.bashrc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">User specific aliases and <span class="built_in">functions</span></span></span><br><span class="line">umask 222</span><br><span class="line">[manalo@node1 ~]$ souce ~/.bashrc # é…ç½®ç”Ÿæ•ˆ</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥</span></span><br><span class="line">[manalo@node1 ~]$ touch a.txt</span><br><span class="line">[manalo@node1 ~]$ mkdir dir1</span><br><span class="line">[manalo@node1 ~]$ ll</span><br><span class="line">total 0    -r--r--r--. 1 a a 0 Oct 26 18:04 a.txt    dr-xr-xr-x. 2 a a 6 </span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ï¼ˆB-å·ï¼‰">é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ï¼ˆB å·ï¼‰</h3>
<p>åˆ©ç”¨æ³¨å†ŒæœåŠ¡å™¨ä¸Šçš„ rsyslog é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º logger çš„å®¹å™¨</p>
<ol>
<li>é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡</li>
<li>è¯¥æœåŠ¡å‘½åä¸º <code>container-logger</code> ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„</li>
<li>å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°† /home/wallah/var_log` æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /var/log ä¸‹</li>
<li>åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ podman exec logger logger -p <a target="_blank" rel="noopener" href="http://authpriv.info">authpriv.info</a> SUIBIAN</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\# ssh wallah@node1</span><br><span class="line">[wallah@node1 ~]$ podman login -u admin -p redhat321</span><br><span class="line">login Succeeded!</span><br><span class="line">[wallah@node1 ~]$ podman search registry.domain250.example.com/</span><br><span class="line">INDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATED</span><br><span class="line">example.com registry.domain250.example.com/rhel8/rsyslog 0</span><br><span class="line">[wallah@node1 ~]$ podman run -d --name logger -v /home/wallah/var_log:/var/log:Z registry.domain250.example.com/rhel8/rsyslog</span><br><span class="line">[wallah@node1 ~]$ podman stop logger</span><br><span class="line">[wallah@node1 ~]$ loginctl enable-linger</span><br><span class="line">[wallah@node1 ~]$ loginctl show-user wallah</span><br><span class="line">[wallah@node1 ~]$ mkdir -p ~/.config/systemd/user/</span><br><span class="line">[wallah@node1 ~]$ cd ~/.config/systemd/user/</span><br><span class="line">[wallah@node1 ~]$ podman generate systemd -n logger -f</span><br><span class="line">[wallah@node1 ~]$ systemctl --user enable --now container-logger</span><br><span class="line">[wallah@node1 ~]$ systemctl --user status container-logger</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[wallah@node1 ~]$ podman exec logger logger -p authpriv.info SUIBIAN</span><br><span class="line">[wallah@node1 ~]$ grep SUIBIAN /home/wallah/var_log/secure</span><br><span class="line">2021-08-13T11:45:37.824980+00:00 574761d4236a root: SUIBIAN</span><br><span class="line">[wallah@node1 ~]$ exit</span><br><span class="line">[root@node1 ~]\# reboot</span><br><span class="line">[root@node1 ~]\# ps -aux | grep podman</span><br></pre></td></tr></table></figure>
<h3 id="å®¹å™¨-nginx">å®¹å™¨ nginx</h3>
<p>åˆ©ç”¨æ³¨å†ŒæœåŠ¡å™¨ä¸Šçš„ nginx é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º nginx çš„å®¹å™¨</p>
<ol>
<li>
<p>é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡</p>
<p>è¯¥æœåŠ¡å‘½åä¸º <code>container-nginx</code>ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„</p>
</li>
<li>
<p>åœ¨ /home/wallah/www ä¸‹åˆ›å»ºæ–‡ä»¶ index.html ï¼Œå†…å®¹ä¸º hello nginx</p>
</li>
<li>
<p>å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°† /home/wallah/www æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /usr/share/nginx/html ä¸‹å°†å®¹å™¨ä¸»æœºä¸Šçš„ç«¯å£ 8080 æ˜ å°„åˆ°å®¹å™¨ä¸Šçš„ç«¯å£ 80</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]\# ssh wallah@node1</span><br><span class="line">[wallah@node1 ~]$</span><br><span class="line">[wallah@node1 ~]$ podman login registry.domain250.example.com</span><br><span class="line">Username: admin</span><br><span class="line">Password: redhat321</span><br><span class="line">login Succeeded!</span><br><span class="line">[wallah@node1 ~]$ podman search registry.domain250.example.com/</span><br><span class="line">INDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATED    </span><br><span class="line">example.com registry.domain250.example.com/library/nginx 0</span><br><span class="line"></span><br><span class="line">[wallah@node1 ~]$ mkdir /home/wallah/www    </span><br><span class="line">[wallah@node1 ~]$ echo &quot;hello nginx&quot; &gt; /home/wallah/www/index.html    </span><br><span class="line">[wallah@node1 ~]$ podman run -d --name nginx -v /home/wallah/www:/usr/share/nginx.html:Z -p 8080:80 registry.domain250.example.com/library/nginx</span><br><span class="line"></span><br><span class="line">[wallah@node1 ~]$ loginctl enable-linger    </span><br><span class="line">[wallah@node1 ~]$ loginctl show-user wallah</span><br><span class="line"></span><br><span class="line">[wallah@node1 ~]$ mkdir -p ~/.config/systemd/user/</span><br><span class="line">[wallah@node1 ~]$ cd ~/.config/systemd/user/</span><br><span class="line">[wallah@node1 ~]$ podman generate systemd -n nginx -f</span><br><span class="line">[wallah@node1 ~]$ podman stop nginx</span><br><span class="line">[wallah@node1 ~]$ systemctl --user enable --now container-nginx </span><br><span class="line">[wallah@node1 ~]$ systemctl --user status container-nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æµ‹è¯•</span></span><br><span class="line">[wallah@node1 ~]$ curl localhost:8080</span><br><span class="line">hello nginx</span><br><span class="line">[wallah@node1 ~]$ exit</span><br><span class="line">[wallah@node1 ~]\# reboot</span><br><span class="line">[wallah@node1 ~]\# curl localhost:8080</span><br><span class="line">[wallah@node1 ~]\# ss -antup | grep 8080</span><br><span class="line">[wallah@node1 ~]\# ps -aux | grep</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨-Node2-ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡">åœ¨ Node2 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡</h2>
<h3 id="é‡ç½®-root-å¯†ç ">é‡ç½® root å¯†ç </h3>
<p>å°† node2 ä¸»æœºçš„å¯†ç è®¾ç½®æˆ redhatã€‚ä½ éœ€è¦è·å¾—ç³»ç»Ÿè®¿é—®æƒé™æ‰èƒ½è¿›è¡Œæ­¤æ“ä½œã€‚</p>
<p><strong>ç­”æ¡ˆ</strong>ï¼šé‡æ–°å¯åŠ¨æœºå™¨ï¼Œè¿›å…¥ grub ç•Œé¢åæŒ‰ <code>e</code> è¿›å…¥å¯åŠ¨é…ç½®æ–‡ä»¶ç¼–è¾‘ç•Œé¢ï¼Œåœ¨ linux å‘½ä»¤è¡Œå‰çš„å¯åŠ¨é€‰é¡¹åé¢å¢åŠ  <code>rd.break</code>ï¼ŒæŒ‰ <strong>CTRL + X</strong> é”®ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘ã€‚ç„¶åè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ä»¥ <b>è¯»+å†™</b> å½¢å¼é‡æ–°æŒ‚è½½ <em>/sysroot</em>ï¼›</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">switch_root:\<span class="comment"># mount -o remount,rw /sysroot</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åˆ‡æ¢ä¸º <code>chroot</code> å­˜æ”¾ä½ç½®ï¼Œå…¶ä¸­ <em>/sysroot</em> è¢«è§†ä¸ºæ–‡ä»¶ç³»ç»Ÿæ ‘çš„æ ¹ï¼›</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">switch_root:\<span class="comment"># chroot /sysroot</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è®¾ç½®æ–° root å¯†ç ï¼›</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh-4.4\<span class="comment"># echo redhat | passwd --stdin root</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>ç¡®ä¿æ‰€æœ‰æœªæ ‡è®°çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ­¤æ—¶çš„ <em>/etc/shadow</em>ï¼‰åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­éƒ½ä¼šé‡æ–°è·å¾—æ ‡è®°ï¼›</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh-4.4\<span class="comment"># touch /.autorelabel</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>é”®å…¥ <code>exit</code> å‘½ä»¤å¹¶æ‰§è¡Œä¸¤æ¬¡ï¼Œåˆ†åˆ«é€€å‡º <code>chroot</code> å’Œ <em>initramfs</em> shellã€‚</li>
</ol>
<p>æ­¤æ—¶ï¼Œç³»ç»Ÿå°†ç»§ç»­è¿›è¡Œå¯åŠ¨ï¼Œæ‰§è¡Œå®Œæ•´çš„ SELinux é‡æ–°æ ‡è®°ï¼Œç„¶åå†æ¬¡é‡æ–°å¯åŠ¨ã€‚</p>
<h3 id="é…ç½®-YUM-æº">é…ç½® YUM æº</h3>
<p>ç»™ç³»ç»Ÿé…ç½®é»˜è®¤å­˜å‚¨åº“ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p>
<p>YUM çš„ ä¸¤ ä¸ª å­˜ å‚¨ åº“ çš„ åœ° å€ åˆ† åˆ« æ˜¯ ï¼š <a href="ftp://host.domain8.example.com/dvd/BaseOS">ftp://host.domain8.example.com/dvd/BaseOS</a> å’Œ <a href="ftp://host.domain8.example.com/dvd/AppStream">ftp://host.domain8.example.com/dvd/AppStream</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§ ServerA é…ç½® yum/dnf ä»“åº“éƒ¨åˆ† æˆ–ï¼š</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># scp root@server1:/etc/yum.repos.d/Default.repo /etc/yum.repos.d/</span></span><br></pre></td></tr></table></figure>
<h3 id="è°ƒæ•´é€»è¾‘å·çš„å¤§å°">è°ƒæ•´é€»è¾‘å·çš„å¤§å°</h3>
<p>å°†åå­—ä¸º vo çš„é€»è¾‘å·çš„å¤§å°è°ƒæ•´åˆ° 200MiBï¼Œç¡®ä¿æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ä¿æŒä¸å˜ã€‚è°ƒæ•´åçš„é€»è¾‘å·çš„å¤§å°èŒƒå›´åœ¨ 180MiB åˆ° 220MiB çš„èŒƒå›´å†…éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]\<span class="comment"># df -h</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># vgs myvol    # æŸ¥çœ‹ vo å­˜å‚¨ç»„çš„ä¿¡æ¯</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># lvextend -L 200M /dev/myvol/vo    # å°†é€»è¾‘å· vo çš„å¤§å°æ­£å¥½è°ƒæ•´ä¸º 200MiB</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># resize2fs /dev/myvol/vo    # æ‰©å±• vo çš„æ–‡ä»¶ç³»ç»Ÿå¤§å°</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºäº¤æ¢åˆ†åŒº">åˆ›å»ºäº¤æ¢åˆ†åŒº</h3>
<p>å‘ node2 æ·»åŠ ä¸€ä¸ªé¢å¤–çš„äº¤æ¢åˆ†åŒº 756MiBã€‚äº¤æ¢åˆ†åŒºåº”åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚ä¸è¦åˆ é™¤æˆ–ä»¥ä»»ä½•æ–¹å¼æ”¹åŠ¨ç³»ç»Ÿä¸Šçš„ä»»ä½•ç°æœ‰äº¤æ¢åˆ†åŒºã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]\<span class="comment"># lsblk    # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥è§„åˆ’äº¤æ¢åˆ†åŒºçš„ä½ç½®</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line"></span><br><span class="line">Welcome to fdisk (util-linux 2.32.1).</span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span></span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (3,4, default 3): </span><br><span class="line">First sector (2095106-8388607, default 2097152): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2097152-8388607, default 8388607): +756M</span><br><span class="line"></span><br><span class="line">Created a new partition 3 of <span class="built_in">type</span> <span class="string">&#x27;Linux&#x27;</span> and of size 756 MiB.</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered.</span><br><span class="line">Syncing disks.</span><br><span class="line"></span><br><span class="line">[root@node2 ~]\<span class="comment"># mkswap /dev/vdb3    # æ ‡è®°äº¤æ¢åˆ†åŒº,æŸ¥çœ‹æ–°åˆ›å»ºçš„äº¤æ¢åˆ†åŒºçš„ UUID</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># vim /etc/fstab    # å†™å…¥ fstab æ–‡ä»¶</span></span><br><span class="line">UUID=<span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</span>    swap    swap    defaults    0    0</span><br><span class="line">[root@node2 ~]\<span class="comment"># swapon -a    # å¯ç”¨äº¤æ¢åˆ†åŒº</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºé€»è¾‘å·">åˆ›å»ºé€»è¾‘å·</h3>
<p>æ ¹æ®å¦‚ä¸‹è¦æ±‚ï¼Œåˆ›å»ºæ–°çš„é€»è¾‘å·ï¼š</p>
<ol>
<li>é€»è¾‘å·çš„åå­—æ˜¯ dbï¼Œå·ç»„æ˜¯ dbgroupï¼Œå¤§å°æ˜¯ 60 ä¸ª PE size</li>
<li>dbgroup çš„ PE size æ˜¯ 16MiB</li>
<li>æ ¼å¼åŒ–æˆ xfs æ–‡ä»¶ç³»ç»Ÿã€‚å¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½åˆ° /mnt/data</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]\<span class="comment"># lsblk    # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥è§„åˆ’é€»è¾‘å·çš„ä½ç½®</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># fdisk /dev/vdb    # åˆ›å»ºä¸»åˆ†åŒº</span></span><br><span class="line"></span><br><span class="line">Welcome to fdisk (util-linux 2.32.1).</span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span></span><br><span class="line">   p   primary (3 primary, 0 extended, 1 free)</span><br><span class="line">   e   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default e): p</span><br><span class="line"></span><br><span class="line">Selected partition 4</span><br><span class="line">First sector (2095106-8388607, default 3645440): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (3645440-8388607, default 8388607): </span><br><span class="line"></span><br><span class="line">Created a new partition 4 of <span class="built_in">type</span> <span class="string">&#x27;Linux&#x27;</span> and of size 2.3 GiB.</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered.</span><br><span class="line">Syncing disks.</span><br><span class="line"></span><br><span class="line">[root@node2 ~]\<span class="comment"># pvcreate /dev/vdb4    # å°† /dev/vdb? åˆ›å»ºä¸ºç‰©ç†å·</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># vgcreate -s 16M dbgroup /dev/vdb4    # åˆ›å»ºå·ç»„ dbgroupï¼ŒPE å¤§å°ä¸º 16MiB,å¹¶å°† /dev/vdb? åŠ å…¥</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># lvcreate -l 60 -n db dbgroup    # ä»å·ç»„ dbgroup åˆ›å»ºé€»è¾‘å·ï¼Œå¤§å°æ˜¯ 60 ä¸ªç‰©ç†åŒºå—ï¼Œåå­—æ˜¯ db</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># mkfs.xfs /dev/dbgroup/db    # ä¸ºé€»è¾‘å·åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># mkdir /mnt/data    # åˆ›å»ºæŒ‚è½½ç‚¹</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># blkid /dev/dbgroup/db    # æŸ¥çœ‹é€»è¾‘å·çš„ UUID</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># vim /etc/fstab    # ç¼–è¾‘ fstabï¼Œæ·»åŠ æŒ‚åœ¨ä¿¡æ¯</span></span><br><span class="line">UUID=<span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</span>    /mnt/data    xfs    defaults     0    0</span><br><span class="line">[root@node2 ~]\<span class="comment"># mount -a    # ç«‹å³æŒ‚è½½</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»º-vdo-å·">åˆ›å»º vdo å·</h3>
<p>æ ¹æ®å¦‚ä¸‹è¦æ±‚ï¼Œåˆ›å»ºæ–°çš„ VDO å·ï¼š</p>
<ol>
<li>ä½¿ç”¨æœªåˆ†åŒºçš„ç£ç›˜</li>
<li>è¯¥å·çš„åç§°ä¸º vdotest</li>
<li>è¯¥å·çš„é€»è¾‘å¤§å°æ˜¯ 50G</li>
<li>è¯¥å·ä½¿ç”¨ xfs æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–</li>
<li>è¯¥å·åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æŒ‚è½½åˆ° /mnt/vdotest</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]\<span class="comment"># lsblk    # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥ä¸‹å‡è®¾ /dev/vdc è¿˜æœªåˆ†åŒº</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># yum install vdo kmod-kvdo    # è‹¥æœªå®‰è£… vdoã€kmod-kvdo åˆ™éœ€è¦å®‰è£…</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># vdo create --name=vdotest --device=/dev/vdc --vdoLogicalSize=50G    # åˆ›å»º vdo å·</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># mkfs.xfs -K /dev/mapper/vdotest    # æ ¼å¼åŒ–è¯¥ vdo å·</span></span><br><span class="line"><span class="comment"># æŒ‚è½½æ–¹æ³•ä¸€</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># udevadm settle    # è‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line"><span class="comment"># æŒ‚è½½æ–¹æ³•äºŒ</span></span><br><span class="line">[root@node2 ~]\<span class="comment"># mkdir /mnt/vdotest; blkid /dev/mapper/vdotest; vim /etc/fstab    # æ‰‹åŠ¨æŒ‚è½½</span></span><br><span class="line">UUID=<span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</span>    /mnt/vdotest    defaults, _netdev    0 0</span><br><span class="line">[root@node2 ~]\<span class="comment"># mount -a</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç³»ç»Ÿè°ƒä¼˜">é…ç½®ç³»ç»Ÿè°ƒä¼˜</h3>
<p>ä¸ºä½ çš„ç³»ç»Ÿé€‰æ‹©å»ºè®®çš„â€™tunedâ€™é…ç½®é›†å¹¶å°†å®ƒè®¾ç½®ä¸ºé»˜è®¤è®¾ç½®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 ~]\<span class="comment"># tuned-adm recommend     # æŸ¥çœ‹æ¨èè®¾ç½®</span></span><br><span class="line">virtual-guest</span><br><span class="line">[root@node2 ~]\<span class="comment"># tuned-adm profile virtual-guest    # è®¾ç½®æ¨èè®¾ç½®ä¸ºé»˜è®¤</span></span><br></pre></td></tr></table></figure>

        </div>
        
<blockquote class="copyright">
    <p><strong>æœ¬æ–‡é“¾æ¥ : </strong><a class="permalink" href="https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.html">https://skinyi.github.io/2022-08-29-Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰.html</a></p>
    <p><strong>è¿™ç¯‡æ–‡ç« ç”±ä½œè€…èƒ¡ç¼–ä¹±é€ æˆ–è€…ç”±å…¶ä»–æ–‡ç« å¤åˆ¶ç²˜è´´è€Œæ¥ï¼Œå…¶ä¸­æœ‰äº›å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ï¼Œè¯·è°¨æ…å‚è€ƒå¤åˆ¶æ–‡ç« ä¸­çš„å†…å®¹ã€‚</strong></p>
</blockquote>


    </article>
    
    <section id="comments">
        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">æ–‡ç« ç›®å½•</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%8A%A0%E9%A2%98%EF%BC%9A%E6%9C%89%E5%8F%AF%E8%83%BD%E5%87%BA%EF%BC%88ServerA-%E6%88%96-Node1%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA æˆ– Node1ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-sudo-%E5%85%8D%E5%AF%86%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.</span> <span class="toc-text">æ·»åŠ  sudo å…å¯†æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5"><span class="toc-number">1.2.</span> <span class="toc-text">é…ç½®åˆ›å»ºæ–°ç”¨æˆ·çš„å¯†ç ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%84%9A%E6%9C%AC"><span class="toc-number">1.3.</span> <span class="toc-text">åˆ›å»ºè„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%84%9A%E6%9C%AC-2"><span class="toc-number">1.4.</span> <span class="toc-text">åˆ›å»ºè„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90"><span class="toc-number">1.5.</span> <span class="toc-text">è®¾ç½®é»˜è®¤æƒé™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%B9%E5%99%A8%E4%BD%BF%E5%85%B6%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%EF%BC%88B-%E5%8D%B7%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ï¼ˆB å·ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8-nginx"><span class="toc-number">1.7.</span> <span class="toc-text">å®¹å™¨ nginx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-Node2-%E4%B8%8A%E5%AE%8C%E6%88%90%E4%BB%A5%E4%B8%8B%E4%BB%BB%E5%8A%A1"><span class="toc-number">2.</span> <span class="toc-text">åœ¨ Node2 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E7%BD%AE-root-%E5%AF%86%E7%A0%81"><span class="toc-number">2.1.</span> <span class="toc-text">é‡ç½® root å¯†ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-YUM-%E6%BA%90"><span class="toc-number">2.2.</span> <span class="toc-text">é…ç½® YUM æº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E9%80%BB%E8%BE%91%E5%8D%B7%E7%9A%84%E5%A4%A7%E5%B0%8F"><span class="toc-number">2.3.</span> <span class="toc-text">è°ƒæ•´é€»è¾‘å·çš„å¤§å°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA"><span class="toc-number">2.4.</span> <span class="toc-text">åˆ›å»ºäº¤æ¢åˆ†åŒº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%80%BB%E8%BE%91%E5%8D%B7"><span class="toc-number">2.5.</span> <span class="toc-text">åˆ›å»ºé€»è¾‘å·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-vdo-%E5%8D%B7"><span class="toc-number">2.6.</span> <span class="toc-text">åˆ›å»º vdo å·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E8%B0%83%E4%BC%98"><span class="toc-number">2.7.</span> <span class="toc-text">é…ç½®ç³»ç»Ÿè°ƒä¼˜</span></a></li></ol></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 bg-gray-100 z-40">
    
    
        <p class="footer-custom">â¤ Powered by <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a> with <a href="https://github.com/fengkx/hexo-theme-purer" target="_blank" rel="noopener noreferrer">Purer theme</a>.</p>
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/js/dom-event.min.js"></script>



<script src="/js/local-search.min.js"></script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/js/light-gallery.min.js"></script>






    </body>
</html>
