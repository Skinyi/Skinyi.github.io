<!DOCTYPE html>
<html  lang="zh-CN,en,default" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>Linux é…ç½®ç½‘ç»œè®¾ç½® | Avery Ma çš„ä¸ªäººç½‘ç«™</title>
    <meta name="description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  NMCLI å‘½ä»¤æ‘˜è¦    å‘½ä»¤ ç”¨é€”     nmcli dev status æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£çš„ NetworkManager çŠ¶æ€ã€‚   nmcli con show åˆ—å‡ºæ‰€æœ‰è¿æ¥ã€‚   nmcli con show con-name åˆ—å‡º con-name è¿æ¥çš„å½“å‰è®¾ç½®ã€‚   nmcli con add con-n">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux é…ç½®ç½‘ç»œè®¾ç½®">
<meta property="og:url" content="https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.html">
<meta property="og:site_name" content="Avery Ma çš„ä¸ªäººç½‘ç«™">
<meta property="og:description" content="ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚  NMCLI å‘½ä»¤æ‘˜è¦    å‘½ä»¤ ç”¨é€”     nmcli dev status æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£çš„ NetworkManager çŠ¶æ€ã€‚   nmcli con show åˆ—å‡ºæ‰€æœ‰è¿æ¥ã€‚   nmcli con show con-name åˆ—å‡º con-name è¿æ¥çš„å½“å‰è®¾ç½®ã€‚   nmcli con add con-n">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-15T03:49:54.974Z">
<meta property="article:modified_time" content="2022-08-15T03:52:53.487Z">
<meta property="article:author" content="skinyi">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="RHEL">
<meta property="article:tag" content="RHCE">
<meta property="article:tag" content="è®¤è¯è€ƒè¯•">
<meta name="twitter:card" content="summary">

    
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    
<link rel="stylesheet" href="/css/common.min.css">



    
    
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/css/iconfont.min.css">

    
<meta name="generator" content="Hexo 6.3.0"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://github.com/skinyi" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer" >
                <img src="/images/avatar.jpg" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block">Avery Ma</h2>
            <h3 id="title" class="hidden xl:block">IT ä»ä¸šè€…</h3>
            
            <small id="location" class="hidden lg:block">
                <i class="iconfont icon-map-icon"></i>
                å®å¤, ä¸­å›½
            </small>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" placeholder="æœç´¢" class="inline-block w-full bg-gray-100 lg:bg-white">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<div id="content-json" data-placeholder="æœç´¢" class="invisible hidden">/content.json</div>
<script id="search-teamplate" type="text/html" data-path="/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="æœç´¢" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">é¦–é¡µ</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">å½’æ¡£</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-categories" role="menuitem">
                <a href="/categories">
                    <i class="iconfont icon-folder" aria-hidden="true"></i>
                    <span class="menu-title">åˆ†ç±»</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-tags" role="menuitem">
                <a href="/tags">
                    <i class="iconfont icon-tag" aria-hidden="true"></i>
                    <span class="menu-title">æ ‡ç­¾</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">é¡¹ç›®</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-about" role="menuitem">
                <a href="/about">
                    <i class="iconfont icon-cup" aria-hidden="true"></i>
                    <span class="menu-title">å…³äº</span>
                </a>
            </div>
        
        

    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            Linux é…ç½®ç½‘ç»œè®¾ç½®
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                <span class="article-date">
    <i class="iconfont icon-calendar-check"></i>
	<a href="/2022-08-15-Linux%20%7C%20Linux%20%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.html" class="article-date">
	  <time datetime="2022-08-15T03:49:54.974Z" itemprop="datePublished">8æœˆ 15</time>
	</a>
</span>

                
    <span class="article-category">
    <i class="iconfont icon-folder"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a> , <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/Linux/">Linux</a> , <a class="article-category-link" href="/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/">æ—¥å¸¸è®°å½•</a> , <a class="article-category-link" href="/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/">è¿ç§»æ–‡ç« </a>
  </span>


                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-none-link" href="/tags/Linux/" rel="tag">Linux</a>, <a class="article-tag-none-link" href="/tags/RHCE/" rel="tag">RHCE</a>, <a class="article-tag-none-link" href="/tags/RHEL/" rel="tag">RHEL</a>, <a class="article-tag-none-link" href="/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/" rel="tag">è®¤è¯è€ƒè¯•</a>
  </span>


                
                
    
        <span class="post-wordcount" itemprop="wordCount">å­—æ•°ç»Ÿè®¡: 3.3k(å­—)</span>
    
    
        <span class="post-readcount" itemprop="timeRequired">é˜…è¯»æ—¶é•¿: 14(åˆ†)</span>
    


            </p>
        </header>
        <div class="marked-body article-body">
            <blockquote>
<p>ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚</p>
</blockquote>
<h2 id="NMCLI-å‘½ä»¤æ‘˜è¦">NMCLI å‘½ä»¤æ‘˜è¦</h2>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>nmcli dev status</td>
<td>æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£çš„ NetworkManager çŠ¶æ€ã€‚</td>
</tr>
<tr>
<td>nmcli con show</td>
<td>åˆ—å‡ºæ‰€æœ‰è¿æ¥ã€‚</td>
</tr>
<tr>
<td>nmcli con show con-name</td>
<td>åˆ—å‡º con-name è¿æ¥çš„å½“å‰è®¾ç½®ã€‚</td>
</tr>
<tr>
<td>nmcli con add con-name name</td>
<td>æ·»åŠ ä¸€ä¸ªåä¸º name çš„æ–°è¿æ¥ã€‚</td>
</tr>
<tr>
<td>nmcli con mod con-name</td>
<td>ä¿®æ”¹ con-name è¿æ¥ã€‚</td>
</tr>
<tr>
<td>nmcli con reload</td>
<td>é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå†æ‰‹åŠ¨é…ç½®ç¼–è¾‘æ–‡ä»¶ä¹‹åä½¿ç”¨ï¼‰ã€‚</td>
</tr>
<tr>
<td>nmcli con up con-name</td>
<td>æ¿€æ´» con-name è¿æ¥ã€‚</td>
</tr>
<tr>
<td>nmcli dev dis device</td>
<td>åœ¨ç½‘ç»œæ¥å£ä¸Šåœç”¨å¹¶æ–­å¼€å½“å‰è¿æ¥ã€‚</td>
</tr>
<tr>
<td>nmcli con del con-name</td>
<td>åˆ é™¤ con-name è¿æ¥åŠå…¶é…ç½®æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>nmcli gen permissions</td>
<td>æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ç½‘ç»œä¿®æ”¹æƒé™ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="ä»å‘½ä»¤è¡Œé…ç½®ç½‘ç»œ">ä»å‘½ä»¤è¡Œé…ç½®ç½‘ç»œ</h2>
<h3 id="äº†è§£-NETWORKMANAGER-å®ˆæŠ¤è¿›ç¨‹">äº†è§£ NETWORKMANAGER å®ˆæŠ¤è¿›ç¨‹</h3>
<p>â€‹NetworkManager æ˜¯ç›‘æ§å’Œç®¡ç†ç½‘ç»œè®¾ç½®çš„å®ˆæŠ¤è¿›ç¨‹ã€‚é™¤äº†è¯¥å®ˆæŠ¤è¿›ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæä¾›ç½‘ç»œçŠ¶æ€ä¿¡æ¯çš„ GNOME é€šçŸ¥åŒºåŸŸå°ç¨‹åºã€‚å‘½ä»¤è¡Œå’Œå›¾å½¢å·¥å…·ä¸ NetworkManager é€šä¿¡ï¼Œå¹¶å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ <em>/etc/sysconfig/network-scripts</em> ç›®å½•ä¸­ã€‚NetworkManger çš„åŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li>è®¾å¤‡æ˜¯ç½‘ç»œæ¥å£ï¼›</li>
<li>è¿æ¥æ˜¯å¯ä»¥ä¸ºè®¾å¤‡é…ç½®çš„è®¾ç½®çš„é›†åˆï¼›</li>
<li>å¯¹äºä»»ä½•ä¸€ä¸ªè®¾å¤‡ï¼Œåœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚å¯èƒ½å­˜åœ¨å¤šä¸ªè¿æ¥ï¼Œä»¥ä¾›ä¸åŒè®¾å¤‡ä½¿ç”¨æˆ–è€…ä»¥ä¾¿ä¸ºåŒä¸€è®¾å¤‡æ›´æ”¹é…ç½®ã€‚å¦‚æœéœ€è¦ä¸´æ—¶æ›´æ”¹ç½‘ç»œè®¾ç½®ï¼Œè€Œä¸æ˜¯æ›´æ”¹è¿æ¥çš„é…ç½®ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹è®¾å¤‡çš„å“ªä¸ªè¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ï¼›</li>
<li>æ¯ä¸ªè¿æ¥å…·æœ‰ä¸€ä¸ªç”¨äºæ ‡è¯†è‡ªèº«çš„åç§°æˆ– IDï¼›</li>
<li><em>nmcli</em> ä½¿ç”¨ç¨‹åºå¯ç”¨äºä»å‘½ä»¤è¡Œåˆ›å»ºå’Œç¼–è¾‘è¿æ¥æ–‡ä»¶ã€‚</li>
</ul>
<h3 id="æŸ¥çœ‹è”ç½‘ä¿¡æ¯">æŸ¥çœ‹è”ç½‘ä¿¡æ¯</h3>
<p>â€‹ä½¿ç”¨<code>nmcli dev[ice] status</code> å‘½ä»¤å¯æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè®¾å¤‡çš„çŠ¶æ€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli dev status</span></span><br><span class="line">DEVICE      TYPE      STATE                   CONNECTION </span><br><span class="line">ens160      ethernet  connected               ens160     </span><br><span class="line">virbr0      bridge    connected (externally)  virbr0     </span><br><span class="line">lo          loopback  unmanaged               --         </span><br><span class="line">virbr0-nic  tun       unmanaged               -- </span><br></pre></td></tr></table></figure>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] show</code> å‘½ä»¤å¯æ˜¾ç¤ºæ‰€æœ‰è¿æ¥çš„åˆ—è¡¨ã€‚è¦ä»…åˆ—å‡ºæ´»åŠ¨çš„è¿æ¥ï¼Œå¯ä½¿ç”¨ <em>--active</em> é€‰é¡¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con show --active</span></span><br><span class="line">NAME    UUID                                  TYPE      DEVICE </span><br><span class="line">ens160  8fc2fbfe-e119-43be-87dd-c45071c07bf7  ethernet  ens160 </span><br><span class="line">virbr0  139c458e-0cff-4615-974c-aa119ddf87c2  bridge    virbr0 </span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ ç½‘ç»œè¿æ¥">æ·»åŠ ç½‘ç»œè¿æ¥</h3>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] add</code> å‘½ä»¤æ·»åŠ æ–°çš„ç½‘ç»œè¿æ¥ã€‚</p>
<p>â€‹ä»¥ä¸‹å‘½ä»¤å°†ä¸ºæ¥å£ <em>eno2</em> æ·»åŠ ä¸€ä¸ªæ–°é“¾æ¥ <em>eno2</em>ï¼Œæ­¤è¿æ¥å°†ä½¿ç”¨ DHCP è·å– IPv4 è”ç½‘ä¿¡æ¯å¹¶åœ¨ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨è¿æ¥ã€‚æ­¤å‘½ä»¤è¿˜å°†é€šè¿‡ä¾¦å¬æœ¬åœ°é“¾è·¯ä¸Šçš„è·¯ç”±å™¨æ’­å‘æ¥è·å– IPv6 è”ç½‘è®¾ç½®ã€‚é…ç½®æ–‡ä»¶çš„åç§°åŸºäºçš„ <em>con-name</em> é€‰é¡¹çš„å€¼ <em>eno2</em>ï¼Œå¹¶ä¿å­˜åˆ° <em>/etc/sysconfig/network-scripts/ifcfg-eno2</em> æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nmcli connection add COMMON_OPTIONS TYPE_SPECIFIC_OPTIONS SLAVE_OPTIONS IP_OPTIONS [-- ([+|-]&lt;setting&gt;.&lt;property&gt; &lt;value&gt;)+]</span></span><br><span class="line">[root@localhost ~]\<span class="comment"># nmcli con add con-name eno2 type ethernet ifname eno2</span></span><br></pre></td></tr></table></figure>
<p>â€‹ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é™æ€ IPv4 åœ°å€ä¸º <em>eno2</em> è®¾å¤‡æ¥åˆ›å»º <em>eno2</em> è¿æ¥ï¼Œä¸”ä½¿ç”¨ IPv4 åœ°å€å’Œç½‘ç»œå‰ç¼€ 192.168.0.5/24 åŠé»˜è®¤ç½‘å…³ <em>192.168.0.254</em>ï¼Œä½†æ˜¯ä»åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥å¹¶å°†å…¶é…ç½®ä¿å­˜åˆ°ç›¸åŒæ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con add con-name eno2 type ethernet ifname eno2 \</span></span><br><span class="line">ipv4.address 192.168.0.5/24 ipv4.gateway 192.168.0.254</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é™æ€ IPv6 å’Œ IPv4 åœ°å€ä¸º <em>eno2</em> è®¾å¤‡åˆ›å»º <em>eno2</em> è¿æ¥ï¼Œä¸”ä½¿ç”¨ IPv6 åœ°å€å’Œç½‘ç»œå‰ç¼€ <em>2001:db8:0:1::c000:207/64</em> åŠé»˜è®¤ IPv6 ç½‘å…³ <em>2001:db8:0:1::1</em>ï¼Œä»¥åŠ IPv4 åœ°å€å’Œç½‘ç»œå‰ç¼€ <em>192.0.2.7/24</em> åŠé»˜è®¤ IPv4 ç½‘å…³ <em>192.0.2.1</em>ï¼Œä½†æ˜¯ä»åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥ï¼Œå¹¶å°†å…¶é…ç½®ä¿å­˜åˆ° <em>/etc/sysconfig/network-scripts/ifcfg-eno2</em>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con add con-name eno2 type ethernet ifname eno2 \</span></span><br><span class="line">ipv6.address 2001:db8:0:1::c000:207/64 ipv6.gateway 2001:db8:0:1::1 \</span><br><span class="line">ipv4.address 192.0.2.7/24 ipv4.gateway 192.0.2.1</span><br></pre></td></tr></table></figure>
<h3 id="æ§åˆ¶ç½‘ç»œè¿æ¥">æ§åˆ¶ç½‘ç»œè¿æ¥</h3>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] up con-name</code> å‘½ä»¤å°†å…¶ç»‘å®šåˆ°çš„ç½‘ç»œæ¥å£ä¸Šçš„<em>è¿æ¥ con-name</em> æ¿€æ´»ã€‚ä½¿ç”¨ <code>nmcli con show</code> å‘½ä»¤æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨è¿æ¥çš„åç§°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con show</span></span><br><span class="line">NAME    UUID                                  TYPE      DEVICE </span><br><span class="line">ens160  8fc2fbfe-e119-43be-87dd-c45071c07bf7  ethernet  ens160 </span><br><span class="line">virbr0  139c458e-0cff-4615-974c-aa119ddf87c2  bridge    virbr0 </span><br><span class="line">[root@localhost ~]\<span class="comment"># nmcli con up ens160</span></span><br><span class="line">Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)</span><br></pre></td></tr></table></figure>
<p>â€‹ä½¿ç”¨ <code>nmcli dev dis[connect] device</code> å‘½ä»¤å°†æ–­å¼€ä¸ç½‘ç»œæ¥å£ device çš„è¿æ¥å¹¶å°†å…¶å…³é—­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli dev dis virbr0</span></span><br><span class="line">Device <span class="string">&#x27;virbr0&#x27;</span> successfully disconnected.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ <code>nmcli con[nection] down con-name</code> è™½ç„¶å¯ä»¥åœç”¨ç½‘ç»œæ¥å£ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æœ‰çº¿è¿æ¥åœ¨é»˜è®¤æƒ…å†µä¸‹é…ç½®äº† <em>autoconnect</em>ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åœç”¨ç½‘ç»œæ¥å£å <em>NetworkManager</em> ä¼šç«‹å³å°†å…¶é‡æ–°å¼€å¯ã€‚ä½¿ç”¨ <code>nmcli dev dis[connect] device</code> å‘½ä»¤å°†è¿æ¥ä¸æ¥å£å®Œå…¨æ–­å¼€ä¼šé¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<h3 id="ä¿®æ”¹ç½‘ç»œè¿æ¥è®¾ç½®">ä¿®æ”¹ç½‘ç»œè¿æ¥è®¾ç½®</h3>
<p>â€‹ <em>NetworkManager</em> è¿æ¥å…·æœ‰ä¸¤ç§ç±»å‹çš„è®¾ç½®ã€‚æœ‰é™æ€è¿æ¥å±æ€§ï¼Œå®ƒä»¬æ˜¯ç”±ç®¡ç†å‘˜é…ç½®å¹¶å­˜å‚¨åœ¨ */etc/sysconfig/network-scripts/ifcfg-**ä¸­çš„é…ç½®æ–‡ä»¶ä¸­ã€‚è¿˜å¯èƒ½æœ‰æ´»åŠ¨è¿æ¥æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯è¿æ¥ä» DHCP æœåŠ¡å™¨è·å–çš„ï¼Œä¸ä¼šæŒä¹…å­˜å‚¨ã€‚</p>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] show con-name</code> å‘½ä»¤æ¥æŸ¥çœ‹æŸä¸ªè¿æ¥çš„å½“å‰è®¾ç½®ï¼Œå…¶ä¸­ <em>con-name</em> æ˜¯è¿æ¥çš„åç§°ã€‚å°å†™çš„è®¾ç½®æ˜¯é™æ€å±æ€§ï¼Œç®¡ç†å‘˜å¯ä»¥æ›´æ”¹å…¨å¤§å†™çš„è®¾ç½®æ˜¯æ´»åŠ¨è®¾ç½®ï¼Œä¸´æ—¶ç”¨äºæ­¤è¿æ¥å®ä¾‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con show ens160</span></span><br><span class="line">connection.id:                          ens160</span><br><span class="line">connection.uuid:                        8fc2fbfe-e119-43be-87dd-c45071c07bf7</span><br><span class="line">connection.stable-id:                   --</span><br><span class="line">connection.type:                        802-3-ethernet</span><br><span class="line">connection.interface-name:              ens160</span><br><span class="line">connection.autoconnect:                 <span class="built_in">yes</span></span><br><span class="line">connection.autoconnect-priority:        0</span><br><span class="line">connection.autoconnect-retries:         -1 (default)</span><br><span class="line">connection.multi-connect:               0 (default)</span><br><span class="line">connection.auth-retries:                -1</span><br><span class="line">connection.timestamp:                   1630289327</span><br><span class="line">connection.read-only:                   no</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] mod con-name</code> å‘½ä»¤æ›´æ”¹è¿æ¥çš„è®¾ç½®ã€‚è¿™äº›æ›´æ”¹å°†ä¿å­˜åœ¨è¿æ¥çš„ <em>/etc/sysconfig/netwrok-scripts/ifcfg-*</em> æ–‡ä»¶ä¸­ã€‚</p>
<p>â€‹ä»¥ä¸‹å‘½ä»¤é’ˆå¯¹ <em>static-ens3</em> è¿æ¥å°† IPv4 åœ°å€è®¾ç½®ä¸º <em>192.0.2.154</em> å¹¶å°†é»˜è®¤ç½‘å…³è®¾ç½®ä¸º <em>192.0.2.254</em>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con mod static-ens3 ipv4.address 192.0.2.154 \</span></span><br><span class="line">ipv4.gateway 192.0.2.254</span><br></pre></td></tr></table></figure>
<p>â€‹ä»¥ä¸‹å‘½ä»¤é’ˆå¯¹ <em>static-ens3</em> è¿æ¥å°† IPv6 åœ°å€è®¾ç½®ä¸º <em>2001:db8:0:1::a00:1/64</em> å¹¶å°†é»˜è®¤ç½‘å…³è®¾ç½®ä¸º <em>2001:db8:0:1::1</em>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con mod static-ens3 ipv6.address 2001:db8:0:1::a00:1/64 \</span></span><br><span class="line">ipv6.gateway 2001:db8:0:1::1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¹‹å‰é‡‡ç”¨ DHCPv4 æœåŠ¡è·å– IPv4 ä¿¡æ¯çš„è¿æ¥æ”¹ä¸ºé€šè¿‡é™æ€æ–‡ä»¶æ¥è·å–çš„è¯éœ€è¦å°† <em>ipv4.method</em> å­—æ®µä» <em>auto</em> æ›´æ”¹ä¸º <em>manual</em>ã€‚</p>
<p>ä¹‹å‰é‡‡ç”¨ SLAAC æˆ– DHCPv6 æœåŠ¡è·å– IPv6 ä¿¡æ¯çš„è¿æ¥æ”¹ä¸ºé€šè¿‡é™æ€æ–‡ä»¶æ¥è·å–çš„è¯éœ€è¦å°† <em>ipv6.method</em> å­—æ®µä» <em>auto</em> æˆ– <em>dhcp</em> æ›´æ”¹ä¸º <em>manual</em>ã€‚</p>
</blockquote>
<h3 id="åˆ é™¤ç½‘ç»œè¿æ¥">åˆ é™¤ç½‘ç»œè¿æ¥</h3>
<p>â€‹ä½¿ç”¨ <code>nmcli con[nect] del con-name</code> åˆ é™¤åä¸º <em>con-name</em> çš„è¿æ¥ï¼ŒåŒæ—¶æ–­å¼€å®ƒä¸è®¾å¤‡çš„è¿æ¥å¹¶åˆ é™¤æ–‡ä»¶ <em>/etc/sysconfig/network-scripts/ifcfg-con-name</em>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con del static-ens3</span></span><br></pre></td></tr></table></figure>
<h3 id="ç½‘ç»œè®¾ç½®ä¿®æ”¹æƒé™è¯´æ˜">ç½‘ç»œè®¾ç½®ä¿®æ”¹æƒé™è¯´æ˜</h3>
<p>â€‹root ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <em>nmcli</em> å¯¹ç½‘ç»œé…ç½®è¿›è¡Œä»»ä½•å¿…è¦çš„æ›´æ”¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ™®é€šç”¨æˆ·ï¼š</p>
<ul>
<li>
<p>åœ¨æœ¬åœ°æ§åˆ¶å°ä¸Šç™»é™†çš„æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥å¯¹ç³»ç»Ÿè¿›è¡Œå¤šé¡¹ç½‘ç»œé…ç½®æ›´æ”¹ï¼ˆå¿…éœ€æœ¬åœ°ç™»å½•ï¼‰ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨ <em>ssh</em> ç™»é™†æ— æƒæ›´æ”¹ç½‘ç»œæƒé™ï¼ˆé™¤éç™»é™† rootï¼‰ã€‚</p>
</li>
</ul>
<p>ä½¿ç”¨ <code>nmcli gen[eral] permissions</code> å‘½ä»¤æ¥æŸ¥çœ‹è‡ªå·±çš„å½“å‰æƒé™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[student@localhost ~]\$ nmcli gen permissions <span class="comment"># æ™®é€šç”¨æˆ· ssh ç™»é™†</span></span><br><span class="line">PERMISSION                                                        VALUE </span><br><span class="line">org.freedesktop.NetworkManager.checkpoint-rollback                auth  </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-connectivity-check  no    </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-network             no    </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-statistics          no    </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-wifi                no    </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-wimax               no    </span><br><span class="line">org.freedesktop.NetworkManager.enable-disable-wwan                no    </span><br><span class="line">org.freedesktop.NetworkManager.network-control                    auth  </span><br><span class="line">org.freedesktop.NetworkManager.reload                             auth  </span><br><span class="line">org.freedesktop.NetworkManager.settings.modify.global-dns         auth  </span><br><span class="line">org.freedesktop.NetworkManager.settings.modify.hostname           auth  </span><br><span class="line">org.freedesktop.NetworkManager.settings.modify.own                auth  </span><br><span class="line">org.freedesktop.NetworkManager.settings.modify.system             auth  </span><br><span class="line">org.freedesktop.NetworkManager.sleep-wake                         no    </span><br><span class="line">org.freedesktop.NetworkManager.wifi.scan                          auth  </span><br><span class="line">org.freedesktop.NetworkManager.wifi.share.open                    no    </span><br><span class="line">org.freedesktop.NetworkManager.wifi.share.protected               no    </span><br></pre></td></tr></table></figure>
<h2 id="ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶">ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶</h2>
<p>â€‹é™¤äº†é€šè¿‡ <code>nmcli con mod con-name</code> å‘½ä»¤æ›´æ”¹ç½‘ç»œé…ç½® <em>/etc/sysconfig/network-scripts/ifcfg-con-name</em>æ¥å®ç°å¯¹ç½‘ç»œé…ç½®çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¥æ‰‹åŠ¨ç¼–è¾‘æ­¤æ–‡ä»¶ã€‚æ‰‹åŠ¨æ›´æ”¹è¯¥æ–‡ä»¶åï¼Œæ‰§è¡Œ <code>nmcli con reload</code> å‘½ä»¤æ¥ä½¿ NetworkManager è¿›ç¨‹é‡æ–°è¯»å–è¯¥é…ç½®æ–‡ä»¶ã€‚</p>
<p>â€‹nmcli è®¾ç½®å’Œ ifcfg æ–‡ä»¶ä¸­çš„åç§°å’Œè¯­æ³•ä¸åŒï¼Œä¸‹è¡¨æ•´ç†äº†éƒ¨åˆ†å¸¸è§é…ç½®çš„åŒºåˆ«ã€‚</p>
<table>
<thead>
<tr>
<th>NMCLI CON MOD</th>
<th>IFCFG-* æ–‡ä»¶</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ipv4.method manual</td>
<td>BOOTPROTO=none</td>
<td>IPv4 é™æ€é…ç½®</td>
</tr>
<tr>
<td>ipv4.method auto</td>
<td>BOOTPROTO=dhcp</td>
<td>IPv4 åŠ¨æ€è·å–åœ°å€ï¼Œè‹¥é…ç½®äº†é™æ€è®¾ç½®ï¼Œåˆ™ DHCPv4 è·å–æˆåŠŸä¹‹å‰ä¸ä¼šæ¿€æ´»è¿™äº›é™æ€è®¾ç½®ã€‚</td>
</tr>
<tr>
<td>ipv4.address &quot;192.168.2.1/24 192.0.2.254&quot;</td>
<td>IPADDR0=192.0.2.1 PREFIX0=24 GATEWAY=192.0.2.254</td>
<td>è®¾ç½®é™æ€ IPv4 åœ°å€ã€ç½‘ç»œå‰ç¼€å’Œé»˜è®¤ç½‘å…³ã€‚å¦‚æœä¸ºè¿æ¥è®¾ç½®äº†å¤šä¸ªï¼Œåˆ™ ifcog-* æŒ‡ä»¤å°†ä»¥ 1ã€2ã€3 ç­‰ç»“å°¾ï¼Œè€Œä¸æ˜¯ä»¥ 0 ç»“å°¾ã€‚</td>
</tr>
<tr>
<td>ipv4.dns 8.8.8.8</td>
<td>DNS0=8.8.8.8</td>
<td>ä¿®æ”¹ /etc/resolve.conf ä»¥ä½¿ç”¨æ­¤åŸŸåæœåŠ¡å™¨ã€‚</td>
</tr>
<tr>
<td>ipv4.dns-search <a target="_blank" rel="noopener" href="http://example.com">example.com</a></td>
<td><a target="_blank" rel="noopener" href="http://DOMAIN=example.com">DOMAIN=example.com</a></td>
<td>ä¿®æ”¹ /etc/resolv.confï¼Œä»¥åœ¨ search æŒ‡ä»¤ä¸­ä½¿ç”¨è¿™ä¸ªåŸŸã€‚</td>
</tr>
<tr>
<td>ipv4.ignore-auto-dns true</td>
<td>PEERDNS=no</td>
<td>å¿½ç•¥æ¥è‡ª DHCP æœåŠ¡å™¨çš„ DNS æœåŠ¡å™¨ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>ipv6.method manual</td>
<td>IPV6_AUTOCONF=no</td>
<td>IPv6 é™æ€é…ç½®ã€‚</td>
</tr>
<tr>
<td>ipv6.method auto</td>
<td>IPV6_AUTOCONF=yes</td>
<td>ä½¿ç”¨è·¯ç”±å™¨æ’­å‘ä¸­çš„ SLAAC æ¥é…ç½®ç½‘ç»œè®¾ç½®ã€‚</td>
</tr>
<tr>
<td>ipv6.method dhcp</td>
<td>IPV6_AUTOCONF=no DHCPV6C=yes</td>
<td>ä½¿ç”¨ DHCPv6 ï¼ˆè€Œä¸ä½¿ç”¨ SLAACï¼‰æ¥é…ç½®ç½‘ç»œè®¾ç½®ã€‚</td>
</tr>
<tr>
<td>ipv6.addresses &quot;2001:db8::a/64 2001:db8::1&quot;</td>
<td>IPV6ADDR=2001:db8::a/64 IPV6_DEFAULTGW=2001:db8::1</td>
<td>è®¾ç½®é™æ€ IPv6 åœ°å€ã€ç½‘ç»œå‰ç¼€é»˜è®¤ç½‘å…³ã€‚å¦‚æœä¸ºè¿æ¥è®¾ç½®äº†å¤šä¸ªåœ°å€ï¼ŒIPV6_SECONDARIES å°†é‡‡ç”¨ç©ºæ ¼åˆ†å‰²çš„åœ°å€/å‰ç¼€å®šä¹‰çš„åŒå¼•å·åˆ—è¡¨ã€‚</td>
</tr>
<tr>
<td>ipv6.dns 2400:3200::1</td>
<td>DNS0=2400:3200::1</td>
<td>ä¿®æ”¹ /etc/resolv.conf ä»¥ä½¿ç”¨æ­¤åŸŸåæœåŠ¡å™¨ã€‚ä¸ IPv4 å®Œå…¨ç›¸åŒã€‚</td>
</tr>
<tr>
<td>ipv6.dns-search <a target="_blank" rel="noopener" href="http://example.com">example.com</a></td>
<td><a target="_blank" rel="noopener" href="http://DOMAIN=example.com">DOMAIN=example.com</a></td>
<td>ä¿®æ”¹ /etc/resolv.confï¼Œä»¥åœ¨ search æŒ‡ä»¤ä¸­ä½¿ç”¨è¿™ä¸ªåŸŸã€‚ä¸ IPv4 å®Œå…¨ç›¸åŒã€‚</td>
</tr>
<tr>
<td>ipv6.ignore-auto-dns true</td>
<td>IPV6_PEERDNS=no</td>
<td>å¿½ç•¥æ¥è‡ª DHCP æœåŠ¡å™¨çš„ DNS æœåŠ¡å™¨æ¶ˆæ¯ã€‚</td>
</tr>
<tr>
<td>connection.autoconnection yes</td>
<td>ONBOOT=yes</td>
<td>åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨æ¿€æ´»æ­¤è¿æ¥ã€‚</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://connection.id">connection.id</a> ens3</td>
<td>NAME=ens3</td>
<td>æ­¤è¿æ¥çš„åç§°ã€‚</td>
</tr>
<tr>
<td>connection.interface-name ens3</td>
<td>DEVICE=ens3</td>
<td>è¿æ¥ä¸å…·æœ‰æ­¤åç§°çš„ç½‘ç»œæ¥å£ç»‘å®šã€‚</td>
</tr>
<tr>
<td>802-3-ethernet.mac-address ...</td>
<td>HWADDR=...</td>
<td>è¿æ¥ä¸å…·æœ‰æ­¤ MAC åœ°å€çš„ç½‘ç»œæ¥å£ç»‘å®šã€‚</td>
</tr>
</tbody>
</table>
<p>â€‹ä»¥ä¸‹æ˜¯æˆ‘çš„è™šæ‹Ÿæœºçš„ç½‘ç»œé…ç½®æ–‡ä»¶å†…å®¹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TYPE</span>=Ethernet</span><br><span class="line"><span class="attr">PROXY_METHOD</span>=none</span><br><span class="line"><span class="attr">BROWSER_ONLY</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">BOOTPROTO</span>=dhcp</span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">IPV6_ADDR_GEN_MODE</span>=stable-privacy</span><br><span class="line"><span class="attr">NAME</span>=ens160</span><br><span class="line"><span class="attr">UUID</span>=<span class="number">8</span>fc2fbfe-e119-<span class="number">43</span>be-<span class="number">87</span>dd-c45071c07bf7</span><br><span class="line"><span class="attr">DEVICE</span>=ens160</span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="literal">yes</span></span><br></pre></td></tr></table></figure>
<p>â€‹ä¿®æ”¹äº†é…ç½®æ–‡ä»¶åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># nmcli con reload</span></span><br><span class="line">[root@localhost ~]\<span class="comment"># nmcli con down &quot;con-name&quot;</span></span><br><span class="line">[root@localhost ~]\<span class="comment"># nmcli con up &quot;con-name&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®ä¸»æœºåå’ŒåŸŸåè§£æ">é…ç½®ä¸»æœºåå’ŒåŸŸåè§£æ</h2>
<h3 id="æ›´æ”¹ç³»ç»Ÿä¸»æœºå">æ›´æ”¹ç³»ç»Ÿä¸»æœºå</h3>
<p>â€‹ä½¿ç”¨ <code>hostname</code> å‘½ä»¤æ˜¾ç¤ºæˆ–ä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿçš„å®Œå…¨é™å®šä¸»æœºåã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># hostname # ä¸è·Ÿé€‰é¡¹æˆ–å‚æ•°ä¸ºæ˜¾ç¤ºä¸»æœºå</span></span><br><span class="line">localhost.localdomain</span><br><span class="line">[root@localhost ~]\<span class="comment"># hostname skinyi.mydomain # åè·Ÿå†…å®¹åˆ™ä¸´æ—¶ä¿®æ”¹ä¸»æœºå</span></span><br><span class="line">[root@localhost ~]\<span class="comment"># hostname </span></span><br><span class="line">skinyi.mydomain</span><br></pre></td></tr></table></figure>
<p>â€‹ä½¿ç”¨ <code>hostnamectl</code> å‘½ä»¤ä¿®æ”¹é…ç½®æ–‡ä»¶ <em>/etc/hostname</em> æ¥å®ç°æ°¸ä¹…æ›´æ”¹ä¸»æœºåï¼Œè¯¥å‘½ä»¤ä¹Ÿå¯ç”¨äºæŸ¥çœ‹ç³»ç»Ÿçš„å®Œå…¨é™å®šä¸»æœºåçš„çŠ¶æ€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># hostnamectl set-hostname vmrhel@skinyi.me</span></span><br><span class="line">[root@localhost ~]\<span class="comment"># hostnamectl status</span></span><br><span class="line">   Static hostname: vmrhelskinyi.me</span><br><span class="line">   Pretty hostname: vmrhel@skinyi.me</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 6651ee1da4824a37975cd5245c8cb076</span><br><span class="line">           Boot ID: 95270889df844cc2911c26503ef2b0df</span><br><span class="line">    Virtualization: vmware</span><br><span class="line">  Operating System: Red Hat Enterprise Linux 8.3 (Ootpa)</span><br><span class="line">       CPE OS Name: cpe:/o:redhat:enterprise_linux:8.3:GA</span><br><span class="line">            Kernel: Linux 4.18.0-240.el8.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line">[root@localhost ~]\<span class="comment"># cat /etc/hostname</span></span><br><span class="line">vmrhelskinyi.me</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®åŸŸåè§£æ">é…ç½®åŸŸåè§£æ</h3>
<p>â€‹æ ¹è§£æå™¨ç”¨äºå°†åŸŸåè½¬æ¢ä¸º IP åœ°å€ï¼Œåä¹‹äº¦å¯ã€‚ä»–å°†æ ¹æ® <em>/etc/nsswitch.conf</em> æ–‡ä»¶çš„é…ç½®æ¥ç¡®å®šæŸ¥æ‰¾ä½ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆæ£€æŸ¥ <em>/etc/hosts</em> æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p>â€‹ä½¿ç”¨ <code>getent hosts hostname</code> å‘½ä»¤å¯ä»¥æ¨¡æ‹Ÿåœ¨ <em>/etc/hosts</em> æ–‡ä»¶ä¸­æŸ¥æ‰¾åŸŸåè®°å½•çš„è¿‡ç¨‹ï¼ˆå…³äº <code>getent</code> å‘½ä»¤çš„è¯¦ç»†ä»‹ç»è§ <em>09. ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„</em> ä¸€ç« ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]\<span class="comment"># getent hosts localhost  # DNS åæŸ¥</span></span><br><span class="line">::1             localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br></pre></td></tr></table></figure>
<p>â€‹è‹¥åœ¨æœ¬åœ° hosts æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°ç›¸å…³è®°å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¹è§£æå™¨ä¼šå°è¯•ä½¿ç”¨ DNS æœåŠ¡æ¥æŸ¥è¯¢ä¸»æœºåã€‚<em>/etc/resolv.conf</em> é…ç½®æ–‡ä»¶æ§åˆ¶å¦‚ä½•è¿›è¡ŒæŸ¥è¯¢ï¼š</p>
<ul>
<li>searchï¼šå¯¹äºè¾ƒçŸ­çš„ä¸»æœºåå°è¯•æœç´¢çš„åŸŸååˆ—è¡¨ã€‚ä¸åº”è¯¥åœ¨åŒä¸€æ–‡ä»¶ä¸­è®¾ç½®æ­¤å‚æ•°å’Œ domainï¼Œå¦‚æœåœ¨åŒä¸€æ–‡ä»¶ä¸­è®¾ç½®å®ƒä»¬ï¼Œæœ€åä¸€é¡¹è®¾ç½®å°†è¦†ç›–å¦å¤–ä¸€é¡¹ï¼›</li>
<li>nameserverï¼šè¦æŸ¥è¯¢çš„åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€ã€‚å¯ä»¥æŒ‡å®šæœ€å¤šä¸‰ä¸ªåŸŸåæœåŠ¡å™¨æŒ‡ä»¤ï¼Œä»¥åœ¨å…¶ä¸­ä¸€ä¸ªåŸŸåæœåŠ¡å™¨åœæœºæ—¶æä¾›å¤‡ç”¨åŸŸåæœåŠ¡å™¨ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@vmrhelskinyi ~]\<span class="comment"># cat /etc/resolv.conf</span></span><br><span class="line"><span class="comment"># Generated by NetworkManager</span></span><br><span class="line">search me</span><br><span class="line">nameserver 192.168.251.86</span><br><span class="line">nameserver 240e:41d:8010:c75::6f</span><br><span class="line">nameserver 240e:41d:8010:c75::b8</span><br></pre></td></tr></table></figure>
<p>â€‹å‘è¿æ¥æ·»åŠ  DNS æœåŠ¡å™¨åœ°å€é…ç½®ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vmrhelskinyi ~]\<span class="comment"># nmcli con mod CON-NAME +ipv4.dns IP # å‘ CON-NAME è¿æ¥å¢åŠ ä¸€æ¡ DNS é…ç½®è®°å½• </span></span><br></pre></td></tr></table></figure>
<p>â€‹NetworkManager ä¼šæ ¹æ®è¿æ¥é…ç½®æ–‡ä»¶æ›´æ–° <em>/etc/resolv.conf</em> æ–‡ä»¶ã€‚</p>
<p>â€‹ä½¿ç”¨ <code>host</code> å‘½ä»¤æµ‹è¯•åŸŸåè§£æï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@vmrhelskinyi ~]\<span class="comment"># host kernel.org	# æµ‹è¯•åŸŸåè§£æ</span></span><br><span class="line">kernel.org has address 198.145.29.83</span><br><span class="line">kernel.org mail is handled by 10 mail.kernel.org.</span><br><span class="line">[root@vmrhelskinyi ~]\<span class="comment"># host 198.145.29.83 # æµ‹è¯•åŸŸååæŸ¥</span></span><br><span class="line">83.29.145.198.in-addr.arpa domain name pointer kernel.org.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DHCP è®¾ç½®ä¼šåœ¨æ¥å£å¯åŠ¨æ—¶è‡ªåŠ¨æ ¹æ®è·å–çš„ä¿¡æ¯é‡å†™ /etc/resolv.conf æ–‡ä»¶ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨ DHCP æ›´æ–° DNS æœåŠ¡å™¨è®¾ç½®ï¼Œå¯ä»¥åœ¨æ¥å£é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼šPEERDNS=noã€‚ä½¿ç”¨ <code>nmcli</code> å‘½ä»¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@vmrhelskinyi ~]\<span class="comment"># nmcli con mod CON_NAME ipv4.ignore-auto-dns yes </span></span><br></pre></td></tr></table></figure>
</blockquote>

        </div>
        
<blockquote class="copyright">
    <p><strong>æœ¬æ–‡é“¾æ¥ : </strong><a class="permalink" href="https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.html">https://skinyi.github.io/2022-08-15-Linux | Linux é…ç½®ç½‘ç»œè®¾ç½®.html</a></p>
    <p><strong>è¿™ç¯‡æ–‡ç« ç”±ä½œè€…èƒ¡ç¼–ä¹±é€ æˆ–è€…ç”±å…¶ä»–æ–‡ç« å¤åˆ¶ç²˜è´´è€Œæ¥ï¼Œå…¶ä¸­æœ‰äº›å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ï¼Œè¯·è°¨æ…å‚è€ƒå¤åˆ¶æ–‡ç« ä¸­çš„å†…å®¹ã€‚</strong></p>
</blockquote>


    </article>
    
    <section id="comments">
        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">æ–‡ç« ç›®å½•</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#NMCLI-%E5%91%BD%E4%BB%A4%E6%91%98%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">NMCLI å‘½ä»¤æ‘˜è¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C"><span class="toc-number">2.</span> <span class="toc-text">ä»å‘½ä»¤è¡Œé…ç½®ç½‘ç»œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3-NETWORKMANAGER-%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">äº†è§£ NETWORKMANAGER å®ˆæŠ¤è¿›ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%81%94%E7%BD%91%E4%BF%A1%E6%81%AF"><span class="toc-number">2.2.</span> <span class="toc-text">æŸ¥çœ‹è”ç½‘ä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.3.</span> <span class="toc-text">æ·»åŠ ç½‘ç»œè¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.4.</span> <span class="toc-text">æ§åˆ¶ç½‘ç»œè¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">ä¿®æ”¹ç½‘ç»œè¿æ¥è®¾ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.6.</span> <span class="toc-text">åˆ é™¤ç½‘ç»œè¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E"><span class="toc-number">2.7.</span> <span class="toc-text">ç½‘ç»œè®¾ç½®ä¿®æ”¹æƒé™è¯´æ˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8C%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">é…ç½®ä¸»æœºåå’ŒåŸŸåè§£æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E7%B3%BB%E7%BB%9F%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="toc-number">4.1.</span> <span class="toc-text">æ›´æ”¹ç³»ç»Ÿä¸»æœºå</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-number">4.2.</span> <span class="toc-text">é…ç½®åŸŸåè§£æ</span></a></li></ol></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 bg-gray-100 z-40">
    
    
        <p class="footer-custom">â¤ Powered by <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a> with <a href="https://github.com/fengkx/hexo-theme-purer" target="_blank" rel="noopener noreferrer">Purer theme</a>.</p>
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/js/dom-event.min.js"></script>



<script src="/js/local-search.min.js"></script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/js/light-gallery.min.js"></script>






    </body>
</html>
