{"meta":{"title":"Avery Ma çš„ä¸ªäººç½‘ç«™","subtitle":"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ","description":"ä¸ªäººç½‘ç«™ã€åšå®¢","author":"skinyi","url":"https://skinyi.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2022-02-22T12:55:00.000Z","updated":"2022-02-24T13:30:42.633Z","comments":true,"path":"about/index.html","permalink":"https://skinyi.github.io/about/index.html","excerpt":"","text":"å…³äºæˆ‘ è”ç³»æˆ‘ é‚®ç®±ï¼šaveryma@foxmail.com"},{"title":"categories","date":"2022-02-23T06:19:06.228Z","updated":"2022-02-23T06:19:06.228Z","comments":false,"path":"categories/index.html","permalink":"https://skinyi.github.io/categories/index.html","excerpt":"","text":""},{"title":"repositories","date":"2022-02-23T06:19:12.138Z","updated":"2022-02-23T06:19:12.138Z","comments":false,"path":"repository/index.html","permalink":"https://skinyi.github.io/repository/index.html","excerpt":"","text":""},{"title":"tags","date":"2022-02-23T06:19:18.235Z","updated":"2022-02-23T06:19:18.235Z","comments":false,"path":"tags/index.html","permalink":"https://skinyi.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰","date":"2022-04-01T06:40:56.259Z","updated":"2022-04-07T03:16:13.392Z","comments":true,"path":"2022-04-01-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-04-01-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%B8%89%EF%BC%89.html","excerpt":"","text":"Shell æ¡ä»¶æµ‹è¯• æ¡ä»¶æµ‹è¯•åªä¼šå¾—åˆ°çœŸä¸å‡ä¸¤ç§ç»“æœï¼Œå¸¸ä¸ if åˆ¤æ–­è¯­å¥ç»“åˆè¿›è¡Œå…·æœ‰ä¸€å®šå¤æ‚é€»è¾‘çš„å·¥ä½œã€‚ä»¥ä¸‹æ˜¯ shell æ¡ä»¶æµ‹è¯•ä¸­ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„è¯­æ³•ï¼š æ¡ä»¶æµ‹è¯•è¿”å› 0 æ—¶è¡¨ç¤ºçœŸï¼Œè¿”å›å…¶ä»–é 0 å€¼æ—¶è¡¨ç¤ºå‡ï¼Œè·Ÿå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸ä¸€è‡´ï¼ è¯­æ³• æè¿° test &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; åˆ©ç”¨ test å‘½ä»¤è¿›è¡Œæ¡ä»¶æµ‹è¯•ï¼Œæ³¨æ„ test å‘½ä»¤å’Œå‚æ•°ä¹‹é—´å­˜åœ¨ç©ºæ ¼ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] æ¨èã€‚ç­‰ä»·äºä¸Šæ¡è¯­æ³•ï¼Œæ³¨æ„å·¦å³ä¸­æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å­˜åœ¨ç©ºæ ¼ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] æ‰©å±•è¯­æ³•ï¼Œè¾ƒæ–°ï¼Œéƒ¨åˆ†è§£é‡Šå™¨å¯èƒ½ä¸æ”¯æŒï¼Œæ³¨æ„å·¦å³åŒä¸­æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å­˜åœ¨ç©ºæ ¼ ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) ä¸€èˆ¬ç”¨äº if è¯­å¥ï¼Œå·¦å³åŒå°æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å¯ä»¥ä¸å­˜åœ¨ç©ºæ ¼ test &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; å’Œ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] è¯­æ³• è¿™ä¸¤ç§è¯­æ³•éœ€è¦è®°å¿†ä¸€äº›æ¶‰åŠæ–‡ä»¶ã€é€»è¾‘åˆ¤æ–­ä½¿ç”¨çš„ç‰¹æ®Šé€‰é¡¹ç¬¦å·ï¼Œå°†å…¶æ•´ç†å¦‚ä¸‹ï¼š æ–‡ä»¶æµ‹è¯•è¯­æ³• æ–‡ä»¶æµ‹è¯•è¯­æ³• æè¿° å½’ç±» æ–‡ä»¶å­˜åœ¨ã€ç±»å‹åˆ¤æ–­ -e pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨æ—¶è¿”å›çœŸ -s filename å½“ filename å­˜åœ¨å¹¶ä¸”æ–‡ä»¶å¤§å°å¤§äº 0 æ—¶è¿”å›çœŸ -f filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å¸¸è§„æ–‡ä»¶æ—¶è¿”å›çœŸ -d pathname å½“ pathname å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•æ—¶è¿”å›çœŸ -b filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å—æ–‡ä»¶æ—¶è¿”å›çœŸ -c filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å­—ç¬¦æ–‡ä»¶æ—¶è¿”å›çœŸ -S filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯ socket æ—¶è¿”å›çœŸ -p filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å‘½åç®¡é“æ—¶è¿”å›çœŸ -h filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯ç¬¦å·é“¾æ¥æ–‡ä»¶æ—¶è¿”å›çœŸ (æˆ– -L filename) -t fd å½“ fd æ˜¯ä¸ç»ˆç«¯è®¾å¤‡ç›¸å…³è”çš„æ–‡ä»¶æè¿°ç¬¦æ—¶è¿”å›çœŸ å½’ç±» æ–‡ä»¶æƒé™ä½åˆ¤æ–­ -r pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯è¯»æ—¶è¿”å›çœŸ -w pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯å†™æ—¶è¿”å›çœŸ -x pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯æ‰§è¡Œæ—¶è¿”å›çœŸ -u pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº† SUID ä½æ—¶è¿”å›çœŸ -g pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº† SGID ä½æ—¶è¿”å›çœŸ -k pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº†&quot;ç²˜æ»&quot;ä½æ—¶è¿”å›çœŸ -O pathname å½“ç”± pathname å­˜åœ¨å¹¶ä¸”è¢«å½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ· id çš„ç”¨æˆ·æ‹¥æœ‰æ—¶è¿”å›çœŸ(å­—æ¯ O å¤§å†™) -G pathname å½“ç”± pathname å­˜åœ¨å¹¶ä¸”å±äºå½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ· id çš„ç”¨æˆ·çš„ç”¨æˆ·ç»„æ—¶è¿”å›çœŸ å½’ç±» ä¸¤ä¸ªæ–‡ä»¶çš„æ¯”è¾ƒ file1 -nt file2 file1 æ¯” file2 æ–°æ—¶è¿”å›çœŸ file1 -ot file2 file1 æ¯” file2 æ—§æ—¶è¿”å›çœŸ file1 -ef file2 file1 å’Œ file2 æ˜¯åŒä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥æ—¶è¿”å›çœŸ é€»è¾‘æµ‹è¯•è¯­æ³• é€»è¾‘æµ‹è¯•è¯­æ³• æè¿° -a é€»è¾‘ä¸ï¼Œæ“ä½œç¬¦ä¸¤è¾¹å‡ä¸ºçœŸï¼Œç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚ -o é€»è¾‘éï¼Œæ“ä½œç¬¦ä¸¤è¾¹ä¸€è¾¹ä¸ºçœŸï¼Œç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚ ! å–éï¼Œæ¡ä»¶ä¸ºå‡ï¼Œç»“æœä¸ºçœŸã€‚ å¸¸è§å­—ç¬¦ä¸²æµ‹è¯•è¯­æ³• å¸¸è§å­—ç¬¦ä¸²æµ‹è¯•è¯­æ³• æè¿° -z string å­—ç¬¦ä¸² string ä¸ºç©ºä¸²(é•¿åº¦ä¸º0)æ—¶è¿”å›çœŸ -n string å­—ç¬¦ä¸² string ä¸ºéç©ºä¸²æ—¶è¿”å›çœŸ str1 = str2 å­—ç¬¦ä¸² str1 å’Œå­—ç¬¦ä¸² str2 ç›¸ç­‰æ—¶è¿”å›çœŸ str1 == str2 åŒ = str1 != str2 å­—ç¬¦ä¸² str1 å’Œå­—ç¬¦ä¸² str2 ä¸ç›¸ç­‰æ—¶è¿”å›çœŸ str1 &lt; str2 æŒ‰å­—å…¸é¡ºåºæ’åºï¼Œå­—ç¬¦ä¸² str1 åœ¨å­—ç¬¦ä¸² str2 ä¹‹å‰ str1 &gt; str2 æŒ‰å­—å…¸é¡ºåºæ’åºï¼Œå­—ç¬¦ä¸² str1 åœ¨å­—ç¬¦ä¸² str2 ä¹‹å å¸¸è§æ•°å€¼æµ‹è¯•è¯­æ³• å¸¸è§æ•°å€¼æµ‹è¯•è¯­æ³• æè¿° int1 -eq int2 å¦‚æœ int1 ç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -ne int2 å¦‚æœ int1 ä¸ç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -lt int2 å¦‚æœ int1 å°äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -le int2 å¦‚æœ int1 å°äºç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -gt int2 å¦‚æœ int1 å¤§äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -ge int2 å¦‚æœ int1 å¤§äºç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ å•ä¸­æ‹¬å·è¯­æ³•å¼•ç”¨å˜é‡é™¤äº†è¦ä½¿ç”¨ $ ç¬¦å·è¿˜éœ€è¦ç”¨å¼•å·å°†å˜é‡æ‹¬èµ·æ¥ã€‚ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³• å¤§éƒ¨åˆ†æƒ…å½¢ä¸‹ï¼ŒåŒä¸­æ‹¬å·è¯­æ³•ä¸ test å’Œå•ä¸­æ‹¬å·è¯­æ³•é€šç”¨ï¼Œä½†æ˜¯ä»å­˜åœ¨ä»¥ä¸‹åŒºåˆ«ï¼š é€»è¾‘æµ‹è¯• [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­ä½¿ç”¨ &amp;&amp;ã€|| è¡¨ç¤ºé€»è¾‘ä¸å’Œé€»è¾‘éï¼Œä½†åœ¨ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] è¯­æ³•ä¸­ä½¿ç”¨ -a å’Œ -o è¿ç®—ç¬¦ã€‚ é€šé…ç¬¦å’Œæ­£åˆ™ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­æ”¯æŒä½¿ç”¨é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ã€‚ å­—ç¬¦ä¸² [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­åŒ¹é…å­—ç¬¦ä¸²æˆ–é€šé…ç¬¦ä¸éœ€è¦å¼•å·æ‹¬èµ·æ¥ã€‚ ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) è¯­æ³• ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) åªæ”¯æŒç®—æœ¯è¿ç®—æ¯”è¾ƒã€‚ æ¡ˆä¾‹ï¼šåˆ¤æ–­ç£ç›˜æ˜¯å¦æŒ‚è½½ä¸”æŒ‚è½½ç‚¹å¯¹å½“å‰ç”¨æˆ·æ˜¯å¦å¯è¯»å¯å†™ check_disk.sh123456789#!/bin/shdev_name=&quot;sdb1&quot;dev_path=&quot;/dev/$dev_name&quot;mnt_path=&quot;/mnt/data&quot;if [ -b &quot;$dev_path&quot; -a -r &quot;$mnt_path&quot; -a -w &quot;$mnt_path&quot; ]; then echo &quot;ç£ç›˜ $dev_path å·²æŒ‚è½½ä¸”å½“å‰ç”¨æˆ·å¯è¯»å†™ï¼&quot;else echo &quot;ç£ç›˜æœªæŒ‚è½½æˆ–å¯¹å½“å‰ç”¨æˆ·ä¸å¯è¯»æˆ–ä¸å¯å†™ï¼&quot;fi Shell åˆ†æ”¯è¯­å¥ç»“æ„ if åˆ¤æ–­è¯­å¥ if è¯­å¥æ”¯æŒå•åˆ†æ”¯å’Œå¤šåˆ†æ”¯é€‰æ‹©ç»“æ„ï¼Œå•/åŒåˆ†æ”¯è¯­å¥çš„ä¸€èˆ¬æ ¼å¼æ˜¯ï¼š 12345if æ¡ä»¶; then æ¡ä»¶ä¸ºçœŸæ‰§è¡Œçš„è¯­å¥else æ¡ä»¶ä¸ºå‡æ‰§è¡Œçš„è¯­å¥ # å•åˆ†æ”¯æ—¶ä¸ç”¨ else çš„éƒ¨åˆ†fi å¯¹äºå¤šåˆ†æ”¯ï¼š 123456789if æ¡ä»¶1; then æ¡ä»¶1æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥elif æ¡ä»¶2; then æ¡ä»¶2æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥elif æ¡ä»¶n; then æ¡ä»¶næˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥else ä»¥ä¸Šæ¡ä»¶éƒ½ä¸æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥fi ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ï¼Œæ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ break å…³é”®å­—è¿›è¡Œè·³å‡ºã€‚ æ¡ˆä¾‹ï¼šç¼–å†™è„šæœ¬ç›‘æµ‹å¯ç”¨å‰©ä½™å†…å­˜å¹¶å‘é‚®ä»¶æŠ¥è­¦ è¦æ±‚ï¼š å½“å†…å­˜å¯ç”¨å¤§å°å°äº 100m æ—¶å‘é‚®ä»¶è¿›è¡ŒæŠ¥è­¦ï¼› å°†è„šæœ¬åŠ å…¥ crontab ä»»åŠ¡ï¼Œå®šæ—¶æ¯ 30 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ check_mem.sh123456#!/bin/shmem_free=`free -m|awk &#x27;NR==2 &#123;print $NF&#125;&#x27;`if test $mem_free -lt &#x27;100&#x27;; then local msg=&quot;å½“å‰å¯ç”¨å†…å­˜ä¸º $&#123;mem_free&#125;mï¼Œå·²ä¸è¶³ 100mï¼&quot; echo msg | mail -s &#x27;æœåŠ¡å™¨å†…å­˜å‘Šè­¦&#x27; user@mailsrv.comfi æ‰§è¡Œ crontab -eï¼Œå†™å…¥å®šæ—¶ä»»åŠ¡ï¼š 1* /30 * * * * /bin/bash /path/to/scripts/check_mem.sh case in åˆ¤æ–­è¯­å¥ Case in è¯­å¥ä¸€èˆ¬ç”¨äºå¤šåˆ†æ”¯ä¸”åˆ¤æ–­æ¡ä»¶è¾ƒç®€å•çš„åˆ†æ”¯è¯­å¥ç»“æ„ã€‚Case in è¯­å¥çš„ä¸€èˆ¬æ ¼å¼æ˜¯ï¼š 12345678910111213case è¡¨è¾¾å¼ in åŒ¹é…æ¨¡å¼1) åŒ¹é…æ¨¡å¼1æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; åŒ¹é…æ¨¡å¼2) åŒ¹é…æ¨¡å¼2æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; åŒ¹é…æ¨¡å¼n) åŒ¹é…æ¨¡å¼næˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; *) å…¶ä»–åŒ¹é…æ¨¡å¼éƒ½ä¸æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥esac å…¶ä¸­ï¼Œè¡¨è¾¾å¼æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡ã€ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­¦è®¡ç®—è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œåªè¦èƒ½å¤Ÿå¾—åˆ°è¡¨è¾¾å¼çš„å€¼å°±å¯ä»¥ï¼›åŒ¹é…æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼›;; çš„ä½œç”¨ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ case è¯­å¥ä¸­çš„ breakï¼›*) çš„ä½œç”¨ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ case è¯­å¥ä¸­çš„ defaultã€‚ æ¡ˆä¾‹ï¼šæ¨¡æ‹Ÿå®ç°æœåŠ¡å¯åœã€é‡å¯ã€æŸ¥è¯¢çš„ç®¡ç†è„šæœ¬ service.sh12345678910111213141516171819#!/bin/shcase $1 in start) echo &quot;æœåŠ¡å¯åŠ¨æˆåŠŸï¼&quot; ;; stop) echo &quot;æœåŠ¡åœæ­¢æˆåŠŸï¼&quot; ;; restart) echo &quot;é‡å¯æœåŠ¡æˆåŠŸï¼&quot; ;; status) echo &quot;å‘ƒã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot; ;; *) echo &quot;Usage: $0 &#123;start|stop|restart|status&#125;&quot; exit 1esacexit 0 å‡½æ•° åŸºæœ¬æ ¼å¼ï¼š 12345678910111213141516171819# å®šä¹‰å‡½æ•°ï¼Œfunctionã€return å…³é”®å­—å¯çœç•¥ ## æ ‡å‡†å†™æ³•function func_name()&#123; do_something... return ret_val&#125;## çœç•¥èŠ±æ‹¬å·function func_name( do_something... return ret_val)## ä¸€èˆ¬å†™æ³•func_name()&#123; do_something... retuen ret_val&#125;# è°ƒç”¨å‡½æ•°ï¼Œå…¶ä¸­ arg1 arg2 ... argN éƒ½æ˜¯å‚æ•°func_name arg1 arg2 ... argN# å¿…é¡»å…ˆå®šä¹‰å†è°ƒç”¨ åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œä¸€æŠŠå°† shell çš„å‡½æ•°å®šä¹‰å’Œå‡½æ•°è°ƒç”¨åˆ†å¸ƒåœ¨ä¸¤ä¸ªè„šæœ¬æ–‡ä»¶ä¸­ï¼Œæ­¤è¡Œä¸ºæœ‰ç‚¹ç±»ä¼¼ C è¯­è¨€ç¼–ç¨‹ä¸­è®¾ç½®å¤´æ–‡ä»¶çš„è¡Œä¸ºï¼Œå…¶åˆè¡·æ˜¯æ¨¡å—åŒ–ç¼–ç¨‹ã€‚ def_func.sh1234function my_func()&#123; echo &quot;å•ç‹¬å®šä¹‰çš„å‡½æ•°ã€‚&quot; return 0&#125; è°ƒç”¨ç‹¬ç«‹å®šä¹‰çš„å‡½æ•°ï¼š exec_func.sh123456#!/bin/shfunc_path=&quot;/path/to/def_func.sh&quot;# åˆ¤æ–­å‡½æ•°æ–‡ä»¶æ˜¯å¦å­˜åœ¨[ -f func_path ] &amp;&amp; . func_path || &#123;echo &quot;æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š$func_path&quot; 2&gt;&amp;1; exit 1&#125;# è°ƒç”¨å‡½æ•°my_func å‡½æ•°å†…éƒ¨ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šå˜é‡ï¼Œå¯è¿›è¡Œä¼ é€’çš„å‚æ•°ç­‰çš„å¤„ç†ï¼Œå¯å‚è€ƒè°ƒç”¨ shell è„šæœ¬æ—¶å†…éƒ¨çš„ç‰¹æ®Šå˜é‡ï¼Œè„šæœ¬çš„ç‰¹æ®Šå˜é‡ä¸ä¼šè¢«å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç»§æ‰¿ï¼Œéœ€è¦å±‚å±‚ä¼ é€’ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰","date":"2022-03-30T08:03:08.891Z","updated":"2022-04-07T02:26:16.026Z","comments":true,"path":"2022-03-30-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-03-30-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%BA%8C%EF%BC%89.html","excerpt":"","text":"å¼•ç”¨å‘½ä»¤çš„ç»“æœ `command` $(command) ä¾‹ï¼š 1234[skinyi@fedora ~]$ echo &quot;å½“å‰æ—¥æœŸæ˜¯ï¼š`date`&quot;å½“å‰æ—¥æœŸæ˜¯ï¼š2022å¹´ 03æœˆ 31æ—¥ æ˜ŸæœŸå›› 11:13:50 CST[skinyi@fedora ~]$ echo &quot;å½“å‰ç”¨æˆ·çš„ id æ˜¯ï¼š$(id -u)&quot;å½“å‰ç”¨æˆ·çš„ id æ˜¯ï¼š1000 Shell è¿ç®—ç¬¦ Shell å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸åŒï¼ŒShell ä¸èƒ½ç›´æ¥è¿›è¡Œç®—æ•°è¿ç®—ï¼Œå¿…é¡»ä½¿ç”¨æ•°å­¦è®¡ç®—å‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯ Shell ä¸­ä½¿ç”¨çš„ç®—æ•°è¿ç®—ç¬¦ï¼š Shell ç®—æ•°è¿ç®—ç¬¦ æ„ä¹‰ï¼ˆå¸¦ * ä»£è¡¨å¸¸ç”¨ï¼‰ +ã€- åŠ æ³•ï¼ˆæˆ–æ­£å·ï¼‰ã€å‡æ³•ï¼ˆæˆ–è´Ÿå·ï¼‰ * *ã€/ã€% ä¹˜æ³•ã€é™¤æ³•ã€å–ä½™ï¼ˆå–æ¨¡ï¼‰ * ** å¹‚è¿ç®— * ++ã€-- è‡ªå¢ã€è‡ªå‡ * !ã€&amp;&amp;ã€|| é€»è¾‘éï¼ˆå–åï¼‰ã€é€»è¾‘ä¸ï¼ˆandï¼‰ã€é€»è¾‘æˆ–ï¼ˆorï¼‰ * &lt;ã€&lt;=ã€&gt;ã€&gt;= å°äºã€å°äºç­‰äºã€å¤§äºã€å¤§äºç­‰äº ==ã€!=ã€= ç›¸ç­‰ã€ä¸ç­‰ã€å¯¹äºå­—ç¬¦ä¸² = ä¹Ÿå¯è¡¨ç¤ºç›¸å½“äº * &lt;&lt;ã€&gt;&gt; å·¦ç§»ä½ã€å³ç§»ä½ ~ã€|ã€&amp;ã€^ æŒ‰ä½å–åã€æŒ‰ä½å¼‚æˆ–ã€æŒ‰ä½ä¸ã€æŒ‰ä½æˆ– =ã€+=ã€-=ã€*=ã€/=ã€%= èµ‹å€¼è¿ç®—ç¬¦ï¼Œa+=1 ç›¸å½“äº a=a+1ï¼Œåé¢ç±»æ¨ * è¦æƒ³è®©æ•°å­¦è®¡ç®—å‘æŒ¥ä½œç”¨ï¼Œå¿…é¡»ä½¿ç”¨æ•°å­¦è®¡ç®—å‘½ä»¤ï¼ŒShell ä¸­å¸¸ç”¨çš„æ•°å­¦è®¡ç®—å‘½ä»¤å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ Shell è¿ç®—æ“ä½œç¬¦ä¸è¿ç®—å‘½ä»¤ æ„ä¹‰ (()) ç”¨äºæ•´æ•°è¿ç®—çš„å¸¸ç”¨è¿ç®—ç¬¦ï¼Œæ•ˆç‡å¾ˆé«˜ let ç”¨äºæ•´æ•°è¿ç®—ï¼Œç±»ä¼¼äºâ€(())â€œ expr å¯ç”¨äºæ•´æ•°è¿ç®—ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é¢å¤–åŠŸèƒ½ bc Linux ä¸‹çš„ä¸€ä¸ªè®¡ç®—å™¨ç¨‹åºï¼ˆé€‚åˆæ•´æ•°åŠå°æ•°è¿ç®—ï¼‰ $[] ç”¨äºæ•´æ•°è¿ç®— awk awk æ—¢å¯ä»¥ç”¨äºæ•´æ•°è¿ç®—ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°æ•°è¿ç®— declare å®šä¹‰å˜é‡å€¼å’Œå±æ€§ï¼Œ-i å‚æ•°å¯ä»¥ç”¨äºå®šä¹‰æ•´å‹å˜é‡ï¼Œåšè¿ç®— (()) è¿ç®—ç¬¦ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112131415161718# å®šä¹‰å˜é‡ï¼š[skinyi@fedora ~]$ i=1# é”™è¯¯ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ i=((i+1));echo $ibash: æœªé¢„æœŸçš„ç¬¦å·â€œ(â€é™„è¿‘æœ‰è¯­æ³•é”™è¯¯[skinyi@fedora ~]$ echo ((i+1))bash: æœªé¢„æœŸçš„ç¬¦å·â€œ(â€é™„è¿‘æœ‰è¯­æ³•é”™è¯¯# æ­£ç¡®ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ i=$((i+1));echo $i2[skinyi@fedora ~]$ ((i=i+1));echo $i3[skinyi@fedora ~]$ i=$((i&gt;1));echo $i1[skinyi@fedora ~]$ ((i=i&gt;1));echo $i0[skinyi@fedora ~]$ echo $((i&lt;1))1 æ€»ç»“ï¼š å†…éƒ¨èµ‹å€¼ï¼ˆä¸ç›´æ¥å¼•ç”¨ï¼‰ï¼š((var=è¡¨è¾¾å¼))ï¼› å¤–éƒ¨èµ‹å€¼ï¼ˆç›´æ¥å¼•ç”¨ï¼‰ï¼švar=$((è¡¨è¾¾å¼))ã€echo $((è¡¨è¾¾å¼))ã€‚ let æŒ‡ä»¤ ç”¨æ³•ç¤ºä¾‹ï¼š 1234567891011121314# æ­£ç¡®ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ let num=1+1; echo $num2[skinyi@fedora ~]$ let num=num+2; echo $num4[skinyi@fedora ~]$ let num+=2; echo $num6# é”™è¯¯ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ let num=2&gt;1; echo $num2 # æ— æ³•æ ¹æ®æ¯”è¾ƒç»“æœèµ‹å€¼[skinyi@fedora ~]$ let num**2; echo $num2 # åªèƒ½æ˜¯ä»¥èµ‹å€¼çš„å½¢å¼è¿›è¡Œè®¡ç®—[skinyi@fedora ~]$ let num=$((2&gt;1)); echo $num1 # ä»…ç”¨åŒæ‹¬å·å°±èƒ½å®ç°æ•ˆæœï¼Œç”¨ let å†—ä½™ æ¡ˆä¾‹ï¼šç›‘æµ‹ç½‘ç«™æœåŠ¡çš„å­˜æ´»çŠ¶æ€ ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç½‘ç«™æœåŠ¡å­˜æ´»æ£€æµ‹çš„è„šæœ¬ï¼Œå…¶åŸç†æ˜¯å¯¹ç½‘ç«™å®šæ—¶å‘é€ head è¯·æ±‚ä»¥ç¡®è®¤ç½‘ç«™æœåŠ¡å¯ç”¨ï¼Œå½“è¯·æ±‚å¤±è´¥æ¬¡æ•°è¾¾åˆ°ä¸€å®šæ¬¡æ•°åç»™å½“å‰ç³»ç»Ÿç”¨æˆ·å‘é€é‚®ä»¶å‘ŠçŸ¥ç½‘ç«™æœåŠ¡å‡ºäº†é—®é¢˜å¹¶é€€å‡ºè„šæœ¬çš„æ‰§è¡Œã€‚è¦æƒ³å†ä¸¥æ ¼äº›å¯ä»¥è€ƒè™‘è®¤ä¸ºä¸€å®šå‘¨æœŸå†…è¾¾åˆ°æœ€å¤§å¤±è´¥æ¬¡æ•°æ‰è®¤ä¸ºç½‘ç«™æŒ‚äº†ï¼Œè¿˜æœ‰åœ¨è„šæœ¬ä¼ å‚æ—¶å¯ä»¥è¿›è¡Œ url æ ¼å¼çš„æ­£åˆ™æ£€æŸ¥ï¼Œå½“ç„¶è¿™é‡Œåªæ˜¯ä¸ªå°æ¡ˆä¾‹ï¼Œä¸»è¦è¿˜æ˜¯å°†ä¹‹å‰å­¦åˆ°çš„æ²¡å­¦åˆ°çš„ä¸œè¥¿éƒ½ç”¨äº†ä¸€éï¼ŒåŠ æ·±è®°å¿†ã€‚ check_website_status.sh12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/bin/sh## Check web service statusreq_url=&#x27;&#x27; # è¯·æ±‚çš„ç½‘å€ urlreq_timeout=&#x27;5&#x27; # è¯·æ±‚è¶…æ—¶æ—¶é—´req_fails=&#x27;0&#x27; # æœ€å¤§å°è¯•è¯·æ±‚æ¬¡æ•°req_alert_fails=&#x27;10&#x27; # è§¦å‘æŠ¥è­¦çš„æœ€å¤§å°è¯•æ¬¡æ•°req_wait_time=&#x27;1&#x27; # æ¯æ¬¡è¯·æ±‚é—´éš”æ—¶é—´check_parameters()&#123; if [ $# -ne 1 ]; then printf &quot;é”™è¯¯ï¼šæœªæŒ‡å®šæˆ–æŒ‡å®šäº†å¤šä¸ªå‚æ•°ï¼\\nç”¨æ³•ï¼š$0 &lt;url&gt;\\n&quot; 2&gt;&amp;1 exit 1 else req_url=$1 fi&#125;send_mail_alert()&#123; if [ $req_fails -ge $req_alert_fails ]; then local mail_message=&quot;è‡ªè„šæœ¬å¯åŠ¨ä»¥æ¥å…±å‘ç”Ÿäº†$&#123;req_fails&#125;æ¬¡å¤±è´¥çš„è¯·æ±‚ï¼Œå·²è¾¾æœ€å¤§å¤±è´¥ä¸Šé™ï¼Œè¯·åŠæ—¶è¿›è¡Œäººå·¥æ£€æŸ¥å¤„ç†ã€‚\\n&quot; echo -e $mail_message | mail -s &quot;è­¦å‘Šï¼šä½ çš„ç½‘ç«™æœåŠ¡å¯èƒ½å·²ç»ä¸å¯ç”¨&quot; $USER exit 0 # å‘é€é‚®ä»¶åå°±é€€å‡ºï¼Œé˜²æ­¢é‚®ä»¶è½°ç‚¸ fi&#125;check_status()&#123; while true; do local date=`date --rfc-3339=seconds` # ä½¿ç”¨ head è¯·æ±‚æ¥è¿›è¡Œç½‘ç«™æ˜¯å¦å­˜æ´»æ£€æµ‹ curl --head --connect-timeout $&#123;req_timeout&#125; -s -f $&#123;req_url&#125; -o /dev/null # è‹¥å‘½ä»¤è¿”å›é 0 åˆ™è¡¨æ˜è¯·æ±‚å¤±è´¥ if [ $? -ne 0 ]; then let req_fails+=1 # è¯·æ±‚å¤±è´¥æ¬¡æ•°è‡ªå¢ echo &quot;$&#123;date%+*&#125; æ—¶è¿›è¡Œäº†ä¸€æ¬¡å¤±è´¥çš„è¯·æ±‚&quot; send_mail_alert # è°ƒç”¨æŠ¥è­¦åˆ¤æ–­æ˜¯å¦æŠ¥è­¦ else echo &quot;$&#123;date%+*&#125; æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚&quot; fi # æ¯æ¬¡è¯·æ±‚é—´éš”ä¸€æ®µæ—¶é—´ sleep $req_wait_time done&#125;check_parameters $@ # å‡½æ•°ä¸ä¼šç»§æ‰¿ shell è„šæœ¬çš„å‚æ•°ï¼Œè°ƒç”¨æ—¶éœ€è¿›è¡Œä¼ å‚check_status expr å‘½ä»¤ ä½¿ç”¨ expr --help å‘½ä»¤æŸ¥çœ‹ expr å‘½ä»¤å¸®åŠ©ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546[skinyi@fedora ~]$ expr --helpç”¨æ³•ï¼šexpr è¡¨è¾¾å¼ æˆ–ï¼šexpr é€‰é¡¹ --help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡ºå°†è¡¨è¾¾å¼çš„å€¼åˆ—å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œåˆ†éš”ç¬¦ä¸‹é¢çš„ç©ºè¡Œå¯æå‡ç®—å¼ä¼˜å…ˆçº§ã€‚å¯ç”¨çš„è¡¨è¾¾å¼æœ‰ï¼š ARG1 | ARG2 è‹¥ARG1 çš„å€¼ä¸ä¸º 0 æˆ–è€…ä¸ºç©ºï¼Œåˆ™è¿”å› ARG1ï¼Œå¦åˆ™è¿”å› ARG2 ARG1 &amp; ARG2 è‹¥ä¸¤è¾¹çš„å€¼éƒ½ä¸ä¸º 0 æˆ–ä¸ºç©ºï¼Œåˆ™è¿”å› ARG1ï¼Œå¦åˆ™è¿”å› 0 ARG1 &lt; ARG2 ARG1 å°äº ARG2 ARG1 &lt;= ARG2 ARG1 å°äºæˆ–ç­‰äº ARG2 ARG1 = ARG2 ARG1 ç­‰äº ARG2 ARG1 != ARG2 ARG1 ä¸ç­‰äº ARG2 ARG1 &gt;= ARG2 ARG1 å¤§äºæˆ–ç­‰äº ARG2 ARG1 &gt; ARG2 ARG1 å¤§äº ARG2 ARG1 + ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸åŠ ä¹‹å’Œ ARG1 - ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸å‡ä¹‹å·® ARG1 * ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸ä¹˜ä¹‹ç§¯ ARG1 / ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸é™¤ä¹‹å•† ARG1 % ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸é™¤ä¹‹ä½™æ•° å­—ç¬¦ä¸² : è¡¨è¾¾å¼ å®šä½å­—ç¬¦ä¸²ä¸­åŒ¹é…è¡¨è¾¾å¼çš„æ¨¡å¼ match å­—ç¬¦ä¸² è¡¨è¾¾å¼ ç­‰äº&quot;å­—ç¬¦ä¸² : è¡¨è¾¾å¼&quot; substr å­—ç¬¦ä¸² åç§»é‡ é•¿åº¦ æ›¿æ¢å­—ç¬¦ä¸²çš„å­ä¸²ï¼Œåç§»çš„æ•°å€¼ä» 1 èµ·è®¡ index å­—ç¬¦ä¸² å­—ç¬¦ åœ¨å­—ç¬¦ä¸²ä¸­å‘ç°å­—ç¬¦çš„åœ°æ–¹å»ºç«‹ä¸‹æ ‡ï¼Œæˆ–è€…æ ‡0 length å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„é•¿åº¦ + è®°å· å°†ç»™å®šè®°å·è§£æä¸ºå­—ç¬¦ä¸²ï¼Œå³ä½¿å®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼ â€œmatchâ€æˆ–è¿ç®—ç¬¦&quot;/&quot;é‚£æ ·çš„å…³é”®å­— ( è¡¨è¾¾å¼ ) ç»™å®š&lt;è¡¨è¾¾å¼&gt;çš„å€¼è¯·æ³¨æ„æœ‰è®¸å¤šè¿ç®—æ“ä½œç¬¦éƒ½å¯èƒ½éœ€è¦ç”± shell å…ˆå®æ–½è½¬ä¹‰ã€‚å¦‚æœå‚ä¸è¿ç®—çš„ ARG è‡ªå˜é‡éƒ½æ˜¯æ•°å­—ï¼Œæ¯”è¾ƒç¬¦å°±ä¼šè¢«è§†ä½œæ•°å­¦ç¬¦å·ï¼Œå¦åˆ™å°±æ˜¯å¤šä¹‰çš„ã€‚æ¨¡å¼åŒ¹é…ä¼šè¿”å›&quot;\\&quot;å’Œ&quot;\\&quot;ä¹‹é—´è¢«åŒ¹é…çš„å­å­—ç¬¦ä¸²æˆ–ç©º(null)ï¼›å¦‚æœæœªä½¿ç”¨&quot;\\&quot;å’Œ&quot;\\&quot;ï¼Œåˆ™ä¼šè¿”å›åŒ¹é…å­—ç¬¦æ•°é‡æˆ–æ˜¯ 0ã€‚è‹¥è¡¨è¾¾å¼çš„å€¼æ—¢ä¸æ˜¯ç©ºä¹Ÿä¸æ˜¯ 0ï¼Œé€€å‡ºçŠ¶æ€å€¼ä¸º 0ï¼›è‹¥è¡¨è¾¾å¼çš„å€¼ä¸ºç©ºæˆ–ä¸º 0ï¼Œé€€å‡ºçŠ¶æ€å€¼ä¸º 1ã€‚å¦‚æœè¡¨è¾¾å¼çš„å¥æ³•æ— æ•ˆï¼Œåˆ™ä¼šåœ¨å‡ºé”™æ—¶è¿”å›é€€å‡ºçŠ¶æ€å€¼ 3ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627# ä½¿ç”¨æ—¶æœ€å¥½éƒ½è¿›è¡Œè½¬ä¹‰é˜²æ­¢ä¸ shell ç‰¹æ®Šå«ä¹‰ç¬¦å·å†²çª[skinyi@fedora ~]$ expr 1 + 34[skinyi@fedora ~]$ expr 2 \\* 36[skinyi@fedora ~]$ expr 2 * 3expr: è¯­æ³•é”™è¯¯ï¼šæœªé¢„æœŸçš„å‚æ•°[skinyi@fedora ~]$ expr 2 \\+ 57# expr match æ¨¡å¼åŒ¹é…ï¼Œè¾“å‡ºåŒ¹é…å­—ç¬¦ä¸ªæ•°[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*&quot;9[skinyi@fedora ~]$ expr match .bashrc.d &quot;.*\\.d&quot;9[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*b&quot;2[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*p&quot;0[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao wodexinjiumizui0[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao zhiyaoni8[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao zhini0# expr length è·å–å­—ç¬¦ä¸²é•¿åº¦[skinyi@fedora ~]$ expr length 1234567899 æ¡ˆä¾‹ï¼šå‚æ•°ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶çš„åå­—ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ mp3 æ–‡ä»¶ check_mp3.sh123#!/bin/sh# &amp;&amp; åˆ†éš”çš„ä¸¤æ¡è¯­å¥å‰é¢çš„æ‰§è¡ŒæˆåŠŸï¼ˆé€€å‡ºç ä¸º 0ï¼‰åæ‰æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œ||åä¹‹expr &quot;$1&quot; &quot;:&quot; &quot;.*\\.mp3\\$&quot; 2&gt;&gt;/dev/null &amp;&amp; echo &quot;è¿™æ˜¯ä¸ª mp3 æ–‡ä»¶&quot; || echo &quot;è¿™ä¸æ˜¯ mp3 æ–‡ä»¶&quot; æ¡ˆä¾‹ï¼šå‚æ•°ä¼ å…¥ä¸€å¥è¯ï¼ˆæ‹¼éŸ³æˆ–å•è¯ï¼‰ï¼Œåˆ¤æ–­å…¶é•¿åº¦å¤§äº 3 çš„æ‹¼éŸ³ã€å•è¯ä¸ªæ•° count_more_than_3.sh12345678#!/bin/shstr_count=0for word in $@; do if [ `expr length $word` -gt 3 ]; then let str_count+=1 fidoneecho &quot;å¤§äº 3 çš„æ‹¼éŸ³/å•è¯ä¸ªæ•°ä¸ºï¼š$str_count&quot; bc å‘½ä»¤ bc å‘½ä»¤é»˜è®¤æ˜¯ä»¥äº¤äº’æ¨¡å¼è¿è¡Œçš„ï¼Œå³æ‰§è¡Œ bc å‘½ä»¤ä¼šç›´æ¥è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—å¹¶å¾—åˆ°ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ç®¡é“æ¥ä¼ é€’å•ä¸ªè¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ã€‚bc åŒæ—¶æ”¯æŒæ•´æ•°å’Œå°æ•°è®¡ç®—ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 1234[skinyi@fedora ~]$ echo 4.0/2.0 | bc2[skinyi@fedora ~]$ echo 9/3 | bc3 æ¡ˆä¾‹ï¼šè®¡ç®— 1 åˆ° 100 çš„å’Œ 1234567891011#!/bin/sh# echo &#123;1..100&#125; ä¼šæ‰“å°ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦çš„ 1 åˆ° 100 çš„æ•°å­—# tr å‘½ä»¤ï¼šç”¨äºè½¬æ¢æˆ–åˆ é™¤æ–‡ä»¶ä¸­çš„å­—ç¬¦ï¼Œ`tr &#x27; &#x27; &#x27;+&#x27;` ä»£è¡¨å°†è¾“å…¥ä¸­çš„ç©ºæ ¼è½¬æ¢ä¸º + å†è¾“å‡ºecho &quot;1 åˆ° 100 çš„å’Œæ˜¯ $(echo &#123;1..100&#125; | tr &#x27; &#x27; &#x27;+&#x27; | bc)ã€‚&quot;# æˆ–è€…# seq ç”¨äºç”Ÿæˆåºåˆ—ï¼Œ-s é€‰é¡¹æŒ‡å®šåˆ†éš”ç¬¦ä¸º +echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ seq -s &#x27;+&#x27; 100 | bcã€‚&quot;# ä½¿ç”¨åŒæ‹¬å·echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ $((`seq -s &#x27;+&#x27; 100`))ã€‚&quot;# ä½¿ç”¨ exprï¼Œæ³¨æ„è¿™æ¬¡çš„åˆ†éš”ç¬¦echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ $(seq -s &#x27; + &#x27; 100 | xargs expr)ã€‚&quot; awk å‘½ä»¤ ç”¨æ³•ç¤ºä¾‹ï¼š 123456[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1+$2&#125;&#x27;6.6[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1*$2&#125;&#x27;10.08[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1+4*$2&#125;&#x27;13.8 $[è¡¨è¾¾å¼] $[è¡¨è¾¾å¼] ä»…èƒ½ç”¨äºæ•´æ•°è¿ç®—ï¼Œç”¨æ³•ç¤ºä¾‹ï¼š 1234567[skinyi@fedora ~]$ echo $[2**2]4[skinyi@fedora ~]$ echo $[2+2+2]6[skinyi@fedora ~]$ num=5[skinyi@fedora ~]$ echo $[num+2+2]9 read æŒ‡ä»¤ read æŒ‡ä»¤ç”¨äºä»æ ‡å‡†è¾“å…¥è®¾å¤‡ä¸­è¯»å–è¾“å…¥ã€‚ 12345678910111213141516171819202122232425262728293031323334[skinyi@fedora ~]$ read --helpread: read [-ers] [-a æ•°ç»„] [-d åˆ†éš”ç¬¦] [-i ç¼“å†²åŒºæ–‡å­—] [-n è¯»å–å­—ç¬¦æ•°] [-N è¯»å–å­—ç¬¦æ•°] [-p æç¤ºç¬¦] [-t è¶…æ—¶] [-u æ–‡ä»¶æè¿°ç¬¦] [åç§° ...] ä»æ ‡å‡†è¾“å…¥è¯»å–ä¸€è¡Œå¹¶å°†å…¶åˆ†ä¸ºä¸åŒçš„åŸŸã€‚ ä»æ ‡å‡†è¾“å…¥è¯»å–å•ç‹¬çš„ä¸€è¡Œï¼Œæˆ–è€…å¦‚æœä½¿ç”¨äº† -u é€‰é¡¹ï¼Œä»æ–‡ä»¶æè¿°ç¬¦ FD ä¸­è¯»å–ã€‚ è¯¥è¡Œè¢«åˆ†å‰²æˆåŸŸï¼Œå¦‚åŒè¯è¯­åˆ†å‰²ä¸€æ ·ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªè¯è¢«èµ‹å€¼ç»™ç¬¬ä¸€ä¸ª NAME å˜é‡ï¼Œç¬¬äºŒ ä¸ªè¯è¢«èµ‹å€¼ç»™ç¬¬äºŒä¸ª NAME å˜é‡ï¼Œå¦‚æ­¤ç»§ç»­ï¼Œç›´åˆ°å‰©ä¸‹æ‰€æœ‰çš„è¯è¢«èµ‹å€¼ç»™æœ€åä¸€ä¸ª NAME å˜é‡ã€‚åªæœ‰ $IFS å˜é‡ä¸­çš„å­—ç¬¦è¢«è®¤ä½œæ˜¯è¯è¯­åˆ†éš”ç¬¦ã€‚ å¦‚æœæ²¡æœ‰æä¾› NAME å˜é‡ï¼Œåˆ™è¯»å–çš„è¡Œè¢«å­˜æ”¾åœ¨ REPLY å˜é‡ä¸­ã€‚ é€‰é¡¹ï¼š -a array å°†è¯è¯­èµ‹å€¼ç»™ ARRAY æ•°ç»„å˜é‡çš„åºåˆ—ä¸‹æ ‡æˆå‘˜ï¼Œä»é›¶å¼€å§‹ -d delim æŒç»­è¯»å–ç›´åˆ°è¯»å…¥ DELIM å˜é‡ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ -e ä½¿ç”¨ Readline è·å–è¡Œ -i text ä½¿ç”¨ TEXT æ–‡æœ¬ä½œä¸º Readline çš„åˆå§‹æ–‡å­— -n nchars è¯»å– nchars ä¸ªå­—ç¬¦ä¹‹åè¿”å›ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¯»å–æ¢è¡Œç¬¦ã€‚ ä½†æ˜¯åˆ†éš”ç¬¦ä»ç„¶æœ‰æ•ˆï¼Œå¦‚æœé‡åˆ°åˆ†éš”ç¬¦ä¹‹å‰è¯»å–äº†ä¸è¶³ nchars ä¸ªå­—ç¬¦ã€‚ -N nchars åœ¨å‡†ç¡®è¯»å–äº† nchars ä¸ªå­—ç¬¦ä¹‹åè¿”å›ï¼Œé™¤éé‡åˆ°æ–‡ä»¶ç»“æŸç¬¦æˆ–è€…è¯»è¶…æ—¶ï¼Œ ä»»ä½•çš„åˆ†éš”ç¬¦éƒ½è¢«å¿½ç•¥ -p prompt åœ¨å°è¯•è¯»å–ä¹‹å‰è¾“å‡º PROMPT æç¤ºç¬¦å¹¶ä¸”ä¸å¸¦ æ¢è¡Œç¬¦ -r ä¸å…è®¸åæ–œæ è½¬ä¹‰ä»»ä½•å­—ç¬¦ -s ä¸å›æ˜¾ç»ˆç«¯çš„ä»»ä½•è¾“å…¥ -t timeout å¦‚æœåœ¨ TIMEOUT ç§’å†…æ²¡æœ‰è¯»å–ä¸€ä¸ªå®Œæ•´çš„è¡Œåˆ™è¶…æ—¶å¹¶ä¸”è¿”å›å¤±è´¥ã€‚ TMOUT å˜é‡çš„å€¼æ˜¯é»˜è®¤çš„è¶…æ—¶æ—¶é—´ã€‚TIMEOUT å¯ä»¥æ˜¯å°æ•°ã€‚ å¦‚æœ TIMEOUT æ˜¯ 0ï¼Œé‚£ä¹ˆä»…å½“åœ¨æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦ä¸Šè¾“å…¥æœ‰æ•ˆçš„æ—¶å€™ï¼Œ read æ‰è¿”å›æˆåŠŸï¼›å¦åˆ™å®ƒå°†ç«‹åˆ»è¿”å›è€Œä¸å°è¯•è¯»å–ä»»ä½•æ•°æ®ã€‚ å¦‚æœè¶…è¿‡äº†è¶…æ—¶æ—¶é—´ï¼Œåˆ™è¿”å›çŠ¶æ€ç å¤§äº 128 -u fd ä»æ–‡ä»¶æè¿°ç¬¦ FD ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å…¥ é€€å‡ºçŠ¶æ€ï¼š è¿”å›ç ä¸ºé›¶ï¼Œé™¤éé‡åˆ°äº†æ–‡ä»¶ç»“æŸç¬¦ã€è¯»è¶…æ—¶ï¼ˆä¸”è¿”å›ç ä¸å¤§äº128ï¼‰ã€ å‡ºç°äº†å˜é‡èµ‹å€¼é”™è¯¯æˆ–è€…æ— æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº† -u é€‰é¡¹ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112[skinyi@fedora ~]$ read -p &quot;ç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š&quot; -t 5 nameç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š[skinyi@fedora ~]$[skinyi@fedora ~]$ read -p &quot;ç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š&quot; -t 5 nameç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼šskinyi[skinyi@fedora ~]$ echo $nameskinyi[skinyi@fedora ~]$ read -p &quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼š&quot; name age ;echo &quot;$name $age&quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼šskinyi # æœªè¾“å…¥çš„å˜é‡é»˜è®¤ä¸ºç©ºskinyi [skinyi@fedora ~]$ read -p &quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼š&quot; name age ;echo &quot;$name $age&quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼šskinyi 18skinyi 18","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰","date":"2022-03-29T01:39:48.733Z","updated":"2022-03-30T07:57:49.630Z","comments":true,"path":"2022-03-29-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-03-29-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%B8%80%EF%BC%89.html","excerpt":"","text":"Shebang Shebang æ˜¯æŒ‡å‡ºç°åœ¨ Shell è„šæœ¬æ–‡ä»¶ç¬¬ä¸€è¡Œä¸­çš„å‰ä¸¤ä¸ªå­—ç¬¦ #!ï¼Œç”¨ä»¥æŒ‡å®šå‘½ä»¤è§£é‡Šå™¨ï¼Œä¾‹å¦‚ï¼š #!/bin/sh ä¼šä½¿ç”¨ /bin/shï¼Œå³ bash(sh æ˜¯ bash çš„ä¸€ä¸ªè½¯è¿æ¥)è§£é‡Šå™¨æ‰§è¡Œè„šæœ¬å†…å®¹ï¼› #!/usr/bin/python ä¼šä½¿ç”¨ python è§£é‡Šå™¨å»æ‰§è¡Œè„šæœ¬å†…å®¹ï¼› #!/usr/bin/env NAMEï¼Œæ˜¯ä¸€ç§åœ¨ä¸åŒå¹³å°ä¸Šéƒ½èƒ½æ‰¾åˆ° NAME è§£é‡Šå™¨ï¼Œå¹¶ç”¨ NAME è§£é‡Šå™¨æ‰§è¡Œè„šæœ¬å†…å®¹çš„å†™æ³•ã€‚ ğŸŸ¢ ä¸€äº›ç»†èŠ‚ï¼š å¦‚æœè„šæœ¬æ²¡æœ‰æŒ‡å®š shebangï¼Œè„šæœ¬æ‰§è¡Œçš„æ—¶å€™ï¼Œé»˜è®¤ç”¨å½“å‰ shell å»è§£é‡Šè„šæœ¬ï¼Œå³ $SHELL ç¯å¢ƒå˜é‡ï¼› å¦‚æœ shebang æŒ‡å®šäº†å¯æ‰§è¡Œçš„è§£é‡Šå™¨ï¼Œå¦‚ /bin/bashã€/usr/bin/pythonï¼Œé‚£ä¹ˆè„šæœ¬åœ¨æ‰§è¡Œæ—¶ï¼Œæ–‡ä»¶åä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™è§£é‡Šå™¨ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼Œåˆ™ä¼šæŠ¥é”™ï¼š&quot;bad interpreter: Permission denied&quot;ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆåˆ™ä¼šå¿½ç•¥æ­¤æŒ‡å®šçš„è§£é‡Šå™¨ï¼Œç»§è€Œè½¬äº¤ç»™å½“å‰çš„ shell å»æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ &quot;bad interpreter: No such file or directory&quot;ï¼› shebang æŒ‡å®šè§£é‡Šå™¨éœ€å†™å…¶ç»å¯¹è·¯å¾„ï¼ˆå¦‚ï¼š#!/bin/bashï¼‰ï¼Œæ‰¾å¯»è§£é‡Šå™¨çš„è¿‡ç¨‹ä¸ä¼šåœ¨ $PATH ç¯å¢ƒå˜é‡ä¸­æ‰¾ï¼› å¦‚æœä½¿ç”¨ bash script.sh è¿™æ ·çš„å‘½ä»¤æ¥æ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¸­ shebang æ‰€æŒ‡å®šçš„è§£é‡Šå™¨ä¼šè¢«å¿½ç•¥è€Œä½¿ç”¨å‘½ä»¤æ˜¾å¼æŒ‡å®šçš„ bashã€‚ æ‰§è¡Œè„šæœ¬ æ‰§è¡Œä¸€ä¸ªè„šæœ¬ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼Œä»¥æ‰§è¡Œ script.sh è„šæœ¬ä¸ºä¾‹ï¼š bash script.sh æˆ– sh script.shï¼Œè¢«æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶å¯ä»¥æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼Œæˆ–è€…è„šæœ¬æ²¡æœ‰æŒ‡å®š shebang æ—¶å¯ä½¿ç”¨ï¼› ä½¿ç”¨ ç»å¯¹/ç›¸å¯¹ è·¯å¾„æ‰§è¡Œè„šæœ¬ï¼Œè¢«æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™ï¼› source script.sh æˆ–è€… . script.shï¼Œåœ¨å½“å‰ Shell è¿›ç¨‹ä¸­æ‰§è¡Œè„šæœ¬ï¼ˆä¸äº§ç”Ÿå­ Shell è¿›ç¨‹ï¼‰ï¼› å°‘è§ç”¨æ³•ï¼šsh &lt; script.shã€‚ ä¸€äº›å¸¸è§çš„å…¶ä»– shell è§£é‡Šå™¨ï¼š /bin/sh /bin/bash /sbin/nologin /usr/bin/sh /usr/bin/bash /usr/sbin/nologin /bin/tcsh /bin/csh /bin/dash å½“å‰ç³»ç»Ÿæ”¯æŒçš„è§£é‡Šå™¨ç±»å‹å¯ä»¥æ‰§è¡Œ cat /etc/shells å‘½ä»¤æŸ¥çœ‹ã€‚ä¸è¿‡æœ€å—æ¬¢è¿çš„è§£é‡Šå™¨è¿˜æ˜¯ bash è§£é‡Šå™¨ã€‚bash è§£é‡Šå™¨æ”¯æŒä»¥ä¸‹ç‰¹æ€§ï¼š æ–‡ä»¶è·¯å¾„ tab é”®è¡¥å…¨ å‘½ä»¤è¡¥å…¨ å¿«æ·é”® ctrl + aã€eã€uã€kã€l é€šé…ç¬¦ å†å²å‘½ä»¤ å‘½ä»¤åˆ«å å‘½ä»¤è¡Œå±•å¼€ Shell å˜é‡ Shell è¯­è¨€æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œå¦‚å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ä¹Ÿæœ‰å˜é‡çš„æ¦‚å¿µã€‚ å®šä¹‰å˜é‡ 123\\$ NAME=&quot;VALUE&quot; # é»˜è®¤æ‰€æœ‰å˜é‡ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸èƒ½æŒ‡å®šç±»å‹\\$ echo $&#123;NAME&#125;\\$ VALUE å…³äºå•å¼•å·ã€åŒå¼•å·ã€åå¼•å·ç”¨æ³•çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼š 123456789\\$ date=&quot;2020-03-29 20:24:56 CST&quot; \\$ VAR=&#x27;$&#123;date&#125;&#x27;;echo $&#123;VAR&#125;\\$ $date # å•å¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¸è§£æå˜é‡åŠå‘½ä»¤ç»“æœ\\$ VAR=&quot;$&#123;date&#125;&quot;;echo $&#123;VAR&#125;\\$ 2020-03-29 20:24:56 CST # åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¼šè§£æå˜é‡å’Œå‘½ä»¤ç»“æœ\\$ VAR=`date`;echo $&#123;VAR&#125;\\$ 2022å¹´ 03æœˆ 30æ—¥ æ˜ŸæœŸä¸‰ 08:58:33 CST # åå¼•å·ä»£è¡¨æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶å–å¾—å‘½ä»¤çš„ç»“æœ\\$ VAR=&quot;`date`&quot;;echo $&#123;VAR&#125;\\$ 2022å¹´ 03æœˆ 30æ—¥ æ˜ŸæœŸä¸‰ 09:01:14 CST # åŒå¼•å·ä¹Ÿä¼šè§£æåå¼•å·æ‰§è¡Œçš„ç»“æœ å˜é‡æ›¿æ¢åŠå¼•ç”¨ 12345\\$ NAME=&quot;ANOTHER_VALUE&quot;\\$ echo $&#123;NAME&#125;\\$ ANOTHER_VALUE\\$ echo $NAME # çœç•¥èŠ±æ‹¬å·\\$ ANOTHER_VALUE å˜é‡åå‘½åè§„èŒƒ è§åçŸ¥æ„ï¼Œé¿å…ä½¿ç”¨ä¿ç•™å…³é”®å­— å˜é‡åç»„æˆå¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ä»¥åŠä¸‹åˆ’çº¿ ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å· å˜é‡åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ å˜é‡çš„ä½œç”¨åŸŸ å±€éƒ¨å˜é‡ï¼šåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å˜é‡ å…¨å±€å˜é‡ï¼šåªèƒ½åœ¨å½“å‰ Shell è¿›ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡ ç¯å¢ƒå˜é‡ï¼šå¯ä»¥åœ¨å­ Shell è¿›ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡ ğŸ”µ æ³¨æ„ç‚¹ï¼š ä¸åŒäºå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ŒShell å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡çš„ä½œç”¨åŸŸæ˜¯å…¨å±€çš„ï¼Œå³æ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„è¿›ç¨‹å†…å¯è§ï¼ˆä¸ç­‰åŒäºè„šæœ¬å†…éƒ¨å¯è§ï¼Œå› ä¸ºä½¿ç”¨ source å¯ä»¥åœ¨ä¸€ä¸ª Shell è¿›ç¨‹å†…æ‰§è¡Œå¤šä¸ªè„šæœ¬ï¼‰ï¼Œè¦å®ç°ä»…åœ¨å‡½æ•°å†…éƒ¨å¯è§éœ€ä½¿ç”¨ local å…³é”®å­—ï¼Œå¦‚ï¼šlocal var=&quot;something&quot; å…¨å±€å˜é‡åªåœ¨å½“å‰ Shell è¿›ç¨‹å¯è§ï¼Œå¯¹å…¶ä»–è¿›ç¨‹ã€å­è¿›ç¨‹éƒ½ä¸å¯è§ï¼Œå½“ä½¿ç”¨ export å‘½ä»¤å°†å˜é‡è¿›è¡Œå¯¼å‡ºåï¼Œçˆ¶ Shell è¿›ç¨‹çš„è¢«å¯¼å‡ºçš„å˜é‡å°†ä¼šå¯¹å­è¿›ç¨‹å¯è§ï¼Œè¯¥å˜é‡å³è¢«ç§°ä½œç¯å¢ƒå˜é‡ çˆ¶ Shell è¿›ç¨‹é€€å‡ºåï¼Œæ­¤ç¯å¢ƒå˜é‡ä¼šæ¶ˆå¤±ï¼Œå¦‚è¦å®šä¹‰ä¸€äº›å¸¸ç”¨çš„ç¯å¢ƒå˜é‡å¹¶åœ¨å¯åŠ¨æ¯ä¸ª Shell è¿›ç¨‹æ—¶è‡ªåŠ¨å®šä¹‰å®ƒä»¬ï¼Œæ­¤æ—¶å°±éœ€å°†å®ƒä»¬å†™åœ¨ç‰¹å®šçš„é…ç½®æ–‡ä»¶é‡Œ ä¸€äº›ç‰¹æ®Šå˜é‡ å˜é‡ æè¿° $0 å½“å‰è„šæœ¬çš„æ–‡ä»¶å $n(n&gt;=1) ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚ï¼ˆn ä»£è¡¨æ˜¯ç¬¬å‡ ä¸ªä¼ é€’çš„å‚æ•°ï¼Œæ•°å­—ï¼‰ $# ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚ $* ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè¢«å¼•å·æ‹¬èµ·æ¥æ—¶æ‰€æœ‰å‚æ•°è§†ä½œä¸€ä¸ªæ•´ä½“ã€‚ $@ ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè¢«å¼•å·æ‹¬èµ·æ¥æ—¶æ¯ä¸ªå‚æ•°è§†ä½œä¸€ä¸ªæ•´ä½“ï¼Œå¯éå†æ¯ä¸ªå‚æ•°ã€‚ $? ä¸Šä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼ã€‚ $$ å½“å‰ Shell è¿›ç¨‹ IDã€‚å¯¹äº Shell è„šæœ¬ï¼Œå°±æ˜¯è„šæœ¬æ‰€åœ¨çš„è¿›ç¨‹ IDã€‚ $! ä¸Šä¸€æ¬¡åå°è¿›ç¨‹çš„ PIDã€‚ $_ è·å–ä¸Šæ¬¡æ‰§è¡Œå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚ 123456789101112131415161718192021[skinyi@fedora ~]\\$ cat test.sh#!/bin/shecho &#x27;ä½¿ç”¨&quot;$*&quot;æ‰“å°å‚æ•°ï¼š&#x27;for var in &quot;$*&quot;do echo &quot;$var&quot;doneecho &#x27;ä½¿ç”¨&quot;$@&quot;æ‰“å°å‚æ•°ï¼š&#x27;for var in &quot;$@&quot;do echo &quot;$var&quot;done[skinyi@fedora ~]\\$ bash test.sh a b c dä½¿ç”¨&quot;$*&quot;æ‰“å°å‚æ•°ï¼ša b c dä½¿ç”¨&quot;$@&quot;æ‰“å°å‚æ•°ï¼šabcd ğŸŸ¢ ä¸€èˆ¬æ¥è¯´ï¼Œç¨‹åºã€å‘½ä»¤çš„è¿”å›å€¼ä¸º 0 æ—¶ä»£è¡¨å‘½ä»¤æˆåŠŸæ‰§è¡Œå®Œæˆï¼Œè¿”å›å…¶ä»–å€¼å³ä»£è¡¨å‘ç”Ÿäº†é”™è¯¯ï¼Œå¯ä»¥æ ¹æ®è¿”å›å€¼å»æŸ¥è¯¢ç›¸åº”çš„æ–‡æ¡£è¿›è¡Œæ’é”™è°ƒè¯•ã€‚å¯¹äº Shell æ¥è¯´ï¼Œå‡½æ•°çš„è¿”å›å€¼è·Ÿ Cã€JAVA ä¹‹ç±»çš„å‡½æ•°è¿”å›å€¼çš„æ„ä¹‰å’Œä½œç”¨æ˜¯ä¸åŒçš„ã€‚ æŸ¥çœ‹ç¯å¢ƒå˜é‡ set declare env export æ¡ˆä¾‹ï¼šåˆ¤æ–­ä¼ å…¥å‚æ•°ä¸ªæ•°ã€‚ 123456789[skinyi@fedora ~]\\$ cat test.sh#!/bin/sh[ &quot;$#&quot; -ne &quot;2&quot; ] &amp;&amp; &#123; echo &quot;Expect 2 args!&quot; exit 112&#125;[skinyi@fedora ~]\\$ bash test.sh 1Expect 2 args! Bash å†…å»ºå‘½ä»¤ å¯ä»¥ä½¿ç”¨ compgen -b æŸ¥çœ‹æ‰€æœ‰ shell å†…å»ºå‘½ä»¤ã€‚shell å†…å»ºå‘½ä»¤é™„åŠ åœ¨ bash å‘½ä»¤ä¸­ï¼Œå› æ­¤å®ƒä»¬æ˜¯éš bash è¿›ç¨‹å¸¸é©»å†…å­˜çš„ï¼Œå†…å»ºå‘½ä»¤æ‰§è¡Œä¸€èˆ¬ä¸éœ€è¦åˆ›å»ºå­è¿›ç¨‹ã€‚ å‘½ä»¤ ä½œç”¨ echo å°†æŒ‡å®šå­—ç¬¦ä¸²è¾“å‡ºåˆ° STDOUT eval å°†æŒ‡å®šçš„å‚æ•°æ‹¼æ¥æˆä¸€ä¸ªå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œè¯¥å‘½ä»¤ exec ç”¨æŒ‡å®šå‘½ä»¤æ›¿æ¢ shell è¿›ç¨‹ export è®¾ç½®å­ shell è¿›ç¨‹å¯ç”¨çš„å˜é‡ read ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªå˜é‡ shift å°†ä½ç½®å‚æ•°ä¾æ¬¡å‘ä¸‹é™ä¸€ä¸ªä½ç½® alias ä¸ºæŒ‡å®šå‘½ä»¤å®šä¹‰ä¸€ä¸ªåˆ«å getopts åˆ†ææŒ‡å®šçš„ä½ç½®å‚æ•° let è®¡ç®—ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼ä¸­çš„æ¯ä¸ªå‚æ•° local åœ¨å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ readonly ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„å˜é‡ readarray ä» STDIN è¯»å–æ•°æ®è¡Œå¹¶å°†å…¶æ”¾å…¥ç´¢å¼•æ•°ç»„ test åŸºäºæŒ‡å®šæ¡ä»¶è¿”å›é€€å‡ºçŠ¶æ€ç  0 æˆ– 1 trap å¦‚æœæ”¶åˆ°äº†æŒ‡å®šçš„ç³»ç»Ÿä¿¡å·ï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ wait ç­‰å¾…æŒ‡å®šçš„è¿›ç¨‹å®Œæˆï¼Œå¹¶è¿”å›é€€å‡ºçŠ¶æ€ç  echo 12345678# å¸¸ç”¨é€‰é¡¹-n ä¸æ¢è¡Œè¾“å‡º-e è§£æå­—ç¬¦ä¸²ä¸­çš„æ ¼å¼åŒ–å­—ç¬¦ï¼Œç­‰åŒäº `printf` å‘½ä»¤çš„æ•ˆæœ# æ ¼å¼åŒ–å­—ç¬¦\\n æ¢è¡Œ\\r å›è½¦\\t åˆ¶è¡¨ç¬¦\\b é€€æ ¼ eval 12345# ä¾‹å­[skinyi@fedora ~]\\$ set 11 22 33 44 # é€šè¿‡ set å‘½ä»¤è®¾ç½® $1, $2, $3, $4[skinyi@fedora ~]\\$ echo $4 # è¾“å‡º $4 çš„å€¼ï¼Œå³ 44[skinyi@fedora ~]\\$ echo &#x27;$&#x27;$# # æ­¤æ—¶ä¼šè¾“å‡º $4 è€Œé $4 çš„å€¼[skinyi@fedora ~]\\$ eval echo &#x27;$&#x27;$# # æ­¤æ—¶ä¼šè¾“å‡º $4 çš„å€¼ 44 åŸç†ï¼ševal ä¼šæŠŠå‚æ•°è¿›è¡Œæ‰«ææ‹¼æ¥å†æ‰§è¡Œï¼Œå³ä¸Šè¿°ä¾‹å­æœ€åä¸€æ¡å‘½ä»¤ä¼šå…ˆæ‰«æå¾—åˆ° echo $4ï¼Œç„¶åå†å»æ‰§è¡Œã€‚ exec exec ä¼šåœ¨å½“å‰è¿›ç¨‹ä¸­ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤è€Œä¸ä¼šåˆ›å»ºå­è¿›ç¨‹ï¼Œå› æ­¤å½“æ‰§è¡Œçš„å‘½ä»¤é€€å‡ºåè¯¥è¿›ç¨‹ä¹Ÿä¼šè¢«é”€æ¯ï¼Œå³æ•ˆæœæ˜¯åŸæœ¬çš„ bash è¿›ç¨‹â€œä¸è§äº†â€ã€‚ 1234[skinyi@fedora ~]\\$ sudo su -[root@fedora ~]\\# exec whoamiroot[skinyi@fedora ~]\\$ Shell å­ä¸² å­—ä¸² æè¿° ${var} è¿”å›å˜é‡ var çš„å€¼ ${@var} è¿”å›å˜é‡ var çš„å€¼çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œæ³¨æ„@æ›¿æ¢ä¸º# ${var:start} è¿”å›å˜é‡ var çš„ start ä¸ªå­—ç¬¦ä¹‹åçš„æ‰€æœ‰å­—ç¬¦ ${var:start:length} è¿”å›å˜é‡ var çš„ start ä¸ªå­—ç¬¦ä¹‹åé•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸² ${var#word} è¿”å›å˜é‡ var â€æå¤´â€œï¼ˆæœ€çŸ­åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var##word} è¿”å›å˜é‡ var â€æå¤´â€œï¼ˆæœ€é•¿åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var%word} è¿”å›å˜é‡ var â€å»å°¾â€œï¼ˆæœ€çŸ­åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var%%word} è¿”å›å˜é‡ var â€å»å°¾â€œï¼ˆæœ€é•¿åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var/pattern/string} è¿”å›å˜é‡ var ç»å•æ¬¡åŒ¹é… pattern å¹¶ä½¿ç”¨ string æ›¿æ¢åçš„å€¼ ${var//pattern/string} è¿”å›å˜é‡ var ç»å¤šæ¬¡åŒ¹é… pattern å¹¶ä½¿ç”¨ string æ›¿æ¢åçš„å€¼ ${var:-word} æœªå®šä¹‰å˜é‡ var æˆ–å€¼ä¸ºç©ºæ—¶è¿”å› wordï¼Œå¦åˆ™ç›´æ¥è¿”å› var çš„å€¼ ${var:=word} æœªå®šä¹‰å˜é‡ var æˆ–å€¼ä¸ºç©ºæ—¶è¿”å› wordï¼ŒåŒæ—¶å°† word èµ‹å€¼ç»™ var ${var:+word} å½“å˜é‡ var å·²èµ‹å€¼æ—¶æ‰è¿”å› word è¿›è¡Œæ›¿æ¢ï¼Œå¦åˆ™ä¸æ›¿æ¢ ${var:?MASSAGE} å½“å˜é‡ var å·²èµ‹å€¼æ—¶æ‰è¿”å› var çš„å€¼ï¼Œå¦åˆ™è¾“å‡º MASSAGE åˆ° STDERR å­ä¸²å¤„ç†ç¤ºä¾‹ï¼š 12345678910111213141516171819[skinyi@fedora ~]\\$ var=&quot;abcdefghi&quot;[skinyi@fedora ~]\\$ echo $&#123;var&#125;abcdefghi[skinyi@fedora ~]\\$ echo $&#123;#var&#125;9[skinyi@fedora ~]\\$ echo $&#123;var:2&#125;cdefghi[skinyi@fedora ~]\\$ echo $&#123;var:0-5&#125; # ä»å³æ•°ç¬¬äº”ä¸ªå¼€å§‹è¾“å‡ºefghi[skinyi@fedora ~]\\$ echo $&#123;var:2:4&#125;cdef[skinyi@fedora ~]\\$ echo $&#123;var:0-4:2&#125; # ä»å³æ•°ç¬¬å››ä¸ªå¼€å§‹è¾“å‡ºä¸¤ä¸ªå­—ç¬¦fg[skinyi@fedora ~]\\$ echo $&#123;var#a*d&#125;efghi[skinyi@fedora ~]\\$ echo $&#123;var%e*i&#125;abcd[skinyi@fedora ~]\\$ echo $&#123;var/cde/edc&#125;abedcfghi æ¡ˆä¾‹â€”â€”æ‰¹é‡æ–‡ä»¶åä¿®æ”¹ 12345678910111213141516171819202122# å‡†å¤‡å·¥ä½œï¼šäº§ç”Ÿå®éªŒæ•°æ®[skinyi@fedora case]$ touch file_&#123;1..5&#125;_draft.&#123;jpg,png&#125; &amp;&amp; lsfile_1_draft.jpg file_2_draft.jpg file_3_draft.jpg file_4_draft.jpg file_5_draft.jpgfile_1_draft.png file_2_draft.png file_3_draft.png file_4_draft.png file_5_draft.png[skinyi@fedora case]$ mv file_2_draft.jpg file_2_finished.jpg[skinyi@fedora case]$ mv file_2_draft.png file_2_delete.png[skinyi@fedora case]$ lsfile_1_draft.jpg file_2_delete.png file_3_draft.jpg file_4_draft.jpg file_5_draft.jpgfile_1_draft.png file_2_finished.jpg file_3_draft.png file_4_draft.png file_5_draft.png[skinyi@fedora case]$# ä»»åŠ¡ä¸€ï¼šå°†æ‰€æœ‰ç»“å°¾ä¸º draft çš„ jpg æ–‡ä»¶é‡æ–°å‘½åï¼Œå»æ‰ç»“å°¾çš„ _draft åç¼€[skinyi@fedora case]$ for filename in `ls *draft.jpg`; do mv $filename $&#123;filename/_draft/&#125;; \\done; lsfile_1_draft.png file_2_delete.png file_3_draft.png file_4_draft.png file_5_draft.pngfile_1.jpg file_2_finished.jpg file_3.jpg file_4.jpg file_5.jpg[skinyi@fedora case]$# ä»»åŠ¡äºŒï¼šå°†æ‰€æœ‰å¼€å¤´ä¸º file ä¸”ç»“å°¾ä¸º draft çš„ png æ–‡ä»¶é‡æ–°å‘½åï¼Œä¿®æ”¹ä¸º pic_&#123;n&#125;_undo.png çš„å½¢å¼[skinyi@fedora case]$ for filename in `ls *draft.png`; do tmp=$&#123;filename/draft/undo&#125;; \\mv $filename $&#123;tmp/file/pic&#125;; done; lsfile_1.jpg file_2_finished.jpg file_4.jpg pic_1_undo.png pic_4_undo.pngfile_2_delete.png file_3.jpg file_5.jpg pic_3_undo.png pic_5_undo.png[skinyi@fedora case]$ Shell æ‰©å±•å˜é‡ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940# æœªå®šä¹‰ undefined å˜é‡ï¼Œå®šä¹‰ defined å˜é‡çš„å€¼ä¸º defined[skinyi@fedora case]$ echo $undefined[skinyi@fedora case]$ defined=&quot;defined&quot;[skinyi@fedora case]$# var2=$&#123;var1:-word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:-&quot;not defined&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;not defined[skinyi@fedora case]$ res=$&#123;defined:-&quot;not defined&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$# var2=$&#123;var1:=word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:=&quot;will defined&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;will definedwill defined[skinyi@fedora case]$ res=$&#123;defined:=&quot;will redefined?&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$ unset undefined # é”€æ¯ undefined å˜é‡[skinyi@fedora case]$ echo $undefined[skinyi@fedora case]$# var2=$&#123;var1:+word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:+&quot;something&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;[skinyi@fedora case]$ res=$&#123;defined:+&quot;something&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;definedsomething# var2=$&#123;var1:?MASSAGE&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:?&quot;undefined is not defined!&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;bash: undefined: undefined is not defined! # ç¨‹åºç«‹å³è¿”å›ï¼Œæ²¡æœ‰æ‰§è¡Œåé¢çš„è¯­å¥[skinyi@fedora case]$ res=$&#123;undefined:?&#125; # ä¹Ÿå¯ä¸æŒ‡å®šæŠ¥é”™ä¿¡æ¯ï¼Œä¼šæœ‰é»˜è®¤çš„ stderr ä¿¡æ¯bash: undefinedï¼šå‚æ•°ä¸ºç©ºæˆ–æœªè®¾ç½®[skinyi@fedora case]$ res=$&#123;defined:?&quot;undefined is not defined!&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$ å‘½ä»¤åˆ—è¡¨ã€è¿›ç¨‹åˆ—è¡¨ã€è¿›ç¨‹åˆ†ç»„ å‘½ä»¤åˆ—è¡¨ï¼Œç¤ºä¾‹ï¼špwd; ls; ... ç›´æ¥æ‰§è¡Œï¼Œä¸èƒ½æ”¾åˆ°åå°è¿›ç¨‹ è¿›ç¨‹åˆ—è¡¨ï¼Œç¤ºä¾‹ï¼š(pwd; ls; ...) åœ¨å­ shell ä¸­æ‰§è¡Œç„¶åè¿”å›çˆ¶ shell è¿›ç¨‹åˆ†ç»„ï¼Œç¤ºä¾‹ï¼š{pwd; ls; ...} ä¸ä¼šå¯åŠ¨å­ shellï¼Œä¸å‘½ä»¤åˆ—è¡¨ä¸€æ ·ï¼Œåªæ˜¯ç»™å‘½ä»¤è¿›è¡Œäº†åˆ†ç»„ ğŸŸ¢ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ BASH_SUBSHELL æ¥åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯å­ Shellï¼Œè‹¥è¯¥å˜é‡çš„å€¼ä¸º 0ï¼Œåˆ™ä»£è¡¨è‡ªå·±ä¸æ˜¯ subshellï¼Œè‹¥ä¸ºå…¶ä»–å€¼åˆ™æ˜¯ã€‚ ğŸŸ¢ åˆ›å»ºå­ shell æ—¶æ–°å»ºå­è¿›ç¨‹ä½†å­è¿›ç¨‹ç”± bash ç»´æŠ¤ï¼Œåªèƒ½é€šè¿‡ $BASHPID è·å–PIDï¼Œä¸çˆ¶è¿›ç¨‹å…±ç”¨åŒä¸€ä¸ª POSIX è¯­ä¹‰ä¸‹çš„ PID ä¸ PPIDã€‚æœ¬è´¨ä¸Šå®ç°äº†å¤šè¿›ç¨‹ã€‚ 12345678910111213141516[skinyi@fedora ~]$ pwd; ls; echo $BASH_SUBSHELL/home/skinyicase gh-pages package-lock.json test.sh0[skinyi@fedora ~]$ (pwd; ls; echo $BASH_SUBSHELL)/home/skinyicase gh-pages package-lock.json test.sh1[skinyi@fedora ~]$ echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;)))))012345[skinyi@fedora ~]$","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯","slug":"Docker | Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯","date":"2022-03-21T05:27:20.144Z","updated":"2022-03-24T14:51:08.422Z","comments":true,"path":"2022-03-21-Docker | Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯.html","link":"","permalink":"https://skinyi.github.io/2022-03-21-Docker%20|%20Docker%20%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8F%8A%E5%BA%95%E5%B1%82%E6%8A%80%E6%9C%AF.html","excerpt":"","text":"å®¹å™¨çš„æœ¬è´¨ å®¹å™¨æœ¬èº«æ˜¯ä¸€ç§è¿›ç¨‹éš”ç¦»æŠ€æœ¯ã€‚å®¹å™¨ä¸ºè¿›ç¨‹æä¾›äº†ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå®¹å™¨å†…çš„è¿›ç¨‹æ— æ³•è®¿é—®å®¹å™¨å¤–çš„è¿›ç¨‹ã€‚ä»¥è¿è¡Œä¸€ä¸ª ubuntu å®¹å™¨ä¸ºä¾‹ï¼š 12[root@localhost ~]\\# docker run -it ubunturoot@d304e6f37918:\\# top # æ‰§è¡Œ top å‘½ä»¤ åœ¨ä¸»æœºä¸ŠæŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ï¼š 1234567[root@localhost ~]\\# ps -ef# ......root 3630 3629 0 13:48 pts/0 00:00:00 docker run -it ubunturoot 3648 1 0 13:48 ? 00:00:00 /usr/bin/containerd-shim-runc-v2 -namespace moby -id d304e6f3791808ca34c8f8361da22root 3674 3648 0 13:48 pts/0 00:00:00 bashroot 3775 3674 0 13:49 pts/0 00:00:00 top# ...... å…¶ä¸­ç¬¬ä¸€æ¡è®°å½•æ˜¯å¯åŠ¨è¯¥å®¹å™¨æ—¶çš„å‘½ä»¤ï¼Œå…¶çˆ¶è¿›ç¨‹æ˜¯æ‰§è¡Œè¯¥å‘½ä»¤çš„ bash è¿›ç¨‹ï¼›ç¬¬äºŒæ¡è®°å½•æ˜¯è¯¥å®¹å™¨çš„è¿›ç¨‹ï¼Œå…¶çˆ¶è¿›ç¨‹æ˜¯ systemd è¿›ç¨‹ï¼Œç”± systemd è¿›ç¨‹ç›´æ¥æ‰§è¡Œ containerd-shim-runc-v2 å‘½ä»¤å¯åŠ¨å®¹å™¨çš„è¿›ç¨‹ï¼›ç¬¬ä¸‰æ¡è®°å½•è¡¨æ˜è¯¥å®¹å™¨çš„è¿›ç¨‹è‡ªåŠ¨å¯åŠ¨ä¸€ä¸ª bash è¿›ç¨‹ç”¨ä»¥æ¥å—ç”¨æˆ·çš„æŒ‡ä»¤ï¼›ç¬¬å››æ¡è®°å½•è¡¨æ˜åœ¨è¯¥ bash è¿›ç¨‹ä¸­æ‰§è¡Œäº† top å‘½ä»¤ã€‚ è¿›ç¨‹éš”ç¦» ä»¥ä¸Šç¤ºä¾‹å°è¯äº†å®¹å™¨çš„æœ¬è´¨æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå®¹å™¨ä¸­çš„è¿›ç¨‹æ˜¯å®¹å™¨è¿›ç¨‹çš„å­è¿›ç¨‹æˆ–å­å­è¿›ç¨‹ã€‚ä½†å¦‚ä½•è¡¨æ˜è¯¥å®¹å™¨è¿›ç¨‹æ˜¯ä¸å…¶ä»–è¿›ç¨‹éš”ç¦»çš„å‘¢ï¼Ÿåœ¨ä¸Šè¿° Ubuntu å®¹å™¨ä¸­æ‰§è¡Œ ps -ef å‘½ä»¤ï¼š 1234root@baf49ec287bb:\\# ps -efUID PID PPID C STIME TTY TIME CMDroot 1 0 0 06:15 pts/0 00:00:00 bashroot 9 1 0 06:15 pts/0 00:00:00 ps -ef å¯ä»¥çœ‹åˆ°è¯¥å®¹å™¨çš„ bash è¿›ç¨‹çš„ PID ç«Ÿç„¶æ˜¯ 1 è€Œä¸æ˜¯å’Œä¸»æœºä¸€æ ·æ˜¯ systemd è¿›ç¨‹ï¼Œè€Œåœ¨ä¸»æœºä¸Šå…¶è¿›ç¨‹å·æ˜¯ 3674ï¼Œç”±æ­¤å¯ä»¥è§†ä½œè¯¥å®¹å™¨è¿›ç¨‹é‡Œçš„å­è¿›ç¨‹è®¤ä¸ºè‡ªå·±è¿è¡Œåœ¨ä¸€ä¸ªâ€œä¸ä¸–éš”ç»â€çš„æ“ä½œç³»ç»Ÿä¸–ç•Œé‡Œã€‚ æ–‡ä»¶ç³»ç»Ÿéš”ç¦» åœ¨è¯¥å®¹å™¨å†…éƒ¨æ‰§è¡Œï¼š 123456789101112131415161718root@baf49ec287bb:\\# ls -l /devtotal 0crw--w----. 1 root tty 136, 0 Mar 21 06:42 consolelrwxrwxrwx. 1 root root 11 Mar 21 06:15 core -&gt; /proc/kcorelrwxrwxrwx. 1 root root 13 Mar 21 06:15 fd -&gt; /proc/self/fdcrw-rw-rw-. 1 root root 1, 7 Mar 21 06:15 fulldrwxrwxrwt. 2 root root 40 Mar 21 06:15 mqueuecrw-rw-rw-. 1 root root 1, 3 Mar 21 06:15 nulllrwxrwxrwx. 1 root root 8 Mar 21 06:15 ptmx -&gt; pts/ptmxdrwxr-xr-x. 2 root root 0 Mar 21 06:15 ptscrw-rw-rw-. 1 root root 1, 8 Mar 21 06:15 randomdrwxrwxrwt. 2 root root 40 Mar 21 06:15 shmlrwxrwxrwx. 1 root root 15 Mar 21 06:15 stderr -&gt; /proc/self/fd/2lrwxrwxrwx. 1 root root 15 Mar 21 06:15 stdin -&gt; /proc/self/fd/0lrwxrwxrwx. 1 root root 15 Mar 21 06:15 stdout -&gt; /proc/self/fd/1crw-rw-rw-. 1 root root 5, 0 Mar 21 06:15 ttycrw-rw-rw-. 1 root root 1, 9 Mar 21 06:15 urandomcrw-rw-rw-. 1 root root 1, 5 Mar 21 06:15 zero å¯ä»¥å‘ç°è¯¥å®¹å™¨çš„è®¾å¤‡æ–‡ä»¶ä¸­æ²¡æœ‰ä¸»æœºä¸­çš„ç¡¬ç›˜ block æ–‡ä»¶ï¼Œè¿™æ˜¯ç”±äºè¯¥å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ˜¯å’Œä¸»æœºä¸ä¸€æ ·çš„ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿã€‚é‚£ä¹ˆå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿåœ¨å“ªå„¿å‘¢ï¼Ÿä½¿ç”¨ docker inspect å®¹å™¨å|å®¹å™¨ID å‘½ä»¤å¹¶æŸ¥çœ‹è¾“å‡ºçš„ GraphDriver å­—æ®µæ¥æ‰¾åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶åœ¨ä¸»æœºä¸­çš„ä½ç½®ã€‚ 123456789[skinyi@localhost ~]\\$ sudo docker inspect -f &#x27;&#123;&#123;json .GraphDriver&#125;&#125;&#x27; ubuntu | jq&#123; &quot;Data&quot;: &#123; &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/merged&quot;, &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/diff&quot;, &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/work&quot; &#125;, &quot;Name&quot;: &quot;overlay2&quot;&#125; è¯¥å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä½ç½®å°±åœ¨ä¸»æœºä¸Š UpperDir å±æ€§æ‰€æŒ‡å‘çš„ä½ç½®ã€‚ä¸»æœºå¦èµ·ç»ˆç«¯åœ¨è¯¥ç›®å½•ä¸‹æ‰¾åˆ°å®¹å™¨çš„ dev ç›®å½•ï¼Œå¹¶ ls -l ä¼šå‘ç°è¯¥ç›®å½•æ˜¯ç©ºçš„ï¼Œå…¶å®è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºå®¹å™¨ä¸­è¯¥ç›®å½•æ˜¯å†…å­˜æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†è€ŒæœªæŒä¹…åŒ–åˆ°ä¸»æœºç¡¬ç›˜ä¸­ã€‚ æ–‡ä»¶éš”ç¦»çš„æœ¬è´¨æŠ€æœ¯æ˜¯ä½¿ç”¨ chroot ç³»ç»Ÿè°ƒç”¨ï¼Œè¯¥ç³»ç»Ÿè°ƒç”¨ç”¨äºå°†ä¸€ä¸ªè¿›ç¨‹åŠå…¶å­è¿›ç¨‹çš„æ ¹ç›®å½•æ”¹å˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–°ä½ç½®ï¼Œå¹¶è®©è¿™äº›è¿›ç¨‹åªèƒ½è®¿é—®åˆ°è¯¥ç›®å½•ï¼Œæ­¤åŠŸèƒ½çš„åˆè¡·æ˜¯ä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ç‹¬ç«‹çš„ç£ç›˜ç©ºé—´ã€‚ æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿåˆ›å»ºå®¹å™¨æ‰€è¿›è¡Œçš„æ“ä½œï¼š 123456[root@localhost ~]\\# cd /var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/[root@localhost 7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5]\\# chroot diffroot@localhost:\\# ls bin boot dev etc home lib lib32 lib64 libx32 media mnt opt proc root run sbin srv sys tmp usr varroot@localhost:\\# pwd/ æ­¤æ—¶æ— æ³•æ‰§è¡Œ ps -ef å‘½ä»¤ï¼Œå› ä¸ºå…¶å†…å­˜æ–‡ä»¶ç³»ç»Ÿè¿˜æ²¡æœ‰æŒ‚è½½ã€‚ä½†æˆ‘ä»¬çš„å®éªŒå¯ä»¥åˆ°æ­¤ä¸ºæ­¢ã€‚ Linux å‘½åç©ºé—´æŠ€æœ¯ åé¢çš„å®¹å™¨æŠ€æœ¯çš„å®ç°åŸºæœ¬ä¸Šéƒ½ç¦»ä¸å¼€ Linux çš„ Namespace æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯æ˜¯ Linux æä¾›çš„å†…æ ¸çº§ç¯å¢ƒéš”ç¦»çš„æ–¹æ³•ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹çš„ç³»ç»Ÿéš”ç¦»èƒ½åŠ›ï¼š Mount Namespace æä¾›ç£ç›˜æŒ‚è½½ç‚¹å’Œæ–‡ä»¶ç³»ç»Ÿçš„éš”ç¦»èƒ½åŠ› IPC Namespace æä¾›è¿›ç¨‹é—´é€šä¿¡éš”ç¦»çš„èƒ½åŠ› Network Namespace æä¾›ç½‘ç»œéš”ç¦»èƒ½åŠ› UTS Namespace æä¾›ä¸»æœºååŠä¸»æœºåŸŸçš„éš”ç¦»èƒ½åŠ› PID Namespace æä¾›è¿›ç¨‹éš”ç¦»èƒ½åŠ› User Namespace æä¾›ç”¨æˆ·éš”ç¦»èƒ½åŠ› åœ¨ä¸»æœºä¸ŠæŸ¥çœ‹å®¹å™¨çš„ bash è¿›ç¨‹ã€ä¸»æœºçš„ bash è¿›ç¨‹ä»¥åŠä¸»æœº systemd è¿›ç¨‹çš„å‘½åç©ºé—´ï¼š 123456789101112131415161718192021222324252627282930313233343536[root@localhost ~]\\# ls -l /proc/3674/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 cgroup -&gt; &#x27;cgroup:[4026532847]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 ipc -&gt; &#x27;ipc:[4026532777]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 mnt -&gt; &#x27;mnt:[4026532775]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:41 net -&gt; &#x27;net:[4026532780]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid -&gt; &#x27;pid:[4026532778]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid_for_children -&gt; &#x27;pid:[4026532778]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 uts -&gt; &#x27;uts:[4026532776]&#x27;[root@localhost ~]\\# ls -l /proc/self/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 cgroup -&gt; &#x27;cgroup:[4026531835]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 ipc -&gt; &#x27;ipc:[4026531839]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 mnt -&gt; &#x27;mnt:[4026531840]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 net -&gt; &#x27;net:[4026532000]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid_for_children -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 uts -&gt; &#x27;uts:[4026531838]&#x27;[root@localhost ~]\\# ls -l /proc/1/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:05 cgroup -&gt; &#x27;cgroup:[4026531835]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 ipc -&gt; &#x27;ipc:[4026531839]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 mnt -&gt; &#x27;mnt:[4026531840]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 net -&gt; &#x27;net:[4026532000]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 pid -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:50 pid_for_children -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:50 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 uts -&gt; &#x27;uts:[4026531838]&#x27; å¯ä»¥å‘ç°ä¸»æœºçš„ bash è¿›ç¨‹å’Œ systemd è¿›ç¨‹å®Œå…¨ä¸€è‡´ï¼Œä½†å®¹å™¨ä¸­çš„è¿›ç¨‹å’Œä¸»æœºè¿›ç¨‹ä¸­çš„å­˜åœ¨éƒ¨åˆ†å·®åˆ«ã€‚å‘½åç©ºé—´ä¸­è¿˜åŒ…å« cgroup å‘½åç©ºé—´ï¼Œè¿™æ¶‰åŠåˆ° Linux ç®¡ç†ç¡¬ä»¶èµ„æºåˆ†é…çš„ä¸€ç§æŠ€æœ¯ã€‚ CGroup æ§åˆ¶ç»„ CGroup æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§å¯ä»¥é™åˆ¶ã€è®°å½•ã€éš”ç¦»è¿›ç¨‹ç»„æ‰€ä½¿ç”¨çš„è®¡ç®—èµ„æºï¼ˆCPUã€å†…å­˜ã€I/O ç­‰ï¼‰çš„æœºåˆ¶ã€‚CGroup æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š é™åˆ¶è¿›ç¨‹ç»„å¯ä»¥ä½¿ç”¨çš„èµ„æºæ•°é‡ è¿›ç¨‹ç»„çš„ä¼˜å…ˆçº§æ§åˆ¶ è®°å½•è¿›ç¨‹ç»„ä½¿ç”¨çš„èµ„æºæ•°é‡ è¿›ç¨‹ç»„éš”ç¦» è¿›ç¨‹ç»„æ§åˆ¶ å®¹å™¨æŠ€æœ¯ä½¿ç”¨ CGroup æŠ€æœ¯é™åˆ¶å®¹å™¨å¯¹ä¸»æœºèµ„æºçš„ä½¿ç”¨ã€‚ Containerd å®¹å™¨è¿è¡Œæ—¶ Containerd æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥ä¸šçº§å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…¶è„±èƒäº docker çš„ libcontainerd åç»å¼€æºç‹¬ç«‹ä»¥åŠä¸æ–­å®Œå–„ä» RunC å‘å±•åˆ°ç°åœ¨çš„ Containerdï¼ˆè°·æ­ŒåŠå…¶ä»–å¤§å‚çš„ä¸€ç³»åˆ—æ“ä½œä¸‹ï¼‰ã€‚ç°åœ¨è°·æ­Œçš„ K8S é»˜è®¤é›†æˆçš„å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒå·²ç»æ˜¯ Containerdï¼Œè€Œä¸æ˜¯åŸæœ¬çš„ Dockerï¼ŒDocker ç°åœ¨æ›´å¤šä»£è¡¨çš„å…¶å®æ˜¯æ“çºµ Containerd çš„ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°","slug":"äº‘è®¡ç®— | äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°","date":"2022-03-13T02:02:31.486Z","updated":"2022-03-14T13:17:58.484Z","comments":true,"path":"2022-03-13-äº‘è®¡ç®— | äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°.html","link":"","permalink":"https://skinyi.github.io/2022-03-13-%E4%BA%91%E8%AE%A1%E7%AE%97%20|%20%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%8E%E9%98%BF%E9%87%8C%E4%BA%91%20ACP%20%E6%A6%82%E8%BF%B0.html","excerpt":"","text":"äº‘è®¡ç®—ä¸è™šæ‹ŸåŒ–æ¦‚è¿° äº‘è®¡ç®— äº‘è®¡ç®—æ˜¯ä¸€ç§æ¨¡å‹ï¼Œå®ƒå¯ä»¥å®ç°éšæ—¶éšåœ°ã€ä¾¿æ·åœ°ã€éšéœ€åº”å˜åœ°ä»å¯é…ç½®è®¡ç®—èµ„æºå…±äº«æ± ä¸­è·å–æ‰€éœ€çš„èµ„æºï¼ˆä¾‹å¦‚ï¼Œç½‘ç»œã€æœåŠ¡å™¨ã€å­˜å‚¨ã€åº”ç”¨åŠæœåŠ¡ï¼‰ï¼Œèµ„æºèƒ½å¤Ÿå¿«é€Ÿä¾›åº”å¹¶é‡Šæ”¾ï¼Œä½¿ç®¡ç†èµ„æºçš„å·¥ä½œé‡å’Œä¸æœåŠ¡æä¾›å•†çš„äº¤äº’å‡å°åˆ°æœ€ä½é™åº¦ã€‚ äº‘è®¡ç®—äº”å¤§ç‰¹å¾ï¼š On-Demand Self-Service æŒ‰éœ€è‡ªåŠ©æœåŠ¡ Rapid Elasticity å¿«é€Ÿå¼¹æ€§ä¼¸ç¼© Resource Pooling èµ„æºåŒ–æ±  Measured Service å¯è®¡é‡æœåŠ¡ Broad Network Access å¹¿æ³›ç½‘ç»œæ¥å…¥ äº‘è®¡ç®—çš„å››å¤§éƒ¨ç½²æ¨¡å¼ï¼š Private Cloud: ç§æœ‰äº‘ Public Cloud: å…¬æœ‰äº‘ï¼ˆé˜¿é‡Œäº‘ ECSï¼‰ Community Cloud: ç¤¾åŒºäº‘ï¼ˆåŒ»è¯è¡Œä¸šäº‘ã€è¿è¾“è¡Œä¸šäº‘ã€é‡‘èè¡Œä¸šäº‘ï¼‰ Hybrid Cloud: æ··åˆäº‘ï¼ˆé‡‡ç”¨ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šä¸Šè¿°éƒ¨ç½²æ¨¡å¼éƒ¨ç½²ï¼‰ äº‘è®¡ç®—çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè™šæ‹ŸåŒ–å…¶å®ä¸»è¦æä¾›äº† Iaas æ¨¡å¼çš„æœåŠ¡ï¼Œäº‘è®¡ç®—çš„å…¶ä»–æœåŠ¡æ¨¡å¼éƒ½æ˜¯åœ¨ IaaS çš„åŸºç¡€ä¸Šå‘å±•è€Œæ¥çš„ã€‚ äº‘è®¡ç®—çš„ä¸‰ç§æœåŠ¡æ¨¡å¼ï¼š IaaS(Infrastructure as a Service) åŸºç¡€è®¾æ–½å³æœåŠ¡: å‡ºç§Ÿå¤„ç†èƒ½åŠ›ã€å­˜å‚¨ç©ºé—´ã€ç½‘ç»œå¸¦å®½ç­‰åŸºæœ¬è®¡ç®—èµ„æºï¼Œå¦‚ï¼šäºšé©¬é€Š EC2ã€å¼¹æ€§äº‘æœåŠ¡å™¨ PaaS(Platform as a Service) å¹³å°å³æœåŠ¡ï¼šä¸ºå®¢æˆ·å¼€å‘çš„åº”ç”¨ç¨‹åºæä¾›å¯éƒ¨ç½²çš„äº‘æœåŠ¡ï¼Œå¦‚ï¼šMicrosoft Azureã€æ•°æ®åº“æœåŠ¡ SaaS(Software as a Service) è½¯ä»¶å³æœåŠ¡ï¼šåœ¨ç½‘ç»œä¸Šæä¾›å¯ç›´æ¥ä½¿ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ï¼šOffice 365ã€å„ç§äº‘ APP äº‘è®¡ç®—çš„å…«ä¸ªé€šç”¨ç‰¹ç‚¹ï¼šå¤§è§„æ¨¡ã€å¼¹æ€§è®¡ç®—ã€æ ‡å‡†åŒ–ã€åœ°ç†åˆ†å¸ƒã€è™šæ‹ŸåŒ–ã€é¢å‘æœåŠ¡ã€ä½æˆæœ¬ã€é«˜å®‰å…¨æ€§ã€‚ äº‘è®¡ç®—çš„å‘å±•å†ç¨‹ï¼š äº‘è®¡ç®— 1.0 è®¡ç®—è™šæ‹ŸåŒ– äº‘è®¡ç®— 2.0 è½¯ä»¶å®šä¹‰ä¸æ•´åˆ äº‘è®¡ç®— 3.0 äº‘åŸç”Ÿä¸é‡æ„ä¸šåŠ¡ è™šæ‹ŸåŒ– è™šæ‹ŸåŒ–æ˜¯æŒ‡ä¸€ç§å°†ç¡¬ä»¶è½¬å˜ï¼ˆæŠ½è±¡ï¼‰ä¸ºè½¯ä»¶çš„æŠ€æœ¯ã€‚è™šæ‹ŸåŒ–æ˜¯èµ„æºçš„é€»è¾‘è¡¨ç¤ºï¼Œå…¶ä¸å—ç‰©ç†é™åˆ¶çš„çº¦æŸã€‚è™šæ‹ŸåŒ–åˆ›å»ºäº†ä¸€å±‚éš”ç¦»å±‚ï¼ŒæŠŠç¡¬ä»¶å’Œä¸Šå±‚åº”ç”¨åˆ†ç¦»å¼€æ¥ï¼Œå…è®¸åœ¨ä¸€ä¸ªç¡¬ä»¶èµ„æºä¸Šè¿è¡Œå¤šä¸ªé€»è¾‘åº”ç”¨ã€‚ å¸¸è§çš„è™šæ‹ŸåŒ–ï¼šæœåŠ¡å™¨è™šæ‹ŸåŒ–ã€ç½‘ç»œè™šæ‹ŸåŒ–ã€å­˜å‚¨è™šæ‹ŸåŒ–ã€æ¡Œé¢è™šæ‹ŸåŒ–ç­‰ã€‚å…¶ä¸­æœåŠ¡å™¨è™šæ‹ŸåŒ–çš„ç»“æ„è‡ªä¸‹è€Œä¸Šåˆ†åˆ«æ˜¯ï¼šå®¿ä¸»æœºã€å®¿ä¸»æœºæ“ä½œç³»ç»Ÿã€Hypervisorã€å®¢æˆ·æœºã€å®¢æˆ·æœºæ“ä½œç³»ç»Ÿã€‚ Hypervisorï¼šè™šæ‹ŸæœºæŠ€æœ¯çš„æ ¸å¿ƒã€è™šæ‹ŸåŒ–å±‚çš„å…·ä½“å®ç°ã€‚ åˆ›é€ å¹¶è¿è¡Œè™šæ‹Ÿæœºçš„è½¯ä»¶ã€å›ºä»¶æˆ–è€…ç¡¬ä»¶ï¼› ä»¥è½¯ä»¶çš„æ–¹å¼ï¼Œå®ç°ä¸€å¥—å’Œç‰©ç†ä¸»æœºç¯å¢ƒå®Œå…¨ä¸€æ ·çš„è™šæ‹Ÿç¯å¢ƒï¼Œç‰©ç†ä¸»æœºæœ‰çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜ã€ç½‘ç»œ IOã€è®¾å¤‡ IO ç­‰éƒ½æœ‰ï¼› ç›¸å½“äºç‰©ç†ä¸»æœºçš„èµ„æºè¿›è¡Œåˆ’åˆ†å’Œéš”ç¦»ï¼Œä¾›ä¸Šå±‚ä½¿ç”¨ï¼ˆå…±äº«ç¡¬ä»¶ï¼‰ã€‚ ä¸»æµ Hypervisor äº§å“ï¼šVMware ESXiã€Microsoft Hyper-Vã€Linux KVMã€Red Hat Enterprise Virtualization(RHEV)ã€Citrix XenServerã€Oracle VMã€VMware Workstationã€VMware Playerã€VMware Fusion. æ ¹æ®åœ¨æ•´ä¸ªç³»ç»Ÿä¸­çš„ä½ç½®ä¸åŒï¼Œè™šæ‹ŸåŒ–æ¶æ„åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š å¯„å±…è™šæ‹ŸåŒ–æ¶æ„ï¼šå¯„å±…è™šæ‹ŸåŒ–æ¶æ„æŒ‡åœ¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¹‹ä¸Šå®‰è£…å’Œè¿è¡Œè™šæ‹ŸåŒ–ç¨‹åºï¼Œä¾èµ–äºå®¿ä¸»æ“ä½œç³»ç»Ÿå¯¹è®¾å¤‡çš„æ”¯æŒå’Œç‰©ç†èµ„æºçš„ç®¡ç†ã€‚ï¼ˆVMwareï¼‰ è£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„ï¼šè£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„æŒ‡ç›´æ¥åœ¨ç¡¬ä»¶ä¸Šé¢å®‰è£…è™šæ‹ŸåŒ–è½¯ä»¶ï¼Œå†åœ¨å…¶ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ï¼Œä¾èµ–è™šæ‹Ÿå±‚å†…æ ¸å’ŒæœåŠ¡å™¨æ§åˆ¶å°è¿›è¡Œç®¡ç†ã€‚ï¼ˆé˜¿é‡Œäº‘å¼¹æ€§è£¸é‡‘å±æœåŠ¡å™¨ï¼ŒECS Bare Metal Instanceï¼‰ æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„ï¼šæ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„åœ¨æ“ä½œç³»ç»Ÿå±‚é¢å¢åŠ è™šæ‹ŸæœåŠ¡å™¨åŠŸèƒ½ã€‚æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„æŠŠå•ä¸ªçš„æ“ä½œç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªå®¹å™¨ï¼Œä½¿ç”¨å®¹å™¨ç®¡ç†å™¨æ¥è¿›è¡Œç®¡ç†ã€‚å®¿ä¸»æ“ä½œç³»ç»Ÿè´Ÿè´£åœ¨å¤šä¸ªè™šæ‹ŸæœåŠ¡å™¨ï¼ˆå³å®¹å™¨ï¼‰ä¹‹é—´åˆ†é…ç¡¬ä»¶èµ„æºï¼Œå¹¶ä¸”è®©è¿™äº›æœåŠ¡å™¨å½¼æ­¤ç‹¬ç«‹ã€‚ï¼ˆdockerï¼‰ æ··åˆè™šæ‹ŸåŒ–æ¶æ„å°†ä¸€ä¸ªå†…æ ¸çº§é©±åŠ¨å™¨æ’å…¥åˆ°å®¿ä¸»æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚è¿™ä¸ªé©±åŠ¨å™¨ä½œä¸ºè™šæ‹Ÿç¡¬ä»¶ç®¡ç†å™¨æ¥åè°ƒè™šæ‹Ÿæœºå’Œå®¿ä¸»æ“ä½œç³»ç»Ÿä¹‹é—´çš„ç¡¬ä»¶è®¿é—®ã€‚ï¼ˆKVMï¼‰ æœåŠ¡å™¨è™šæ‹ŸåŒ–æŠ€æœ¯çš„åˆ†ç±»ï¼š æŒ‰ç…§è™šæ‹Ÿå¯¹è±¡æ¥åˆ†å¯åˆ†ä¸ºï¼šCPU è™šæ‹ŸåŒ–ã€å†…å­˜è™šæ‹ŸåŒ–ã€I/O è™šæ‹ŸåŒ–ï¼› æŒ‰ç…§è™šæ‹ŸåŒ–ç¨‹åº¦åˆ†ï¼šå…¨è™šæ‹ŸåŒ–ã€åŠè™šæ‹ŸåŒ–ã€ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚ è™šæ‹ŸåŒ–çš„ç‰¹ç‚¹ï¼š åˆ†åŒºï¼šåœ¨å•ä¸€ç‰©ç†æœåŠ¡å™¨ä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœº éš”ç¦»ï¼šåœ¨å•ä¸€ç‰©ç†æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªè™šæ‹Ÿæœºä¹‹é—´ç›¸äº’éš”ç¦» å°è£…ï¼šæ•´ä¸ªè™šæ‹Ÿæœºæ‰§è¡Œç¯å¢ƒå°è£…åœ¨ç‹¬ç«‹æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ç§»åŠ¨æ–‡ä»¶çš„æ–¹å¼æ¥è¿ç§»è¯¥è™šæ‹Ÿæœº ç›¸å¯¹äºç¡¬ä»¶éš”ç¦»ï¼šè™šæ‹Ÿæœºæ— éœ€ä¿®æ”¹ï¼Œå³å¯åœ¨ä»»ä½•æœåŠ¡å™¨ä¸Šè¿è¡Œ CPU è™šæ‹ŸåŒ– CPU è™šæ‹ŸåŒ–åˆ†ä¸º CPU å…¨è™šæ‹ŸåŒ–æŠ€æœ¯ã€CPU åŠè™šæ‹ŸåŒ–æŠ€æœ¯ä»¥åŠ CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚CPUçš„è™šæ‹ŸåŒ–æŠ€æœ¯å¯ä»¥å•CPUæ¨¡æ‹Ÿå¤šCPUå¹¶è¡Œï¼Œå…è®¸ä¸€ä¸ªå¹³å°åŒæ—¶è¿è¡Œå¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ç›¸äº’ç‹¬ç«‹çš„ç©ºé—´å†…è¿è¡Œè€Œäº’ä¸å½±å“ï¼Œä»è€Œæ˜¾è‘—æé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡ã€‚ CPU å…¨è™šæ‹ŸåŒ– CPU å…¨è™šæ‹ŸåŒ–ä¸»è¦é‡‡ç”¨ä¼˜å…ˆçº§å‹ç¼©æŠ€æœ¯ï¼ˆRing Compressionï¼‰å’Œ äºŒè¿›åˆ¶ä»£ç ç¿»è¯‘æŠ€æœ¯ï¼ˆBinary Translationï¼‰ã€‚ä¼˜å…ˆçº§å‹ç¼©æŠ€æœ¯è®© VMM å’Œ Guest è¿è¡Œåœ¨ä¸åŒçš„ç‰¹æƒçº§ä¸‹ã€‚ å¯¹ X86 æ¶æ„è€Œè¨€ï¼Œå³ VMM è¿è¡Œåœ¨æœ€é«˜ç‰¹æƒçº§åˆ« Ring 0 ä¸‹ï¼ŒGuest OS è¿è¡Œåœ¨Ring 1 ä¸‹ï¼Œç”¨æˆ·åº”ç”¨è¿è¡Œåœ¨ Ring 3 ä¸‹ã€‚å› æ­¤ Guest OS çš„æ ¸å¿ƒæŒ‡ä»¤æ— æ³•ç›´æ¥ä¸‹è¾¾ åˆ°è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶æ‰§è¡Œï¼Œè€Œæ˜¯éœ€è¦ç»è¿‡ VMM çš„æ•è·å’Œæ¨¡æ‹Ÿæ‰§è¡Œï¼ˆéƒ¨åˆ†éš¾ä»¥è™šæ‹ŸåŒ–çš„æŒ‡ä»¤éœ€è¦é€šè¿‡ Binary TranslationæŠ€æœ¯è¿›è¡Œè½¬æ¢ï¼‰ã€‚ CPU åŠè™šæ‹ŸåŒ– CPU åŠè™šæ‹ŸåŒ–ä¸»è¦é‡‡ç”¨ Hypercall æŠ€æœ¯ã€‚Guest OS çš„éƒ¨åˆ†ä»£ç è¢«æ”¹å˜ï¼Œä»è€Œä½¿ Guest OS ä¼šå°†å’Œç‰¹æƒæŒ‡ä»¤ç›¸å…³çš„æ“ä½œéƒ½è½¬æ¢ä¸ºå‘ç»™ VMM çš„ Hypercallï¼ˆè¶…çº§è°ƒç”¨ï¼‰ï¼Œç”± VMM ç»§ç»­è¿›è¡Œå¤„ç†ã€‚è€ŒHypercall æ”¯æŒçš„æ‰¹å¤„ç†å’Œå¼‚æ­¥è¿™ä¸¤ç§ä¼˜åŒ–æ–¹å¼ï¼Œä½¿å¾—é€šè¿‡ Hypercall èƒ½å¾—åˆ°è¿‘ä¼¼äºç‰©ç†æœºçš„é€Ÿåº¦ã€‚ CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ç›®å‰ä¸»è¦æœ‰ Intel çš„ VT-x å’Œ AMD çš„ AMD-V è¿™ä¸¤ç§æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯é€šè¿‡å¼•å…¥æ–°çš„æŒ‡ä»¤å’Œè¿è¡Œæ¨¡å¼ï¼Œä½¿ VMM å’Œ Guest OS åˆ†åˆ«è¿è¡Œåœ¨ä¸åŒæ¨¡å¼ï¼ˆROOT æ¨¡å¼å’Œé ROOT æ¨¡å¼ï¼‰ä¸‹ï¼Œä¸” Guest OS è¿è¡Œåœ¨ Ring 0 ä¸‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒGuest OS çš„æ ¸å¿ƒæŒ‡ä»¤å¯ä»¥ç›´æ¥ä¸‹è¾¾åˆ°è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶æ‰§è¡Œï¼Œè€Œä¸éœ€è¦ç»è¿‡ VMMã€‚å½“ Guest OS æ‰§è¡Œåˆ°ç‰¹æ®ŠæŒ‡ä»¤çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ° VMMï¼Œè®© VMM æ¥å¤„ç†ç‰¹æ®ŠæŒ‡ä»¤ã€‚ å†…å­˜è™šæ‹ŸåŒ– å†…å­˜è™šæ‹ŸåŒ–çš„äº§ç”Ÿæºäº VMM ä¸å®¢æˆ·ç³»ç»Ÿåœ¨å¯¹ç‰©ç†å†…å­˜çš„è®¤è¯†ä¸Šå­˜åœ¨å†²çªï¼Œé€ æˆç‰©ç†å†…å­˜çœŸæ­£æ‹¥æœ‰è€…â€”â€” VMM å¿…é¡»å¯¹ç³»ç»Ÿè®¿é—®çš„å†…å­˜è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„è™šæ‹ŸåŒ–ã€‚ å†…å­˜å…¨è™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡ä½¿ç”¨å½±å­é¡µè¡¨ï¼ˆShadow Page Tableï¼‰å®ç°è™šæ‹ŸåŒ–ã€‚ VMM ä¸ºæ¯ä¸ªGuest éƒ½ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨ï¼Œå½±å­é¡µè¡¨ç»´æŠ¤è™šæ‹Ÿåœ°å€ï¼ˆVAï¼‰åˆ°æœºå™¨åœ°å€ï¼ˆMAï¼‰çš„æ˜ å°„å…³ç³»ã€‚è€Œ Guest é¡µè¡¨ç»´æŠ¤ VA åˆ°å®¢æˆ·æœºç‰©ç†åœ°å€ï¼ˆGPAï¼‰çš„æ˜ å°„å…³ç³»ã€‚ å½“ VMM æ•è·åˆ° Guest é¡µè¡¨çš„ä¿®æ”¹åï¼ŒVMM ä¼šæŸ¥æ‰¾è´Ÿè´£ GPA åˆ° MA æ˜ å°„çš„ P2M é¡µè¡¨æˆ–è€…å“ˆå¸Œå‡½æ•°ï¼Œæ‰¾åˆ°ä¸è¯¥ GPA å¯¹åº”çš„ MAï¼Œå†å°† MA å¡«å……åˆ°çœŸæ­£åœ¨ç¡¬ä»¶ä¸Šèµ·ä½œç”¨çš„å½±å­é¡µè¡¨ï¼Œä»è€Œå½¢æˆ VA åˆ° MA çš„æ˜ å°„å…³ç³»ã€‚è€Œ Guest çš„é¡µè¡¨åˆ™æ— éœ€å˜åŠ¨ã€‚ å†…å­˜åŠè™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡ä½¿ç”¨é¡µè¡¨å†™å…¥æ³•å®ç°è™šæ‹ŸåŒ–ã€‚ Guest OS åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µè¡¨æ—¶ï¼Œä¼šå‘ VMM æ³¨å†Œè¯¥é¡µè¡¨ã€‚ä¹‹ååœ¨ Guest è¿è¡Œçš„æ—¶å€™ï¼ŒVMM å°†ä¸æ–­çš„ç®¡ç†å’Œç»´æŠ¤è¿™ä¸ªè¡¨ï¼Œä½¿ Guest ä¸Šé¢çš„ç¨‹åºèƒ½ç›´æ¥è®¿é—®åˆ°åˆé€‚çš„åœ°å€ã€‚ å†…å­˜ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡æ‰©å±•é¡µè¡¨ EPTï¼ˆextended page tableï¼‰å®ç°è™šæ‹ŸåŒ–ã€‚ EPT é€šè¿‡ä½¿ç”¨ç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä½¿å…¶èƒ½åœ¨åŸæœ‰çš„é¡µè¡¨çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ª EPT é¡µè¡¨ï¼Œç”¨äºè®°å½• GPA åˆ° MA çš„æ˜ å°„å…³ç³»ã€‚VMM é¢„å…ˆæŠŠ EPT é¡µè¡¨è®¾ç½®åˆ° CPU ä¸­ã€‚ Guest ä¿®æ”¹ Guest é¡µè¡¨ï¼Œæ— éœ€ VMM å¹²é¢„ã€‚åœ°å€è½¬æ¢æ—¶ï¼ŒCPU è‡ªåŠ¨æŸ¥æ‰¾ä¸¤å¼ é¡µè¡¨å®Œæˆ Guest è™šæ‹Ÿåœ°å€åˆ°æœºå™¨åœ°å€çš„è½¬æ¢ï¼Œä»è€Œé™ä½æ•´ä¸ªå†…å­˜è™šæ‹ŸåŒ–æ‰€éœ€çš„å¼€é”€ã€‚ é˜¿é‡Œäº‘åŠé˜¿é‡Œäº‘äº‘è®¡ç®—è®¤è¯ é˜¿é‡Œäº‘ ACP è®¤è¯æ˜¯é¢å‘ä½¿ç”¨é˜¿é‡Œäº‘äº‘è®¡ç®—äº§å“çš„æ¶æ„ã€å¼€å‘ã€è¿ç»´äººå‘˜çš„ä¸“ä¸šæŠ€æœ¯è®¤è¯ï¼Œä¸»è¦æ¶‰åŠé˜¿é‡Œäº‘çš„è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€å®‰å…¨ç±»çš„æ ¸å¿ƒäº§å“ã€‚è¯¥è®¤è¯åœ¨ 2020 å¹´ 1 æœˆ 15 æ—¥ä¹‹ååœ¨åŸæœ‰é€šè¿‡çº¿ä¸‹æœºè€ƒçš„è¦æ±‚ä¹‹ä¸Šæ–°å¢äº†å®Œæˆå‰ç½®å®éªŒçš„è¦æ±‚ï¼Œå…¶çº¿ä¸‹æœºè€ƒé¢˜åˆ†å•é€‰ï¼ˆ70 é“ï¼‰å’Œå¤šé€‰ï¼ˆ30 é“ï¼‰ä¸¤ç§é¢˜å‹ï¼Œæ¯é¢˜ 1 åˆ†ï¼Œæ€»åˆ† 100 åˆ†ï¼Œè€ƒç”Ÿéœ€è¾¾åˆ° 80 åˆ†ä»¥ä¸Šæ‰ç®—é€šè¿‡ã€‚ å…·ä½“è¦æ±‚å¯å‚è§å®˜æ–¹è€ƒè¯•å¤§çº²ã€‚ é˜¿é‡Œäº‘äº‘è®¡ç®—ç›¸å…³æ¦‚å¿µ ECS äº‘æœåŠ¡å™¨ ECS(Elastic Compute Service) æ˜¯ä¸€ç§ç®€å•é«˜æ•ˆã€å¤„ç†èƒ½åŠ›å¯å¼¹æ€§ä¼¸ç¼©çš„è®¡ç®—æœåŠ¡ã€‚å¸®åŠ©æ‚¨æ„å»ºæ›´ç¨³å®šã€å®‰å…¨çš„åº”ç”¨ï¼Œæå‡è¿ç»´æ•ˆç‡ï¼Œé™ä½ITæˆæœ¬ï¼Œä½¿æ‚¨æ›´ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡åˆ›æ–°ã€‚ SLB è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡SLBï¼ˆServer Load Balancerï¼‰æ˜¯ä¸€ç§å¯¹æµé‡è¿›è¡ŒæŒ‰éœ€åˆ†å‘çš„æœåŠ¡ï¼Œé€šè¿‡å°†æµé‡åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨æ¥æ‰©å±•åº”ç”¨ç³»ç»Ÿçš„ååèƒ½åŠ›ï¼Œå¹¶ä¸”å¯ä»¥æ¶ˆé™¤ç³»ç»Ÿä¸­çš„å•ç‚¹æ•…éšœï¼Œæå‡åº”ç”¨ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚é˜¿é‡Œäº‘è´Ÿè½½å‡è¡¡SLBåˆ†ä¸ºä¸¤ç±»ï¼šä¼ ç»Ÿå‹è´Ÿè½½å‡è¡¡CLBå’Œåº”ç”¨å‹è´Ÿè½½å‡è¡¡ALBã€‚ Auto Scaling å¼¹æ€§ä¼¸ç¼© å¼¹æ€§ä¼¸ç¼©ï¼ˆAuto Scalingï¼‰æ˜¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚å’Œç­–ç•¥è‡ªåŠ¨è°ƒæ•´è®¡ç®—èƒ½åŠ›ï¼ˆå³å®ä¾‹æ•°é‡ï¼‰çš„æœåŠ¡ã€‚æ‚¨å¯ä»¥æŒ‡å®šå®ä¾‹çš„ç±»å‹ï¼Œå³ECSå®ä¾‹æˆ–ECIå®ä¾‹ã€‚åœ¨ä¸šåŠ¡éœ€æ±‚å¢é•¿æ—¶ï¼Œå¼¹æ€§ä¼¸ç¼©è‡ªåŠ¨å¢åŠ æŒ‡å®šç±»å‹çš„å®ä¾‹ï¼Œæ¥ä¿è¯è®¡ç®—èƒ½åŠ›ï¼›åœ¨ä¸šåŠ¡éœ€æ±‚ä¸‹é™æ—¶ï¼Œå¼¹æ€§ä¼¸ç¼©è‡ªåŠ¨å‡å°‘æŒ‡å®šç±»å‹çš„å®ä¾‹ï¼Œæ¥èŠ‚çº¦æˆæœ¬ã€‚å¼¹æ€§ä¼¸ç¼©ä¸ä»…é€‚åˆä¸šåŠ¡é‡ä¸æ–­æ³¢åŠ¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ä¹Ÿé€‚åˆä¸šåŠ¡é‡ç¨³å®šçš„åº”ç”¨ç¨‹åºã€‚ OSS å¯¹è±¡å­˜å‚¨ é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSï¼ˆObject Storage Serviceï¼‰æ˜¯ä¸€æ¬¾æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ï¼Œå¯æä¾›99.9999999999%ï¼ˆ12ä¸ª9ï¼‰çš„æ•°æ®æŒä¹…æ€§ï¼Œ99.995%çš„æ•°æ®å¯ç”¨æ€§ã€‚å¤šç§å­˜å‚¨ç±»å‹ä¾›é€‰æ‹©ï¼Œå…¨é¢ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚ OSSå…·æœ‰ä¸å¹³å°æ— å…³çš„RESTful APIæ¥å£ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„APIã€SDKæ¥å£æˆ–è€…OSSè¿ç§»å·¥å…·è½»æ¾åœ°å°†æµ·é‡æ•°æ®ç§»å…¥æˆ–ç§»å‡ºé˜¿é‡Œäº‘OSSã€‚æ•°æ®å­˜å‚¨åˆ°é˜¿é‡Œäº‘OSSä»¥åï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ ‡å‡†å­˜å‚¨ï¼ˆStandardï¼‰ä½œä¸ºç§»åŠ¨åº”ç”¨ã€å¤§å‹ç½‘ç«™ã€å›¾ç‰‡åˆ†äº«æˆ–çƒ­ç‚¹éŸ³è§†é¢‘çš„ä¸»è¦å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æˆæœ¬æ›´ä½ã€å­˜å‚¨æœŸé™æ›´é•¿çš„ä½é¢‘è®¿é—®å­˜å‚¨ï¼ˆInfrequent Accessï¼‰ã€å½’æ¡£å­˜å‚¨ï¼ˆArchiveï¼‰ã€å†·å½’æ¡£å­˜å‚¨ï¼ˆCold Archiveï¼‰ä½œä¸ºä¸ç»å¸¸è®¿é—®æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚ CDN å†…å®¹åˆ†å‘ç½‘ç»œ é˜¿é‡Œäº‘å†…å®¹åˆ†å‘ç½‘ç»œCDNï¼ˆContent Delivery Networkï¼‰æ˜¯å»ºç«‹å¹¶è¦†ç›–åœ¨æ‰¿è½½ç½‘ä¹‹ä¸Šï¼Œç”±éå¸ƒå…¨çƒçš„è¾¹ç¼˜èŠ‚ç‚¹æœåŠ¡å™¨ç¾¤ç»„æˆçš„åˆ†å¸ƒå¼ç½‘ç»œã€‚é˜¿é‡Œäº‘CDNèƒ½åˆ†æ‹…æºç«™å‹åŠ›ï¼Œé¿å…ç½‘ç»œæ‹¥å¡ï¼Œç¡®ä¿åœ¨ä¸åŒåŒºåŸŸã€ä¸åŒåœºæ™¯ä¸‹åŠ é€Ÿç½‘ç«™å†…å®¹çš„åˆ†å‘ï¼Œæé«˜èµ„æºè®¿é—®é€Ÿåº¦ã€‚ VPC ä¸“æœ‰ç½‘ç»œ ä¸“æœ‰ç½‘ç»œæ˜¯æ‚¨ä¸“æœ‰çš„äº‘ä¸Šç§æœ‰ç½‘ç»œã€‚æ‚¨å¯ä»¥å®Œå…¨æŒæ§è‡ªå·±çš„ä¸“æœ‰ç½‘ç»œï¼Œä¾‹å¦‚é€‰æ‹©IPåœ°å€èŒƒå›´ã€é…ç½®è·¯ç”±è¡¨å’Œç½‘å…³ç­‰ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±å®šä¹‰çš„ä¸“æœ‰ç½‘ç»œä¸­ä½¿ç”¨é˜¿é‡Œäº‘èµ„æºï¼Œå¦‚äº‘æœåŠ¡å™¨ã€äº‘æ•°æ®åº“RDSå’Œè´Ÿè½½å‡è¡¡ç­‰ã€‚ äº‘ç›¾å’Œäº‘ç›‘æ§ äº‘ç›¾å’Œäº‘ç›‘æ§æ˜¯æŒ‡é˜¿é‡Œæ¨å‡ºçš„é’ˆå¯¹äº‘äº§å“çš„å®‰å…¨é˜²å¾¡ä»¥åŠç›‘æµ‹ç³»ç»Ÿã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"ACP","slug":"å­¦ä¹ /ACP","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/ACP/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"},{"name":"ACP","slug":"ACP","permalink":"https://skinyi.github.io/tags/ACP/"},{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"https://skinyi.github.io/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"https://skinyi.github.io/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"}]},{"title":"å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°","slug":"Excel | å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°","date":"2022-03-05T12:51:48.680Z","updated":"2022-03-13T02:17:58.370Z","comments":true,"path":"2022-03-05-Excel | å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°.html","link":"","permalink":"https://skinyi.github.io/2022-03-05-Excel%20|%20%E5%AE%87%E5%AE%99%E7%9A%84%E5%B0%BD%E5%A4%B4%E6%98%AF%E8%80%83%E5%85%AC%E4%B9%8B%E8%AF%9D%E8%AF%B4%20vlookup%20%E5%87%BD%E6%95%B0.html","excerpt":"","text":"åºŸè¯ è¿™ç¯‡æ–‡ç« æ„æ€äº†å¾ˆä¹…äº†ï¼Œå¥ˆä½•å»å¤–åœ°å‡ºå·®åŠ ç­ä»Šå¤©æ‰æŠ½å‡ºæ™šä¸Šçš„æ—¶é—´æ¥å†™ï¼Œåšç§ä¼çš„ç¤¾ç•œç¡®å®æ²¡æœ‰å…¬åŠ¡å‘˜å®‰é€¸ã€‚å®å¤å…¬åŠ¡å‘˜æ‹›è€ƒå…¬å‘Šåˆšå‘å¸ƒï¼Œä»Šæ—¥å¤´æ¡ä¾¿æ¨é€è¿‡æ¥äº†æ–°é—»ï¼Œæˆ‘ä¹Ÿå°±å…³æ³¨äº†ä¸‹ã€‚æˆªè‡³ 3 æœˆ 2 æ—¥ 10 ç‚¹ï¼Œå®å¤æŠ¥åäººæ•°è¾¾åˆ°äº† 73095 äººï¼Œç¤¾ä¼šå‘å±•è´«å¯Œå·®è·æ‹‰å¤§ä»¥åŠè¿‘å¹´ç–«æƒ…å½±å“ä¸‹äººä»¬è¿½æ±‚å®‰ç¨³é¥­ç¢—çš„è§‚å¿µæ„ˆå‘æ·±å…¥äººå¿ƒäº†ã€‚ç”Ÿæ´»å®‰ç¨³ã€å·¥ä½œä½“é¢çš„ä½“åˆ¶å†…äººå‘˜åœ¨å©šæ‹å¸‚åœºéƒ½æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œæ¯å½“æˆ‘å¦ˆæ‰‹æœºé‡Œçš„å¿«æ‰‹ç›´æ’­é—´æ“ç€æ–¹è¨€çš„åª’å©†è¯´â€œè¿™å®¶å¥³å­æƒ³æ‰¾ä¸ªä½“åˆ¶å†…çš„å‘¢â€ï¼Œèº«åœ¨æ´»å¤šé’±å°‘çš„ç§ä¼çš„æˆ‘çš„å¯‚å¯çš„å†…å¿ƒé¡¿æ—¶å“‡å‡‰å“‡å‡‰çš„ã€‚äºæ˜¯æˆ‘å†³å®šçœ‹çœ‹ä»Šå¹´çš„æŠ¥è€ƒäººæ•°æ‰“ç®—æ‰“ç®—ï¼Œä¸è¡Œå°±äº‰å–ä¸ªä»¥ååšæˆ‘ç°åœ¨å…¬å¸ç”²æ–¹çˆ¸çˆ¸çš„æœºä¼šï¼Œæƒ³ç€æˆ‘ä»¥ååˆéš¾æˆ‘ç°åœ¨åŒäº‹æ—¶çš„å¨é£ï¼Œå˜´è§’ä¸ç¦ä¸Šæ‰¬äº†èµ·æ¥ã€‚ é—®é¢˜çš„æå‡º æš—ä¸­è§‚å¯Ÿåˆ°äº† 3 æœˆ 2 æ—¥ï¼ŒæŠ¥åæˆªæ­¢çš„æœ€åä¸€å¤©ï¼Œ10 ç‚¹å‡ºäº†æœ€åä¸€æ¬¡çš„æŠ¥è€ƒäººæ•°å…¬ç¤ºã€‚ç»Ÿè®¡äº†ä¸‹æœ€é«˜ç¼´è´¹æ‹›è€ƒæ¯”çš„èŒä½æ˜¯ 437:1 çš„æ°‘é©é“¶å·å¸‚å§”å‘˜ä¼šä¸€çº§ç§‘å‘˜ï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¸ªèŒä½æœ‰ä»€ä¹ˆå¸å¼•äººçš„åœ°æ–¹ã€‚æˆ‘ä¹Ÿæ ¹æ®æˆ‘è‡ªèº«çš„æƒ³æ³•ï¼Œå°†èŒä½è¿‡æ»¤äº†ä¸€éï¼Œæœ€ç»ˆç­›å‡ºæ¥çš„å¤§è‡´è‡ªèº«æ¡ä»¶ä¸å—é™å¯æŠ¥çš„èŒä½æœ‰ 25 ä¸ªï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¦å†³å®šæŠ¥å“ªä¸ªäº†ï¼Œæˆ‘æƒ³ç€æ ¹æ®ç¼´è´¹æ‹›è€ƒæ¯”é€‰æœ€ä½çš„é‚£ä¸ªç«äº‰ä¼šå°ä¸€äº›ã€‚è¦ä» 25 ä¸ªèŒä½ä¸­ä¸€ä¸€æ¯”å¯¹ç®—ç¼´è´¹æ‹›è€ƒæ¯”å¹¶è¿›è¡Œæ¯”è¾ƒç¡®å®æœ‰ç‚¹è´¹åŠ²ï¼Œå¦‚æœèƒ½è®¡ç®—æœºè¾…åŠ©çš„å®Œæˆè¿™ä¸ªä»»åŠ¡ä¼šæ›´å¥½äº›ã€‚ é—®é¢˜åˆ†æ æˆ‘æ¯”å¯¹äº†è¿™ä¸¤å¼ è¡¨ï¼Œå‘ç°ä»–ä»¬æœ‰ä¸¤ä¸ªå…±åŒçš„åˆ—ï¼šèŒä½åç§°å’ŒèŒä½ä»£ç ã€‚çœ‹åˆ°èŒä½ä»£ç ï¼Œä½œä¸ºæŠ€æœ¯äººå‘˜çš„æˆ‘æƒ³åˆ°äº†ä¸»é”®å’Œ SQLã€‚å¦‚æœèƒ½åœ¨ Excel ä¸­æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œæˆ‘ä¸Šé¢çš„é—®é¢˜ä¸éš¾è§£å†³è€Œä¸”å¼ºå¤§çš„ Excel ä¹Ÿç¡®å®å†…ç½®äº†å¯¹ SQL çš„æ”¯æŒï¼Œä½†å…¶å®åƒæˆ‘ç°åœ¨çš„é—®é¢˜æ ¹æœ¬ç”¨ä¸ç€è¿™ä¹ˆå¤æ‚çš„æ–¹æ³•ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ç”¨ Excel æ•°æ®å¤„ç†çš„å‡½æ•°å¤§æ³•ã€‚ ä»¥ä¸Šé—®é¢˜çš„è§£å†³æ€è·¯å¯ä»¥è¢«åˆ†è§£ä¸ºï¼š1. ä»è¡¨äºŒæ ¹æ®è¡¨ä¸€ç­›é€‰å‡ºæ¥çš„èŒä½ä»£ç ï¼ˆèŒä½åç§°ä¹Ÿè¡Œï¼Œä½†æˆ‘è¿˜æ˜¯ä¹ æƒ¯ç”¨å¯ä»¥æ ‡è¯†å”¯ä¸€æ€§çš„ä»£ç ä¸²ï¼‰æŸ¥å‡ºç¼´è´¹äººæ•°å’Œæ‹›è€ƒäººæ•°å¹¶è®°å½•åœ¨è¡¨ä¸€ï¼›2. åœ¨è¡¨ä¸€è®¡ç®—ç¼´è´¹å’Œæ‹›è€ƒäººæ•°çš„æ¯”ä¾‹ï¼›3. è¡¨ä¸€æ ¹æ®æ­¤æ¯”ä¾‹è¿›è¡Œæ’åºï¼›4. ä»è¡¨ä¸€æ ¹æ®æ’åºç»“æœç»¼åˆè‡ªèº«å…¶ä»–æ„æ„¿é€‰æ‹©æŠ¥è€ƒèŒä½ã€‚ ä»¥ä¸Šè§£å†³æ–¹æ³•ä¸­æœ€éš¾çš„å…¶å®æ˜¯ç¬¬ä¸€æ­¥ï¼Œå…¶ä»–æ–¹æ³•ä¸­æ¶‰åŠçš„è®¡ç®—å’Œæ’åºéƒ½ååˆ†ç®€å•ã€‚å¾ˆå¤šäººéƒ½ä¸å¤ªä¼šç”¨åˆ° Excel æä¾›çš„ä¸€ä¸ªå¼ºå¤§çš„æŸ¥æ‰¾å‡½æ•° vlookup å¯ä»¥æ»¡è¶³æ­¥éª¤ä¸€çš„éœ€è¦ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªå‡½æ•°çš„ä»‹ç»ï¼š VLOOKUP(lookup_value,table_array,col_index_num,[range_lookup]) æŒ‰è¡ŒæŸ¥æ‰¾è¡¨æ ¼æˆ–åŒºåŸŸå†…å®¹ å…¶ä¸­å„å‚æ•°çš„æ„ä¹‰æ˜¯ï¼š lookup_valueï¼šè¦æŸ¥æ‰¾çš„å€¼ï¼Œä¹Ÿè¢«ç§°ä¸ºæŸ¥é˜…å€¼ï¼ˆè¯¥å‚æ•°æ—¢å¯ä»¥æ˜¯å•å…ƒæ ¼ä¹Ÿå¯ä»¥æ˜¯å®šå€¼ï¼‰ã€‚ table_arrayï¼šæŸ¥é˜…å€¼æ‰€åœ¨çš„åŒºåŸŸã€‚ éœ€æ³¨æ„ï¼šæŸ¥é˜…å€¼åº”è¯¥å§‹ç»ˆä½äºæ‰€åœ¨åŒºåŸŸçš„ç¬¬ä¸€åˆ—ï¼Œè¿™æ · VLOOKUP æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥é˜…å€¼ä½äºå•å…ƒæ ¼ C2 å†…ï¼Œé‚£ä¹ˆä½ çš„åŒºåŸŸåº”è¯¥ä»¥ C å¼€å¤´ã€‚ col_index_numï¼šåŒºåŸŸä¸­åŒ…å«è¿”å›å€¼çš„åˆ—å·ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŒ‡å®š B2ï¼šD11 ä½œä¸ºåŒºåŸŸï¼Œåˆ™åº”è¯¥å°† B è®¡ä¸ºç¬¬ä¸€åˆ—ï¼Œå°† C ä½œä¸ºç¬¬äºŒåˆ—ï¼Œä»¥æ­¤ç±»æ¯”ã€‚ range_lookupï¼šï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦è¿”å›å€¼çš„è¿‘ä¼¼åŒ¹é…ï¼Œå¯ä»¥æŒ‡å®š TRUEï¼›å¦‚æœéœ€è¦è¿”å›å€¼çš„ç²¾ç¡®åŒ¹é…ï¼Œåˆ™æŒ‡å®š FALSEã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šä»»ä½•å†…å®¹ï¼Œé»˜è®¤å€¼å°†å§‹ç»ˆä¸º TRUE æˆ–è¿‘ä¼¼åŒ¹é…ã€‚ è§£å†³æ­¥éª¤ äº†è§£è¿™ä¸ªå‡½æ•°ä¹‹åå°±å¾ˆç®€å•äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨è¡¨ä¸€æ‰€åœ¨çš„å·¥ä½œç°¿æ–°å»ºå·¥ä½œè¡¨ï¼Œå°†è¡¨äºŒçš„å†…å®¹å¤åˆ¶è¿‡å»ï¼Œå¦‚å›¾ï¼š åœ¨èŒä½è¡¨æ–°å»ºåˆ—ï¼šç¼´è´¹äººæ•°ã€ç¼´è´¹æ‹›è€ƒæ¯”ã€‚èŒä½è¡¨çš„ç»“æ„å°±å˜æˆäº†ï¼š â—¢ A B C D E F G H I J K L M N O P 1 åºå· æ‹›è€ƒå•ä½ éƒ¨é—¨åŠèŒä½ èŒä½ç®€ä»‹ èŒä½ä»£ç  æ‹›è€ƒäººæ•° ä¸“ä¸šè¦æ±‚ å­¦å†è¦æ±‚ å­¦ä½è¦æ±‚ æ”¿æ²»é¢è²Œ å…¶ä»–æ¡ä»¶ å¤‡æ³¨ ç”³è®ºè¯•å·ç±»å‹ è”ç³»ç”µè¯ ç¼´è´¹äººæ•° ç¼´è´¹æ‹›è€ƒæ¯” 308 304 çŸ³å˜´å±±å¸‚ çŸ³å˜´å±±å¸‚å¸‚ç›´éƒ¨é—¨ä¸€çº§ç§‘å‘˜ï¼ˆä¸€ï¼‰ è´Ÿè´£ç»¼åˆç®¡ç†æœåŠ¡ã€ä¿¡æ¯åŒ–å»ºè®¾ã€å·¥ç¨‹å»ºè®¾é¡¹ç›®è§„åˆ’ã€é¡¹ç›®å®¡æ‰¹ç­‰å·¥ä½œ 017001 2 è®¡ç®—æœºç±»ã€ç”µå­ä¿¡æ¯ç±»ã€å»ºç­‘ç±»ã€æ°´åˆ©ç±» æœ¬ç§‘åŠä»¥ä¸Š å­¦å£«åŠä»¥ä¸Š ä¸é™ é™ç”·æ€§ åˆå¹¶èŒä½ï¼šå¸‚äººåŠ›èµ„æºå’Œç¤¾ä¼šä¿éšœå±€1äººã€æ°‘æ”¿å±€1äººã€å›¢å¸‚å§”ï¼ˆå‚ç…§å…¬åŠ¡å‘˜æ³•ç®¡ç†ç¾¤å›¢æœºå…³ï¼‰1äººã€å°±ä¸šåˆ›ä¸šæœåŠ¡å±€ï¼ˆå‚ç…§å…¬åŠ¡å‘˜æ³•ç®¡ç†äº‹ä¸šå•ä½ï¼‰1äºº Aå· 0952-2012332 0952-2218747 140 70 ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ç„¶åå°±å¯ä»¥ç”¨ vlookup å‡½æ•°è‡ªåŠ¨ä»ç»Ÿè®¡è¡¨æ ¹æ®èŒä½ä»£ç æŸ¥æ‰¾åˆ°å¯¹åº”èŒä½çš„ç¼´è´¹äººæ•°ã€‚ç®€å•èµ·è§ï¼Œå¯ä»¥ç”¨ Excel çš„å‡½æ•°å‘å¯¼æ‰‹åŠ¨å¯è§†åŒ–çš„é€‰æ‹©æˆ–ç¡®å®šå‡ºå‡½æ•°çš„å‚æ•°ï¼Œä»èœå•æ é€‰ä¸­ï¼šå…¬å¼-æ’å…¥å‡½æ•°ï¼Œåœ¨æœç´¢å‡½æ•°å¯¹è¯æ¡†é‡Œè¾“å…¥ vlookup å¹¶ç‚¹å‡»è½¬åˆ°ï¼Œç„¶åç¡®ä¿ä»é€‰æ‹©å‡½æ•°ä¸­é€‰ä¸­ vlookup åç‚¹å‡»ç¡®å®šã€‚ ç‚¹å‡»æ¯é¡¹å‚æ•°åé¢çº¢åœˆé‡Œçš„æŒ‰é’®å°±å¯ä»¥åœ¨å·¥ä½œè¡¨ä¸­é€‰æ‹©å‚æ•°æˆ–å‚æ•°èŒƒå›´ï¼š æœ€ç»ˆå®Œæ•´å‡½æ•°å½¢å¼æ˜¯ï¼š=VLOOKUP(E308,ç»Ÿè®¡è¡¨!D2:I765,6,0)ï¼Œæ„æ€æ˜¯ä»ç»Ÿè®¡è¡¨çš„ D2 åˆ° I765 çš„å•å…ƒæ ¼èŒƒå›´å†…å¯¹æ¯” D åˆ—çš„å€¼æ˜¯å¦ä¸º E308 é‡Œçš„å€¼ï¼Œè‹¥ç²¾ç¡®åŒ¹é…åˆ™è¿”å›è¯¥å•å…ƒæ ¼æ‰€é€‰èŒƒå›´çš„ç¬¬å…­è¡Œçš„å€¼ä¸ºè¯¥å‡½æ•°çš„ç»“æœã€‚ è§‚å¯Ÿä¹‹åå‘ç°å¯¹åº”æ­£ç¡®ï¼Œç„¶åå°±å¯ä»¥ç”¨ Excel å¼ºå¤§çš„å¡«å……å·¥å…·å°†å…¶ä»–èŒä½çš„ç¼´è´¹äººæ•°ä¹Ÿæ ¹æ®ç¬¬ä¸€ä¸ªç­›é€‰å‡ºæ¥çš„å²—ä½å¡«å……è¿›å»ã€‚åœ¨æˆ‘çš„æ“ä½œä¸­ï¼Œå¡«å……åçš„å‡½æ•°è™½ç„¶æœ‰é—®é¢˜ä½†å·¥ä½œè‰¯å¥½ï¼Œå› ä¸ºèŒä½è¡¨å’Œç»Ÿè®¡è¡¨çš„èŒä½è¡¨çš„æ’åºæ˜¯å¯¹åº”çš„ï¼Œæ­¤æ—¶è‹¥åœ¨æœªå¯¹åº”çš„æƒ…å†µä¸‹å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæœ‰çš„å•å…ƒæ ¼å¯èƒ½ä¼šå‡ºç° #N/A å€¼ã€‚ é—®é¢˜æ€è€ƒ é€ æˆä¸Šè¿°é—®é¢˜çš„åŸå› æ˜¯æˆ‘ä»¬æœªé”å®š table_array å‚æ•°çš„æ‰€é€‰èŒƒå›´çš„è¡Œå€¼ï¼Œæ¯æ¬¡å¾€ä¸‹ä¸‹æ‹‰å¡«å……ç»Ÿè®¡èŒƒå›´çš„è¡Œå€¼éƒ½ä¼šè‡ªå¢ï¼Œå¦‚æˆ‘åœ¨ä¸‹é¢éšä¾¿é€‰ä¸­çš„ä¸€ä¸ªå¡«å……åçš„å•å…ƒæ ¼çš„å…¬å¼å˜æˆäº†ï¼š=VLOOKUP(E615,ç»Ÿè®¡è¡¨!D486:I1249,6,0)ï¼Œè¿™åœ¨æ— åºæƒ…å†µä¸‹ä¼šå‡ºé”™ã€‚ ä¸ºäº†ä½¿è¯¥å‚æ•°å›ºå®šï¼Œå¯ä»¥å€ŸåŠ© $ ç¬¦å·è¿›è¡Œé™å®šï¼Œè¿™æ ·æ¯æ¬¡å¡«å……æ—¶è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸å˜çš„äº†ã€‚ äºæ˜¯ï¼Œç­›é€‰åçš„èŒä½è¡¨çš„ç¬¬ä¸€è¡Œçš„å…¬å¼å¯ä»¥å†™æˆï¼š=VLOOKUP(E308,ç»Ÿè®¡è¡¨!D$2:I$765,6,0)ï¼Œç„¶åå†å¾€ä¸‹å¡«å……ã€‚å†é€‰ä¸­åˆšæ‰å¡«å……çš„å…¬å¼ï¼Œå…¶å˜æˆäº†ï¼š=VLOOKUP(E615,ç»Ÿè®¡è¡¨!D$2:I$765,6,0)ï¼Œè¿™æ ·å°±æ¯”è¾ƒç²¾å‡†äº†ã€‚ è®¡ç®—ç¼´è´¹æ‹›è€ƒæ¯”ï¼Œä»¥ç­›é€‰åçš„èŒä½è¡¨çš„ç¬¬ä¸€è¡Œä¸ºä¾‹ï¼š=O308/F308ã€‚ç„¶åç”¨æ’åºå·¥å…·æ’åºå°±å®Œæˆä»»åŠ¡äº†ã€‚ è¿˜æ˜¯åºŸè¯ çœ‹äº†æœ€åçš„ç»“æœï¼Œä¸ä»…æ„Ÿå¹ç°åœ¨çš„å…¬åŠ¡å‘˜è€ƒè¯•è¶Šæ¥è¶Šå·ï¼Œæˆ‘ä¼°è®¡æˆ‘ä¹Ÿå°†åªä¼šæ˜¯é™ªè€ƒå‘˜ä¸­çš„ä¸€å‘˜ã€‚ç”±æ­¤çœ‹æ¥è¿˜æ˜¯å†é’»ç ”é’»ç ” Excel çš„ SQL æŸ¥è¯¢åŠŸèƒ½æ¯”è¾ƒç°å®ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Office","slug":"å­¦ä¹ /Office","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Office/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Excel","slug":"Excel","permalink":"https://skinyi.github.io/tags/Excel/"},{"name":"Office","slug":"Office","permalink":"https://skinyi.github.io/tags/Office/"},{"name":"é¿å…åŠ ç­","slug":"é¿å…åŠ ç­","permalink":"https://skinyi.github.io/tags/%E9%81%BF%E5%85%8D%E5%8A%A0%E7%8F%AD/"},{"name":"å°‘åŠ ç­","slug":"å°‘åŠ ç­","permalink":"https://skinyi.github.io/tags/%E5%B0%91%E5%8A%A0%E7%8F%AD/"}]},{"title":"Docker Run å‘½ä»¤è¯¦è§£","slug":"Docker | Docker Run å‘½ä»¤è¯¦è§£","date":"2022-03-01T12:31:09.667Z","updated":"2022-03-28T06:09:02.646Z","comments":true,"path":"2022-03-01-Docker | Docker Run å‘½ä»¤è¯¦è§£.html","link":"","permalink":"https://skinyi.github.io/2022-03-01-Docker%20|%20Docker%20Run%20%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html","excerpt":"","text":"Docker åœ¨éš”ç¦»çš„å®¹å™¨ä¸­è¿è¡Œè¿›ç¨‹ã€‚å®¹å™¨æ˜¯åœ¨ä¸»æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ã€‚ä¸»æœºå¯ä»¥æ˜¯æœ¬åœ°æˆ–è¿œç¨‹çš„ã€‚å½“æ‰§è¡Œ docker run æ—¶ï¼Œè¿è¡Œçš„å®¹å™¨è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºå®ƒæœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œå’Œè‡ªå·±çš„ç‹¬ç«‹äºä¸»æœºçš„è¿›ç¨‹æ ‘ã€‚ ä»¥ä¸‹ä»‹ç»äº†å¦‚ä½•åœ¨è¿è¡Œæ—¶ä½¿ç”¨ docker run å‘½ä»¤å®šä¹‰å®¹å™¨çš„èµ„æºã€‚ docker run å‘½ä»¤çš„ä¸€èˆ¬å½¢å¼ åŸºæœ¬çš„ docker run å‘½ä»¤é‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š 1\\$ docker run [é€‰é¡¹] IMAGE[:æ ‡ç­¾|@æ‘˜è¦] [å‘½ä»¤] [å‚æ•°...] docker run å‘½ä»¤å¿…é¡»æŒ‡å®šä»ä¸­ç”Ÿæˆå®¹å™¨çš„é•œåƒã€‚é•œåƒå¼€å‘äººå‘˜å¯ä»¥å®šä¹‰ä¸ä»¥ä¸‹å†…å®¹ç›¸å…³çš„é•œåƒé»˜è®¤å€¼ï¼š åˆ†ç¦»æˆ–å‰å°è¿è¡Œï¼› å®¹å™¨æ ‡è¯†ï¼› ç½‘ç»œè®¾ç½®ï¼› å¯¹CPUå’Œå†…å­˜çš„è¿è¡Œæ—¶çº¦æŸã€‚ é€šè¿‡ docker run [é€‰é¡¹] ç”¨æˆ·å¯ä»¥æ·»åŠ æˆ–è¦†ç›–å¼€å‘äººå‘˜è®¾ç½®çš„é•œåƒé»˜è®¤å€¼ã€‚æ­¤å¤–ï¼Œç”¨æˆ·å¯ä»¥è¦†ç›–å‡ ä¹æ‰€æœ‰ç”± Docker è¿è¡Œæ—¶æœ¬èº«è®¾ç½®çš„é»˜è®¤å€¼ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œdocker run æ¯”ä»»ä½•å…¶ä»– Docker å‘½ä»¤éƒ½æœ‰æ›´å¤šé€‰é¡¹ã€‚ ğŸŸ¢ æ ¹æ®ä½ çš„ Docker ç³»ç»Ÿé…ç½®ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ docker run å‘½ä»¤å‰é¢åŠ ä¸Š sudo ä»¥ç¡®ä¿å‘½ä»¤æ­£å¸¸æ‰§è¡Œç”Ÿæ•ˆã€‚ä¸ºäº†é¿å…åœ¨ docker å‘½ä»¤ä¸­ä½¿ç”¨ sudoï¼Œä½ çš„ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º docker çš„ Unix ç»„å¹¶å‘å…¶ä¸­æ·»åŠ  docker æ“ä½œç”¨æˆ·ã€‚ ä»…ç”¨æˆ·å¯æŒ‡å®šçš„é€‰é¡¹ ä»…æ‰§è¡Œ docker run å‘½ä»¤çš„ç”¨æˆ·å¯æŒ‡å®šä»¥ä¸‹å‘½ä»¤æ‰§è¡Œæ—¶çš„é€‰é¡¹ï¼š ç‹¬ç«‹è¿›ç¨‹æˆ–å‰å°æ‰§è¡Œ ç‹¬ç«‹è¿›ç¨‹ï¼ˆ-d é€‰é¡¹ï¼‰ å‰å°æ‰§è¡Œ å®¹å™¨æ ‡è¯† åç§°ï¼ˆ--name é€‰é¡¹ï¼‰ PID å€¼ IPC è®¾ç½®ï¼ˆ--ipcï¼‰ ç½‘ç»œè®¾ç½® é‡å¯ç­–ç•¥ï¼ˆ--restartï¼‰ æ¸…ç†ï¼ˆ--rmï¼‰ è¿è¡Œæ—¶èµ„æºçº¦æŸ è¿è¡Œæ—¶ç‰¹æƒåŠ Linux capabilities ç‹¬ç«‹è¿›ç¨‹æˆ–å‰å°æ‰§è¡Œ å½“å¯åŠ¨äº†ä¸€ä¸ª Docker å®¹å™¨ï¼Œä½ å¿…é¡»å…ˆå†³å®šä½ æ˜¯å¦æƒ³åœ¨åå°ä»¥â€œåˆ†ç¦»â€çš„æ¨¡å¼æˆ–è€…é»˜è®¤åœ¨å‰å°è¿è¡Œå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ -d[=&lt;true|false&gt;] é€‰é¡¹æ¥æŒ‡å®šåˆ†ç¦»å¼æ¨¡å¼ï¼Œå®¹å™¨ä¼šåœ¨åå°è¿è¡Œå¹¶æ‰“å°å‡ºè¯¥å®¹å™¨çš„ idã€‚ æ ¹æ®è®¾è®¡ï¼Œå½“ç”¨äºè¿è¡Œå®¹å™¨çš„æ ¹è¿›ç¨‹é€€å‡ºæ—¶ï¼Œä»¥åˆ†ç¦»æ¨¡å¼å¯åŠ¨çš„å®¹å™¨ä¹Ÿä¼šé€€å‡ºï¼Œé™¤éä½ è¿˜æŒ‡å®šäº† -rm é€‰é¡¹ã€‚å¦‚æœå°† -d ä¸ -rm ä¸€èµ·ä½¿ç”¨ï¼Œå½“å®¹å™¨é€€å‡ºæˆ–å®ˆæŠ¤ç¨‹åºé€€å‡ºæ—¶(æ— è®ºå“ªä¸ªå…ˆé€€å‡º)ï¼Œå®¹å™¨å°†è¢«åˆ é™¤ã€‚ ä¸è¦å‘åˆ†ç¦»æ¨¡å¼è¿è¡Œçš„å®¹å™¨ä¼ é€’ service xxx start çš„å‘½ä»¤ã€‚å¦‚ä»¥ä¸‹å‘½ä»¤å°è¯•åˆ›å»ºå®¹å™¨åå¯åŠ¨ nginx æœåŠ¡ã€‚ 1\\$ docker run -d -p 80:80 my_image service nginx start å³ä½¿è¿™ä¹Ÿä¼šæˆåŠŸçš„å¯åŠ¨å®¹å™¨å†…éƒ¨çš„ nginx æœåŠ¡ï¼Œä½†æ˜¯å®ƒä¸ç¬¦åˆåˆ†ç¦»çš„å®¹å™¨èŒƒä¾‹ï¼Œå› ä¸ºéšç€æ ¹è¿›ç¨‹ï¼ˆservice nginx startï¼‰çš„é€€å‡ºï¼Œåˆ†ç¦»å¼å®¹å™¨ä¹Ÿä¼šè·Ÿç€åœæ­¢ï¼Œä»è€Œå¯¼è‡´ nginx æœåŠ¡å¯åŠ¨äº†å´ä¸èƒ½ç”¨ã€‚è¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹å¦‚ nginx web æœåŠ¡å™¨åº”è¯¥æŒ‰ç…§ä¸‹è¿°æ–¹æ³•ï¼š 1\\$ docker run -d -p 80:80 my_image nginx -g &#x27;daemon off;&#x27; è¦ä½¿ç”¨åˆ†ç¦»çš„å®¹å™¨è¿›è¡Œè¾“å…¥/è¾“å‡ºåˆ™å¿…é¡»ä½¿ç”¨ç½‘ç»œè¿æ¥æˆ–å…±äº«å·ï¼Œå› ä¸ºè¯¥å®¹å™¨ä¸ä¼šç›‘å¬è¿è¡Œ docker run çš„å‘½ä»¤è¡Œã€‚ ä¸ºäº†å°†åˆ†ç¦»å‡ºå»çš„å®¹å™¨è½¬è‡³å‰å°è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ docker attach å‘½ä»¤ã€‚å°†è¿è¡Œäºå‰å°çš„å®¹å™¨åˆ‡è‡³åå°è¿è¡Œå¯ä»¥ä½¿ç”¨ Ctrl + p + q å¿«æ·é”®ã€‚ å‰å°è¿è¡Œ åœ¨å‰å°æ¨¡å¼ä¸‹ï¼ˆé»˜è®¤æ¨¡å¼å½“æœªæŒ‡å®š -d é€‰é¡¹ï¼‰ï¼Œdocker run å¯ä»¥å¯åŠ¨å®¹å™¨ä¸­çš„è¿›ç¨‹å¹¶ä¸”å°†å½“å‰ç»ˆç«¯é™„åŠ åˆ°è¯¥è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºä»¥åŠæ ‡å‡†é”™è¯¯æµä¸­ã€‚å®ƒç”šè‡³å¯ä»¥â€œå‡è£…â€æˆä¸ºä¸€ä¸ª TTY ä¼šè¯ï¼ˆå¦‚å¤§å¤šæ•°å‘½ä»¤è¡Œå¯æ‰§è¡Œæ–‡ä»¶æœŸæœ›çš„é‚£æ ·ï¼‰å¹¶ä¸”ä¼ é€’ä¿¡å·ã€‚ä»¥ä¸‹è¿™äº›é€‰é¡¹éƒ½æ˜¯å¯é…ç½®çš„ï¼š -a=[] ï¼šé™„åŠ åˆ°æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œ / æˆ–æ ‡å‡†é”™è¯¯æµ -t ï¼šåˆ†é…ä¸€ä¸ªä¼ª TTY --sig-proxy=trueï¼šå°†æ‰€æœ‰æ”¶åˆ°çš„ä¿¡å·ä»£ç†åˆ°è¿›ç¨‹(ä»…é™éTTYæ¨¡å¼) -i ï¼šå³ä½¿æ²¡æœ‰è¿æ¥ï¼Œä¹Ÿä¿æŒæ ‡å‡†è¾“å…¥æµæ‰“å¼€ å¦‚æœä½ æ²¡æœ‰æŒ‡å®š -a é€‰é¡¹ï¼ŒDocker å°±ä¼šå°†è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€é”™è¯¯æµé™„åŠ åˆ°å½“å‰ç»ˆç«¯ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ -a é€‰é¡¹æŒ‡å®šå“ªä¸ªæµè¿›è¡Œé™„åŠ ï¼Œæ¯”å¦‚ï¼š 1\\$ docker run -a stdin -a stdout -i -t ubuntu /bin/bash å¯¹äºäº¤äº’å¼è¿›ç¨‹ï¼ˆå¦‚å‘½ä»¤è¡Œ shellï¼‰ï¼Œå¿…é¡»ä¸€èµ·æŒ‡å®š -i å’Œ -t é€‰é¡¹æ¥ä¸ºå®¹å™¨è¿›ç¨‹åˆ†é…ä¸€ä¸ª TTYï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹å¸¸è¢«ç®€å†™ä¸º -itã€‚å½“å®¢æˆ·ç«¯ä»ç®¡é“ä¸­æ¥æ”¶æ ‡å‡†è¾“å…¥æµæ—¶æŒ‡å®š -t é€‰é¡¹é€šå¸¸æ˜¯è¢«ç¦æ­¢çš„ï¼Œæ¯”å¦‚ï¼š 1\\$ echo test | docker run -i busybox cat ğŸ”´ æ³¨æ„ï¼šåœ¨å®¹å™¨ä¸­è¿è¡Œçš„ PID ä¸º 1 çš„è¿›ç¨‹ä¼šè¢« Linux ç‰¹æ®Šçœ‹å¾…ï¼šå®ƒä¼šå¿½ç•¥ä»»ä½•ä¿¡å·çš„é»˜è®¤è¡Œä¸ºã€‚æœ€ç»ˆå°±ä¼šå¯¼è‡´æ”¶åˆ° SIGINT å’Œ SIGTERM ä¿¡å·çš„è¿›ç¨‹ä¸ä¼šç»ˆæ­¢é™¤éå®ƒè¢«ç¼–ç è¿›è¡ŒæŒ‡å®šã€‚ å®¹å™¨æ ‡è¯† å®¹å™¨åç§°ï¼ˆ--nameï¼‰ ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼æ¥æ ‡è¯†å®¹å™¨ï¼š æ ‡è¯†ç¬¦ç±»å‹ ä¾‹å­ UUID é•¿æ ‡è¯†ç¬¦ â€œf78375b1c487e03c9438c729345e54db9d20cfa2ac1fc3494b6eb60872e74778â€ UUID çŸ­æ ‡è¯†ç¬¦ â€œf78375b1c487â€ åç§° â€œevil_ptolemyâ€ å…¶ä¸­ï¼ŒUUID æ ‡è¯†ç¬¦ç”± Docker å®ˆæŠ¤ç¨‹åºç”Ÿæˆã€‚å¦‚æœæœªé€šè¿‡ --name é€‰é¡¹æ¥ç»™å®¹å™¨èµ‹äºˆåç§°ï¼Œåˆ™å®ˆæŠ¤ç¨‹åºä¼šç”Ÿæˆä¸€ä¸²éšæœºå­—ç¬¦æ¥è‡ªåŠ¨å‘½åè¯¥å®¹å™¨ã€‚ç»™å®¹å™¨è¿›è¡Œæœ‰æ„ä¹‰çš„å‘½åæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ã€‚å¦‚æœä½ åˆ¶å®šäº†å®¹å™¨çš„åç§°ï¼Œå°±å¯ä»¥åœ¨ Docker ç½‘ç»œä¸­å¼•ç”¨å®¹å™¨æ—¶ä½¿ç”¨å®ƒï¼Œä¸è®ºæ˜¯å‰å°è¿˜æ˜¯åå°è¿è¡Œçš„å®¹å™¨ã€‚ é»˜è®¤ç½‘æ¡¥ç½‘ç»œä¸Šçš„å®¹å™¨å¿…é¡»è¢«é“¾æ¥ä»¥é€šè¿‡åç§°è¿›è¡Œé€šä¿¡ã€‚ æœ€åï¼Œä¸ºäº†ä¾¿äºè‡ªåŠ¨åŒ–ï¼Œä½ å¯ä»¥è®© Docker å°†å®¹å™¨çš„ ID å†™å…¥åˆ°ä½ é€‰æ‹©çš„æ–‡ä»¶ä¸­ã€‚è¿™ç±»ä¼¼äºä¸€äº›ç¨‹åºä¼šå°†è‡ªèº«è¿›ç¨‹ ID å†™å…¥åˆ°æ–‡ä»¶ä¸­å»ï¼Œæ­£å¦‚ä½ è§è¿‡çš„ PID æ–‡ä»¶ã€‚ 1--cidfile=&quot;&quot;ï¼šå°†å®¹å™¨ ID å†™å…¥æ–‡ä»¶ é•œåƒ[:æ ‡ç­¾] è™½ç„¶ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯ä¸€ç§æ ‡è¯†å®¹å™¨çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡å°† image[:tag] æ·»åŠ åˆ°å‘½ä»¤ä¸­æ¥æŒ‡å®šæ‚¨æƒ³è¦è¿è¡Œå®¹å™¨çš„é•œåƒç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼šdocker run ubuntu:14.04ã€‚ é•œåƒ[@æ‘˜è¦] ä½¿ç”¨ v2 æˆ–æ›´é«˜ç‰ˆæœ¬é•œåƒæ ¼å¼çš„é•œåƒæœ‰ä¸€ä¸ªç§°ä¸ºæ‘˜è¦çš„å†…å®¹å¯å¯»å€æ ‡è¯†ç¬¦ã€‚åªè¦ç”¨äºç”Ÿæˆé•œåƒçš„è¾“å…¥ä¸å˜ï¼Œæ‘˜è¦å€¼å°±æ˜¯å¯é¢„æµ‹å’Œå¯å‚è€ƒçš„ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨åœ¨è¿è¡Œ alpine é•œåƒæ—¶ä½¿ç”¨äº† sha256:9cacb71397b640ECA97488cf08582AE4068513101088e9f96c9814bfda95e0 æ‘˜è¦ï¼š 1\\$ docker run alpine@sha256:9cacb71397b640eca97488cf08582ae4e4068513101088e9f96c9814bfda95e0 date PID è®¾ç½®ï¼ˆ--pidï¼‰ --pid=&quot;&quot; ï¼šä¸ºå®¹å™¨è®¾ç½® PIDï¼ˆè¿›ç¨‹ï¼‰ å‘½åç©ºé—´æ¨¡å¼ã€‚å¯é€‰å€¼ï¼šcontainer:&lt;name|id&gt;ï¼šåŠ å…¥å…¶ä»–å®¹å™¨çš„ PID å‘½åç©ºé—´ï¼›hostï¼šä½¿ç”¨å®¹å™¨ä¸­çš„ä¸»æœºçš„ PID å‘½åç©ºé—´ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å®¹å™¨éƒ½å¯ç”¨äº† PID å‘½åç©ºé—´ã€‚ PID å‘½åç©ºé—´æä¾›äº†è¿›ç¨‹çš„åˆ†ç¦»ã€‚PID å‘½åç©ºé—´åˆ é™¤äº†ç³»ç»Ÿè¿›ç¨‹çš„è§†å›¾ï¼Œå¹¶å…è®¸é‡ç”¨è¿›ç¨‹ IDï¼ŒåŒ…æ‹¬ pid 1ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›ä½ çš„å®¹å™¨å…±äº«ä¸»æœºçš„è¿›ç¨‹åç§°ç©ºé—´ï¼ŒåŸºæœ¬ä¸Šå…è®¸å®¹å™¨å†…çš„è¿›ç¨‹çœ‹åˆ°ç³»ç»Ÿä¸Šçš„æ‰€æœ‰è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åƒ strace æˆ– gdb è¿™æ ·çš„è°ƒè¯•å·¥å…·æ„å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½†æ˜¯åœ¨è°ƒè¯•å®¹å™¨ä¸­çš„è¿›ç¨‹æ—¶ï¼Œä½ å¸Œæœ›ä½¿ç”¨è¿™äº›å·¥å…·ã€‚ ä¾‹å­ï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œ `htop` åˆ›å»º Dockerfile: 123FROM alpine:latestRUN apk add --update htop &amp;&amp; rm -rf /var/cache/apk/*CMD [&quot;htop&quot;] æ„å»ºæ­¤ Dockerfile å¹¶å°†é•œåƒæ ‡è®°ä¸º myhtopï¼š 1\\$ docker build -t myhtop . ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨å®¹å™¨ä¸­è¿è¡Œ htop å‘½ä»¤ï¼š 1\\$ docker run -it --rm --pid=host myhtop åŠ å…¥å…¶ä»–å¯ä»¥è¢«ç”¨æ¥è°ƒè¯•è¯¥å®¹å™¨çš„ pid å‘½åç©ºé—´ã€‚ ä¾‹å­ å¼€å¯ä¸€ä¸ªè¿è¡Œ redis æœåŠ¡çš„å®¹å™¨ï¼š 1\\$ docker run --name myredis -d redis é€šè¿‡è¿è¡Œå«æœ‰ strace çš„å…¶ä»–å®¹å™¨æ¥è°ƒè¯• redis å®¹å™¨ï¼š 12\\$ docker run -it --pid=container:my-redis my_strace_docker_image bash\\$ strace -p 1 UTS è®¾ç½®ï¼ˆ--utsï¼‰ --uts=&quot;&quot; : è®¾ç½®å®¹å™¨çš„ UTS å‘½åç©ºé—´ã€‚å¯é€‰å€¼ï¼šhost å€¼ä»£è¡¨ä½¿ç”¨ä¸»æœºçš„ uts å€¼ã€‚ UTS å‘½åç©ºé—´å‚æ•°è®¾ç½®æ—¨åœ¨ä½¿å®¹å™¨è¿›ç¨‹å¯¹äºè¿è¡Œäºç›®æ ‡ uts è®¾ç½®ä¸­çš„ç›®æ ‡è¿›ç¨‹çš„ä¸»æœºåå’ŒåŸŸå¯è§ã€‚é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æŒ‡å®šäº† --network=host å‘½åç©ºé—´çš„å®¹å™¨ï¼Œéƒ½æœ‰è‡ªå·±çš„ uts å‘½åç©ºé—´ã€‚--uts=host å°†ä¼šä½¿å®¹å™¨ä½¿ç”¨å’Œä¸»æœºä¸€æ ·çš„ uts å‘½åç©ºé—´ã€‚åœ¨æŒ‡å®šäº† --uts=host è®¾ç½®åå°†ä¸èƒ½å†å•ç‹¬æŒ‡å®š --hostname å’Œ --domainname è®¾ç½®ã€‚ å¦‚æœå¸Œæœ›å®¹å™¨çš„ä¸»æœºåéšç€ä¸»æœºçš„ä¸»æœºåçš„æ›´æ”¹è€Œæ›´æ”¹ï¼Œå³å®¹å™¨ä¸ä¸»æœºå…±äº«ä¸»æœºåï¼Œæ›´å¥½çš„åšæ³•æ˜¯ä»å®¹å™¨ä¸­æ›´æ”¹ä¸»æœºçš„ä¸»æœºåã€‚ IPC è®¾ç½®ï¼ˆ--ipcï¼‰ --ipc=&quot;MODE&quot; : è®¾ç½®å®¹å™¨çš„ IPC æ¨¡å¼ å¯ä»¥æ¥å—ä»¥ä¸‹å€¼ï¼š å€¼ æè¿° ä¸æŒ‡å®š ä½¿ç”¨å®ˆæŠ¤ç¨‹åºé»˜è®¤è®¾ç½® none ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ï¼Œä¸”ä¸æŒ‚è½½ /dev/shm private ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ shareable ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ï¼Œä½†å…è®¸ä¸å…¶ä»–å®¹å™¨å…±äº«æ­¤å‘½åç©ºé—´ container: &lt;_name-or-ID_&gt; åŠ å…¥å…¶ä»–è®¾ç½®äº† --ipc=shareable çš„å®¹å™¨çš„å‘½åç©ºé—´ï¼ˆéœ€æŒ‡å®šå®¹å™¨åæˆ– IDï¼‰ host ä½¿ç”¨ä¸»æœºçš„ IPC å‘½åç©ºé—´ dockerd å®ˆæŠ¤ç¨‹åºé»˜è®¤ä¼šä½¿ç”¨ --ipc=private æˆ– --ipc=shareable è®¾ç½®ï¼Œå…·ä½“å–å†³äº dockerd å®ˆæŠ¤ç¨‹åºçš„ç‰ˆæœ¬åŠé…ç½®ã€‚ IPC(POSIX/SysV IPC) å‘½åç©ºé—´æä¾›äº†ä¸åŒå‘½åç©ºé—´ä¸‹çš„å…±äº«å†…å­˜æ®µã€ä¿¡å·é‡ä»¥åŠæ¶ˆæ¯é˜Ÿåˆ—çš„éš”ç¦»æœºåˆ¶ã€‚ å…±äº«å†…å­˜æ®µæ˜¯ç”¨äºä»¥å†…å­˜çš„é€Ÿåº¦åŠ é€Ÿè¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰é€šè¿‡ç®¡é“æˆ–ç½‘ç»œå †æ ˆçš„æ–¹æ³•ã€‚å…±äº«å†…å­˜é€šå¸¸ç”¨äºæ¶‰åŠç§‘å­¦è®¡ç®—æˆ–é‡‘èæœåŠ¡ç­‰çš„æ•°æ®åº“å’Œæ„å»ºçš„å¯¹é«˜æ€§èƒ½æœ‰è¦æ±‚çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„è¿™ç±»åº”ç”¨ç¨‹åºè¢«æ‹†åˆ†æˆå¤šä¸ªå®¹å™¨å°±è¦è€ƒè™‘å¯èƒ½éœ€è¦å…±äº«è¿™äº›å®¹å™¨ä¹‹é—´çš„ IPC æœºåˆ¶ï¼Œåšæ³•æ˜¯å¯¹ä¸»å®¹å™¨ä½¿ç”¨ --ipc=shareable çš„è®¾ç½®ã€å…¶ä»–å®¹å™¨ä½¿ç”¨ --ipc=container:&lt;ä¸»å®¹å™¨åæˆ–å…¶ ID&gt; çš„è®¾ç½®ã€‚ ç½‘ç»œè®¾ç½® --dns=[] : ä¸ºå®¹å™¨æŒ‡å®šåŸŸåæœåŠ¡å™¨ --network=&quot;bridge&quot; : æŒ‡å®šå®¹å™¨æ¥å…¥ç½‘ç»œçš„æ–¹å¼ï¼Œå¯é€‰å€¼ï¼šbridge åœ¨é»˜è®¤çš„ Docker ç½‘æ¡¥ä¸Šåˆ›å»ºç½‘ç»œæ ˆï¼ˆé»˜è®¤ï¼‰ï¼›none ä¸è”ç½‘ï¼›container:&lt;name|id&gt; å¤ç”¨ç°æœ‰å®¹å™¨çš„ç½‘ç»œæ ˆï¼›host ä½¿ç”¨ Dockr ä¸»æœºçš„ç½‘ç»œæ ˆï¼›&lt;network-name&gt;|&lt;network-id&gt; è¿æ¥è‡³ç”¨æˆ·è‡ªå®šä¹‰çš„ç½‘ç»œã€‚ --network-alias=[] : ä¸ºå®¹å™¨æ·»åŠ ç½‘ç»œèŒƒå›´çš„åˆ«å --add-host=&quot;&quot; : åœ¨ /etc/hosts ä¸Šè‡ªåŠ¨æ·»åŠ ä¸€è¡Œè®°å½• (host:IP) --mac-address=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ MAC åœ°å€ --ip=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ IPv4 åœ°å€ --ip6=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ IPv6 åœ°å€ --link-local-ip=[] : æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„ç‰©ç†è®¾å¤‡çš„é“¾è·¯çš„æœ¬åœ° IPv4 æˆ– IPv6 åœ°å€ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å®¹å™¨éƒ½ä¼šå¯ç”¨ç½‘ç»œä¸”å¯¹ç½‘ç»œå‡ºå£ä¸åšä»»ä½•é™åˆ¶ã€‚å¯ä»¥é€šè¿‡æŒ‡å®š --network none é€‰é¡¹æ¥ç¦ç”¨å®¹å™¨çš„ç½‘ç»œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»…é€šè¿‡æ–‡ä»¶ã€æ ‡å‡†è¾“å…¥è¾“å‡ºæµæ¥è¿›è¡Œ I/Oã€‚ è¦å®ç°ä¸åŒå®¹å™¨ä¹‹é—´çš„äº’é€šåªèƒ½é€šè¿‡é»˜è®¤çš„ç½‘æ¡¥æ¨¡å¼è®¾ç½®ï¼Œé“¾æ¥ç‰¹æ€§æ˜¯ä¸€ç§ç»å…¸çš„ç‰¹æ€§ï¼Œæ›´æ¨èä½¿ç”¨åŸºäºé“¾æ¥ç‰¹æ€§çš„ Docker ç½‘ç»œé©±åŠ¨ã€‚ ä½ çš„å®¹å™¨ä¼šé»˜è®¤ä½¿ç”¨ä¸»æœºè®¾ç½®çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æŒ‡å®š --dns=&lt;DNS&gt; é€‰é¡¹æ¥æŒ‡å®šå®¹å™¨ç½‘ç»œçš„ DNS è®¾ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä¼šæ ¹æ®è‡ªèº«åˆ†é…çš„ ip åœ°å€æ¥ç”Ÿæˆè‡ªå·±çš„ MAC åœ°å€ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š --mac-address=&lt;MAC&gt; é€‰é¡¹ï¼ˆMAC åœ°å€çš„åˆ†éš”ç¬¦ä½¿ç”¨è‹±æ–‡å†’å·ï¼Œå¦‚ 12:34:56:78:9a:bcï¼‰æ¥æ˜¾å¼æŒ‡å®šå®¹å™¨çš„ MAC åœ°å€ã€‚éœ€æ³¨æ„ Docker ä¸ä¼šè¿›è¡Œæ‰‹åŠ¨åˆ†é…çš„ MAC åœ°å€çš„å”¯ä¸€æ€§æ£€æŸ¥ã€‚ Network:none å®¹å™¨ä¸ä¼šæœ‰åˆ°å¤–éƒ¨ç½‘ç»œçš„è™šæ‹Ÿè®¾å¤‡åŠè·¯ç”±ï¼Œä½†å†…éƒ¨ä»ä¼šæœ‰ä¸€ä¸ªå›ç¯æ¥å£ã€‚ Network:bridge å°†ç½‘ç»œè®¾ç½®ä¸ºæ¡¥æ¥æ¨¡å¼åï¼Œå®¹å™¨å°†ä½¿ç”¨ docker çš„é»˜è®¤ç½‘ç»œè®¾ç½®ã€‚åœ¨ä¸»æœºä¸Šè®¾ç½®ä¸€ä¸ªæ¡¥ï¼Œé€šå¸¸å‘½åä¸º docker0ï¼Œå°†ä¸ºå®¹å™¨åˆ›å»ºä¸€å¯¹ veth æ¥å£ã€‚vethå¯¹çš„ä¸€ç«¯å°†ä¿ç•™åœ¨è¿æ¥åˆ°ç½‘æ¡¥çš„ä¸»æœºä¸Šï¼Œè€Œ veth å¯¹çš„å¦ä¸€ç«¯é™¤äº†æ”¾åœ¨ç¯å›æ¥å£ä¹‹å¤–ï¼Œè¿˜å°†æ”¾åœ¨å®¹å™¨çš„å‘½åç©ºé—´å†…ä»¥ä¸ºç½‘æ¡¥ç½‘ç»œä¸Šçš„å®¹å™¨åˆ†é…ä¸€ä¸ªIP åœ°å€ï¼Œæµé‡å°†é€šè¿‡è¯¥ç½‘æ¡¥è·¯ç”±åˆ°è¯¥å®¹å™¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯ä»¥é€šè¿‡å®ƒä»¬çš„ IP åœ°å€è¿›è¡Œé€šä¿¡ã€‚è¦é€šè¿‡åå­—äº¤æµï¼Œå®ƒä»¬å¿…é¡»è¿æ¥åœ¨ä¸€èµ·ã€‚ Network:host å°†ç½‘ç»œè®¾ç½®ä¸ºä¸»æœºæ¨¡å¼åï¼Œå®¹å™¨å°†å…±äº«ä¸»æœºçš„ç½‘ç»œå †æ ˆï¼Œå¹¶ä¸”æ¥è‡ªä¸»æœºçš„æ‰€æœ‰æ¥å£å°†å¯¹å®¹å™¨å¯ç”¨ã€‚å®¹å™¨çš„ä¸»æœºåå°†ä¸ä¸»æœºç³»ç»Ÿä¸Šçš„ä¸»æœºåç›¸åŒ¹é…ã€‚è¯·æ³¨æ„ --mac-address é€‰é¡¹åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹æ— æ•ˆã€‚å³ä½¿åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å®¹å™¨ä¹Ÿæœ‰è‡ªå·±çš„ UTS å‘½åç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹å…è®¸ä½¿ç”¨ --hostname å’Œ --domainname é€‰é¡¹ï¼Œå®ƒä»¬åªä¼šæ›´æ”¹å®¹å™¨å†…çš„ä¸»æœºåå’ŒåŸŸåã€‚ä¸ --hostname ç±»ä¼¼ï¼Œå¯ä»¥åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹ä½¿ç”¨ --add-hostã€--dnsã€--dns-search å’Œ --dns-option é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹å°†ä¼šæ›´æ–°å®¹å™¨ä¸­çš„ /etc/hosts æˆ– /etc/resolv.confã€‚ä¸ä¼šå¯¹ä¸»æœºä¸Šçš„ /etc/hosts å’Œ /etc/resolv.conf è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ ä¸é»˜è®¤ç½‘æ¡¥æ¨¡å¼ç›¸æ¯”ï¼Œä¸»æœºæ¨¡å¼æä¾›äº†æ˜æ˜¾æ›´å¥½çš„ç½‘ç»œæ€§èƒ½ï¼Œå› ä¸ºå®ƒä½¿ç”¨ä¸»æœºçš„æœ¬æœºç½‘ç»œå †æ ˆï¼Œè€Œç½‘æ¡¥å¿…é¡»é€šè¿‡ dockerd å®ˆæŠ¤ç¨‹åºç»å†ä¸€çº§è™šæ‹ŸåŒ–ã€‚å½“å®¹å™¨çš„ç½‘ç»œæ€§èƒ½è‡³å…³é‡è¦æ—¶ï¼Œä¾‹å¦‚ç”Ÿäº§è´Ÿè½½å¹³è¡¡å™¨æˆ–é«˜æ€§èƒ½ Web æœåŠ¡å™¨ï¼Œå»ºè®®ä»¥æ­¤æ¨¡å¼è¿è¡Œå®¹å™¨ã€‚ ğŸ”µ æ³¨æ„ï¼š--network=&quot;host&quot; ç»™äºˆå®¹å™¨å¯¹æœ¬åœ°ç³»ç»ŸæœåŠ¡ï¼ˆå¦‚ D-busï¼‰çš„å®Œå…¨è®¿é—®æƒï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ã€‚ Network:container å°†ç½‘ç»œè®¾ç½®ä¸ºå®¹å™¨æ¨¡å¼åï¼Œä¸€ä¸ªå®¹å™¨å°†å…±äº«å¦ä¸€ä¸ªå®¹å™¨çš„ç½‘ç»œå †æ ˆã€‚å¦ä¸€ä¸ªå®¹å™¨çš„åç§°å¿…é¡»ä»¥ --network container:&lt;åç§°|id&gt; çš„æ ¼å¼æä¾›ã€‚æ³¨æ„ --add-hostã€--hostnameã€--dnsã€--dns-searchã€--dns-option å’Œ --mac-address åœ¨å®¹å™¨ç½‘ç»œæ¨¡å¼ä¸­æ— æ•ˆï¼Œè€Œ --publishã€--publish-allã€--expose åœ¨å®¹å™¨ç½‘ç»œæ¨¡å¼ä¸­ä¹Ÿæ— æ•ˆã€‚ ä»¥ä¸‹ç¤ºä¾‹è¿è¡Œ redis å®¹å™¨ï¼Œå°† redis ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºï¼Œç„¶åè¿è¡Œ redis-cli å‘½ä»¤å¹¶é€šè¿‡æœ¬åœ°ä¸»æœºæ¥å£è¿æ¥åˆ°RedisæœåŠ¡å™¨ã€‚ 12\\$ docker run -d --name redis example/redis --bind 127.0.0.1\\$ docker run --rm -it --network container:redis example/redis-cli -h 127.0.0.1 ç”¨æˆ·å®šä¹‰çš„ç½‘ç»œ ä½ å¯ä»¥ä½¿ç”¨ Docker ç½‘ç»œé©±åŠ¨ç¨‹åºæˆ–å¤–éƒ¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ’ä»¶æ¥åˆ›å»ºç½‘ç»œã€‚ä½ å¯ä»¥å°†å¤šä¸ªå®¹å™¨è¿æ¥åˆ°åŒä¸€ç½‘ç»œã€‚ä¸€æ—¦è¿æ¥åˆ°ç”¨æˆ·å®šä¹‰çš„ç½‘ç»œï¼Œè¿™äº›å®¹å™¨å°±å¯ä»¥ä»…ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨çš„ IP åœ°å€æˆ–åŸŸåè½»æ¾åœ°è¿›è¡Œé€šä¿¡ã€‚ å¯¹äºæ”¯æŒå¤šä¸»æœºè¿æ¥çš„è¦†ç›–ç½‘ç»œæˆ–è‡ªå®šä¹‰æ’ä»¶ï¼Œè¿æ¥åˆ°åŒä¸€å¤šä¸»æœºç½‘ç»œä½†ä»ä¸åŒå¼•æ“å¯åŠ¨çš„å®¹å™¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨å†…ç½®ç½‘æ¡¥ç½‘ç»œé©±åŠ¨ç¨‹åºåˆ›å»ºç½‘ç»œï¼Œå¹¶åœ¨åˆ›å»ºçš„ç½‘ç»œä¸­è¿è¡Œå®¹å™¨ï¼š 12\\$ docker network create -d bridge my-net\\$ docker run --network=my-net -itd --name=container3 busybox ç®¡ç† /etc/hosts æ–‡ä»¶ ä½ çš„å®¹å™¨å°†åœ¨ /etc/hosts ä¸­åŒ…å«ä¸€äº›è¡Œï¼Œè¿™äº›è¡Œå®šä¹‰äº†å®¹å™¨æœ¬èº«çš„ä¸»æœºåä»¥åŠ localhost å’Œå…¶ä»–ä¸€äº›å¸¸è§å†…å®¹ã€‚--add-host æ ‡å¿—å¯ç”¨äºå‘ /etc/hosts æ·»åŠ é¢å¤–çš„è¡Œã€‚ 123456789\\$ docker run -it --add-host db-static:86.75.30.9 ubuntu cat /etc/hosts127.0.0.1 localhost::1 localhost ip6-localhost ip6-loopbackfe00::0 ip6-localnetff00::0 ip6-mcastprefixff02::1 ip6-allnodesff02::2 ip6-allrouters86.75.30.9 db-static172.17.0.2 af78fbac55c9 å¦‚æœä¸€ä¸ªå®¹å™¨è¿æ¥åˆ°é»˜è®¤æ¡¥æ¥ç½‘ç»œå¹¶ä¸å…¶ä»–å®¹å™¨é“¾æ¥ï¼Œåˆ™è¯¥å®¹å™¨çš„ /etc/hosts æ–‡ä»¶å°†ä½¿ç”¨é“¾æ¥å®¹å™¨çš„åç§°è¿›è¡Œæ›´æ–°ã€‚ ğŸ”µ æ³¨æ„ï¼šç”±äº Docker å¯èƒ½ä¼šå®æ—¶æ›´æ–°å®¹å™¨çš„ /etc/hosts æ–‡ä»¶ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°å®¹å™¨å†…çš„è¿›ç¨‹æœ€ç»ˆè¯»å–ç©ºçš„æˆ–ä¸å®Œæ•´çš„ /etc/hosts æ–‡ä»¶çš„æƒ…å†µã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†æ¬¡é‡è¯•è¯»å–åº”è¯¥å¯ä»¥è§£å†³é—®é¢˜ã€‚ é‡å¯ç­–ç•¥ï¼ˆ--restartï¼‰ ä½¿ç”¨ docker run ä¸Šçš„ --restart æ ‡å¿—å¯ä»¥æŒ‡å®šå®¹å™¨çš„é‡å¯ç­–ç•¥ï¼Œå†³å®šå®¹å™¨åœ¨é€€å‡ºæ—¶åº”ä¸åº”è¯¥ä»¥åŠå¦‚ä½•é‡å¯ã€‚ å½“é‡å¯ç­–ç•¥åœ¨å®¹å™¨ä¸Šè¢«æ¿€æ´»æ—¶ï¼Œå®ƒå°†åœ¨ docker ps ä¸­æ˜¾ç¤ºä¸º Up æˆ– Restartingã€‚ä½¿ç”¨ docker events æŸ¥çœ‹é‡å¯ç­–ç•¥çš„æ•ˆæœä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ç­–ç•¥ æ•ˆæœ no ï¼ˆé»˜è®¤ï¼‰å®¹å™¨é€€å‡ºåä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚ on-failure[:max-retries] å½“å®¹å™¨é€€å‡ºå¹¶è¿”å›ä¸€ä¸ªéé›¶çŠ¶æ€å€¼æ—¶å°è¯•é‡å¯ï¼Œå¯ä»¥æŒ‡å®šæœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ always æ— è®ºé€€å‡ºçŠ¶æ€å¦‚ä½•ï¼Œéƒ½è¦é‡å¯å®¹å™¨ã€‚å½“æŒ‡å®š always æ—¶ï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹å°†å°è¯•æ— é™æœŸåœ°é‡æ–°å¯åŠ¨å®¹å™¨ã€‚æ— è®ºå®¹å™¨çš„å½“å‰çŠ¶æ€å¦‚ä½•ï¼Œå®¹å™¨ä¹Ÿæ€»æ˜¯åœ¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å¯åŠ¨ã€‚ unless-stopped æ— è®ºé€€å‡ºçŠ¶æ€å¦‚ä½•ï¼Œéƒ½è¦é‡å¯å®¹å™¨ï¼ŒåŒ…æ‹¬åœ¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œé™¤éå®¹å™¨åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹åœæ­¢ä¹‹å‰å¤„äºåœæ­¢çŠ¶æ€ã€‚ åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨ä¹‹å‰ï¼Œå¢åŠ å»¶è¿Ÿ(ä» 100 æ¯«ç§’å¼€å§‹ï¼Œæ˜¯ä¹‹å‰å»¶è¿Ÿçš„ä¸¤å€),ä»¥é˜²æ­¢æœåŠ¡å™¨æ´ªæµã€‚è¿™æ„å‘³ç€å®ˆæŠ¤è¿›ç¨‹å°†ç­‰å¾… 100 æ¯«ç§’ï¼Œç„¶å 200 æ¯«ç§’ï¼Œ400ï¼Œ800ï¼Œ1600ï¼Œç­‰ç­‰ï¼Œç›´åˆ°è¾¾åˆ°å¤±è´¥æé™ï¼Œæœ€å¤§å»¶è¿Ÿ1åˆ†é’Ÿï¼Œæˆ–è€…å½“æ‚¨æ‰§è¡Œ docker stop æˆ– docker rm -f å®¹å™¨ã€‚ å¦‚æœå®¹å™¨æˆåŠŸé‡å¯(å®¹å™¨å¯åŠ¨å¹¶è¿è¡Œè‡³å°‘ 10 ç§’)ï¼Œå»¶è¿Ÿå°†é‡ç½®ä¸ºé»˜è®¤å€¼100æ¯«ç§’ã€‚ ä½¿ç”¨å¤±è´¥æ—¶ç­–ç•¥æ—¶ï¼Œæ‚¨å¯ä»¥æŒ‡å®š Docker å°è¯•é‡æ–°å¯åŠ¨å®¹å™¨çš„æœ€å¤§æ¬¡æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker å°†æ°¸è¿œå°è¯•é‡æ–°å¯åŠ¨å®¹å™¨ã€‚å¯ä»¥é€šè¿‡ docker inspect è·å¾—å®¹å™¨çš„(å°è¯•)é‡å¯æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œè·å–å®¹å™¨â€œmy-containerâ€çš„é‡å¯æ¬¡æ•°: 1\\$ docker inspect -f &quot;&#123;&#123; .RestartCount &#125;&#125;&quot; my-container æˆ–è€…è·å¾—ä¸Šæ¬¡å®¹å™¨(é‡æ–°)å¯åŠ¨çš„æ—¶é—´: 1\\$ docker inspect -f &quot;&#123;&#123; .State.StartedAt &#125;&#125;&quot; my-container å°† --restart (é‡æ–°å¯åŠ¨ç­–ç•¥)ä¸ --rm (æ¸…ç†)æ ‡å¿—ç»“åˆä½¿ç”¨ä¼šå¯¼è‡´é”™è¯¯ã€‚å®¹å™¨é‡å¯æ—¶ï¼Œè¿æ¥çš„å®¢æˆ·ç«¯ä¼šæ–­å¼€è¿æ¥ã€‚ è‡ªåŠ¨æ¸…ç†ï¼ˆ--rmï¼‰ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿå³ä½¿åœ¨å®¹å™¨é€€å‡ºåä»ç„¶å­˜åœ¨ã€‚è¿™ä½¿å¾—è°ƒè¯•å®¹æ˜“å¾—å¤š(å› ä¸ºæ‚¨å¯ä»¥æ£€æŸ¥æœ€ç»ˆçŠ¶æ€),å¹¶ä¸”åœ¨é»˜è®¤æƒ…å†µä¸‹ä¿ç•™æ‰€æœ‰æ•°æ®ã€‚ä½†æ˜¯å¦‚æœä½ è¿è¡Œçš„æ˜¯çŸ­æœŸå‰å°è¿›ç¨‹ï¼Œè¿™äº›å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¼šä¸æ–­å †ç§¯èµ·æ¥ã€‚ç›¸åï¼Œå¦‚æœæ‚¨å¸Œæœ› Docker åœ¨å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†å®¹å™¨å¹¶åˆ é™¤æ–‡ä»¶ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥æ·»åŠ  --rm æ ‡å¿—: --rm=false: å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£","slug":"Linux | RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£","date":"2022-03-01T10:35:41.028Z","updated":"2022-03-05T12:58:15.221Z","comments":true,"path":"2022-03-01-Linux | RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£.html","link":"","permalink":"https://skinyi.github.io/2022-03-01-Linux%20|%20RHCE%20%E8%80%83%E8%AF%95%E5%8F%8A%E7%BA%A2%E5%B8%BD%E4%BC%81%E4%B8%9A%20Linux%20%E4%BA%86%E8%A7%A3.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ RHCE8.0 è¯¾ç¨‹åŠè€ƒè¯•ä»£ç  ç›¸è¾ƒäº RHCE7 ï¼Œåœ¨ EX200 è€ƒè¯•ä¸­ï¼ŒRHCE8 å¢åŠ äº† SHELL è„šæœ¬ï¼ˆRH254ï¼‰ã€ç³»ç»Ÿè°ƒä¼˜ï¼ˆRH442ï¼‰ä»¥åŠ RHEL8 æ–°ç‰¹æ€§çš„ä¸€äº›è€ƒå¯Ÿï¼›åœ¨ EX294 è€ƒè¯•ä¸­ï¼ŒRHCE7 è€ƒå¯Ÿä¸€äº›å¸¸è§çš„ Service çš„æ­å»ºéƒ¨ç½²ä½¿ç”¨ï¼Œå¦‚ï¼šNFSã€SAMBAã€DNSç­‰ï¼Œè€Œåœ¨ RHCE8 è€ƒè¯•ä¸­åˆ™ä¸»è¦è€ƒå¯Ÿ Ansible è‡ªåŠ¨åŒ–å·¥å…·çš„æ“ä½œï¼Œä¸å†åŒ…å«å¸¸è§æœåŠ¡ã€‚ è¯¾ç¨‹ä»£ç  è€ƒè¯•ä»£ç  è€ƒè¯•å†…å®¹ è€ƒè¯•å½¢å¼ è€ƒè¯•æ—¶é•¿ RH124 EX200 ä»¥ç³»ç»Ÿç®¡ç†æ“ä½œä¸ºä¸»ï¼Œå¦‚ï¼šæ–‡ä»¶ç³»ç»Ÿã€ç”¨æˆ·æ“ä½œã€æƒé™æ“ä½œã€ç£ç›˜æ“ä½œç­‰ æœºè€ƒå®éªŒ 2.5h RH134 RH294 EX294 å…¨æ˜¯å…³äº Ansible è‡ªåŠ¨åŒ–å·¥å…·çš„æŠ€èƒ½æ“ä½œ 4h æ­å»ºæ—¥å¸¸ç»ƒä¹ ç¯å¢ƒ ğŸŸ¢ æ‰€éœ€å‰æœŸå‡†å¤‡å·¥ä½œï¼š å·²å®‰è£… VMWare Workstation è™šæ‹Ÿæœºï¼Œå¹¶åœ¨ bios ä¸­å¼€å¯äº†è™šæ‹ŸåŒ–ç›¸å…³çš„å¼€å…³ï¼› å·²ä¸‹è½½å¥½ RHEL8 Linux æ“ä½œç³»ç»Ÿ iso é•œåƒï¼› ç»ƒä¹ ç¯å¢ƒè™šæ‹Ÿæœºä»¥ NAT æ¨¡å¼å’Œå®¿ä¸»æœºè¿›è¡Œç½‘ç»œè¿æ¥ï¼Œä½¿ç”¨çš„è™šæ‹Ÿç½‘å¡æ˜¯ VMNet8 ã€‚ è™šæ‹Ÿæœºå®‰è£… RHEL8.3 æ“ä½œç³»ç»Ÿ â€‹å¦‚å›¾ï¼Œè™šæ‹Ÿæœºçš„é…ç½®å¦‚ä¸‹ï¼Œå¯æ ¹æ®è‡ªå·±ä¸ªäººç¡¬ä»¶è®¾å¤‡æƒ…å†µæŒ‰éœ€è°ƒæ•´ã€‚ è™šæ‹Ÿæœºè½¯ä»¶é€‰æ‹©å¦‚ä¸‹ï¼š è®¾ç½® root ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·åå¼€å§‹å®‰è£…ï¼Œç­‰å¾…è¿›åº¦æ¡è·‘å®Œé‡å¯è™šæ‹Ÿæœºï¼Œé‡å¯ååŒæ„ Redhat çš„ EULAï¼Œé€‰æ‹© FINISH CONFIGURATION è¿›å…¥å›¾å½¢ç•Œé¢ã€‚å›¾å½¢ç•Œé¢é»˜è®¤ä¸ºåˆšæ‰åˆ›å»ºçš„æ™®é€šç”¨æˆ·ï¼Œæ–°å®‰è£…çš„ RHEL è¿˜éœ€è¦è¿›è¡Œä¸€äº›ç³»ç»Ÿçº§çš„é…ç½®æ‰è¡Œã€‚ åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦ç™»é™† root è´¦æˆ·æ¥é…ç½®æˆ‘ä»¬æ–°å®‰è£…çš„æ“ä½œç³»ç»Ÿã€‚ä¸‹å›¾ä¸ºä½¿ç”¨ root ç”¨æˆ·ç™»é™†åçš„ç•Œé¢ã€‚ å®‰è£…å®Œæ“ä½œç³»ç»Ÿåçš„é…ç½® é…ç½®ç½‘ç»œè®¾ç½® â€‹ä½¿ç”¨ ip addr show å‘½ä»¤æ¥æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„ç½‘ç»œé…ç½®ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š ğŸŸ¢ å…¶å®ƒç½‘å¡è®¾å¤‡ä»‹ç»ï¼š lo è™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼Œ lo æ˜¯ä¸»æœºç”¨äºå‘è‡ªèº«å‘é€é€šä¿¡çš„ä¸€ä¸ªç‰¹æ®Šåœ°å€ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç›®çš„åœ°å€ï¼‰ï¼Œå…¶ ip ä¸º 127.0.0.1 ï¼› virbr0 æ˜¯ KVM é»˜è®¤åˆ›å»ºçš„ä¸€ä¸ªç½‘æ¡¥ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºè¿æ¥å…¶ä¸Šçš„è™šæ‹Ÿæœºç½‘å¡æä¾› NAT è®¿é—®å¤–ç½‘çš„åŠŸèƒ½ï¼Œå¯æä¾› DHCP æœåŠ¡ï¼Œå…¶é»˜è®¤ ip ä¸º 192.168.122.1ã€‚æ­¤è™šæ‹Ÿè®¾å¤‡è¢«å¼ºåˆ¶åˆ é™¤åé‡å¯ç³»ç»Ÿè¿˜ä¼šå†æ¬¡åˆ›å»ºï¼Œå¦‚éœ€å¸è½½é¡»ä½¿ç”¨ KVM è™šæ‹ŸåŒ–ç®¡ç†å·¥å…·ï¼› birbr0-nic, åŒä¸Šç”± KVM æœåŠ¡åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ brctl å‘½ä»¤è¿›è¡Œç®¡ç†ã€‚ å…¶ä¸­ ens160 æ‰æ˜¯è¿æ¥å¤–ç½‘æ‰€éœ€è¦çš„ç½‘å¡è®¾å¤‡ã€‚å¯ä»¥çœ‹åˆ°æ­¤ç½‘å¡æ²¡æœ‰ç»‘å®š ip åœ°å€ï¼Œä½†è™šæ‹Ÿæœºè½¯ä»¶æ˜¯è®¾ç½®çš„ NAT ä¸”å·²å¼€å¯äº† DHCP æœåŠ¡ï¼Œå› æ­¤å¯¼è‡´æ­¤é—®é¢˜çš„åŸå› å¯èƒ½æ˜¯æˆ‘ä»¬çš„ç½‘å¡è®¾å¤‡æ²¡æœ‰å¯åŠ¨æˆ–å¯ç”¨ã€‚éœ€è¦æ£€æŸ¥æ­¤ç½‘å¡è®¾å¤‡çš„é…ç½®æ–‡ä»¶ï¼Œå…¶è·¯å¾„ä¸ºï¼š/etc/sysconfig/network-scripts/ifcfg-ens160ï¼ˆå¯ä»¥æ¨æ–­ RHEL çš„ç½‘å¡é…ç½®æ–‡ä»¶åç§°éƒ½æ˜¯ç”± &quot;ifcfg-&quot; å’Œç½‘å¡åç»„æˆçš„ï¼‰ï¼Œä½¿ç”¨ vim ç¼–è¾‘å™¨æ¥ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415TYPE=Ethernet # ç½‘ç»œç±»å‹ï¼šä»¥å¤ªç½‘PROXY_METHOD=none # ç½‘ç»œä»£ç†æ–¹æ³•BROWSER_ONLY=no BOOTPROTO=dhcp # æ¿€æ´»è®¾å¤‡ä½¿ç”¨çš„åœ°å€é…ç½®åè®®ï¼šdhcp,static,none,bootpDEFROUTE=yes # ipv4 é»˜è®¤è·¯ç”±è®¾å¤‡ï¼šyes,noIPV4_FAILURE_FATAL=noIPV6INIT=yes # åˆå§‹åŒ– ipv6 åè®®æ ˆï¼šyes,noIPV6_AUTOCONF=yes # è‡ªåŠ¨é…ç½® ipv6ï¼šyes,noIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens160 # ç½‘å¡åUUID=74e066fb-4f82-4422-ae3f-570dd2fca5a5 DEVICE=ens160 # åº”ç”¨åˆ°çš„è®¾å¤‡ï¼ˆå’Œ HWADDR å¿…é¡»ç•™ä¸€ä¸ªï¼Œåè€…æŒ‡ç½‘å¡ç‰©ç†åœ°å€ï¼‰ONBOOT=no # å¼€æœºåè‡ªåŠ¨æ¿€æ´»æ­¤è®¾å¤‡ ğŸŸ¢ Linux ç½‘ç»œé…ç½®è¯´æ˜ï¼š ç½‘å¡çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network-scripts/ifcfg-ç½‘å¡å è·¯ç”±ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network-scripts/route-ç½‘å¡å ç½‘ç»œç›¸å…³è¯´æ˜å‚è€ƒ/usr/share/doc/initscripts-version/sysconfig.txt éœ€è¦å°† ONBOOT=no æ›´æ”¹ä¸º ONBOOT=yes ä»¥ä½¿æ­¤ç½‘å¡å¼€æœºå°±æ¿€æ´»å¯ç”¨ï¼Œé‡å¯è™šæ‹Ÿæœºï¼ŒéªŒè¯ç½‘å¡æ˜¯å¦å·²ç»è‡ªåŠ¨æ¿€æ´»ï¼ˆè‡ªåŠ¨è·å¾—äº† ip åœ°å€åˆ™é…ç½®æˆåŠŸï¼‰ã€‚ ä½¿ç”¨ Xshell è¿œç¨‹ç™»é™† â€‹åœ¨ Xshell é‡Œæ–°å»ºè¿æ¥ï¼Œè¿›è¡Œé…ç½®å³å¯è¿œç¨‹ç™»é™†åˆ°æ­¤è™šæ‹Ÿæœºã€‚ RHEL å’Œ CentOS çš„åŒºåˆ« ç®€ç§° ä¸­æ–‡å…¨ç§° å­˜åœ¨ä»˜è´¹ ä»˜è´¹å›æŠ¥ ç‰¹ç‚¹ RHEL çº¢å¸½ä¼ä¸š Linux æ“ä½œç³»ç»Ÿ æ˜¯ è·å¾—æŠ€æœ¯æ”¯æŒ ç¨³å®šï¼Œæœ€å…ˆè·å¾— Bug ä¿®å¤ CentOS ç¤¾åŒºä¼ä¸šæ“ä½œç³»ç»Ÿ å¦ - å«æœ‰ä¸€äº›æ–°ç‰¹æ€§ï¼Œæ¯”è¾ƒç¨³å®šï¼Œå»¶è¿Ÿè·å¾— Bug ä¿®å¤","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤","slug":"Docker | Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤","date":"2022-02-27T14:03:20.637Z","updated":"2022-03-01T13:16:25.044Z","comments":true,"path":"2022-02-27-Docker | Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤.html","link":"","permalink":"https://skinyi.github.io/2022-02-27-Docker%20|%20Docker%20%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4.html","excerpt":"","text":"å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨æ ¼ å‘½ä»¤ ç”¨é€” docker version æŸ¥çœ‹ docker å®¢æˆ·ç«¯åŠæœåŠ¡ç«¯ï¼ˆdocker å¼•æ“ï¼‰çš„ç‰ˆæœ¬åŠç¯å¢ƒä¿¡æ¯ docker info æŸ¥çœ‹ docker çš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯é…ç½®ã€é•œåƒä¸å®¹å™¨æ•°é‡ä»¥åŠä¸€äº›å…¶ä»–å¸¸è§é…ç½® docker [å‘½ä»¤] --help æŸ¥çœ‹ docker [å‘½ä»¤] ä½¿ç”¨çš„å¸®åŠ©ä¿¡æ¯ï¼Œæ¯”å¦‚ docker image --help Docker å‘½ä»¤é€ŸæŸ¥æ‰‹å†Œåœ°å€ï¼šhttps://docs.docker.com/engine/reference/run/ ã€‚ å¸¸ç”¨å¸®åŠ©å‘½ä»¤ä»‹ç» docker version æŸ¥çœ‹ docker ç‰ˆæœ¬ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031[skinyi@fedora ~]\\$ sudo docker version[sudo] skinyi çš„å¯†ç ï¼šClient: Docker Engine - Community Version: 20.10.12 API version: 1.41 Go version: go1.16.12 Git commit: e91ed57 Built: Mon Dec 13 11:46:03 2021 OS/Arch: linux/amd64 Context: default Experimental: trueServer: Docker Engine - Community Engine: Version: 20.10.12 API version: 1.41 (minimum version 1.12) Go version: go1.16.12 Git commit: 459d0df Built: Mon Dec 13 11:43:48 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.12 GitCommit: 7b11cfaabd73bb80907dd23182b9347b4245eb5d runc: Version: 1.0.2 GitCommit: v1.0.2-0-g52b36a2 docker-init: Version: 0.19.0 GitCommit: de40ad0 docker info æŸ¥çœ‹ docker çš„ç³»ç»Ÿä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657[skinyi@fedora ~]\\$ sudo docker info[sudo] skinyi çš„å¯†ç ï¼šClient: Context: default Debug Mode: false Plugins: app: Docker App (Docker Inc., v0.9.1-beta3) buildx: Docker Buildx (Docker Inc., v0.7.1-docker) scan: Docker Scan (Docker Inc., v0.12.0)Server: Containers: 2 Running: 0 Paused: 0 Stopped: 2 Images: 1 Server Version: 20.10.12 Storage Driver: overlay2 Backing Filesystem: xfs Supports d_type: true Native Overlay Diff: true userxattr: false Logging Driver: json-file Cgroup Driver: systemd Cgroup Version: 2 Plugins: Volume: local Network: bridge host ipvlan macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog Swarm: inactive Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux Default Runtime: runc Init Binary: docker-init containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d runc version: v1.0.2-0-g52b36a2 init version: de40ad0 Security Options: seccomp Profile: default cgroupns Kernel Version: 5.16.8-200.fc35.x86_64 Operating System: Fedora Linux 35 (Server Edition) OSType: linux Architecture: x86_64 CPUs: 2 Total Memory: 3.788GiB Name: fedora ID: I5R6:5NIE:OTIL:XBI4:R6WP:5XSO:BZTG:QGV6:6RHG:OU7U:P3EP:JTEC Docker Root Dir: /var/lib/docker Debug Mode: false Registry: https://index.docker.io/v1/ Labels: Experimental: false Insecure Registries: 127.0.0.0/8 Live Restore Enabled: false docker [å‘½ä»¤] --help æŸ¥çœ‹ docker [å‘½ä»¤] çš„å¸®åŠ©ä¿¡æ¯ 123456789101112131415161718192021[skinyi@fedora ~]\\$ docker image --helpUsage: docker image COMMANDManage imagesCommands: build Build an image from a Dockerfile history Show the history of an image import Import the contents from a tarball to create a filesystem image inspect Display detailed information on one or more images load Load an image from a tar archive or STDIN ls List images prune Remove unused images pull Pull an image or a repository from a registry push Push an image or a repository to a registry rm Remove one or more images save Save one or more images to a tar archive (streamed to STDOUT by default) tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGERun &#x27;docker image COMMAND --help&#x27; for more information on a command. 123456789101112131415161718[skinyi@fedora ~]$ sudo docker container list --helpUsage: docker container ls [OPTIONS]List containersAliases: ls, ps, listOptions: -a, --all Show all containers (default shows just running) -f, --filter filter Filter output based on conditions provided --format string Pretty-print containers using a Go template -n, --last int Show n last created containers (includes all states) (default -1) -l, --latest Show the latest created container (includes all states) --no-trunc Don&#x27;t truncate output -q, --quiet Only display container IDs -s, --size Display total file sizes docker å­å‘½ä»¤åŠŸèƒ½ç®€ä»‹ å­å‘½ä»¤ æè¿° docker attach å°†æœ¬åœ°æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œé”™è¯¯æµé™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker build ä» Dockerfile æ„å»ºä¸€ä¸ªé•œåƒ docker builder ç®¡ç†é•œåƒæ„å»ºå™¨ docker checkpoint ç®¡ç†æ£€æŸ¥ç‚¹ docker commit ä»ä¸€ä¸ªå®¹å™¨çš„æ‰€æœ‰æ›´æ”¹åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ docker config ç®¡ç† Docker çš„é…ç½® docker container ç®¡ç†å®¹å™¨ docker context ç®¡ç† docker ä¸Šä¸‹æ–‡ docker cp åœ¨å®¹å™¨å’Œæœ¬åœ°å­˜å‚¨ä¹‹é—´æ‹·è´æ–‡ä»¶æˆ–ç›®å½• docker create åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ docker diff ç›‘è§†å®¹å™¨ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•çš„å˜åŒ– docker events ä» docker å®ˆæŠ¤æœåŠ¡ä¸Šè·å–å®æ—¶äº‹ä»¶ docker exec åœ¨ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤ docker export å°†ä¸€ä¸ªå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä»¥ tar åŒ…çš„å½¢å¼å¯¼å‡º docker history å±•ç¤ºä¸€ä¸ªé•œåƒçš„æäº¤å†å² docker image ç®¡ç† docker é•œåƒ docker images åˆ—å‡ºé•œåƒ docker import ä» tar åŒ…ä¸­å¯¼å…¥å†…å®¹æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿé•œåƒ docker info æ˜¾ç¤ºç³»ç»ŸèŒƒå›´çš„ä¿¡æ¯ docker inspect è¿”å› docker å¯¹è±¡çš„åº•å±‚ä¿¡æ¯ docker kill æ€æ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œä¸­çš„å®¹å™¨ docker load ä»ä¸€ä¸ª tar åŒ…æˆ–æ ‡å‡†è¾“å…¥æ¥åŠ è½½é•œåƒ docker login ç™»å½• Docker registry docker logout ç™»å‡º Docker registry docker logs è·å–ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿— docker manifest ç®¡ç† Docker é•œåƒæ¸…å•å’Œæ¸…å•åˆ—è¡¨","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½","slug":"Docker | Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½","date":"2022-02-27T13:03:47.405Z","updated":"2022-03-21T06:22:59.708Z","comments":true,"path":"2022-02-27-Docker | Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½.html","link":"","permalink":"https://skinyi.github.io/2022-02-27-Docker%20|%20Docker%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD.html","excerpt":"","text":"Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚ Docker å®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://docs.docker.com/ã€‚åœ¨å…¶å®˜ç½‘ä¸Šå…³äº docker çš„æ•´ä½“æ¶æ„ä»‹ç»å¯ä»¥æ‰¾åˆ°è¿™å¼ å›¾ï¼š å¯ä»¥çœ‹å‡º docker æ•´ä½“æ˜¯æ¨¡å—åŒ–ã€ä½è€¦åˆä¸”éµå¾ª C/S æ¶æ„çš„ï¼Œæ„æˆå®ƒçš„æ˜¯åŠŸèƒ½ä¸åŒçš„ç»„ä»¶ï¼Œä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç»„ä»¶çš„åŠŸèƒ½çš„æ¢³ç†ã€‚ Docker ç»„ä»¶ä»‹ç» Docker Daemonï¼šDocker å®ˆæŠ¤è¿›ç¨‹ï¼ˆdockerdï¼‰ç›‘å¬ Docker API è¯·æ±‚å¹¶ç®¡ç† Docker å¯¹è±¡ï¼Œä¾‹å¦‚é•œåƒã€å®¹å™¨ã€ç½‘ç»œå’Œå­˜å‚¨å·ã€‚å®ˆæŠ¤è¿›ç¨‹è¿˜å¯ä»¥ä¸å…¶ä»–å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ä»¥ç®¡ç† Docker æœåŠ¡ã€‚ Docker Clientï¼šDocker å®¢æˆ·ç«¯ï¼ˆdockerï¼‰æ˜¯è®¸å¤š Docker ç”¨æˆ·ä¸ Docker äº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å½“ä½ ä½¿ç”¨ docker run ç­‰å‘½ä»¤æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†è¿™äº›å‘½ä»¤å‘é€ç»™ dockerdï¼Œdockerd ä¼šæ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚ docker å‘½ä»¤ä½¿ç”¨ Docker APIã€‚Docker å®¢æˆ·ç«¯å¯ä»¥ä¸å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ã€‚ Docker Desktopï¼šæ˜¯ä¸€ä¸ªæ˜“äºå®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œé€‚ç”¨äº Mac æˆ– Windows ç¯å¢ƒï¼Œèƒ½å¤Ÿæ„å»ºå’Œå…±äº«å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡ã€‚Docker Desktop åŒ…æ‹¬ Docker å®ˆæŠ¤ç¨‹åº (dockerd)ã€Docker å®¢æˆ·ç«¯ (docker)ã€Docker Composeã€Docker Content Trustã€Kubernetes å’Œ Credential Helperã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Docker æ¡Œé¢ã€‚ Docker Registriesï¼šDocker ä»“åº“å­˜å‚¨ Docker æ˜ åƒï¼ˆDocker Imageï¼‰ã€‚DockerHub æ˜¯ä¸€ä¸ªä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨çš„å…¬å…±ä»“åº“ï¼Œå¹¶ä¸” Docker é»˜è®¤é…ç½®ä¸ºåœ¨ DockerHub ä¸ŠæŸ¥æ‰¾é•œåƒã€‚ç”šè‡³å¯ä»¥å®šåˆ¶è¿è¡Œè‡ªå·±çš„ç§æœ‰ä»“åº“ã€‚ å½“ä½¿ç”¨ docker pull æˆ– docker run å‘½ä»¤æ—¶ï¼Œå°†ä»ç³»ç»Ÿæ‰€é…ç½®çš„é•œåƒä»“åº“ä¸­æå–æ‰€éœ€çš„é•œåƒã€‚å½“ä½¿ç”¨ docker push å‘½ä»¤æ—¶ï¼Œä½ å®šåˆ¶çš„é•œåƒä¼šè¢«æ¨é€åˆ°ä½ é…ç½®çš„é•œåƒä»“åº“ä¸­ã€‚ Docker Objectsï¼šå½“ä½¿ç”¨ Docker æ—¶ï¼Œä¼šæ¶‰åŠåˆ°åˆ›å»ºå’Œä½¿ç”¨å›¾åƒã€å®¹å™¨ã€ç½‘ç»œã€å·ã€æ’ä»¶å’Œå…¶ä»–å¯¹è±¡ã€‚ä»¥ä¸‹ç®€è¦æ¦‚è¿°å…¶ä¸­ä¸€äº›å¯¹è±¡ã€‚ Docker Image Docker é•œåƒæ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ï¼Œå…¶ä¸­åŒ…å«åˆ›å»º Docker å®¹å™¨æ—¶çš„è¯´æ˜ã€‚é€šå¸¸ï¼Œä¸€ä¸ªé•œåƒåŸºäºå¦ä¸€ä¸ªé•œåƒï¼Œå¹¶é™„å¸¦æœ‰ä¸€äº›é¢å¤–çš„è‡ªå®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªåŸºäº ubuntu é•œåƒçš„é•œåƒï¼Œä½†ä¼šå®‰è£… Apache Web æœåŠ¡å™¨å’Œä¸€äº›ä½ çš„åº”ç”¨ç¨‹åºï¼Œè¯¥é•œåƒè¿˜åŒ…å«ä½¿ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„é…ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚ ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„é•œåƒï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨å…¶ä»–äººåˆ›å»ºå¹¶åœ¨ä»“åº“ä¸­å‘å¸ƒçš„é•œåƒã€‚è¦æ„å»ºä½ è‡ªå·±çš„é•œåƒï¼Œä½ éœ€è¦ä½¿ç”¨ç®€å•çš„è¯­æ³•åˆ›å»ºä¸€ä¸ª Dockerfileï¼Œç”¨äºå®šä¹‰åˆ›å»ºå’Œè¿è¡Œé•œåƒæ‰€éœ€çš„æ­¥éª¤ã€‚Dockerfile ä¸­çš„æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªå±‚ã€‚å½“ä½ æ›´æ”¹ Dockerfile å¹¶é‡å»ºæ˜ åƒæ—¶ï¼Œä»…é‡å»ºé‚£äº›å·²æ›´æ”¹çš„å±‚ã€‚ä¸å…¶ä»–è™šæ‹ŸåŒ–æŠ€æœ¯ç›¸æ¯”ï¼Œè¿™æ˜¯ä½¿é•œåƒå¦‚æ­¤è½»é‡ã€å°å·§å’Œå¿«é€Ÿçš„éƒ¨åˆ†åŸå› ã€‚ Docker Container Docker å®¹å™¨æ˜¯é•œåƒçš„å¯è¿è¡Œå®ä¾‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ Docker API æˆ– CLI åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚ä½ å¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œå°†å­˜å‚¨é™„åŠ åˆ°å®ƒï¼Œç”šè‡³å¯ä»¥æ ¹æ®å…¶å½“å‰çŠ¶æ€åˆ›å»ºæ–°çš„é•œåƒã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¹å™¨ä¸å…¶ä»–å®¹å™¨ä»¥åŠå…¶å®¿ä¸»æœºçš„éš”ç¦»ç›¸å¯¹è¾ƒå¥½ã€‚ä½ å¯ä»¥æ§åˆ¶å®¹å™¨çš„ç½‘ç»œã€å­˜å‚¨å’Œå…¶ä»–åº•å±‚å­ç³»ç»Ÿä¸å…¶ä»–å®¹å™¨æˆ–å®¿ä¸»æœºçš„éš”ç¦»ç¨‹åº¦ã€‚ ä¸€ä¸ªå®¹å™¨ç”±å…¶é•œåƒä»¥åŠä½ åœ¨åˆ›å»ºæˆ–å¯åŠ¨å®ƒæ—¶æä¾›ç»™å®ƒçš„ä»»ä½•é…ç½®é€‰é¡¹è¿›è¡Œå®šä¹‰ã€‚å½“å®¹å™¨è¢«ç§»é™¤æ—¶ï¼Œä»»ä½•æœªå­˜å‚¨åœ¨æŒä¹…å­˜å‚¨ä¸­çš„çŠ¶æ€æ›´æ”¹éƒ½ä¼šæ¶ˆå¤±ã€‚ â€‹Docker ä¸‰å¤§æ ¸å¿ƒç»„ä»¶æŒ‡çš„æ˜¯ï¼šDocker Imageã€Docker Container ä»¥åŠ Docker Registryã€‚ Docker è¿è¡Œç¤ºä¾‹ ä»¥ä¸‹å‘½ä»¤è¿è¡Œ ubuntu å®¹å™¨ï¼Œä»¥äº¤äº’æ–¹å¼é™„åŠ åˆ°æœ¬åœ°å‘½ä»¤è¡Œä¼šè¯ï¼Œå¹¶è¿è¡Œ /bin/bashã€‚ 1[skinyi@fedora ~]\\$ sudo docker run -i -t ubuntu /bin/bash ^ å®‰è£… Docker åå¦‚ä¸åšå…¶ä»–é…ç½®åˆ™ docker run å‘½ä»¤åªèƒ½ä½¿ç”¨ root æƒé™æ¥æ‰§è¡Œã€‚ å½“ä½ è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼ˆå‡è®¾ä½ ä½¿ç”¨çš„æ˜¯é»˜è®¤é•œåƒä»“åº“é…ç½®ï¼‰ï¼š å¦‚æœä½ åœ¨æœ¬åœ°æ²¡æœ‰ ubuntu æ˜ åƒï¼ŒDocker ä¼šä»ä½ é…ç½®çš„é•œåƒä»“åº“ï¼ˆé»˜è®¤ DockerHubï¼‰ä¸­æå–å®ƒï¼Œå°±åƒä½ æ‰‹åŠ¨è¿è¡Œ docker pull ubuntu ä¸€æ ·ï¼› Docker ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œå°±åƒä½ æ‰‹åŠ¨è¿è¡Œäº† docker container create å‘½ä»¤ä¸€æ ·ï¼› Docker ä¸ºè¯¥å®¹å™¨åˆ†é…ä¸€ä¸ªè¯»å†™æ–‡ä»¶ç³»ç»Ÿï¼Œä½œä¸ºè¯¥å®¹å™¨çš„åº•å±‚ï¼Œè¿™å…è®¸æ­£åœ¨è¿è¡Œçš„å®¹å™¨åœ¨å…¶æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶å’Œç›®å½•ï¼› ç”±äºæ²¡æœ‰æŒ‡å®šä»»ä½•å…¶ä»–çš„ç½‘ç»œé€‰é¡¹ï¼ŒDocker ä¼šåˆ›å»ºä¸€ä¸ªç½‘ç»œæ¥å£æ¥å°†è¯¥å®¹å™¨è¿æ¥åˆ°é»˜è®¤ç½‘ç»œï¼ŒåŒ…æ‹¬ä¸ºå®¹å™¨åˆ†é… IP åœ°å€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯ä»¥ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œè¿æ¥è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œã€‚ Docker å¯åŠ¨å®¹å™¨å¹¶æ‰§è¡Œ /bin/bashã€‚ç”±äºå®¹å™¨ä»¥äº¤äº’æ–¹å¼è¿è¡Œå¹¶é™„åŠ åˆ°æ‚¨çš„ç»ˆç«¯ï¼ˆ-i å’Œ -t é€‰é¡¹ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨å°†è¾“å‡ºè®°å½•åˆ°ç»ˆç«¯æ—¶ä½¿ç”¨é”®ç›˜æä¾›è¾“å…¥ã€‚ å½“ä½ é”®å…¥ exit å‘½ä»¤ä»¥ç»ˆæ­¢ /bin/bash å‘½ä»¤æ—¶ï¼Œå®¹å™¨ä¼šåœæ­¢ä½†ä¸ä¼šè¢«åˆ é™¤ï¼Œä½ å¯ä»¥é‡æ–°å¯åŠ¨æˆ–åˆ é™¤å®ƒã€‚ Docker çš„å®‰è£…ä¸å¸è½½ ä¸ªäººå­¦ä¹ ä½¿ç”¨æ“ä½œç³»ç»Ÿä¸ºï¼šFedora 35ï¼ŒFedora ç‰ˆæœ¬ç›®å‰ä»…æ”¯æŒ Fedora 34 å’Œ Fedora 35ã€‚ 12345678910111213141516171819202122[skinyi@fedora ~]\\$ cat /etc/os-releaseNAME=&quot;Fedora Linux&quot;VERSION=&quot;35 (Server Edition)&quot;ID=fedoraVERSION_ID=35VERSION_CODENAME=&quot;&quot;PLATFORM_ID=&quot;platform:f35&quot;PRETTY_NAME=&quot;Fedora Linux 35 (Server Edition)&quot;ANSI_COLOR=&quot;0;38;2;60;110;180&quot;LOGO=fedora-logo-iconCPE_NAME=&quot;cpe:/o:fedoraproject:fedora:35&quot;HOME_URL=&quot;https://fedoraproject.org/&quot;DOCUMENTATION_URL=&quot;https://docs.fedoraproject.org/en-US/fedora/f35/system-administrators-guide/&quot;SUPPORT_URL=&quot;https://ask.fedoraproject.org/&quot;BUG_REPORT_URL=&quot;https://bugzilla.redhat.com/&quot;REDHAT_BUGZILLA_PRODUCT=&quot;Fedora&quot;REDHAT_BUGZILLA_PRODUCT_VERSION=35REDHAT_SUPPORT_PRODUCT=&quot;Fedora&quot;REDHAT_SUPPORT_PRODUCT_VERSION=35PRIVACY_POLICY_URL=&quot;https://fedoraproject.org/wiki/Legal:PrivacyPolicy&quot;VARIANT=&quot;Server Edition&quot;VARIANT_ID=server Fedora æ“ä½œç³»ç»Ÿ Docker å®‰è£…æ–‡æ¡£ï¼šhttps://docs.docker.com/engine/install/fedora/ã€‚ å¸è½½æ—§ç‰ˆæœ¬ 12345678[skinyi@fedora ~]\\$ sudo dnf remove docker \\ docker-client \\ docker-client-lastest \\ docker-common \\ docker-lastest-logrotate \\ docker-selinux \\ docker-engine-selinux \\ docker-engine ä½¿ç”¨è½¯ä»¶ä»“åº“è¿›è¡Œ Doker çš„å®‰è£… â€‹å®‰è£… dnf-plugins-core æ’ä»¶ã€‚ 1[skinyi@fedora ~]$ sudo dnf -y install dnf-plugins-core â€‹æ·»åŠ  docker çš„å®˜æ–¹è½¯ä»¶ä»“åº“ã€‚ 12[skinyi@fedora ~]$ sudo dnf config-manager --add-repo \\ https://download.docker.com/linux/fedora/docker-ce.repo å®‰è£… Docker å¼•æ“ 1[skinyi@fedora ~]$ sudo dnf install docker-ce docker-ce-cli containerd.io å¯åŠ¨å¹¶éªŒè¯ Docker æ˜¯å¦æˆåŠŸå®‰è£… 1234567891011121314151617181920212223[skinyi@fedora ~]$ sudo systemctl start docker[skinyi@fedora ~]$ sudo docker run hello-worldHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/ å®ç°é root æƒé™æ‰§è¡Œ docker å‘½ä»¤æˆ–è€…å®ç°ä¸€äº›å…¶ä»–å®‰è£…åçš„ä¼˜åŒ–å¯ä»¥å‚é˜…ï¼šhttps://docs.docker.com/engine/install/linux-postinstall/ã€‚ å¸è½½ Docker å¼•æ“ 12[skinyi@fedora ~]$ sudo dnf remove docker-ce docker-ce-cli containerd.io[skinyi@fedora ~]$ sudo rm -rf /var/lib/docker /var/lib/containerd å¯åŠ¨ Docker æ—¶çš„æ‰§è¡Œè¿‡ç¨‹ å¯åŠ¨è¿‡ç¨‹ä¸­çš„æ³¨æ„ç‚¹ï¼š Docker ä¼˜å…ˆä½¿ç”¨çš„å­˜å‚¨é©±åŠ¨ä¸º Overlay2ï¼› åŠ è½½å®¹å™¨æ—¶ä¼šè®¾ç½®å®¹å™¨çš„ç½‘ç»œï¼Œå¹¶åˆ›å»ºè™šæ‹Ÿç½‘ç»œæ¥å£ docker0ï¼Œè¯¥æ¥å£ä½¿ç”¨æ¡¥æ¥æ¨¡å¼æ¥å…¥ç½‘ç»œï¼Œå¹¶åœ¨å®¿ä¸»æœºé˜²ç«å¢™ä¸­é…ç½®ä¸€ä¸ª docker zoneï¼› Docker çš„å®ˆæŠ¤ç¨‹åº dockerd åˆå§‹åŒ–æˆåŠŸåä¼šå¯åŠ¨ docker åº”ç”¨å®¹å™¨å¼•æ“ï¼Œç„¶å docker å¼•æ“é€šè¿‡ç›‘å¬ /run/docker.sock å¥—æ¥å­—å®ç°å®¢æˆ·ç«¯ä¸å®ˆæŠ¤ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢","slug":"Hexo | ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢","date":"2022-02-21T14:23:11.437Z","updated":"2022-03-30T07:56:22.109Z","comments":true,"path":"2022-02-21-Hexo | ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢.html","link":"","permalink":"https://skinyi.github.io/2022-02-21-Hexo%20|%20%E4%BD%BF%E7%94%A8%20Hexo%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html","excerpt":"","text":"ä¸€ç›´ä»¥æ¥éƒ½æœ‰æ­å»ºä¸ªäººç½‘ç«™æˆ–è€…è¯´åšå®¢çš„æƒ³æ³•ï¼Œä»Šå¤©ç»ˆäºæŠŠè¿™ä»¶äº‹åšæˆäº†ï¼Œæ„Ÿè°¢ Github å„å¤§ä»£ç æ‰˜ç®¡å¹³å°çš„ GitHub XXX Pages æœåŠ¡ï¼Œä½¿æˆ‘ä»¬å³ä½¿æ²¡æœ‰å…¬ç½‘æœåŠ¡å™¨ä¹Ÿèƒ½æ­ä¸ªäººäººå¯è®¿é—®çš„é™æ€ä¸ªäººç½‘ç«™ï¼Œè€Œä¸”æ— éœ€ä»»ä½•è´¹ç”¨ã€‚å½“ç„¶å›½å†…ç äº‘ä¹Ÿæœ‰è¿™é¡¹æœåŠ¡ï¼Œç”±äºä¸€äº›ç†ç”±æˆ‘æ²¡æœ‰åœ¨é‚£ä¸Šé¢å¼„ï¼Œ Github Pages ç”±äºå›½å†…è®¿é—®é€Ÿåº¦å¤ªæ…¢äº†ï¼Œæˆ‘å°±åœ¨ç äº‘ä¸Šé¢ä¹Ÿåˆ›å»ºäº†ä»“åº“ï¼Œç„¶è€Œå¯ç”¨ Pages åŠŸèƒ½éœ€è¦å®åè®¤è¯ã€‚è¨€å½’æ­£ä¼ ï¼ŒæŒ‰ç…§ Hexo ç¤¾åŒºçš„æƒ¯ä¾‹ä»¥åŠæ­£å¥½ä½œä¸ºè‡ªå·±å¯¹æ­å»ºä¸ªäººç½‘ç«™è¿‡ç¨‹çš„è®°å½•ï¼Œæˆ‘çš„ä¸ªäººç½‘ç«™ä¸Šçš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ‰“ç®—å†™å†™è¿™ä¸ªæ­å»ºåšå®¢çš„è¿‡ç¨‹ã€‚ å‡†å¤‡å·¥ä½œ æ­å»ºåšå®¢æ‰€éœ€çš„ç¯å¢ƒå’Œå®˜ç½‘åœ°å€å¦‚ä¸‹ï¼š åç§° ä½œç”¨ å®˜ç½‘ Nodejs Hexo åšå®¢æ¡†æ¶ä¾èµ–çš„å¼€å‘ç¯å¢ƒ https://nodejs.org/en/ Git æ¨é€åšå®¢è‡³ github æˆ–å…¶ä»–ä¸€äº›ä»£ç æ‰˜ç®¡ https://git-scm.com/ Hexo å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ https://hexo.io/zh-cn/ Purer theme ä¸€æ¬¾ç®€æ´é«˜æ•ˆçš„å“åº”å¼ä¸ªäººåšå®¢ä¸»é¢˜ https://github.com/fengkx/hexo-theme-purer åšå®¢ç³»ç»Ÿå¹³å°ç¯å¢ƒæ­å»ºåœ¨æˆ‘çš„ Fedora 35 è™šæ‹Ÿæœºä¸Šã€‚ 12[skinyi@localhost ~]$ uname -aLinux localhost.localdomain 5.16.9-200.fc35.x86_64 #1 SMP PREEMPT Fri Feb 11 16:29:17 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux å®‰è£…æ­¥éª¤ æˆ‘éå¸¸å»ºè®®ä½ æŒ‰ç…§æˆ‘ä¸Šé¢æ‰€ç»™çš„è¡¨æ ¼æ¥è®¿é—®å®˜æ–¹æ–‡æ¡£æ¥åˆ†æ­¥è¿›è¡Œéƒ¨ç½²ã€‚å®˜æ–¹æ–‡æ¡£æ°¸è¿œä¸ä¼šè¿‡æ—¶è€Œä¸”è¯¦å°½ï¼Œä¼šæœ€å¤§ç¨‹åº¦ä¸Šè§£å†³ä½ çš„ç–‘è™‘ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¯¹æ­¤æ¬¡éƒ¨ç½²è¿‡ç¨‹çš„ä¸€æ¬¡è®°å½•ï¼Œå…¶ä¸­ä¼šç€é‡è®°å½•æˆ‘çš„éƒ¨ç½²è¿‡ç¨‹ä¸­è¸©è¿‡çš„ä¸€äº›å‘ã€‚ å®‰è£… Nodejs ä½¿ç”¨ Linux ç³»ç»Ÿæˆ‘ä¸ªäººæ¯”è¾ƒå€¾å‘äºä»è½¯ä»¶ä»“åº“è·å¾—è½¯ä»¶ï¼Œä½†æ˜¯è½¯ä»¶ä»“åº“é‡Œçš„è½¯ä»¶ä¸ä¸€å®šä¼šæ˜¯æœ€æ–°ç‰ˆçš„ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¯ä»¥ä½¿æˆ‘ä»¬çœå»è‡ªå·±ç¼–è¯‘ã€é…ç½®çš„æ—¶é—´ã€‚Nodejs å®˜ç½‘ä¸Šçš„ä¸‹è½½é¡µé¢é‡Œçš„ Linux äºŒè¿›åˆ¶ç‰ˆæœ¬æ˜¯å‹ç¼©åŒ…ï¼Œè¦ä»è½¯ä»¶ä»“åº“è·å¾—å®ƒçš„è¯éœ€è¦ç‚¹å‡»ä¸‹é¢çš„ Installing Node.js via package manager é“¾æ¥æ¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ æ ¹æ®æ–‡æ¡£çš„æè¿°ï¼ŒFedora 35 å¯ä»¥é€šè¿‡å®‰è£… dnf è½¯ä»¶æ¨¡å—çš„æ–¹å¼æ¥è¿›è¡Œå®‰è£…ï¼Œå¯ä»¥å…ˆçœ‹çœ‹ä»“åº“é‡Œå·²æœ‰çš„è½¯ä»¶æµç‰ˆæœ¬ï¼š 1234567891011121314151617[skinyi@localhost ~]$ dnf module list nodejsä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:08:01 å‰ï¼Œæ‰§è¡Œäº 2022å¹´02æœˆ23æ—¥ æ˜ŸæœŸä¸‰ 18æ—¶50åˆ†04ç§’ã€‚Fedora Modular 35 - x86_64Name Stream Profiles Summary nodejs 12 default, development, minimal Javascript runtime nodejs 14 default, development, minimal Javascript runtime nodejs 15 default, development, minimal Javascript runtime nodejs 16 default, development, minimal Javascript runtime Fedora Modular 35 - x86_64 - UpdatesName Stream Profiles Summary nodejs 12 default, development, minimal Javascript runtime nodejs 14 common, development, minimal Javascript runtime nodejs 15 default, development, minimal Javascript runtime nodejs 16 [e] common, development, minimal Javascript runtime æç¤ºï¼š[d]é»˜è®¤ï¼Œ[e]å·²å¯ç”¨ï¼Œ[x]å·²ç¦ç”¨ï¼Œ[i]å·²å®‰è£… Hexo å®˜æ–¹æ–‡æ¡£ä¸­å»ºè®® Nodejs ç‰ˆæœ¬ä½¿ç”¨ Nodejs 12.0 åŠä»¥ä¸Šç‰ˆæœ¬çš„ï¼Œåœ¨è¿™é‡Œæˆ‘é€‰æ‹©å®‰è£… Nodejs 16 ç‰ˆæœ¬çš„ã€‚ 1[skinyi@localhost ~]$ sudo dnf module install nodejs:16 å®‰è£…å®ŒæˆåæŸ¥çœ‹ Nodejs ç‰ˆæœ¬å·ï¼š 12[skinyi@localhost ~]$ node -vv16.14.0 ä»ä»“åº“å®‰è£…å®Œæˆåï¼Œéœ€è¦å‡çº§ npm ç‰ˆæœ¬ä»¥åŠä¸ºäº†ä¸ç”¨ä»¥ root æƒé™æ‰§è¡Œ npm å‘½ä»¤ï¼Œéœ€è¦æ›´æ”¹ npm çš„é…ç½®ï¼š 1234# åœ¨å½“å‰ç”¨æˆ·ä¸»ç›®å½•åˆ›å»º npm å…¨å±€å®‰è£…ç›®å½•[skinyi@localhost ~]$ mkdir ~/.npm-global# é…ç½® npm ä½¿ç”¨åˆšæ‰å»ºçš„ç›®å½•è·¯å¾„[skinyi@localhost ~]$ npm config set prefix &#x27;~/.npm-global&#x27; æ·»åŠ  ~/.npm-global/bin è·¯å¾„åˆ°ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼š 12[skinyi@localhost ~]$ echo &#x27;export PATH=~/.npm-global/bin:$PATH&#x27; &gt;&gt; ~/.bash_rc[skinyi@localhost ~]$ source ~/.bash_rc å®‰è£…Git ä½¿ç”¨ dnf åŒ…ç®¡ç†å™¨å®‰è£… Gitï¼š 1[skinyi@localhost ~]$ sudo dnf install git-core git å…¨å±€é…ç½®ï¼Œå¦‚æœéœ€è¦é€šè¿‡ git å°†åšå®¢éƒ¨ç½²åˆ° Github Pages ä¸Šï¼Œéœ€è¦é…ç½® git çš„ä¸€äº›å…¨å±€è®¾ç½®ï¼š 12[skinyi@localhost ~]$ git config --global user.name &quot;github ä¸Šçš„ç”¨æˆ·å&quot;[skinyi@localhost ~]$ git config --global user.email &quot;æ³¨å†Œ github è´¦å·ä½¿ç”¨çš„é‚®ç®±&quot; å®‰è£… Hexo ä»¥ä¸Šä¾èµ–è½¯ä»¶å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥è¿›è¡Œ Hexo çš„å®‰è£…äº†ï¼š 1[skinyi@localhost ~]$ npm install -g hexo-cli åœ¨å·¥ä½œç›®å½•é‡Œåˆå§‹åŒ–è‡ªå·±çš„åšå®¢é¡¹ç›®ï¼š 1234[skinyi@localhost ~]$ hexo init blog[skinyi@localhost ~]$ cd blog[skinyi@localhost ~]$ npm install[skinyi@localhost ~]$ hexo server å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æœ¬åœ°åœ°å€ï¼šhttp://127.0.0.1:4000 æ¥é¢„è§ˆç”Ÿæˆçš„åšå®¢ç½‘ç«™ï¼Œè‹¥è¦åœ¨å¤–éƒ¨è®¿é—®çš„è¯éœ€è¦é€šè¿‡é˜²ç«å¢™å¼€æ”¾ 4000 ç«¯å£ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚ æ›´æ¢åšå®¢ä¸»é¢˜ ä» Hexo ä¸»é¢˜åˆ—è¡¨é‡Œç­›é€‰äº†ä¸€åœˆåæˆ‘ç»ˆäºé€‰ä¸­äº†æ­¤æ—¶ç”¨çš„è¿™æ¬¾ä¸»é¢˜ï¼Œå®ƒçš„ Github é“¾æ¥æ˜¯ï¼šhttps://github.com/fengkx/hexo-theme-purer ï¼Œå¦‚æœä½ ä¹Ÿå–œæ¬¢è¿™æ¬¾ä¸»é¢˜ï¼Œå¯ä»¥é€šè¿‡é¡¹ç›®ä¸»é¡µçš„çš„è¯´æ˜æ–‡æ¡£æ¥äº†è§£å®ƒçš„å®‰è£…ã€é…ç½®åŠä½¿ç”¨ï¼Œä¸è¿‡å»ºè®®ä½ åœ¨çœ‹ä½œè€…çš„æ–‡æ¡£å‰å…ˆå¤§è‡´çœ‹ä¸‹ Hexo çš„ä½¿ç”¨æ–‡æ¡£æ¥äº†è§£äº†è§£ Hexo çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œè¿™æ ·çœ‹ä½œè€…çš„æ–‡æ¡£å†ä¸Šæ‰‹å°±æ¯”è¾ƒå®¹æ˜“äº†ã€‚ è¿™æ¬¾ä¸»é¢˜æ˜¯åŸºäº EJS å’Œ Tailwind CSS æ„å»ºçš„ï¼Œä»¥åè‹¥æœ‰å…´è¶£æ„å»ºè‡ªå·±çš„ä¸»é¢˜å¯ä»¥å‚è€ƒä½¿ç”¨è¿™ä¸¤ç§æŠ€æœ¯ã€‚ ä¸‹è½½ä¸»é¢˜æ–‡ä»¶ æˆ‘æ²¡æœ‰æŒ‰ç…§å®˜æ–¹ä½¿ç”¨ git clone åŒæ­¥çš„æ–¹æ³•æ¥ä¸‹è½½ä¸»é¢˜ï¼Œç›´æ¥é€šè¿‡ä¸‹è½½ä»“åº“æºç çš„æ–¹å¼ä¸‹è½½ä¸‹æ¥ã€‚gh-pages æ˜¯æˆ‘çš„æ•´ä¸ªåšå®¢é¡¹ç›®çš„ä¸»ç›®å½•ã€‚ 123[skinyi@localhost gh-pages]$ wget -c https://github.com/fengkx/hexo-theme-purer/archive/refs/heads/master.zip -O themes/[skinyi@localhost gh-pages]$ unzip themes/master.zip[skinyi@localhost gh-pages]$ mv themes/hexo-theme-purer-master themes/purer æ–‡æ¡£ä¸­ä¸ºäº†é¿å…ç”±äºä¸»é¢˜æ›´æ–°è€Œå¯¼è‡´åŸæœ‰çš„ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶å¤±æ•ˆæ•…è€Œé€‰æ‹©æŠŠä¸»é¢˜çš„ _config.yml æ”¾åœ¨ä¸»é¢˜å¤–é¢å¹¶å–åä¸º _config.theme.ymlï¼Œåœ¨è¿›è¡Œç¼–è¯‘æ—¶å°†æ­¤æ–‡ä»¶çš„å†…å®¹å†™è¿›ä¸»é¢˜åº•ä¸‹çš„ _config.ymlã€‚è™½ç„¶æˆ‘ä¹‹åä¸ä¼šæ›´æ–°è¿™ä¸ªä¸»é¢˜ä½†æ˜¯æˆ‘è¿˜æ˜¯æŒ‰ç…§æ–‡æ¡£é‡Œçš„åšäº†ï¼Œåªä¸è¿‡æˆ‘èµ·çš„åå­—ä¸º _config.purer.ymlã€‚ å°† purer ä¸»é¢˜ä¸‹çš„ _config.example.yml å¤åˆ¶åˆ°é¡¹ç›®ä¸»ç›®å½•ä¸‹ã€‚ç„¶åç¼–è¾‘ package.json çš„å†…å®¹å¦‚ä¸‹ï¼š 12[skinyi@localhost gh-pages]$ cp themes/purer/_config.example.yml _config.purer.yml[skinyi@localhost gh-pages]$ code package.json package.json123456789&#123; &quot;scripts&quot;: &#123; &quot;theme&quot;: &quot;cat ./_config.purer.yml &gt; ./themes/purer/_config.yml &quot;, &quot;build&quot;: &quot;npm run theme &amp;&amp; hexo generate&quot;, &quot;clean&quot;: &quot;hexo clean&quot;, &quot;deploy&quot;: &quot;npm run theme &amp;&amp; hexo deploy&quot;, &quot;server&quot;: &quot;npm run theme &amp;&amp; hexo server&quot; &#125;,&#125; é…ç½®ä¸»é¢˜ å®‰è£…åŠé…ç½®æ’ä»¶ é¦–å…ˆå¯é€‰çš„å·¥ä½œæ˜¯å¸è½½ä¸éœ€è¦æˆ–ä¸æ¨èçš„æ¸²æŸ“å™¨ï¼š 12[skinyi@localhost gh-pages]$ npm uninstall hexo-renderer-stylus[skinyi@localhost gh-pages]$ npm uninstall hexo-renderer-marked å®‰è£… markdown-it æ¸²æŸ“å™¨ä»¥åŠå…¶ä»–å¸¸ç”¨æ’ä»¶ï¼š 12345678# markdown-it æ¸²æŸ“å™¨[skinyi@localhost gh-pages]$ npm i -S hexo-renderer-markdown-it# æ”¯æŒä»post_assert_folder ç”¨ markdown å¼•å…¥å›¾ç‰‡[skinyi@localhost gh-pages]$ npm i -S hexo-asset-image# æ”¯æŒ emoji[skinyi@localhost gh-pages]$ npm i -S markdown-it-emoji# æ”¯æŒæ•°å­¦å…¬å¼[skinyi@localhost gh-pages]$ npm i -S @iktakahiro/markdown-it-katex ç”±äº hexo-renderer-markdown-it é»˜è®¤ä¸ç”Ÿæˆ h1 çš„é”šç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼Œåœ¨æ’ä»¶å¯¹è±¡é‡Œå°†åˆšæ‰æ·»åŠ çš„ä¸¤ä¸ªæ’ä»¶åŠ è¿›å»: _config.yml123456789101112131415markdown: html: true xhtmlOut: true breaks: true langPrefix: linkify: true typographer: quotes: â€œâ€â€˜â€™ anchors: level: 1 permalink: false separator: &#x27;-&#x27; plugins: - &#x27;@iktakahiro/markdown-it-katex&#x27; - markdown-it-emoji åˆ›å»ºå¸¸è§é¡µé¢ åœ¨ é¡¹ç›®ä¸»ç›®å½•/source ä¸‹æŒ‰éœ€æ·»åŠ  categoriesã€tagsã€repositoriesã€linksã€about ç›®å½•ï¼Œè¿™äº›åˆ†åˆ«å¯¹åº”åšå®¢æ¡†æ¶ä¸­çš„åˆ†ç±»é¡µã€æ ‡ç­¾é¡µã€ä»“åº“é¡µï¼ˆä¸»é¢˜ç‹¬æœ‰ï¼‰ã€å‹é“¾é¡µã€å…³äºé¡µã€‚ç„¶ååœ¨å…¶ä¸­åˆ›å»ºå¯¹åº”çš„ index.md æ–‡ä»¶ã€‚ æˆ‘çš„é¡¹ç›®æ²¡æœ‰è¦å‹é“¾é¡µï¼Œæ•…æœ€ç»ˆç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 12345678910111213141516171819[skinyi@localhost gh-pages]$ tree -L 2 sourcesourceâ”œâ”€â”€ aboutâ”‚ â””â”€â”€ index.mdâ”œâ”€â”€ categoriesâ”‚ â””â”€â”€ index.mdâ”œâ”€â”€ imagesâ”‚ â”œâ”€â”€ avatar.jpgâ”‚ â””â”€â”€ favicon.pngâ”œâ”€â”€ _postsâ”‚ â”œâ”€â”€ ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢.mdâ”‚ â””â”€â”€ imagesâ”œâ”€â”€ README.mdâ”œâ”€â”€ repositoryâ”‚ â””â”€â”€ index.mdâ””â”€â”€ tags â””â”€â”€ index.md7 directories, 8 files å¦‚æœä½ äº‹å…ˆçœ‹è¿‡ Hexo çš„æ–‡æ¡£ï¼Œä½ å°±ä¼šçŸ¥é“ _post ç›®å½•å­˜æ”¾çš„æ˜¯å†™å¥½çš„æ–‡ç« ä»¥åŠæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ index.md éœ€è¦æ·»åŠ  front-matterã€‚ä»¥å†…å®¹ç¨å¾®å¤šçš„ about ç›®å½•çš„ front-matter ä¸ºä¾‹ï¼š 1234567---title: å…³äºdescription: ä¸ªäººç®€ä»‹layout: aboutsidebar: customdate: 2022-02-22 20:55:00--- å…¶ä»–ç›®å½•çš„ front-matter å¯ä»¥å‚è€ƒä¸»é¢˜ä½œè€…æ–‡æ¡£ä¸­çš„ Demo é“¾æ¥ã€‚ å®šåˆ¶ä¸»é¢˜é…ç½® æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹é¡¹ç›®ä¸»ç›®å½•ä¸‹çš„ _config_purer.yml æ–‡ä»¶æ¥å®šåˆ¶è‡ªå·±çš„ä¸»é¢˜ï¼Œè¿™ä¸ªå‚ç…§ä¸»é¢˜æ–‡æ¡£æŒ‰ç…§è‡ªå·±çš„å¿ƒæ„å®šåˆ¶å°±æˆï¼Œæˆ‘æ²¡æœ‰è¦å‹é“¾å’Œä¹¦å•é¡µé¢ã€‚ å†™ä½œ æ‰€æœ‰å·²ç»å‘è¡¨çš„æ–‡ç« éƒ½åœ¨é¡¹ç›®ç›®å½•çš„ source/_posts å­ç›®å½•ä¸‹ï¼ŒHexo åŒæ ·æ”¯æŒæ·»åŠ è‰ç¨¿ï¼Œè‰ç¨¿ç›®å½•é‡Œçš„æ–‡ç« é»˜è®¤ä¸ä¼šæ¸²æŸ“å‡ºæ¥ã€‚å¯¹æˆ‘æ¥è¯´æ‡’å¾—ä½¿ç”¨è‰ç¨¿äº†ï¼Œå› ä¸ºå¹ç‰›æ ¹æœ¬ä¸éœ€è¦æ‰“è‰ç¨¿ã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢ VSCode é‡Œè¾¹å†™è¾¹æƒ³ï¼Œå†™å®Œåå†éƒ¨ç½²å°±å¯ä»¥äº†ï¼Œæ ¹æœ¬ä¸éœ€è¦è‰ç¨¿ã€‚ åšæ–‡æ˜¯ä»¥ markdown æ ¼å¼ç¼–å†™çš„ï¼Œå¥½åœ¨è¿™é—¨è¯­è¨€çš„å­¦ä¹ æˆæœ¬å¹¶ä¸é«˜ï¼Œå¤šå†™å¤šç”¨å¤šè®°å°±å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†ä½¿ç”¨éœ€è¦ï¼Œæ¯”è¾ƒå†·é—¨çš„æ ¼å¼éœ€è¦ç”¨çš„æ—¶å€™å†æŸ¥ä¹ŸèŠ±è´¹ä¸äº†å¤ªé•¿æ—¶é—´ã€‚ éƒ¨ç½²æ–‡ç«  åšå®¢ç½‘ç«™æ­å»ºèµ·æ¥äº†éœ€è¦éƒ¨ç½²åˆ°å…¬ç½‘ä¸Šæ‰èƒ½è¢«ä»–äººçœ‹åˆ°ï¼Œä½†æ˜¯å…¬ç½‘ IP ä»¥åŠæœåŠ¡å™¨éœ€è¦èŠ±è´¹ä¸å°çš„ç»æµæˆæœ¬ï¼Œå¥½åœ¨ä¸€äº›ä»£ç æ‰˜ç®¡ç½‘ç«™éƒ½æä¾›äº† XXX Pages æœåŠ¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨å›½å†…çš„å¹³å°ä¸Šå¯ç”¨ Pages æœåŠ¡ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œå®åè®¤è¯ï¼Œè€Œåœ¨ Github Pages ä¸Šéƒ¨ç½²ä¸éœ€è¦è¿›è¡Œå®åã€‚ ä½¿ç”¨ git çš„æ–¹å¼è¿›è¡Œåšå®¢éƒ¨ç½²å¯ä»¥å®‰è£… hexo æ’ä»¶ hexo-deployer-gitï¼š 1[skinyi@localhost gh-pages]$ npm install hexo-deployer-git --save åœ¨ _config.yml ä¸­ä¿®æ”¹é…ç½®ï¼š 1234567deploy: type: git repo: github: &lt;github ä»“åº“åœ°å€&gt; # å¦‚ https://github.com/xxx/xxx.github.io gitee: &lt;gitee ä»“åº“åœ°å€&gt; # å¦‚ https://gitee.com/xxx/xxx branch: [ä»£ç åˆ†æ”¯] # å¦‚ master message: [æäº¤ä¿¡æ¯] ç”Ÿæˆç«™ç‚¹æ–‡ä»¶å¹¶æ¨é€è‡³è¿œç¨‹ä»“åº“ï¼š 1[skinyi@localhost gh-pages]$ hexo clean &amp;&amp; hexo deploy é€šè¿‡ Git æ–¹å¼æäº¤æ—¶å»ºè®®åœ¨æœ¬åœ°ç”Ÿæˆå…¬ç§é’¥å¯¹å¹¶å°†ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶æ·»åŠ åˆ°è¿œç¨‹ä»“åº“çš„å…¬é’¥åˆ—è¡¨é‡Œï¼Œç„¶åæ¯æ¬¡æäº¤æ—¶å°±å¯ä»¥é€šè¿‡éªŒè¯å…¬ç§å¯†é’¥å¯¹çš„æ–¹å¼è€Œä¸ç”¨æ¯æ¬¡éƒ½è¾“ç”¨æˆ·ååŠå¯†ç ã€‚ åˆ°è¿™é‡ŒåŸºæœ¬ç®—æ˜¯ä»‹ç»å®Œäº†æ‰€æœ‰çš„æ­å»ºæ­¥éª¤ï¼Œä¹‹åæˆ‘ä¼šæŠŠæˆ‘åœ¨ Typora é‡Œå†™çš„æ‰€æœ‰å­¦ä¹ ç¬”è®°éƒ½æ¬è¿åˆ°è¿™ä¸ªåšå®¢ä¸­ï¼Œå½“ç„¶è¿™ä¸ªç½‘ç«™çš„å†…å®¹å¹¶ä¸å±€é™äºä¸€äº›è·ŸæŠ€æœ¯ç›¸å…³çš„ä¸œè¥¿ï¼Œæˆ‘å¹¶ä¸ç¡®å®šæˆ‘å†™çš„è¿™äº›ä¸œè¥¿ä¼šä¸ä¼šæœ‰äººçœ‹ï¼Œæˆ‘ä¹Ÿæ‰“ç®—å†™ä¸€äº›æŠ€æœ¯åšå®¢ä»¥å¤–çš„ä¸œè¥¿ï¼Œä¸ç®¡ä»¥åæ€ä¹ˆæ ·ã€å†™äº›ä»€ä¹ˆï¼Œå°±æ´»åœ¨å½“ä¸‹ã€äº«å—å¹¶è®°å½•ç”Ÿæ´»å§ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ‚é¡¹","slug":"å­¦ä¹ /æ‚é¡¹","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/%E6%9D%82%E9%A1%B9/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://skinyi.github.io/tags/Javascript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://skinyi.github.io/tags/Nodejs/"},{"name":"Hexo","slug":"Hexo","permalink":"https://skinyi.github.io/tags/Hexo/"},{"name":"Markdown","slug":"Markdown","permalink":"https://skinyi.github.io/tags/Markdown/"}]}],"categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"ACP","slug":"å­¦ä¹ /ACP","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/ACP/"},{"name":"Office","slug":"å­¦ä¹ /Office","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Office/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"},{"name":"æ‚é¡¹","slug":"å­¦ä¹ /æ‚é¡¹","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/%E6%9D%82%E9%A1%B9/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"},{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"},{"name":"ACP","slug":"ACP","permalink":"https://skinyi.github.io/tags/ACP/"},{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"https://skinyi.github.io/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"https://skinyi.github.io/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"},{"name":"Excel","slug":"Excel","permalink":"https://skinyi.github.io/tags/Excel/"},{"name":"Office","slug":"Office","permalink":"https://skinyi.github.io/tags/Office/"},{"name":"é¿å…åŠ ç­","slug":"é¿å…åŠ ç­","permalink":"https://skinyi.github.io/tags/%E9%81%BF%E5%85%8D%E5%8A%A0%E7%8F%AD/"},{"name":"å°‘åŠ ç­","slug":"å°‘åŠ ç­","permalink":"https://skinyi.github.io/tags/%E5%B0%91%E5%8A%A0%E7%8F%AD/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"Javascript","slug":"Javascript","permalink":"https://skinyi.github.io/tags/Javascript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://skinyi.github.io/tags/Nodejs/"},{"name":"Hexo","slug":"Hexo","permalink":"https://skinyi.github.io/tags/Hexo/"},{"name":"Markdown","slug":"Markdown","permalink":"https://skinyi.github.io/tags/Markdown/"}]}