{"meta":{"title":"Avery Ma çš„ä¸ªäººç½‘ç«™","subtitle":"è¿™æ˜¯ä»€ä¹ˆï¼Ÿ","description":"ä¸ªäººç½‘ç«™ã€åšå®¢","author":"skinyi","url":"https://skinyi.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2022-02-22T12:55:00.000Z","updated":"2022-02-24T13:30:42.633Z","comments":true,"path":"about/index.html","permalink":"https://skinyi.github.io/about/index.html","excerpt":"","text":"å…³äºæˆ‘ è”ç³»æˆ‘ é‚®ç®±ï¼šaveryma@foxmail.com"},{"title":"categories","date":"2022-02-23T06:19:06.228Z","updated":"2022-02-23T06:19:06.228Z","comments":false,"path":"categories/index.html","permalink":"https://skinyi.github.io/categories/index.html","excerpt":"","text":""},{"title":"repositories","date":"2022-02-23T06:19:12.138Z","updated":"2022-02-23T06:19:12.138Z","comments":false,"path":"repository/index.html","permalink":"https://skinyi.github.io/repository/index.html","excerpt":"","text":""},{"title":"tags","date":"2022-02-23T06:19:18.235Z","updated":"2022-02-23T06:19:18.235Z","comments":false,"path":"tags/index.html","permalink":"https://skinyi.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰","slug":"Linux | RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰","date":"2022-08-29T15:07:00.394Z","updated":"2022-08-30T01:27:03.375Z","comments":true,"path":"2022-08-29-Linux | RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-29-Linux%20|%20RHCE8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ï¼ˆæ¥ä¸Šå¸¸è§„é¢˜ï¼‰ ä¿®æ”¹æ–‡ä»¶å†…å®¹ æŒ‰ç…§ä¸‹æ–¹æ‰€è¿°ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/issue.yml çš„ playbook ï¼š è¯¥ playbook å°†åœ¨æ‰€æœ‰æ¸…å•ä¸»æœºä¸Šè¿è¡Œï¼› è¯¥ playbook ä¼šå°† /etc/issue çš„å†…å®¹æ›¿æ¢ä¸ºä¸‹æ–¹æ‰€ç¤ºçš„ä¸€è¡Œæ–‡æœ¬ï¼š åœ¨ dev ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šï¼Œè¿™è¡Œæ–‡æœ¬æ˜¾ç¤º ä¸ºï¼šDevelopment; åœ¨ test ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šï¼Œè¿™è¡Œæ–‡æœ¬æ˜¾ç¤º ä¸ºï¼šTest; åœ¨ prod ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šï¼Œè¿™è¡Œæ–‡æœ¬æ˜¾ç¤º ä¸ºï¼šProduction. ğŸ’¯ ç­”æ¡ˆï¼š åˆ›å»ºå¹¶ç¼–è¾‘å‰§æœ¬ï¼š 1[greg@control ~]$ vim /home/greg/ansible/issue.yml 12345678910111213141516171819---- name: Modify File hosts: all tasks: - name: On dev copy: content: &quot;Development&quot; dest: /etc/issue when: &quot;inventory_hostname in groups.dev&quot; - name: On test copy: content: &quot;Test&quot; dest: /etc/issue when: &quot;inventory_hostname in groups.test&quot; - name: On prod copy: content: &quot;Production&quot; dest: /etc/issue when: &quot;inventory_hostname in groups.prod&quot; æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼š 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/issue.yml[greg@control ansible]$ ansible dev,test,prod -a &quot;cat /etc/issue&quot; # éªŒè¯ åˆ›å»º web å†…å®¹ç›®å½• æŒ‰ç…§ä¸‹æ–¹æ‰€è¿°ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/webcontent.yml çš„ playbook ï¼š è¯¥ playbook åœ¨ dev ä¸»æœºç»„ä¸­çš„å—ç®¡èŠ‚ç‚¹ä¸Šè¿è¡Œï¼› åˆ›å»ºç¬¦åˆä¸‹åˆ—è¦æ±‚çš„ç›®å½• /webdev: æ‰€æœ‰è€…ä¸º webdev ç»„ï¼› å…·æœ‰å¸¸è§„æƒé™ï¼šowner=read+write+execute, group=read+write+execute, other=read+execute; å…·æœ‰ç‰¹æ®Šæƒé™ï¼šè®¾ç½®ç»„ ID; ç”¨ç¬¦å·é“¾æ¥å°† /var/www/html/webdev é“¾æ¥åˆ° /webdev; åˆ›å»ºæ–‡ä»¶ /webdev/index.html, å…¶ä¸­åŒ…å«å¦‚ä¸‹æ‰€ç¤ºçš„å•è¡Œæ–‡ä»¶ï¼š Development; åœ¨ dev ä¸»æœºç»„ä¸­ä¸»æœºä¸Šæµè§ˆæ­¤ç›®å½•ï¼ˆä¾‹å¦‚ http://172.25.250.9/webdev/ ï¼‰å°†ç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š 1Development ğŸ’¯ ç­”æ¡ˆï¼š æœ¬é¢˜ä¸­ç”±äºæ¶‰åŠåˆ° web æœåŠ¡å°±éœ€è¦æˆ‘ä»¬è¿›è¡Œå®‰è£… apache å¹¶é…ç½®ä»¥åŠé…ç½®é˜²ç«å¢™å’Œ selinux ç­‰ä¸€ç³»åˆ—å·¥ä½œï¼Œä½†æ˜¯è¿˜å¥½æˆ‘ä»¬ä¹‹å‰åˆ›å»ºè¿‡ä¸€ä¸ª apache è§’è‰²ï¼Œå…¶ä¸­çš„éƒ¨åˆ†æ“ä½œæ»¡è¶³æˆ‘ä»¬æ­¤é¢˜çš„éœ€è¦å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥æŠŠ apache ä»»åŠ¡éƒ¨åˆ†ç›´æ¥æ‹¿è¿‡æ¥ç”¨ã€‚ åˆ›å»ºå¹¶ç¼–å†™å‰§æœ¬ï¼š 1[greg@control ~]$ vim /home/greg/ansible/webcontent.yml 123456789101112131415161718192021222324252627282930313233343536373839---- name: hosts: dev tasks: - name: Install Apache Packages yum: name: httpd state: present - name: Configure Firewall filewalld: service: http state: enabled permanent: yes # é˜²ç«å¢™è§„åˆ™æ°¸ä¹…ç”Ÿæ•ˆ immediate: yes # é˜²ç«å¢™è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼ˆå¯èƒ½ä¼šå¤±è´¥ï¼Œè‹¥é˜²ç«å¢™äº‹å…ˆæœªå¼€å¯ï¼‰ - name: Create Webdav Directory file: src: /webdav group: webdav mode: &#x27;2775&#x27; state: directory setype: httpd_sys_content_t - name: Create Link to Webdav file: src: /webdav dest: /var/www/html/webdav state: link - name: Generate index.html copy: content: &quot;Development&quot; src: /webdav/index.html # æ–‡ä»¶ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º setype: httpd_sys_content_t - name: Enable Auto-start Services service: name: &quot;&#123;&#123; item &#125;&#125;&quot; state: restarted # é…ç½®é‡å¯è®©æ”¹åŠ¨ç”Ÿæ•ˆ enabled: yes loop: - firewalld - httpd æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼š 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/webcontent.yml[greg@control ansible]$ curl http://node1/ # éªŒè¯ ç”Ÿæˆç¡¬ä»¶æŠ¥å‘Š åˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/hwreport.yml çš„ playbook, å®ƒå°†åœ¨æ‰€æœ‰å—ç®¡èŠ‚ç‚¹ä¸Šç”Ÿæˆå«æœ‰ä»¥ä¸‹ä¿¡æ¯çš„è¾“å‡ºæ–‡ä»¶ /root/hwreport.txt: æ¸…å•ä¸»æœºåç§°ï¼› ä»¥ MB è¡¨ç¤ºçš„æ€»å†…å­˜å¤§å°ï¼› BIOS ç‰ˆæœ¬ï¼› ç£ç›˜è®¾å¤‡ vda çš„å¤§å°ï¼› ç£ç›˜è®¾å¤‡ vdb çš„å¤§å°ï¼› è¾“å‡ºæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œå«æœ‰ä¸€ä¸ª key=value å¯¹ã€‚ æ‚¨çš„ playbook åº”å½“ï¼š ä» http://materials/hwreport.empty ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä¿å­˜ä¸º /root/hwreport.txt; ä½¿ç”¨æ­£ç¡®çš„å€¼æ”¹ä¸º /root/hwreport.txt; å¦‚æœç¡¬ä»¶é¡¹ä¸å­˜åœ¨ï¼Œç›¸å…³çš„å€¼åº”è®¾ä¸º NONE. ğŸ’¯ ç­”æ¡ˆï¼š æ­¤é¢˜è¦æ±‚åœ¨ playbook ä»»åŠ¡ä¸­å®ç°æ¨¡æ¿æ–‡ä»¶ä¸‹è½½å¹¶æ›¿æ¢å†…å®¹ï¼Œè·ŸåŸæ¥è‡ªå·±äº‹å…ˆä¸‹ä¸‹æ¥å†å¥—ç”¨æ¨¡æ¿çš„æ€è·¯ä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ get_urlå’Œreplaceæ¨¡å—æ¥å®ç°æ–‡ä»¶ä¸‹è½½å’Œæ–‡ä»¶å†…å®¹æ›¿æ¢ï¼Œå¹¶ä½¿ç”¨ when å…³é”®å­—åˆ¤æ–­ç¡¬ä»¶æ˜¯å¦å­˜åœ¨ã€‚ ä¸‹è½½ hwreport.empty äº†è§£å…¶å†…å®¹ï¼š 1[greg@control ~]$ wget http://materails/hwreport.empty | cat 123456# Hardware reportHOST=inventoryhostnameMEMORY=memory_in_MBBIOS=BIOS_versionDISK_SIZE_VDA=disk_vda_sizeDISK_SIZE_VDB=disk_vdb_size åˆ›å»ºå¹¶ç¼–è¾‘å‰§æœ¬ï¼š 1[greg@control ~]$ vim /home/greg/ansible/hwreport.yml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647---- name: Generate hwreport on all hosts: all tasks: - name: Download Template File get_url: url: http://materials/hwreport.empty dest: /root/hwreport.txt - name: Replace Content Of Host Field replace: path: /root/hwreport.txt regexp: &quot;inventoryhostname&quot; replace: &quot;&#123;&#123; ansible_hostname &#125;&#125;&quot; - name: Replace Content Of Memory Field replace: path: /root/hwreport.txt regexp: &quot;memory_in_MB&quot; replace: &quot;&#123;&#123; ansible_memory_mb &#125;&#125;&quot; - name: Replace Content Of BIOS Field replace: path: /root/hwreport.txt regexp: &quot;BIOS_version&quot; replace: &quot;&#123;&#123; ansible_bios_version &#125;&#125;&quot; - name: Replace Content Of DISK_SIZE_VDA Field When VDA Exists replace: path: /root/hwreport.txt regexp: &quot;disk_vda_size&quot; replace: &quot;&#123;&#123; ansible_devices.vda.size &#125;&#125;&quot; when: &quot;&#x27;vda&#x27; in ansible_devices&quot; - name: Output NONE When VDA not Exists replace: path: /root/hwreport.txt regexp: &quot;disk_vda_size&quot; replace: &quot;NONE&quot; when: &quot;&#x27;vda&#x27; not in ansible_devices&quot; - name: Replace Content Of DISK_SIZE_VDB Field When VDB Exists replace: path: /root/hwreport.txt regexp: &quot;disk_vdb_size&quot; replace: &quot;&#123;&#123; ansible_devices.vdb.size &#125;&#125;&quot; when: &quot;&#x27;vdb&#x27; in ansible_devices&quot; - name: Output NONE When VDB not Exists replace: path: /root/hwreport.txt regexp: &quot;disk_vdb_size&quot; replace: &quot;NONE&quot; when: &quot;&#x27;vdb&#x27; not in ansible_devices&quot; æ‰§è¡Œ playbook å¹¶éªŒè¯ï¼š 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/hwreport.yml[greg@control ansible]$ ansible all -a &quot;cat /root/hwreport.txt&quot; åˆ›å»ºå¯†ç åº“ æŒ‰ç…§ä¸‹æ–¹æ‰€è¿°ï¼Œåˆ›å»ºä¸€ä¸ª Ansible åº“æ¥å­˜å‚¨ç”¨æˆ·å¯†ç ï¼š åº“åç§°ä¸º /home/greg/ansible/locker.ymlï¼› åº“ä¸­å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œåç§°å¦‚ä¸‹ï¼š pw_developer, å€¼ä¸º Imadev; pw_manager, å€¼ä¸º Imamgr. ç”¨äºåŠ å¯†å’Œè§£å¯†è¯¥åº“çš„å¯†ç ä¸º whenyouwishuponastarï¼› å¯†ç å­˜å‚¨åœ¨æ–‡ä»¶ /home/greg/ansible/secret.txt ä¸­ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š æœ¬é¢˜çš„æ„æ€æ˜¯å¯ä»¥é€šè¿‡åŠ å¯† playbook æ¥è§„é¿æ³„å¯†ç­‰å®‰å…¨é£é™©ï¼Œåœ¨æœ¬é¢˜ä¸­è¢«åŠ å¯†çš„ playbook æ˜¯ /home/greg/ansible/locker.ymlã€‚ åˆ›å»ºå¯†ç æ–‡ä»¶å¹¶å°†å¯†æ–‡å†™å…¥æ–‡ä»¶ 1[greg@control ~]$ echo &quot;whenyouwishuponastar&quot; &gt; /home/greg/ansible/secret.txt åˆ›å»º Ansible åº“å­˜å‚¨ç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ 1[greg@control ~]$ echo &quot;pw_developer: Imadev\\npwmanager: Imamgr\\n&quot; &gt; /home/greg/ansible/locker.yml åŠ å¯†è¯¥ Ansible åº“æ–‡ä»¶å¹¶éªŒè¯ 123[greg@control ansible]$ ansible-vault encrypt --vault-id=/home/greg/ansible/secret.txt[greg@control ansible]$ ansible-vault view /home/greg/ansible/locker.yml # è§£å¯†éªŒè¯Vault Password: whenyouwishuponastar åˆ›å»ºç”¨æˆ·è´¦æˆ· ä» http://materials/user_list.yml ä¸‹è½½è¦åˆ›å»ºçš„ç”¨æˆ·çš„åˆ—è¡¨ï¼Œå¹¶å°†å®ƒä¿å­˜åˆ° /home/greg/ansibleï¼› ä½¿ç”¨åœ¨æœ¬æ¬¡è€ƒè¯•ä¸­ä½¿ç”¨åœ¨å…¶ä»–ä½ç½®åˆ›å»ºçš„å¯†ç åº“ /home/greg/ansible/locker.ymlï¼Œåˆ›å»ºåä¸º /home/greg/ansible/users.yml çš„ playbook ï¼Œä»è€ŒæŒ‰ä»¥ä¸‹æ‰€è¿°åˆ›å»ºç”¨æˆ·å¸æˆ·ï¼š èŒä½æè¿°ä¸º developer çš„ç”¨æˆ·åº”å½“ï¼š åœ¨ dev å’Œ test ä¸»æœºç»„ä¸­çš„å—ç®¡èŠ‚ç‚¹ä¸Šåˆ›å»ºï¼› ä» pw_developer å˜é‡åˆ†é…å¯†ç ï¼› æ˜¯è¡¥å……ç»„ devops çš„æˆå‘˜ã€‚ èŒä½æè¿°ä¸º manager çš„ç”¨æˆ·åº”å½“ï¼š åœ¨ prod ä¸»æœºç»„ä¸­çš„å—ç®¡èŠ‚ç‚¹ä¸Šåˆ›å»ºï¼› ä» pw_manager å˜é‡åˆ†é…å¯†ç ï¼› æ˜¯è¡¥å……ç»„ opsmgr çš„æˆå‘˜ã€‚ å¯†ç é‡‡ç”¨ SHA512 å“ˆå¸Œæ ¼å¼ï¼› æ‚¨çš„ playbook åº”èƒ½å¤Ÿåœ¨æœ¬æ¬¡è€ƒè¯•ä¸­ä½¿ç”¨åœ¨å…¶ä»–ä½ç½®åˆ›å»ºçš„åº“å¯†ç æ–‡ä»¶ /home/greg/ansible/secret.txt æ­£å¸¸è¿è¡Œã€‚ ğŸ’¯ ç­”æ¡ˆï¼š ä¸‹è½½ç”¨æˆ·åˆ—è¡¨æ–‡ä»¶å¹¶åˆ†æ 1[greg@control ~]$ wget http://materials/user_list.yml -p /home/greg/ansible &amp;&amp; cat /home/greg/ansible/user_list.yml 1234567users: - name: bob job: developer - name: sally job: manager - name: fred job: developer ç¼–å†™ playbook 1[greg@control ~]$ vim /home/greg/ansible/users.yml 1234567891011121314151617181920212223242526272829303132333435363738---- name: Create User on dev,test hosts: dev,test vars_files: - /home/greg/ansible/users.yml - /home/greg/ansible/locker.yml tasks: - name: Create Group devops group: name: devops state: present - name: Create User on dev,test user: name: &quot;&#123;&#123; item.name &#125;&#125;&quot; password: &quot;&#123;&#123; pw_developer | password_hash(&#x27;sha512&#x27;) &#125;&#125;&quot; groups: devops state: present loop: &quot;&#123;&#123; users &#125;&#125;&quot; when: item.job == &#x27;developer&#x27;- name: Create User on prod hosts: prod vars_files: - /home/greg/ansible/users.yml - /home/greg/ansible/locker.yml tasks: - name: Create Group opsmgr group: name: opsmgr state: present - name: Create User on prod user: name: &quot;&#123;&#123; item.name &#125;&#125;&quot; password: &quot;&#123;&#123; pw_manager | password_hash(&#x27;sha512&#x27;) &#125;&#125;&quot; groups: opsmgr state: present loop: &quot;&#123;&#123; users &#125;&#125;&quot; when: item.job == &#x27;manager&#x27; è¿è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼Œæ³¨æ„ï¼šä¸Šé¢å¼•ç”¨äº†åŠ å¯†çš„æ–‡ä»¶å› æ­¤å¿…é¡»åœ¨å‚æ•°ä¸­æŒ‡å®šå¯†ç æ–‡ä»¶è¿›è¡Œè§£å¯†æ‰èƒ½æ­£å¸¸è¿è¡Œ 12[greg@control ansible]$ ansible-playbook --vault-id=/home/greg/ansible/secret.txt /home/greg/ansible/users.yml[greg@control ansible]$ ansible dev,test,prod -a &quot;tail -2 /etc/passwd&quot; # éªŒè¯ æ›´æ–° Ansible åº“çš„å¯†é’¥ æŒ‰ç…§ä¸‹æ–¹æ‰€è¿°ï¼Œæ›´æ–°ç°æœ‰ Ansible åº“çš„å¯†é’¥ï¼š ä» http://materials/salaries.yml ä¸‹è½½ Ansible åº“åˆ° /home/greg/ansible; å½“å‰çš„åº“å¯†ç ä¸º insecure8sure; æ–°çš„åº“å¯†ç ä¸º bbs2you9527; åº“ä½¿ç”¨æ–°å¯†ç ä¿æŒåŠ å¯†çŠ¶æ€ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š ä¸‹è½½æ‰€éœ€æ–‡ä»¶å¹¶ä½¿ç”¨å½“å‰åº“å¯†ç è¿›è¡Œè§£å¯†æŸ¥çœ‹ 1234[greg@control ~]$ wget http://materials/salaries.yml -p /home/greg/ansible[greg@control ansible]$ ansible-vault view /home/greg/ansible/salaries.ymlVault Password: insecure8surehaha # èƒ½çœ‹åˆ°è§£å¯†åçš„å†…å®¹ é‡æ–°åŠ å¯†æ–‡ä»¶å¹¶ä½¿ç”¨æ–°å¯†ç è¿›è¡Œè§£å¯†æŸ¥çœ‹ 1234567[greg@control ansible]$ ansible-vault rekey /home/greg/ansible/salaries.ymlVault Password: insecure8sureNew Vault Password: bbs2you9527Confirm New Vault Password: bbs2you9527[greg@control ansible]$ ansible-vault view /home/greg/ansible/salaries.ymlVault Password: bbs2you9527haha # ç”¨æ–°å¯†ç èƒ½çœ‹åˆ°è§£å¯†åçš„å†…å®¹ é™„åŠ é¢˜ å®‰è£… RHEL è§’è‰² å®‰è£… RHEL â»†â¾Šï¼Œå¹¶ä½¿â½¤ rhel-system-roles.selinux â»†â¾Šï¼Œåˆ›å»ºå‰§æœ¬/home/greg/ansible/selinux.ymlï¼Œè¦æ±‚åœ¨æ‰€æœ‰èŠ‚ç‚¹è¿â¾ï¼Œå°† SELINUX è®¾ç½®ä¸ºå¼ºåˆ¶æ¨¡å¼ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š å®‰è£… RHEL ç³»ç»Ÿè§’è‰²åŒ…å¹¶ä½¿ç”¨ 1[greg@control ~]$ sudo yum install rhel-system-roles -y å®‰è£…çš„ Ansible è§’è‰²ä¸€èˆ¬ä¼šæ”¾åœ¨ /usr/share/ansible/roles/ ç›®å½•ä¸‹ã€‚åœ¨æœ¬é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ˜¯ rhel-system-roles.timesync è¿™ä¸ªè§’è‰²ã€‚ è¦ä½¿ç”¨è¯¥è§’è‰²ï¼Œè¿˜éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶/home/greg/ansible/ansible.cfgï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š 12#roles_path = /home/greg/ansible/rolesroles_path = /home/greg/ansible/roles:/usr/share/ansible/roles æŸ¥çœ‹æœ¬åœ°è§’è‰²åˆ—è¡¨ï¼š 1[greg@control ansible]$ ansible-galaxy list ç¼–å†™å‰§æœ¬ 12[greg@control ~]$ cp /usr/share/doc/rhel-system-roles/selinux/example-selinux-playbook.yml /home/greg/ansible/selinux.yml[greg@control ~]$ vim /home/greg/ansible/selinux.yml 12345678910111213141516171819202122---- name: Set Enforcing hosts: all vars: selinux_policy: targeted selinux_state: enforcing roles: - role: rhel-system-roles.selinux tasks: - name: apply SElinux role block: - include_role: name: rhel-system-roles.selinux rescue: - name: check fail: when: not selinux_reboot_required - name: reboot shell: reboot - name: changed include_role: name: rhel-system-roles.selinux æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/selinux.yml[greg@control ansible]$ ansible all -a &quot;getenforce&quot; # éªŒè¯ åˆ›å»ºæ–°çš„ç£ç›˜åˆ†åŒº ç¼–å†™å‰§æœ¬/home/greg/ansible/partition.ymlï¼Œåœ¨ balancers ä¸»æœºä¸Šï¼Œåˆ’åˆ†æ–°çš„ partitionï¼Œ/dev/vddï¼Œç¼–å·1ï¼Œâ¼¤â¼©1500mï¼Œæ ¼å¼åŒ–æˆ ext4ï¼ŒæŒ‚è½½åˆ° /newpart â½¬å½•ï¼Œå¦‚æœç©ºé—´ä¸å¤Ÿï¼Œåˆ†800mï¼Œå¦‚æœæ²¡æœ‰vddï¼ŒæŠ¥é”™ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š 1[greg@control ~]$ vim /home/greg/ansible/partition.yml 123456789101112131415161718192021222324252627282930313233343536373839404142---- name: hosts: balancers tasks: - name: Create Mount Point Directory file: name: /newpart state: present - name: When /dev/vdd Exists block: - name: Try To Make A 1500m Partition parted: device: /dev/vdd number: 1 part_end: 1500Mib state: present rescue: - name: Show Error Messages debug: msg: Could not create partation of that size - name: Try To Make A 800m Partition parted: device: /dev/vdd number: 1 part_end: 800Mib state: present always: - name: Make File System filesystem: device: /dev/vdd1 fstype: ext4 - name: Mount mount: src: /dev/vdd1 path: /newpart fstype: ext4 state: mounted when: &quot;&#x27;/dev/vdd&#x27; in ansible_facts.devices&quot; - name: When /dev/vdd Does not Exist debug: msg: Disk does not exist when: &quot;&#x27;/dev/vdd&#x27; not in ansible_facts.devices&quot; ä½¿ç”¨ crontab æ¨¡å— ç”¨æˆ· jack æ¯ä¸‰ä¸ªâ½‰çš„æ¯å‘¨â½‡æ™šä¸Š 22 ç‚¹ 39 åˆ†æŸ¥çœ‹â¼€æ¬¡â¾ƒâ¾ç”¨æˆ·ç™»å½•æƒ…å†µã€‚ ğŸ’¯ ç­”æ¡ˆï¼š 1[greg@control ~]$ vim /home/greg/ansible/crontab.yml 1234567891011121314---- name: hosts: all tasks: - name: cron: name: Login Time minute: &quot;39&quot; #åˆ† hour: &quot;22&quot; #æ—¶ # day: &quot;&quot; #â½‡ month: &quot;*/3&quot; #â½‰ weekday: &quot;0&quot; #å‘¨ user: jack #æŒ‡å®šâ½¤â¼¾ job: &quot;(last &amp;&amp; lastb)|grep jack&quot; #æ‰§â¾å†…å®¹ åˆ›å»ºåˆ°æœŸç”¨æˆ·è´¦æˆ· åˆ›å»ºç”¨æˆ·è´¦æˆ·ï¼Œé»˜è®¤å¯†ç æ˜¯ redhatï¼Œä½¿ç”¨ sha512 æ–¹å¼åŠ å¯†ï¼Œè´¦â¼¾ jackï¼Œæ–°å¢è®¾ç½®å¯†ç æœ‰æ•ˆæœŸä¸º 30 å¤©ã€‚è´¦â¼¾ jonyï¼Œæ–°å¢è®¾ç½®ç›¸åº”çš„ ID 1111ï¼Œâ½¤â¼¾æœ‰æ•ˆæœŸåˆ°2022-01-20ã€‚ 1[greg@control ~]$ vim /home/greg/ansible/create_user.yml 123456789101112131415161718192021---- name: hosts: all vars: - users: - name: jack - name: jony tasks: - name: Create User user: name: &quot;&#123;&#123; item.name &#125;&#125;&quot; password: &quot;&#123;&#123; &#x27;redhat&#x27; | password_hash(&#x27;sha512&#x27;) &#125;&#125;&quot; state: present loop: &quot;&#123;&#123; users &#125;&#125;&quot; - name: Set Password Expired Day of jack shell: chage -M 30 jack - name: Set User Validity Deadline user: name: jony uid: &#x27;1111&#x27; expires: &#x27;1642636800&#x27; # äº‹å…ˆæ‰§è¡Œï¼šdate -d 2022-01-20 +%s è·å¾—","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰","slug":"Linux | RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰","date":"2022-08-29T15:04:23.290Z","updated":"2022-08-30T01:24:06.770Z","comments":true,"path":"2022-08-29-Linux | RHCE8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-29-Linux%20|%20RHCE8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ å¸¸è§„é¢˜ç›® å®‰è£…å’Œé…ç½® Ansible æŒ‰ç…§ä¸‹æ–¹æ‰€è¿°ï¼Œåœ¨æ§åˆ¶èŠ‚ç‚¹ control ä¸Šå®‰è£…å’Œé…ç½® Ansibleï¼š å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…ã€‚ åˆ›å»ºåä¸º /home/greg/ansible/inventory çš„é™æ€æ¸…å•æ–‡ä»¶ï¼Œä»¥æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š node1 æ˜¯ dev ä¸»æœºç»„çš„æˆå‘˜ï¼› node2 æ˜¯ test ä¸»æœºç»„çš„æˆå‘˜ï¼› node3 å’Œ node4 æ˜¯ prod ä¸»æœºç»„çš„æˆå‘˜ï¼› node5 æ˜¯ balancers ä¸»æœºç»„çš„æˆå‘˜ï¼› prod ç»„æ˜¯ webservers ä¸»æœºç»„çš„æˆå‘˜ï¼› åˆ›å»ºåä¸º /home/greg/ansible/ansible.cfg çš„é…ç½®æ–‡ä»¶ï¼Œä»¥æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š ä¸»æœºæ¸…å•æ–‡ä»¶ä¸º /home/greg/ansible/inventory; playbook ä¸­ä½¿ç”¨çš„è§’è‰²çš„ä½ç½®åŒ…æ‹¬ /home/greg/ansible/rolesã€‚ ğŸ’¯ ç­”æ¡ˆï¼š 12345# 1. å®‰è£…æ‰€éœ€è½¯ä»¶åŒ…ï¼Œå³å®‰è£… Ansible[greg@control ~]$ sudo yum install ansible -y# 2. åˆ›å»ºå¹¶ç¼–è¾‘æ¸…å•æ–‡ä»¶[greg@control ~]$ vim /home/greg/ansible/inventory ç¼–è¾‘æ¸…å•æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415[dev]node1[test]node2[prod]node3mode4[balancers]node5[webservers:children]prod å°† Ansible ç³»ç»Ÿé…ç½®æ–‡ä»¶æ‹·è´åˆ°ç”¨æˆ· Ansible å·¥ä½œç›®å½•ä¸€ä»½ï¼Œå¹¶ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼Œç”¨æˆ·åœ¨è¯¥å·¥ä½œç›®å½•ä¸‹æ‰§è¡Œ Ansible ç›¸å…³å‘½ä»¤æ—¶ä¼šä¼˜å…ˆä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶ï¼š 123[greg@control ~]$ cp /etc/ansible/ansible.cfg /home/greg/ansible/[greg@control ~]$ mkdir /home/greg/ansible/roles[greg@control ~]$ vim /home/greg/ansible/ansible.cfg 1234567891011121314151617#inventory = /etc/ansible/hostsinventory = /home/greg/ansible/inventory#roles_path = /etc/ansible/rolesroles_path = /home/greg/ansible/roles#reomote_user = rootremote_user = greg#host_key_checking = Falsehost_key_checking = False[privilege_escalation]become=Truebecome_method=sudobecome_user=rootbecome_ask_pass=False æµ‹è¯•ç»“æœï¼š 1[greg@control ansible]$ ansible all -m ping # ä¸æŒ‡å®šæ¨¡å—æ—¶é»˜è®¤ä½¿ç”¨ command æ¨¡å— åˆ›å»ºå’Œè¿è¡Œ Ansible ä¸´æ—¶å‘½ä»¤ ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‚¨éœ€è¦åœ¨å—ç®¡èŠ‚ç‚¹ä¸Šå®‰è£…è½¯ä»¶ã€‚ è¯·æŒ‰ç…§æ­£æ–‡æ‰€è¿°ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/adhoc.sh çš„ shell è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†ä½¿ç”¨ Ansible ä¸´æ—¶å‘½ä»¤åœ¨å„ä¸ªå—ç®¡èŠ‚ç‚¹ä¸Šå®‰è£… yum å­˜å‚¨åº“ï¼š å­˜å‚¨åº“ 1ï¼š å­˜å‚¨åº“çš„åç§°ä¸º EX294_BASE; æè¿°ä¸º EX294 base software; åŸºç¡€ URL ä¸º http://content/rhel8.0/x86_64/dvd/BaseOS; GPG ç­¾åæ£€æŸ¥ä¸ºå¯ç”¨çŠ¶æ€; GPG å¯†é’¥ URL ä¸º http://content/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release; å­˜å‚¨åº“ä¸ºå¯ç”¨çŠ¶æ€ã€‚ å­˜å‚¨åº“ 2ï¼š å­˜å‚¨åº“çš„åç§°ä¸º EX294_STREAM; æè¿°ä¸º EX294 stream software; åŸºç¡€ URL ä¸º http://content/rhel8.0/x86_64/dvd/AppStream; GPG ç­¾åæ£€æŸ¥ä¸ºå¯ç”¨çŠ¶æ€; GPG å¯†é’¥ URL ä¸º http://content/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release; å­˜å‚¨åº“ä¸ºå¯ç”¨çŠ¶æ€ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š 12345678[greg@control ~]$ vim /home/greg/ansible/adhoc.shansible all -m yum_repository -a &quot;name=EX294_BASE description=&#x27;EX294 base software&#x27; baseurl=http://content/rhel8.0/x86_64/dvd/BaseOS gpgcheck=yes gpgkey=http://content/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release enabled=yes&quot;ansible all -m yum_repository -a &quot;name=EX294_STREAM description=&#x27;EX294 stream software&#x27; baseurl=http://content/rhel8.0/x86_64/dvd/AppStream gpgcheck=yes gpgkey=http://content/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release enabled=yes&quot;[greg@control ~]$ chmod u+x /home/greg/ansible/adhoc.sh[greg@control ~]$ /home/greg/ansible/adhoc.sh# éªŒè¯[greg@control ~]$ ansible all -a &quot;yum repolist&quot; å®‰è£…è½¯ä»¶åŒ… åˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/packages.yml çš„ playbook: å°† php å’Œ mariadb è½¯ä»¶åŒ…å®‰è£…åˆ° devã€test å’Œ prod ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šï¼› å°† RPM Development Tools è½¯ä»¶åŒ…ç»„å®‰è£…åˆ° dev ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šï¼› å°† dev ä¸»æœºç»„ä¸­ä¸»æœºä¸Šçš„æ‰€æœ‰è½¯ä»¶åŒ…æ›´æ–°ä¸ºæœ€æ–°ç‰ˆæœ¬ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š é¦–å…ˆï¼Œåˆ›å»º playbook æ–‡ä»¶ï¼š 1[greg@control ~]$ vim /home/greg/ansible/packages.yml ç¼–è¾‘è¯¥ playbook æ–‡ä»¶çš„å†…å®¹ï¼š 123456789101112131415161718192021222324252627282930---# è¦æ±‚ä¸€- name: Installation on dev,test,prod hosts: dev,test,prod tasks: - name: Install php and mariadb yum: name: &quot;&#123;&#123; item &#125;&#125;&quot; state: present loop: - php - mariadb# è¦æ±‚äºŒ- name: Installation on dev hosts: dev tasks: - name: Install @RPM Development Tools yum: name: &quot;@RPM Development Tools&quot; state: present# è¦æ±‚ä¸‰- name: Updates-check on dev hosts: dev tasks: - name: Check Updates yum: name: * state: latest æ‰§è¡Œ playbookï¼Œä¸€èˆ¬åªè¦ç»“æœä¸æ˜¯çº¢è‰²å°±æ²¡é—®é¢˜ï¼š 1[greg@control ansible]$ ansible-playbook /home/greg/ansible/packages.yml éªŒè¯ï¼Œè‹¥èƒ½æŸ¥åˆ°å·²å®‰è£… php åˆ™è¯´æ˜å‰§æœ¬æ‰§è¡Œçš„æ²¡é—®é¢˜ï¼š 1[greg@control ansible]$ ansible dev -a &quot;rpm -q php&quot; ä½¿ç”¨ RHEL ç³»ç»Ÿè§’è‰² å®‰è£… RHEL ç³»ç»Ÿè§’è‰²è½¯ä»¶åŒ…ï¼Œå¹¶åˆ›å»ºç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„ playbook /home/greg/ansible/timesync.ymlï¼š åœ¨æ‰€æœ‰å—ç®¡èŠ‚ç‚¹ä¸Šè¿è¡Œ ä½¿ç”¨ timesync è§’è‰² é…ç½®è¯¥è§’è‰²ï¼Œä»¥ä½¿ç”¨å½“å‰æœ‰æ•ˆçš„ NTP æä¾›å•† é…ç½®è¯¥è§’è‰²ï¼Œä»¥ä½¿ç”¨æ—¶é—´æœåŠ¡å™¨ 172.25.254.254 é…ç½®è¯¥è§’è‰²ï¼Œä»¥å¯ç”¨ iburst å‚æ•° ğŸ’¯ ç­”æ¡ˆï¼š å®‰è£… RHEL ç³»ç»Ÿè§’è‰²åŒ…å¹¶ä½¿ç”¨ï¼š 1[greg@control ~]$ sudo yum install rhel-system-roles -y å®‰è£…çš„ Ansible è§’è‰²ä¸€èˆ¬ä¼šæ”¾åœ¨ /usr/share/ansible/roles/ ç›®å½•ä¸‹ã€‚åœ¨æœ¬é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ˜¯ rhel-system-roles.timesync è¿™ä¸ªè§’è‰²ã€‚ è¦ä½¿ç”¨è¯¥è§’è‰²ï¼Œè¿˜éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶/home/greg/ansible/ansible.cfgï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š 12#roles_path = /home/greg/ansible/rolesroles_path = /home/greg/ansible/roles:/usr/share/ansible/roles æŸ¥çœ‹æœ¬åœ°è§’è‰²åˆ—è¡¨ï¼š 1[greg@control ansible]$ ansible-galaxy list åˆ›å»º playbookï¼Œå¹¶å‚è€ƒæ–‡æ¡£/usr/share/ansible/roles/rhel-system-roles.timesync/README.mdä¸­çš„ä¾‹å­ï¼Œç¼–è¾‘è¯¥ playbookï¼š 1[greg@control ~]$ vim /home/greg/ansible/timesync.yml 12345678- name: Configre NTP server on all hosts: all vars: timesync_ntp_servers: - hostname: 172.25.254.254 iburst: yes roles: - timesync æ‰§è¡Œ playbookï¼Œæ­¤è¿‡ç¨‹å¯èƒ½ä¼šæœ‰ä¸€äº›çº¢é¢œè‰²çš„æŠ¥é”™ï¼Œä½†æ˜¯åªè¦åé¢çš„éªŒè¯æ²¡é—®é¢˜å°±å¯ä»¥ï¼š 1[greg@control ansible]$ ansible-playbook /home/greg/ansible/timesync.yml éªŒè¯ï¼š 12[greg@control ansible]$ ansible all -a &quot;chronyc sources&quot;[greg@control ansible]$ ansible all -a &quot;timedatectl&quot; ä½¿ç”¨ Ansible Galaxy å®‰è£…è§’è‰² ä½¿ç”¨ Ansible Galaxy å’Œè¦æ±‚æ–‡ä»¶ /home/greg/ansible/roles/requirements.ymlã€‚ä»ä»¥ä¸‹ URL ä¸‹è½½è§’è‰²å¹¶å®‰è£…åˆ° /home/greg/ansible/rolesï¼š http://materials/haproxy.tar æ­¤è§’è‰²çš„åç§°åº”å½“ä¸º balancer; http://materials/phpinfo.tar æ­¤è§’è‰²çš„åç§°åº”å½“ä¸º phpinfo. ğŸ’¯ ç­”æ¡ˆï¼š æ ¹æ®é¢˜ç›®è¦æ±‚åˆ›å»º requirements.yml æ–‡ä»¶å¹¶ç¼–è¾‘ï¼š 1[greg@control ~]$ vim /home/greg/ansible/roles/requirements.yml 123456---- name: balancer src: http://materails/haproxy.tar- name: phpinfo src: http://materials/phpinfo.tar ä½¿ç”¨è§’è‰²æ–‡ä»¶å®‰è£…è§’è‰²ï¼š 1[greg@control ansible]$ ansible-galaxy install -r /home/greg/ansible/roles/requirements.yml -p /home/greg/ansible/roles å‚æ•°æ„ä¹‰ï¼š -r ROLE_FILE, --role-file=ROLE_FILE æŒ‡å®šä»æ–‡ä»¶ä¸­å¯¼å…¥è§’è‰² -p ROLES_PATH, --roles-path=ROLES_PATH æŒ‡å®šå®‰è£…è§’è‰²çš„ä½ç½®ï¼Œé»˜è®¤ä¸º ansible.cfg ä¸­é…ç½®çš„ éªŒè¯ï¼š 1[greg@control ansible]$ ansible-galaxy list åˆ›å»ºå’Œä½¿ç”¨è§’è‰² æ ¹æ®ä¸‹åˆ—è¦æ±‚ï¼Œåœ¨ /home/greg/ansible/roles ä¸­åˆ›å»ºåä¸º apache çš„è§’è‰²ï¼š httpd è½¯ä»¶åŒ…å·²å®‰è£…ï¼Œè®¾ä¸ºåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å¯ç”¨å¹¶å¯åŠ¨ é˜²ç«å¢™å·²å¯ç”¨å¹¶æ­£åœ¨è¿è¡Œï¼Œå¹¶ä½¿ç”¨å…è®¸è®¿é—® Web æœåŠ¡å™¨çš„è§„åˆ™ æ¨¡æ¿æ–‡ä»¶ index.html.j2 å·²å­˜åœ¨ï¼Œç”¨äºåˆ›å»ºå…·æœ‰ä»¥ä¸‹è¾“å‡ºçš„æ–‡ä»¶ /var/www/html/index.html: 1Welcome to HOSTNAME on IPADDRESS å…¶ä¸­ï¼ŒHOSTNAME æ˜¯å—ç®¡èŠ‚ç‚¹çš„å®Œå…¨é™å®šåŸŸåï¼ŒIPADDRESS åˆ™æ˜¯å—ç®¡èŠ‚ç‚¹çš„ IP åœ°å€ã€‚ åˆ›å»ºä¸€ä¸ªä½¿ç”¨æ­¤è§’è‰²çš„ playbook /home/greg/ansible/newrole.ymlï¼Œè¯¥ playbook åœ¨ webservers ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šè¿è¡Œã€‚ ğŸ’¯ ç­”æ¡ˆï¼š åˆ›å»ºè§’è‰² åˆ‡æ¢åˆ°è§’è‰²ç›®å½•å¹¶åˆ›å»º apache è§’è‰²çš„éª¨æ¶ï¼š 123[greg@control ~]$ cd /home/greg/ansible/roles[greg@control roles]$ ansible-galaxy init apache[greg@control roles]$ tree /home/greg/ansible/apache/ # æŸ¥çœ‹ apache è§’è‰²çš„ç›®å½•ç»“æ„ è§’è‰²ç›®å½•ä¸­ä¸åŒçš„æ–‡ä»¶å¤¹çš„ä½œç”¨æè¿°å¦‚ä¸‹ï¼š defaults: è§’è‰²çš„é»˜è®¤å˜é‡ï¼› files: åŒ…å«å¯ä»¥ç»ç”±æ­¤è§’è‰²éƒ¨ç½²çš„æ–‡ä»¶ï¼› xxxxxxxxxx # è§ ServerA é…ç½® yum/dnf ä»“åº“éƒ¨åˆ† æˆ–ï¼š[root@node2 ~]# scp root@server1:/etc/yum.repos.d/Default.repo /etc/yum.repos.d/bash meta: è§’è‰²å®šä¹‰çš„ä¸€äº›å…ƒæ•°æ®ï¼› tasks: åŒ…å«è§’è‰²è¦æ‰§è¡Œçš„ä¸»è¦ä»»åŠ¡çš„åˆ—è¡¨ï¼› templates: åŒ…å«å¯ä»¥ç»ç”±æ­¤è§’è‰²éƒ¨ç½²çš„æ¨¡æ¿ï¼› tests: è§’è‰²çš„æµ‹è¯•æ–‡ä»¶ï¼› vars: è§’è‰²çš„å…¶ä»–å˜é‡ã€‚ æœ¬é¢˜æˆ‘ä»¬ä¸»è¦ç”¨åˆ° tasks å’Œ templates ä¸¤ä¸ªç›®å½•ä¸­çš„å†…å®¹ï¼Œå…¶ä¸­ tasks ç”¨æ¥å­˜æ”¾è¯¥è§’è‰²æ‰€è¦æ‰§è¡Œçš„ä¸€äº›ä»»åŠ¡ï¼Œtemplates ç”¨æ¥å­˜æ”¾é¢˜ç›®ä¸­æ¶‰åŠçš„æ¨¡æ¿æ–‡ä»¶ã€‚ ç¼–è¾‘è§’è‰²çš„ playbook åŠåˆ›å»ºæ¨¡æ¿æ–‡ä»¶ ç¼–è¾‘ tasks/main.yml æ–‡ä»¶ï¼š 1[greg@control roles]$ vim /home/greg/ansible/roles/apache/tasks/main.yml 12345678910111213141516171819202122232425262728293031323334---# 1. å®‰è£… httpd åŒ…- name: Install Apache Packages yum: name: httpd state: present# 2. é…ç½®é˜²ç«å¢™- name: Configure Firewall filewalld: service: http state: enabled permanent: yes # é˜²ç«å¢™è§„åˆ™æ°¸ä¹…ç”Ÿæ•ˆ immediate: yes # é˜²ç«å¢™è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼ˆå¯èƒ½ä¼šå¤±è´¥ï¼Œè‹¥é˜²ç«å¢™äº‹å…ˆæœªå¼€å¯ï¼‰# 3. æ ¹æ®æ¨¡æ¿ç”Ÿæˆç½‘é¡µæ–‡ä»¶- name: Generate Web Page from template file template: src: index.html.j2 dest: /var/www/html/index.html owner: apache group: apache mod: &#x27;0644&#x27; setype: httpd_sys_content_t# 4. é…ç½®æœåŠ¡è‡ªå¯- name: Enable Auto-start Services service: name: &quot;&#123;&#123; item &#125;&#125;&quot; state: restarted # é…ç½®é‡å¯è®©æ”¹åŠ¨ç”Ÿæ•ˆ enabled: yes loop: - firewalld - httpd ç¼–è¾‘ templates/index.html.j2 æ¨¡æ¿æ–‡ä»¶ï¼š 1[greg@control roles]$ vim /home/greg/ansbible/roles/apache/templates/index.html.j2 1Welcome to &#123;&#123; ansible_hostname &#125;&#125; on &#123;&#123; ansible_default_ipv4.address &#125;&#125; åˆ›å»º playbook ä½¿ç”¨ apache è§’è‰²ï¼š 1[greg@control roles]$ vim /home/greg/ansible/newrole.yml 12345---- name: Deploy Apache Service hosts: webservers roles: - apache æ‰§è¡Œ playbook å¹¶éªŒè¯ï¼š 123[greg@control ansible]$ ansible-playbook /home/greg/ansible/newrole.yml[greg@control ansible]$ curl http://node3 # éªŒè¯ node3[greg@control ansible]$ curl http://node4 # éªŒè¯ node4 ä» Ansible Galaxy ä½¿ç”¨è§’è‰² æ ¹æ®ä¸‹åˆ—è¦æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/roles.yml çš„ playbook ï¼š playbook ä¸­åŒ…å«ä¸€ä¸ª playï¼Œ è¯¥ play åœ¨ balancers ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šè¿è¡Œå¹¶å°†ä½¿ç”¨ balancer è§’è‰²ã€‚ æ­¤è§’è‰²é…ç½®ä¸€é¡¹æœåŠ¡ï¼Œä»¥åœ¨ webservers ä¸»æœºç»„ä¸­çš„ä¸»æœºä¹‹é—´å¹³è¡¡ Web æœåŠ¡å™¨è¯·æ±‚çš„è´Ÿè½½ã€‚ æµè§ˆåˆ° balancers ä¸»æœºç»„ä¸­çš„ä¸»æœºï¼ˆä¾‹å¦‚ http://172.25.250.13 ï¼‰å°†ç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š 1Welcome to serverb.lab.example.com on 172.25.250.11 é‡æ–°åŠ è½½æµè§ˆå™¨å°†ä»å¦ä¸€ Web æœåŠ¡å™¨ç”Ÿæˆè¾“å‡ºï¼š 1Welcome to serverc.lab.example.com on 172.25.250.12 playbook ä¸­åŒ…å«ä¸€ä¸ª playï¼Œ è¯¥ play åœ¨ webservers ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šè¿è¡Œå¹¶å°†ä½¿ç”¨ phpinfo è§’è‰²ã€‚ è¯·é€šè¿‡ URL /hello.php æµè§ˆåˆ° webservers ä¸»æœºç»„ä¸­çš„ä¸»æœºå°†ç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š 1Hello PHP World from FQDN å…¶ä¸­ï¼ŒFQDN æ˜¯ä¸»æœºçš„å®Œå…¨é™å®šåç§°ã€‚ 1Hello PHP World from serverb.lab.example.com å¦å¤–è¿˜æœ‰ PHP é…ç½®çš„å„ç§è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚å®‰è£…çš„ PHP ç‰ˆæœ¬ç­‰ã€‚ åŒæ ·ï¼Œæµè§ˆåˆ° http://172.25.250.12/hello.php ä¼šç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š 1Hello PHP World from serverc.lab.example.com å¦å¤–è¿˜æœ‰ PHP é…ç½®çš„å„ç§è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚å®‰è£…çš„ PHP ç‰ˆæœ¬ç­‰ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š è¿™ä¸ªé¢˜ç›®ä¸­ä¸¤æ¡ä»»åŠ¡ä¸‹çš„è¦æ±‚çœ‹ç€æŒºå¤šæŒºå¤æ‚çš„ï¼Œç„¶è€Œä»–ä»¬åœ¨æ‰€ç»™çš„è§’è‰²åŒ…ä¸­éƒ½å·²è¿›è¡Œäº†é…ç½®ï¼Œæˆ‘ä»¬è¦åšçš„åªæ˜¯ç¼–å†™ playbook å»ä½¿ç”¨ä¸¤ä¸ªè§’è‰²åŒ…è€Œå·²ã€‚ æ ¹æ®é¢˜ç›®è¦æ±‚åˆ›å»ºå¹¶ç¼–è¾‘ playbook 1[greg@control ~]$ vim /home/greg/ansible/roles.yml 12345678910---- name: Deploy and Setup Balancers hosts: balancers roles: - balancer- name: Deploy and Setup Phpinfo hosts: webservers roles: - phpinfo æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼š 1234[greg@control ansible]$ ansible-playbook /home/greg/ansible/roles.yml[greg@control ansible]$ curl http://node5 # ä¼šçœ‹åˆ°è´Ÿè´£å‡è¡¡è½®ç•ªä» node3 å’Œ node4 è·å¾— web é¡µé¢[greg@control ansible]$ curl http://node3/hello.php[greg@control ansible]$ curl http://node4/hello.php åˆ›å»ºå’Œä½¿ç”¨é€»è¾‘å· åˆ›å»ºä¸€ä¸ªåä¸º /home/greg/ansible/lv.yml çš„ playbook ï¼Œå®ƒå°†åœ¨æ‰€æœ‰å—ç®¡èŠ‚ç‚¹ä¸Šè¿è¡Œä»¥æ‰§è¡Œä¸‹åˆ—ä»»åŠ¡ï¼š åˆ›å»ºç¬¦åˆä»¥ä¸‹è¦æ±‚çš„é€»è¾‘å·ï¼š é€»è¾‘å·åˆ›å»ºåœ¨ research å·ç»„ä¸­ï¼› é€»è¾‘å·åç§°ä¸º data; é€»è¾‘å·å¤§å°ä¸º 1500 MiB; ä½¿ç”¨ ext4 æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–é€»è¾‘å·ï¼› å¦‚æœæ— æ³•åˆ›å»ºè¯·æ±‚çš„é€»è¾‘å·å¤§å°ï¼Œåº”æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä¸”åº”æ”¹ä¸ºä½¿ç”¨å¤§å° 800 MiB: 1Could not create logical volume of that size å¦‚æœå·ç»„ research ä¸å­˜åœ¨ï¼Œåº”æ˜¾ç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š 1Volume group done not exist ä¸è¦ä»¥ä»»ä½•æ–¹å¼æŒ‚è½½é€»è¾‘å·ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š åˆ›å»ºå‰§æœ¬å¹¶ç¼–è¾‘ï¼š 1[greg@control ~]$ vim /home/greg/ansible/lv.yml 12345678910111213141516171819202122232425262728293031323334---- name: Create and Use LV on ALL hosts: all tasks: - name: Create and Use LV on ALL block: # ä»»åŠ¡å—ï¼Œè¿™é‡Œé¢çš„ä»»åŠ¡æ‰§è¡Œä¸æˆåŠŸå°±ä¼šæ‰§è¡Œ rescue å—é‡Œçš„ - name: Execute General Steps lvol: vg: research lv: data size: 1500m rescue: # æ•‘æ´å—ï¼Œblock å—é‡Œæ­¥éª¤å¤±è´¥çš„è¡¥æ•‘æªæ–½ - name: Execute Rescue Steps - Show Error Message debug: msg: Could not create logical volume of that size - name: Execute Rescue Steps - Plan B lvol: vg: research lv: data size: 800m always: # æ— è®º block å¤±è´¥ä¸å¦éƒ½ä¼šæ‰§è¡Œçš„ - name: Formating LV to Ext4 filesystem: dev: /dev/research/data fstype: ext4 when: &quot; &#x27;research&#x27; in ansible_lvm.vgs&quot; # åˆ¤æ–­ï¼šå½“æœ‰ research vg æ‰æ‰§è¡Œä¸Šè¿°ä»»åŠ¡ - name: Show Error Message debug: msg: Volume group done not exist when: &quot; &#x27;research&#x27; not in ansible_lvm.vgs &quot; æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼š 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/lv.yml[greg@control ansible]$ ansible all -a &quot;lvs&quot; # éªŒè¯ ç”Ÿæˆ hosts æ–‡ä»¶ å°†ä¸€ä¸ªåˆå§‹æ¨¡æ¿æ–‡ä»¶ä» http://materials/hosts.j2 ä¸‹è½½åˆ° /home/greg/ansible; å®Œæˆè¯¥æ¨¡æ¿ï¼Œä»¥ä¾¿ç”¨å®ƒç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼šé’ˆå¯¹æ¯ä¸ªæ¸…å•ä¸»æœºåŒ…å«ä¸€è¡Œå†…å®¹ï¼Œå…¶æ ¼å¼ä¸ /etc/hosts ç›¸åŒï¼› åˆ›å»ºåä¸º /home/greg/ansible/hosts.yml çš„ playbook ï¼Œå®ƒå°†ä½¿ç”¨æ­¤æ¨¡æ¿åœ¨ dev ä¸»æœºç»„ä¸­çš„ä¸»æœºä¸Šç”Ÿæˆæ–‡ä»¶ /etc/myhosts; è¯¥ playbook è¿è¡Œåï¼Œ dev ä¸»æœºç»„ä¸­ä¸»æœºä¸Šçš„æ–‡ä»¶ /etc/myhosts åº”é’ˆå¯¹æ¯ä¸ªå—ç®¡ä¸»æœºåŒ…å«ä¸€è¡Œå†…å®¹ï¼š 1IP_ADDRESS FQDN HOSTNAME å…¶ä¸­ï¼ŒIP_ADDRESS ä»£è¡¨æœ¬æœº ipï¼ŒFQDN ä»£è¡¨æœ¬æœºå®Œå…¨é™å®šåŸŸåï¼ŒHOSTNAME ä»£è¡¨æœ¬æœºä¸»æœºåã€‚ æ³¨ï¼šæ¸…å•ä¸»æœºåç§°çš„æ˜¾ç¤ºé¡ºåºä¸é‡è¦ã€‚ ğŸ’¯ ç­”æ¡ˆï¼š ä¸‹è½½å¹¶æŸ¥çœ‹æ¨¡æ¿æ–‡ä»¶ï¼š 1234[greg@control ~]$ wget http://materials/host.j2 -p /home/greg/ansible/ [greg@control ~]$ cat /home/greg/ansible/hosts.j2127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 ç¼–è¾‘æ¨¡æ¿æ–‡ä»¶ï¼Œå‘å…¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 123&#123;% for host in groups.all %&#125;&#123;&#123; hostvars[&#x27;host&#x27;].ansible_default_ipv4.address &#125;&#125; &#123;&#123; hostvars[&#x27;host&#x27;].ansible_fqdn &#125;&#125; &#123;&#123; hostvars[&#x27;host&#x27;].ansible_hostname &#125;&#125;&#123;% endfor %&#125; ç¼–å†™å‰§æœ¬ï¼Œå®Œæˆä»»åŠ¡ï¼š 1[greg@control ~]$ vim /home/greg/ansible/hosts.yml 1234567891011---- name: Gather Facts of All # è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œæœ‰è¿™æ¡æ‰ä¼šè·å–æ‰€æœ‰ä¸»æœºçš„ facts hosts: all- name: Main Task hosts: dev tasks: - name: Generate myhosts from template file template: src: /home/greg/ansible/hosts.j2 dest: /etc/myhosts æ‰§è¡Œå‰§æœ¬å¹¶éªŒè¯ï¼š 12[greg@control ansible]$ ansible-playbook /home/greg/ansible/hosts.yml[greg@control ansible]$ ansible dev -a &quot;cat /etc/myhosts&quot; # éªŒè¯","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰","slug":"Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰","date":"2022-08-29T15:00:19.147Z","updated":"2022-08-29T15:03:16.013Z","comments":true,"path":"2022-08-29-Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸‹ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8B%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ é™„åŠ é¢˜ï¼šæœ‰å¯èƒ½å‡ºï¼ˆServerA æˆ– Node1ï¼‰ æ·»åŠ  sudo å…å¯†æ“ä½œ å…è®¸ sysmgrs ç»„æˆå‘˜ sudo æ—¶ä¸éœ€è¦å¯†ç ã€‚ 123456789# visudo åŒºåˆ«äºç›´æ¥æ”¹é…ç½®æ–‡ä»¶ï¼Œé€€å‡ºå‰æœ‰è¯­æ³•æ£€æŸ¥[root@node1 ~]\\# visudo# %wheel ALL=(ALL) NOPASSWD: ALL%sysmgrs ALL=(ALL) NOPASSWD: ALL# æµ‹è¯•[root@node1 ~]\\# su - natasha[natasha@node1 ~]$ sudo useradd zhangsan[natasha@node1 ~]$ sudo userdel -r zhangsan é…ç½®åˆ›å»ºæ–°ç”¨æˆ·çš„å¯†ç ç­–ç•¥ åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œé»˜è®¤å¯†ç ç­–ç•¥ä¸º 20 å¤©åï¼Œå¯†ç ä¼šè¿‡æœŸã€‚ 12345678910111213[root@node1 ~]\\# vim /etc/login.defsPASS_MAX_DAYS 20# æµ‹è¯•ï¼š[root@node1 ~]\\# useradd ligoudan[root@node1 ~]\\# chage -l ligoudanLast password change : Apr 29, 2021Password expires : May 19, 2021Password inactive : neverAccount expires : neverMinimum number of days between password change : 0Maximum number of days between password change : 20Number of days of warning before password expires : åˆ›å»ºè„šæœ¬ åˆ›å»ºä¸€ä¸ªåä¸º myresearch çš„è„šæœ¬è¯¥è„šæœ¬æ”¾ç½®åœ¨ /usr/bin ä¸‹è¯¥è„šæœ¬ç”¨æ¥æŸ¥æ‰¾ /usr ä¸‹æ‰€æœ‰å°äº 10m ä¸”å…·æœ‰ä¿®æ”¹ç»„ ID æƒé™çš„æ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶æ”¾ç½®äº/root/myfiles ä¸‹ ğŸ“Œ -sizeçš„å‚æ•°æ³¨æ„ M å¤§å†™ï¼Œk å°å†™ 123456789101112131415161718192021[root@node1 ~]\\# vim /usr/bin/myresearch#!/bin/bashif [ ! -d /root/myfiles ]; thenmkdir /root/myfilesfifind /usr -size -10M -perm /g=s -exec cp -a &#123;&#125; /root/myfiles \\;# æˆ–è€…mkdir /root/myfiles find /usr -size -10M -perm -g=s -exec cp -a &#123;&#125; /root/myfiles \\;[root@node1 ~]\\# chmod +x /usr/bin/myresearch[root@node1 ~]\\# /usr/bin/myresearch# æµ‹è¯•[root@node1 ~]\\# ll -h /root/myfiles-rwx--s--x. 1 root slocate 47K Aug 12 2018 locate-rwx--s--x. 1 root lock 22K Aug 12 2018 lockdev-r-xr-sr-x. 1 root ssh_keys 464K Nov 26 2018 ssh-keysign-rwx--s--x. 1 root utmp 13K Aug 12 2018 utempter-rwxr-sr-x. 1 root tty 23K Dec 11 2018 write åˆ›å»ºè„šæœ¬ åˆ›å»ºä¸€ä¸ªåä¸º newsearch çš„è„šæœ¬1ã€è¯¥è„šæœ¬æ”¾ç½®åœ¨ /usr/bin ä¸‹2ã€è¯¥è„šæœ¬ç”¨æ¥æŸ¥æ‰¾ /usr ä¸‹æ‰€æœ‰å¤§äº 30k ï¼Œä½†æ˜¯å°äº 50k ä¸”å…·æœ‰ SUID æƒé™çš„æ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶æ”¾ç½®äº /root/newfiles ä¸‹ ğŸ“Œ UID æƒé™åˆ™ä¸º -u=s æˆ– /u=sï¼ŒGID æƒé™åˆ™ä¸º -g=s æˆ– /g=s ğŸ“Œ -size çš„å‚æ•°æ³¨æ„ M å¤§å†™ï¼Œk å°å†™ 12345678910111213141516171819202122232425# åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œåˆ¤æ–­è¯­æ³•ä»¥ if å¼€å¤´ fi ç»“å°¾ï¼Œ-d æ£€æŸ¥æ˜¯å¦ç›®å½•[root@node1 ~]\\# vim /usr/bin/newsearch#!/bin/bashif [ ! -d /root/newfiles ];thenmkdir /root/newfilesfifind /usr -size +30k -size -50k -perm /u=s -exec cp -a &#123;&#125; /root/newfiles \\;# æˆ–è€…mkdir /root/newfilesfind /usr -size +30k -size -50k -perm /u=s -exec cp -a &#123;&#125; /root/newfiles \\;# æ‰€æœ‰äººéƒ½æœ‰æƒé™[root@node1 ~]\\# chmod +x /usr/bin/newsearch# è¿è¡Œè„šæœ¬[root@node1 ~]\\# /usr/bin/newsearch# æ£€æŸ¥[root@node1 ~]\\# ll -h /root/newfiles -rws--x--x. 1 root root 33K Dec 17 2019 chfn-rwsr-x---. 1 root cockpit-wsinstance 46K Mar 12 2020 cockpit-session-rwsr-xr-x. 1 root root 33K Dec 13 2019 passwd-rwsr-xr-x. 1 root root 33K Dec 17 2019 umount-rwsr-xr-x. 1 root root 37K Dec 19 2019 unix_chkpwd-rws--x--x. 1 root root 47K Nov 20 2018 è®¾ç½®é»˜è®¤æƒé™ ç”¨æˆ· manalo åœ¨ node1 ä¸Šï¼Œæ‰€æœ‰æ–°åˆ›å»ºçš„æ–‡ä»¶éƒ½åº”å…·æœ‰ -r--r--r-- çš„é»˜è®¤æƒé™ï¼Œæ­¤ç”¨æˆ·çš„æ‰€æœ‰æ–°åˆ›å»ºç›®å½•åº”å…·æœ‰ dr-xr-xr-x çš„é»˜è®¤æƒã€‚ 12345678910111213[root@node1 ~]\\# su - manalo# umask ä¹‹é—´æ²¡æœ‰ç­‰å·ï¼Œ~/.bashrc = /home/manalo/.bashrc[manalo@node1 ~]$ vim ~/.bashrc# User specific aliases and functionsumask 222[manalo@node1 ~]$ souce ~/.bashrc # é…ç½®ç”Ÿæ•ˆ# æ£€æŸ¥[manalo@node1 ~]$ touch a.txt[manalo@node1 ~]$ mkdir dir1[manalo@node1 ~]$ lltotal 0 -r--r--r--. 1 a a 0 Oct 26 18:04 a.txt dr-xr-xr-x. 2 a a 6 é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ï¼ˆB å·ï¼‰ åˆ©ç”¨æ³¨å†ŒæœåŠ¡å™¨ä¸Šçš„ rsyslog é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º logger çš„å®¹å™¨ é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡ è¯¥æœåŠ¡å‘½åä¸º container-logger ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„ å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°† /home/wallah/var_log` æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /var/log ä¸‹ åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ podman exec logger logger -p authpriv.info SUIBIAN 1234567891011121314151617181920212223[root@node1 ~]\\# ssh wallah@node1[wallah@node1 ~]$ podman login -u admin -p redhat321login Succeeded![wallah@node1 ~]$ podman search registry.domain250.example.com/INDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATEDexample.com registry.domain250.example.com/rhel8/rsyslog 0[wallah@node1 ~]$ podman run -d --name logger -v /home/wallah/var_log:/var/log:Z registry.domain250.example.com/rhel8/rsyslog[wallah@node1 ~]$ podman stop logger[wallah@node1 ~]$ loginctl enable-linger[wallah@node1 ~]$ loginctl show-user wallah[wallah@node1 ~]$ mkdir -p ~/.config/systemd/user/[wallah@node1 ~]$ cd ~/.config/systemd/user/[wallah@node1 ~]$ podman generate systemd -n logger -f[wallah@node1 ~]$ systemctl --user enable --now container-logger[wallah@node1 ~]$ systemctl --user status container-logger# æµ‹è¯•[wallah@node1 ~]$ podman exec logger logger -p authpriv.info SUIBIAN[wallah@node1 ~]$ grep SUIBIAN /home/wallah/var_log/secure2021-08-13T11:45:37.824980+00:00 574761d4236a root: SUIBIAN[wallah@node1 ~]$ exit[root@node1 ~]\\# reboot[root@node1 ~]\\# ps -aux | grep podman å®¹å™¨ nginx åˆ©ç”¨æ³¨å†ŒæœåŠ¡å™¨ä¸Šçš„ nginx é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º nginx çš„å®¹å™¨ é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡ è¯¥æœåŠ¡å‘½åä¸º container-nginxï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„ åœ¨ /home/wallah/www ä¸‹åˆ›å»ºæ–‡ä»¶ index.html ï¼Œå†…å®¹ä¸º hello nginx å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°† /home/wallah/www æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /usr/share/nginx/html ä¸‹å°†å®¹å™¨ä¸»æœºä¸Šçš„ç«¯å£ 8080 æ˜ å°„åˆ°å®¹å™¨ä¸Šçš„ç«¯å£ 80 1234567891011121314151617181920212223242526272829303132[root@node1 ~]\\# ssh wallah@node1[wallah@node1 ~]$[wallah@node1 ~]$ podman login registry.domain250.example.comUsername: adminPassword: redhat321login Succeeded![wallah@node1 ~]$ podman search registry.domain250.example.com/INDEX NAME DESCRIPTION STARS OFFICIAL AUTOMATED example.com registry.domain250.example.com/library/nginx 0[wallah@node1 ~]$ mkdir /home/wallah/www [wallah@node1 ~]$ echo &quot;hello nginx&quot; &gt; /home/wallah/www/index.html [wallah@node1 ~]$ podman run -d --name nginx -v /home/wallah/www:/usr/share/nginx.html:Z -p 8080:80 registry.domain250.example.com/library/nginx[wallah@node1 ~]$ loginctl enable-linger [wallah@node1 ~]$ loginctl show-user wallah[wallah@node1 ~]$ mkdir -p ~/.config/systemd/user/[wallah@node1 ~]$ cd ~/.config/systemd/user/[wallah@node1 ~]$ podman generate systemd -n nginx -f[wallah@node1 ~]$ podman stop nginx[wallah@node1 ~]$ systemctl --user enable --now container-nginx [wallah@node1 ~]$ systemctl --user status container-nginx# æµ‹è¯•[wallah@node1 ~]$ curl localhost:8080hello nginx[wallah@node1 ~]$ exit[wallah@node1 ~]\\# reboot[wallah@node1 ~]\\# curl localhost:8080[wallah@node1 ~]\\# ss -antup | grep 8080[wallah@node1 ~]\\# ps -aux | grep åœ¨ Node2 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡ é‡ç½® root å¯†ç  å°† node2 ä¸»æœºçš„å¯†ç è®¾ç½®æˆ redhatã€‚ä½ éœ€è¦è·å¾—ç³»ç»Ÿè®¿é—®æƒé™æ‰èƒ½è¿›è¡Œæ­¤æ“ä½œã€‚ ç­”æ¡ˆï¼šé‡æ–°å¯åŠ¨æœºå™¨ï¼Œè¿›å…¥ grub ç•Œé¢åæŒ‰ e è¿›å…¥å¯åŠ¨é…ç½®æ–‡ä»¶ç¼–è¾‘ç•Œé¢ï¼Œåœ¨ linux å‘½ä»¤è¡Œå‰çš„å¯åŠ¨é€‰é¡¹åé¢å¢åŠ  rd.breakï¼ŒæŒ‰ CTRL + X é”®ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘ã€‚ç„¶åè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š ä»¥ è¯»+å†™ å½¢å¼é‡æ–°æŒ‚è½½ /sysrootï¼› 1switch_root:\\# mount -o remount,rw /sysroot åˆ‡æ¢ä¸º chroot å­˜æ”¾ä½ç½®ï¼Œå…¶ä¸­ /sysroot è¢«è§†ä¸ºæ–‡ä»¶ç³»ç»Ÿæ ‘çš„æ ¹ï¼› 1switch_root:\\# chroot /sysroot è®¾ç½®æ–° root å¯†ç ï¼› 1sh-4.4\\# echo redhat | passwd --stdin root ç¡®ä¿æ‰€æœ‰æœªæ ‡è®°çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ­¤æ—¶çš„ /etc/shadowï¼‰åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­éƒ½ä¼šé‡æ–°è·å¾—æ ‡è®°ï¼› 1sh-4.4\\# touch /.autorelabel é”®å…¥ exit å‘½ä»¤å¹¶æ‰§è¡Œä¸¤æ¬¡ï¼Œåˆ†åˆ«é€€å‡º chroot å’Œ initramfs shellã€‚ æ­¤æ—¶ï¼Œç³»ç»Ÿå°†ç»§ç»­è¿›è¡Œå¯åŠ¨ï¼Œæ‰§è¡Œå®Œæ•´çš„ SELinux é‡æ–°æ ‡è®°ï¼Œç„¶åå†æ¬¡é‡æ–°å¯åŠ¨ã€‚ é…ç½® YUM æº ç»™ç³»ç»Ÿé…ç½®é»˜è®¤å­˜å‚¨åº“ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š YUM çš„ ä¸¤ ä¸ª å­˜ å‚¨ åº“ çš„ åœ° å€ åˆ† åˆ« æ˜¯ ï¼š ftp://host.domain8.example.com/dvd/BaseOS å’Œ ftp://host.domain8.example.com/dvd/AppStream 12# è§ ServerA é…ç½® yum/dnf ä»“åº“éƒ¨åˆ† æˆ–ï¼š[root@node2 ~]\\# scp root@server1:/etc/yum.repos.d/Default.repo /etc/yum.repos.d/ è°ƒæ•´é€»è¾‘å·çš„å¤§å° å°†åå­—ä¸º vo çš„é€»è¾‘å·çš„å¤§å°è°ƒæ•´åˆ° 200MiBï¼Œç¡®ä¿æ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ä¿æŒä¸å˜ã€‚è°ƒæ•´åçš„é€»è¾‘å·çš„å¤§å°èŒƒå›´åœ¨ 180MiB åˆ° 220MiB çš„èŒƒå›´å†…éƒ½æ˜¯å¯ä»¥æ¥å—çš„ã€‚ 1234[root@node2 ~]\\# df -h[root@node2 ~]\\# vgs myvol # æŸ¥çœ‹ vo å­˜å‚¨ç»„çš„ä¿¡æ¯[root@node2 ~]\\# lvextend -L 200M /dev/myvol/vo # å°†é€»è¾‘å· vo çš„å¤§å°æ­£å¥½è°ƒæ•´ä¸º 200MiB[root@node2 ~]\\# resize2fs /dev/myvol/vo # æ‰©å±• vo çš„æ–‡ä»¶ç³»ç»Ÿå¤§å° åˆ›å»ºäº¤æ¢åˆ†åŒº å‘ node2 æ·»åŠ ä¸€ä¸ªé¢å¤–çš„äº¤æ¢åˆ†åŒº 756MiBã€‚äº¤æ¢åˆ†åŒºåº”åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚ä¸è¦åˆ é™¤æˆ–ä»¥ä»»ä½•æ–¹å¼æ”¹åŠ¨ç³»ç»Ÿä¸Šçš„ä»»ä½•ç°æœ‰äº¤æ¢åˆ†åŒºã€‚ 123456789101112131415161718192021222324252627[root@node2 ~]\\# lsblk # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥è§„åˆ’äº¤æ¢åˆ†åŒºçš„ä½ç½®[root@node2 ~]\\# fdisk /dev/sdbWelcome to fdisk (util-linux 2.32.1).Changes will remain in memory only, until you decide to write them.Be careful before using the write command.Command (m for help): nPartition type p primary (2 primary, 0 extended, 2 free) e extended (container for logical partitions)Select (default p): pPartition number (3,4, default 3): First sector (2095106-8388607, default 2097152): Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2097152-8388607, default 8388607): +756MCreated a new partition 3 of type &#x27;Linux&#x27; and of size 756 MiB.Command (m for help): wThe partition table has been altered.Syncing disks.[root@node2 ~]\\# mkswap /dev/vdb3 # æ ‡è®°äº¤æ¢åˆ†åŒº,æŸ¥çœ‹æ–°åˆ›å»ºçš„äº¤æ¢åˆ†åŒºçš„ UUID[root@node2 ~]\\# vim /etc/fstab # å†™å…¥ fstab æ–‡ä»¶UUID=&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot; swap swap defaults 0 0[root@node2 ~]\\# swapon -a # å¯ç”¨äº¤æ¢åˆ†åŒº åˆ›å»ºé€»è¾‘å· æ ¹æ®å¦‚ä¸‹è¦æ±‚ï¼Œåˆ›å»ºæ–°çš„é€»è¾‘å·ï¼š é€»è¾‘å·çš„åå­—æ˜¯ dbï¼Œå·ç»„æ˜¯ dbgroupï¼Œå¤§å°æ˜¯ 60 ä¸ª PE size dbgroup çš„ PE size æ˜¯ 16MiB æ ¼å¼åŒ–æˆ xfs æ–‡ä»¶ç³»ç»Ÿã€‚å¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½åˆ° /mnt/data 123456789101112131415161718192021222324252627282930313233[root@node2 ~]\\# lsblk # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥è§„åˆ’é€»è¾‘å·çš„ä½ç½®[root@node2 ~]\\# fdisk /dev/vdb # åˆ›å»ºä¸»åˆ†åŒºWelcome to fdisk (util-linux 2.32.1).Changes will remain in memory only, until you decide to write them.Be careful before using the write command.Command (m for help): nPartition type p primary (3 primary, 0 extended, 1 free) e extended (container for logical partitions)Select (default e): pSelected partition 4First sector (2095106-8388607, default 3645440): Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (3645440-8388607, default 8388607): Created a new partition 4 of type &#x27;Linux&#x27; and of size 2.3 GiB.Command (m for help): wThe partition table has been altered.Syncing disks.[root@node2 ~]\\# pvcreate /dev/vdb4 # å°† /dev/vdb? åˆ›å»ºä¸ºç‰©ç†å·[root@node2 ~]\\# vgcreate -s 16M dbgroup /dev/vdb4 # åˆ›å»ºå·ç»„ dbgroupï¼ŒPE å¤§å°ä¸º 16MiB,å¹¶å°† /dev/vdb? åŠ å…¥[root@node2 ~]\\# lvcreate -l 60 -n db dbgroup # ä»å·ç»„ dbgroup åˆ›å»ºé€»è¾‘å·ï¼Œå¤§å°æ˜¯ 60 ä¸ªç‰©ç†åŒºå—ï¼Œåå­—æ˜¯ db[root@node2 ~]\\# mkfs.xfs /dev/dbgroup/db # ä¸ºé€»è¾‘å·åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ[root@node2 ~]\\# mkdir /mnt/data # åˆ›å»ºæŒ‚è½½ç‚¹[root@node2 ~]\\# blkid /dev/dbgroup/db # æŸ¥çœ‹é€»è¾‘å·çš„ UUID[root@node2 ~]\\# vim /etc/fstab # ç¼–è¾‘ fstabï¼Œæ·»åŠ æŒ‚åœ¨ä¿¡æ¯UUID=&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot; /mnt/data xfs defaults 0 0[root@node2 ~]\\# mount -a # ç«‹å³æŒ‚è½½ åˆ›å»º vdo å· æ ¹æ®å¦‚ä¸‹è¦æ±‚ï¼Œåˆ›å»ºæ–°çš„ VDO å·ï¼š ä½¿ç”¨æœªåˆ†åŒºçš„ç£ç›˜ è¯¥å·çš„åç§°ä¸º vdotest è¯¥å·çš„é€»è¾‘å¤§å°æ˜¯ 50G è¯¥å·ä½¿ç”¨ xfs æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ– è¯¥å·åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æŒ‚è½½åˆ° /mnt/vdotest 12345678910[root@node2 ~]\\# lsblk # æŸ¥çœ‹å­˜å‚¨ä¿¡æ¯ï¼Œä»¥ä¸‹å‡è®¾ /dev/vdc è¿˜æœªåˆ†åŒº[root@node2 ~]\\# yum install vdo kmod-kvdo # è‹¥æœªå®‰è£… vdoã€kmod-kvdo åˆ™éœ€è¦å®‰è£…[root@node2 ~]\\# vdo create --name=vdotest --device=/dev/vdc --vdoLogicalSize=50G # åˆ›å»º vdo å·[root@node2 ~]\\# mkfs.xfs -K /dev/mapper/vdotest # æ ¼å¼åŒ–è¯¥ vdo å·# æŒ‚è½½æ–¹æ³•ä¸€[root@node2 ~]\\# udevadm settle # è‡ªåŠ¨æŒ‚è½½# æŒ‚è½½æ–¹æ³•äºŒ[root@node2 ~]\\# mkdir /mnt/vdotest; blkid /dev/mapper/vdotest; vim /etc/fstab # æ‰‹åŠ¨æŒ‚è½½UUID=&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot; /mnt/vdotest defaults, _netdev 0 0[root@node2 ~]\\# mount -a é…ç½®ç³»ç»Ÿè°ƒä¼˜ ä¸ºä½ çš„ç³»ç»Ÿé€‰æ‹©å»ºè®®çš„â€™tunedâ€™é…ç½®é›†å¹¶å°†å®ƒè®¾ç½®ä¸ºé»˜è®¤è®¾ç½®ã€‚ 123[root@node2 ~]\\# tuned-adm recommend # æŸ¥çœ‹æ¨èè®¾ç½®virtual-guest[root@node2 ~]\\# tuned-adm profile virtual-guest # è®¾ç½®æ¨èè®¾ç½®ä¸ºé»˜è®¤","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰","slug":"Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰","date":"2022-08-29T14:56:35.740Z","updated":"2022-08-29T15:03:19.474Z","comments":true,"path":"2022-08-29-Linux | RHCSA8 è€ƒå‰ç»ƒä¹ é¢˜åŠç­”æ¡ˆï¼ˆä¸Šï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-29-Linux%20|%20RHCSA8%20%E8%80%83%E5%89%8D%E7%BB%83%E4%B9%A0%E9%A2%98%E5%8F%8A%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ åœ¨ Node1 ä¸Šå®Œæˆä»¥ä¸‹ä»»åŠ¡ é…ç½®ç½‘ç»œ åœ¨ node1 ä¸Šé…ç½®ç½‘å¡ ens160 çš„ç½‘ç»œï¼Œè¦æ±‚å¦‚ä¸‹ï¼š ä¸»æœºåï¼šnode1.domain8.example.com IP åœ°å€: 192.168.30.10/24 ç½‘å…³ï¼š192.168.30.254 DNSï¼š114.114.114.114 12345678910111213141516171819[root@localhost ~]\\# hostnamectl set-hostname node1.domain8.example.com[root@node1 ~]\\# hostnamenode1.domain8.example.com[root@node1 ~]\\# nmcli con mod ens160 connection.autoconnect yes \\ &gt; ipv4.method manual \\&gt; ipv4.address 192.168.30.10/24 \\&gt; ipv4.gateway 192.168.30.254 \\&gt; ipv4.dns 114.114.114.114[root@node1 ~]\\# nmcli con up ens160Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/6)[root@node1 ~]\\# nmcli con show ens160 | grep ipv4ipv4.method: manualipv4.dns: 114.114.114.114ipv4.dns-search: --ipv4.dns-options: --ipv4.dns-priority: 0ipv4.addresses: 192.168.30.10/24ipv4.gateway: 192.168.30.254...... é…ç½® yum/dnf ä½¿ç”¨æŒ‡å®šå­˜å‚¨åº“ ç»™ç³»ç»Ÿé…ç½®é»˜è®¤å­˜å‚¨åº“ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š YUM çš„ ä¸¤ ä¸ª å­˜ å‚¨ åº“ çš„ åœ° å€ åˆ† åˆ« æ˜¯ ï¼š ftp://host.domain8.example.com/dvd/BaseOS ftp://host.domain8.example.com/dvd/AppStream 1234567891011121314151617181920212223242526272829303132# 1. æ–¹æ³•ä¸€ï¼šåˆ©ç”¨ dnf-utils è½¯ä»¶åŒ…ï¼ˆéœ€æå‰æ‰¾åˆ°è¯¥åŒ…åï¼‰[root@node1 ~]\\# rpm -ivh ftp://host.domain8.example.com/dvd/BaseOS/Packages/dnf-utils-4.0.2.2-3.el8.noarch.rpm[root@node1 ~]\\# dnf-config-manager --add-repo ftp://host.domain8.example.com/dvd/BaseOS[root@node1 ~]\\# dnf-config-manager --add-repo ftp://host.domain8.example.com/dvd/AppStreamvim /etc/yum.conf # ç¼–è¾‘ä¿®æ”¹ gpgcheck=0,å¦‚æ–¹æ³•äºŒæ‰€ç¤º# 2. æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ç¼–è¾‘æ·»åŠ [root@node1 ~]\\# vim /etc/yum.repos.d/default.repo[root@node1 ~]\\# cat !$cat /etc/yum.repos.d/default.repo[baseos]name=baseosbaseurl=ftp://host.domain8.example.com/dvd/BaseOSenabled=1gpgcheck=0[base]name=basebaseurl=ftp://host.domain8.example.com/dvd/AppStreamenabled=1gpgcheck=0# 3. éªŒè¯ï¼š[root@node1 ~]\\# yum repolistUpdating Subscription Management repositories.Unable to read consumer identityThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.repo id repo namebase basebaseos baseos è°ƒè¯• SELinux éæ ‡å‡†ç«¯å£ 82 ä¸Šè¿è¡Œçš„ WEB æœåŠ¡å™¨åœ¨æä¾›å†…å®¹æ—¶é‡åˆ°é—®é¢˜ã€‚æ ¹æ®éœ€è¦è°ƒè¯•å¹¶è§£å†³é—®é¢˜ï¼Œ å¹¶ä½¿å…¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š ç³»ç»Ÿä¸Šçš„ web æœåŠ¡å™¨èƒ½å¤Ÿæä¾› /var/www/html ä¸­æ‰€æœ‰ç°åœ¨æœ‰çš„ html æ–‡ä»¶ï¼ˆæ³¨æ„ï¼šä¸è¦åˆ é™¤æˆ–è€…å…¶ä»–æ–¹å¼æ”¹åŠ¨ç°æœ‰çš„æ–‡ä»¶å†…å®¹ï¼‰ Web æœåŠ¡å™¨é€šè¿‡ 82 ç«¯å£è®¿é—® Web æœåŠ¡å™¨åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ 123456789101112131415161718# æŸ¥çœ‹åŸæœ¬çš„ SELinux è®¾ç½®[root@node1 ~]\\# semanage port -l | grep ^http_port_t # æŸ¥çœ‹å±äº http_port_t ç±»å‹ä¸Šä¸‹æ–‡çš„ç«¯å£http_port_t tcp 80, 81, 443, 488, 8008, 8009, 8443, 9000[root@node1 ~]\\# ls -lZ /var/www/html | grep html$ # æŸ¥çœ‹ /var/www/html ä¸­çš„ html æ–‡ä»¶çš„å®‰å…¨ä¸Šä¸‹æ–‡total 0-rw-r--r--. 1 root root unconfined_u:object_r:var_t:s0 0 Aug 4 22:52 1.html-rw-r--r--. 1 root root unconfined_u:object_r:var_t:s0 0 Aug 4 22:52 index.html# ä¿®æ”¹æ¶‰åŠçš„ç«¯å£åŠæ–‡ä»¶çš„ SELinux è®¾ç½®[root@node1 ~]\\# semanage port -a -t http_port_t -p tcp 82[root@node1 ~]\\# restorecon -RFv /var/www/htmlRelabeled /var/www/html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0Relabeled /var/www/html/1.html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0Relabeled /var/www/html/index.html from unconfined_u:object_r:var_t:s0 to system_u:object_r:httpd_sys_content_t:s0[root@node1 ~]\\# systemctl enable --now httpd# æµ‹è¯•è®¿é—®ã€‚å®¿ä¸»æœºè®¿é—®è¿˜éœ€æ”¾å¼€é˜²ç«å¢™[root@node1 ~]\\# curl localhost:82 åˆ›å»ºç”¨æˆ·è´¦æˆ· åˆ›å»ºä¸‹åˆ—ç”¨æˆ·ã€ç”¨æˆ·ç»„ï¼Œå¹¶æŒ‰è¦æ±‚å®Œæˆè®¾ç½®ï¼š ç»„åä¸º sysmgrs natasha ç”¨æˆ·çš„é™„å±ç»„æ˜¯ sysmgrs harry ç”¨æˆ·çš„é™„å±ç»„æ˜¯ sysmgrs john ç”¨æˆ·çš„ shell æ˜¯éäº¤äº’å¼ shellï¼Œä¸”ä¸æ˜¯ sysmgrs ç»„çš„æˆå‘˜ natashaã€harryã€john çš„å¯†ç æ˜¯ redhat 12345[root@node1 ~]\\# groupadd sysmgrs[root@node1 ~]\\# useradd -G sysmgrs natasha # -p é€‰é¡¹æŒ‡å®šçš„åŠ å¯†åçš„å¯†ç ï¼Œä¸æ¨èä½¿ç”¨[root@node1 ~]\\# useradd -G sysmgrs harry[root@node1 ~]\\# useradd -s /sbin/nologin john[root@node1 ~]\\# for i in natasha harry john; do echo redhat | passwd --stdin $i; done é…ç½® Cron ä½œä¸š é…ç½® cron ä½œä¸šï¼Œè¯¥ä½œä¸šæ¯éš” 5 åˆ†é’Ÿè¿è¡Œå¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š logger â€œEX200 in progressâ€ï¼Œä»¥ç”¨æˆ· natasha èº«ä»½è¿è¡Œ 123[root@node1 ~]\\# crontab -e -u natasha*/5 * * * * logger &quot;EX200 in progress&quot;[root@node1 ~]\\# tail -f /var/log/cron # éªŒè¯ä»»åŠ¡ åˆ›å»ºåä½œç›®å½• åˆ›å»ºå…·æœ‰ç‰¹æ®Šæƒé™çš„ç›®å½• /home/managersï¼Œè¦æ±‚å¦‚ä¸‹ï¼š /home/managers ç›®å½•å±äº sysmgrs ç»„ æ­¤ç›®å½•å¯ä»¥è¢« sysmgrs çš„ç»„æˆå‘˜è¯»å–ã€å†™å…¥å’Œè®¿é—®ï¼Œä½†æ˜¯å…¶ä»–ä»»ä½•ç”¨æˆ·ä¸å…·å¤‡è¿™äº›æƒé™ã€‚ï¼ˆä¸åŒ…æ‹¬ root ç”¨æˆ·ï¼‰ åœ¨ /home/managers ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶çš„æ‰€å±ç»„è‡ªåŠ¨å˜æˆ sysmgrs 1234567[root@node1 ~]\\# mkdir /home/managers[root@node1 ~]\\# chgrp sysmgrs /home/managers# [root@node1 ~]\\# chmod 2770 /home/managers[root@node1 ~]\\# chmod g=rws,o=- /home/managers # g+s å®ç°ç›®å½•å†…æ–°å»ºæ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿ç›®å½•çš„æ–‡ä»¶# éªŒè¯[root@node1 ~]\\# ls -ld /home/managersdrwxrws---. 2 root sysmgrs 6 Aug 8 10:46 /home/managers é…ç½® NTP é…ç½® node1 ä½œä¸º NTP çš„å®¢æˆ·ç«¯ï¼Œé…ç½®åŒæ­¥é˜¿é‡Œäº‘çš„ ntp æˆæ—¶æœåŠ¡ï¼šntp.aliyun.comã€‚ 1234567891011121314151617181920212223[root@node1 ~]\\# timedatectl | grep NTP NTP service: active[root@node1 ~]\\# systemctl status chronydâ— chronyd.service - NTP client/server Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; vendor preset: enabled) Active: active (running) (thawing) since Mon 2022-08-08 11:14:54 CST; 10min ago ......[root@node1 ~]\\# vim /etc/chrony.conf# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).server ntp.aliyun.com iburstpool 2.rhel.pool.ntp.org iburst# Record the rate at which the system clock gains/losses time.driftfile /var/lib/chrony/drift......[root@node1 ~]\\# systemctl restart chronyd[root@node1 ~]\\# chronyc sources # 203.107.6.88 æ˜¯åŸŸå ntp.aliyun.com è¿”å›çš„æˆæ—¶æœåŠ¡ ip210 Number of sources = 7MS Name/IP address Stratum Poll Reach LastRx Last sample ===============================================================================^* 203.107.6.88 2 7 357 70 -6780us[ -10ms] +/- 37ms...... é…ç½® autofs é…ç½® autofsï¼ŒæŒ‰ç…§ä»¥ä¸‹è¦æ±‚è‡ªåŠ¨æŒ‚è½½è¿œç¨‹ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š host.domain8.example.com ( 172.25.250.250 ) NFS å¯¼å‡º /rhome åˆ°æ‚¨çš„ç³»ç»Ÿ æ­¤æ–‡ä»¶ç³»ç»ŸåŒ…å«ä¸ºç”¨æˆ· remoteuser1 é¢„é…ç½®çš„ä¸»ç›®å½• remoteuser1 çš„ä¸»ç›®å½•æ˜¯ host.domain8.example.com:/rhome/remoteuser1 remoteuser1 çš„ä¸»ç›®å½•åº”è‡ªåŠ¨æŒ‚è½½åˆ°æœ¬åœ° /rhome ä¸‹çš„ /rhome/remoteuser1 ä¸»ç›®å½•å¿…é¡»å¯ä¾›å…¶ç”¨æˆ·å†™å…¥ remoteuser1 çš„å¯†ç æ˜¯ redhat 12345678910111213141516[root@node1 ~]\\# systemctl status autofsâ— autofs.service - Automounts filesystems on demand Loaded: loaded (/usr/lib/systemd/system/autofs.service; disabled; vendor preset: disabled) Active: inactive (dead)[root@node1 ~]\\# vim /etc/auto.master # ç¼–è¾‘ autofs çš„ä¸»é…ç½®æ–‡ä»¶/misc /etc/auto.misc# æ·»åŠ  nfs æ¡ç›® - rhome ä½œä¸ºåŸºæœ¬æŒ‚è½½ç‚¹# | æœ¬åœ° autofs æŒ‚è½½ç‚¹ | é’ˆå¯¹è¯¥æŒ‚è½½ç‚¹çš„é…ç½®æ–‡ä»¶ | (å¯é€‰)æŒ‚è½½é€‰é¡¹/rhome /etc/auto.nfs[root@node1 ~]\\# vim /etc/auto.nfs # ç¼–è¾‘ nfs autofs çš„é…ç½®# æ·»åŠ ç”¨æˆ·ç›®å½•åŠè¿œç¨‹ nfs è·¯å¾„# | æŒ‚è½½ç‚¹ï¼ˆç›¸å¯¹äºåŸºæœ¬æŒ‚è½½ç‚¹ï¼š/rhome/remoteuser1ï¼‰ | æŒ‚è½½é€‰é¡¹ï¼ˆå¯è¯»å†™ï¼‰ | è¿œç¨‹ä½ç½®remoteuser1 -fstype=nfs,rw host.domain8.example.com:/rhome/remoteuser1 # ä»¥ç©ºæ ¼éš”å¼€[root@node1 ~]\\# systemctl enable --now autofs[root@node1 ~]\\# echo flectrag | passwd --stdin remoteuser1[root@node1 ~]\\# su - remoteuser1 é…ç½® /var/tmp/fstab çš„æƒé™ é…ç½®æ–‡ä»¶æƒé™ï¼Œå°†æ–‡ä»¶ /etc/fstab å¤åˆ¶åˆ° /var/tmp/fstabã€‚é…ç½® /var/tmp/fstab çš„æƒé™ä»¥æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š /var/tmp/fstab å±äº root ç”¨æˆ·å’Œ root ç»„ /var/tmp/fstab ä¸èƒ½è¢«ä»»ä½•äººæ‰§è¡Œ ç”¨æˆ· natasha æœ‰è¯»å†™æƒé™ ç”¨æˆ· harry æ²¡æœ‰è¯»å†™æƒé™ æ‰€æœ‰å…¶ä»–ç”¨æˆ·ï¼ˆå½“å‰æˆ–è€…æœªæ¥ï¼‰èƒ½å¤Ÿè¯»å– /var/tmp/fstab 1234567891011121314[root@node1 ~]\\# cp /etc/fstab /var/tmp/fstab[root@node1 ~]\\# setfacl -m u:natasha:rw /var/tmp/fstab[root@node1 ~]\\# setfacl -m u:harry:- /var/tmp/fstab[root@node1 ~]\\# getfacl /var/tmp/fstab # éªŒè¯getfacl: Removing leading &#x27;/&#x27; from absolute path names# file: var/tmp/fstab# owner: root# group: rootuser::rw-user:natasha:rw-user:harry:---group::r--mask::rw-other::r-- é…ç½®ç”¨æˆ·è´¦æˆ· é…ç½®ç”¨æˆ· manalo ï¼Œå…¶ç”¨æˆ· ID ä¸º 3533ã€‚æ­¤ç”¨æˆ·çš„å¯†ç åº”å½“ä¸º redhat 1234[root@node1 ~]\\# useradd -u 3533 manalo[root@node1 ~]\\# echo redhat | passwd --stdin manaloChanging password for user manalo.passwd: all authentication tokens updated successfully. æŸ¥æ‰¾æ–‡ä»¶ æŸ¥æ‰¾å±äº manalo ç”¨æˆ·æ‰€å±çš„æ–‡ä»¶ï¼Œå¹¶æ‹·è´åˆ° /root/findfiles ç›®å½• 12[root@node1 ~]\\# mkdir /root/findfiles[root@node1 ~]\\# find / -user manalo -exec cp -a &#123;&#125; /root/findfiles \\; æŸ¥æ‰¾å­—ç¬¦ä¸² æŸ¥æ‰¾æ–‡ä»¶ /usr/share/xml/iso-codes/iso_639_3.xml ä¸­åŒ…å«å­—ç¬¦ä¸² ng çš„æ‰€æœ‰è¡Œã€‚å¹¶å°†æ‰€æœ‰è¿™ äº›è¡Œçš„å†…å®¹æ”¾åˆ°æ–‡ä»¶/root/list ä¸­ï¼Œ/root/list ä¸å¾—åŒ…å«ç©ºè¡Œã€‚ 1[root@node1 ~]\\# grep ng /usr/share/xml/iso-codes/iso_639_3.xml &gt; /root/list åˆ›å»ºå½’æ¡£ åˆ›å»ºä¸€ä¸ªåä¸º /root/backup.tar.gz çš„ tar åŒ…ï¼Œç”¨æ¥å‹ç¼© /usr/local ç›®å½•ã€‚ å¦‚æœè€ƒè¯•è®©ä½ ç”¨çš„ /root/backup.tar.bz2 çš„ tar åŒ…å‘¢ï¼Ÿ 123[root@node1 ~]\\# tar -czvf /root/backup.tar.gz /usr/local/ # å‹ç¼©ä¸º tar.gz[root@node1 ~]\\# tar -cjvf /root/backup.tar.bz2 /usr/local/ # å‹ç¼©ä¸º tar.bz2[root@node1 ~]\\# tar -tf /root/backup.tar.gz # éªŒè¯ é…ç½®å®¹å™¨ä½¿å…¶è‡ªåŠ¨å¯åŠ¨ åˆ©ç”¨ä»“åº“æœåŠ¡å™¨ä¸Šçš„ rsyslog é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªåä¸º logserver çš„å®¹å™¨ ä»“åº“åœ°å€ï¼šregistry.domain250.example.comï¼Œç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼šredhatã€‚ é¢å‘ wallah ç”¨æˆ·ï¼Œé…ç½®ä¸€ä¸ª systemd æœåŠ¡ è¯¥æœåŠ¡å‘½åä¸º container-logserver ï¼Œå¹¶åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€å¹²é¢„ å®Œæˆä¸ºå®¹å™¨é…ç½®æŒä¹…å­˜å‚¨ é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•ä¸Šä¸€ä¸ªä»»åŠ¡çš„æœåŠ¡ é…ç½®ä¸»æœºç³»ç»Ÿçš„ journald æ—¥å¿—ä»¥åœ¨ç³»ç»Ÿé‡å¯åä¿ç•™æ•°æ®ï¼Œå¹¶é‡æ–°å¯åŠ¨æ—¥å¿—è®°å½•æœåŠ¡ å°†ä¸»æœº /var/log/journal ç›®å½•ä¸‹ä»»ä½•ä»¥ *.journal çš„æ–‡ä»¶å¤åˆ¶åˆ° /home/wallah/container_logfile ä¸­ å°†æœåŠ¡é…ç½®ä¸ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å°†/home/wallah/container_logfile æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„ /var/log/journal ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637# jouranld çš„æ—¥å¿—ä¸´æ—¶å­˜å‚¨åœ¨ /run/log/journal/ ç›®å½•ä¸­ï¼ŒæŒä¹…åŒ–æ—¶ä¼šä¿å­˜åœ¨ /var/log/journal/ ç›®å½•ä¸­ï¼Œè¯¥ç›®å½•æ— éœ€æ‰‹åŠ¨åˆ›å»º# journald æ—¥å¿—çš„å­˜å‚¨æ–¹å¼åœ¨ /etc/systemd/journald.conf é…ç½®æ–‡ä»¶ä¸­å®šä¹‰# ä»»åŠ¡ä¹ 1-2ï¼š## 1. ä¿®æ”¹ journald é…ç½®æ–‡ä»¶ä½¿å…¶æŒä¹…åŒ–å­˜å‚¨æ—¥å¿—[root@node1 ~]\\# vim /etc/systemd/journald.conf[Journal]#Storage=autoStorge=persistent#Compress=yes[root@node1 ~]\\# systemctl enable --now systemd-journald # é‡å¯ï¼ˆè®¾ç½®è‡ªå¯ï¼‰journald æœåŠ¡## 2. å¤åˆ¶æ—¥å¿—[root@node1 ~]\\# journalctl -u systemd-journald # æŸ¥çœ‹æ—¥å¿—æœåŠ¡ç”Ÿæˆçš„æ—¥å¿—å­˜å‚¨è·¯å¾„ï¼ˆä¸»è¦æ˜¯éšæœºå­—ç¬¦ä¸²ç›®å½•ï¼‰[root@node1 ~]\\# cp /var/run/journal/&lt;long_random_string&gt;/*.journal /home/wallah/containe_logfile/[root@node1 ~]\\# chown -R wallah:wallah /home/wallah/container_logfile# ä»»åŠ¡å…« 1-2ï¼Œä»»åŠ¡ä¹ 3ï¼š[root@node1 ~]\\# ssh wallah@node1 # ä½¿ç”¨ ssh æœ¬åœ°è¿œç¨‹ wallah ç”¨æˆ·## 1. é…ç½® logserver å®¹å™¨[wallah@node1 ~]\\# podman login registry.domain250.example.com # ç™»å½•åˆ°é•œåƒä»“åº“Username: adminPassword: redhatLogin Succeeded![wallah@node1 ~]\\# podman search registry.domain250.example.com/ # æŸ¥çœ‹ä»“åº“å†…çš„é•œåƒåˆ—è¡¨[wallah@node1 ~]\\# podman pull registry.domain250.example.com/rhel/rsyslog # æ‹‰å–é•œåƒåˆ°æœ¬åœ°[wallah@node1 ~]\\# podman run -d --name logserver -v /home/wallah/container_logfile:/var/log/journal:Z registry.domain250.example.com/rhel/rsyslog # å¯åŠ¨å®¹å™¨ï¼Œ-d åå°è¿è¡Œï¼Œ--name æŒ‡å®šå®¹å™¨åå­—ï¼Œ-v æŒ‡å®šç›®å½•æ˜ å°„(å†’å·å’ŒZä¸å¯ç¼º)[wallah@node1 ~]\\# podman ps # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨## 2. ä¸ºå®¹å™¨åˆ›å»ºç”¨æˆ·æœåŠ¡[wallah@node1 ~]\\# loginctl enable-linger [wallah] # å…è®¸ wallah ç”¨æˆ·é€—ç•™ï¼ˆç”¨æˆ·ç™»å‡ºåå…¶æœåŠ¡ä¿æŒè¿è¡Œï¼‰[wallah@node1 ~]\\# mkdir -p ~/.config/systemd/user/ # åˆ›å»ºç”¨æˆ· systemd æœåŠ¡é…ç½®ç›®å½•[wallah@node1 ~]\\# cd ~/.config/systemd/user/[wallah@node1 user]\\# podman generate systemd -n logserver -f # åˆ›å»ºç”¨æˆ·æœåŠ¡/home/wallah/.config/systemd/user/container-logserver.service[wallah@node1 user]\\# podman stop logserver # å…ˆåœæ­¢å®¹å™¨ä»¥è¿›è¡Œåç»­æµ‹è¯•[wallah@node1 user]\\# systemctl --user enable --now container-logserver.service # å¯ç”¨ç”¨æˆ·æœåŠ¡å¹¶è®¾ç½® container-logserver æœåŠ¡çš„è‡ªå¯## 3. éªŒè¯[wallah@node1 user]\\# podman ps # éªŒè¯å®¹å™¨æ˜¯å¦è‡ªå¯","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"åˆè¯† Ansible è‡ªåŠ¨åŒ–å·¥å…·","slug":"Linux | åˆè¯† Ansible è‡ªåŠ¨åŒ–å·¥å…·","date":"2022-08-15T07:15:16.560Z","updated":"2022-08-15T07:20:50.687Z","comments":true,"path":"2022-08-15-Linux | åˆè¯† Ansible è‡ªåŠ¨åŒ–å·¥å…·.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E5%88%9D%E8%AF%86%20Ansible%20%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ è‡ªåŠ¨åŒ–ä¸ Linux ç³»ç»Ÿç®¡ç† ä¸ºä½•éœ€è¦è‡ªåŠ¨åŒ–ç®¡ç† â€‹å¤šå¹´æ¥ï¼Œå¤§å¤šæ•°ç³»ç»Ÿç®¡ç†å’ŒåŸºç¡€æ¶æ„ç®¡ç†éƒ½ä¾èµ–äºé€šè¿‡å›¾å½¢æˆ–å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢æ‰§è¡Œçš„æ‰‹åŠ¨ä»»åŠ¡ã€‚ç³»ç»Ÿç®¡ç†å‘˜é€šå¸¸ä½¿ç”¨æ£€æŸ¥æ¸…å•ã€å…¶ä»–æ–‡æ¡£æˆ–è®°å¿†çš„ä¾‹ç¨‹æ¥æ‰§è¡Œæ ‡å‡†ä»»åŠ¡ã€‚ â€‹è¿™æ ·çš„åšæ³•å®¹æ˜“å‡ºé”™ã€‚ç³»ç»Ÿç®¡ç†å‘˜å¾ˆå®¹æ˜“è·³è¿‡æŸä¸ªæ­¥éª¤æˆ–é”™è¯¯åœ°æ‰§è¡ŒæŸä¸ªæ­¥éª¤ã€‚å¯¹æ­¥éª¤æ‰§è¡Œæ˜¯å¦æ­£ç¡®æˆ–äº§ç”Ÿé¢„æœŸçš„ç»“æœçš„éªŒè¯é€šå¸¸æœ‰é™ã€‚ â€‹å¦å¤–ï¼Œå¦‚æœä»¥æ‰‹åŠ¨æ–¹å¼å•ç‹¬ç®¡ç†æ¯ä¸€æœåŠ¡å™¨ï¼Œå¯¹äºåº”è¯¥è¦åœ¨é…ç½®ä¸Šå®Œå…¨ä¸€è‡´çš„è®¸å¤šæœåŠ¡å™¨è€Œè¨€ï¼Œå®ƒä»¬å¾ˆå®¹æ˜“ä¼šå‡ºç°å¾®å°ï¼ˆæˆ–é‡å¤§ï¼‰çš„å·®å¼‚ã€‚è¿™å¯èƒ½ä¼šåŠ å¤§ç»´æŠ¤çš„éš¾åº¦ï¼Œå¹¶ç»™ IT ç¯å¢ƒå¸¦æ¥é”™è¯¯æˆ–ä¸ç¨³å®šæ€§ã€‚ â€‹è‡ªåŠ¨åŒ–å¯ä»¥å¸®åŠ©æ‚¨é¿å…æ‰‹åŠ¨ç®¡ç†ç³»ç»Ÿå’ŒåŸºç¡€æ¶æ„é€ æˆçš„é—®é¢˜ã€‚ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥ç¡®ä¿å¿«é€Ÿã€æ­£ç¡®åœ°éƒ¨ç½²å’Œé…ç½®æ‰€æœ‰ç³»ç»Ÿã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥è‡ªåŠ¨æ‰§è¡Œæ—¥å¸¸è®¡åˆ’ä¸­çš„é‡å¤æ€§ä»»åŠ¡ï¼Œä»è€Œç©ºå‡ºæ—¶é—´å¹¶ä¸“æ³¨äºæ›´é‡è¦çš„äº‹æƒ…ã€‚å¯¹ç»„ç»‡è€Œè¨€ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥æ›´å¿«åœ°æ¨å‡ºä¸‹ä¸€ç‰ˆæœ¬çš„åº”ç”¨æˆ–æœåŠ¡æ›´æ–°ã€‚ åŸºç¡€æ¶æ„å³ä»£ç  â€‹è‰¯å¥½çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿå…è®¸æ‚¨å®æ–½åŸºç¡€æ¶æ„å³ä»£ç æ–¹æ³•ã€‚åŸºç¡€æ¶æ„å³ä»£ç æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨æœºå™¨å¯è¯»çš„è‡ªåŠ¨åŒ–è¯­è¨€æ¥å®šä¹‰å’Œæè¿°æ‚¨å¸Œæœ›ITåŸºç¡€æ¶æ„æ‰€å¤„çš„çŠ¶æ€ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™ç§è‡ªåŠ¨åŒ–è¯­è¨€ä¹Ÿåº”è¯¥éå¸¸ä¾¿äºäººç±»é˜…è¯»ï¼Œå› ä¸ºè¿™æ ·æ‚¨å°±å¯ä»¥è½»æ¾äº†è§£æ‰€å¤„çš„çŠ¶æ€å¹¶å¯¹å…¶è¿›è¡Œæ›´æ”¹ã€‚ç„¶åï¼Œæ­¤ä»£ç å¯åº”ç”¨äºæ‚¨çš„åŸºç¡€æ¶æ„ï¼Œç¡®ä¿å®ƒçœŸæ­£å¤„äºè¯¥çŠ¶æ€ã€‚ â€‹å¦‚æœè‡ªåŠ¨åŒ–è¯­è¨€è¡¨ç¤ºä¸ºç®€å•æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™å¯ä»¥åœ¨è½¯ä»¶ä»£ç ç­‰ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­è½»æ¾ç®¡ç†ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æ¯ä¸ªæ›´æ”¹éƒ½å¯ä»¥ç­¾å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ï¼Œå› æ­¤æ‚¨å¯ä»¥è·å¾—éšæ—¶é—´æ‰€åšæ›´æ”¹çš„å†å²è®°å½•ã€‚å¦‚æœæ‚¨è¦æ¢å¤åˆ°æ›´æ—©çš„å·²çŸ¥è‰¯å¥½é…ç½®ï¼Œåªéœ€ç­¾å‡ºè¿™ä¸€ç‰ˆæœ¬çš„ä»£ç å¹¶å°†å…¶åº”ç”¨åˆ°æ‚¨çš„åŸºç¡€æ¶æ„ã€‚ â€‹è¿™æ ·å°±å¥ å®šäº†ä¸€ä¸ªåŸºç¡€ï¼Œå¸®åŠ©æ‚¨éµå¾ª DevOps ä¸­çš„æœ€ä½³å®è·µã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨è‡ªåŠ¨åŒ–è¯­è¨€ä¸­å®šä¹‰æ‰€éœ€çš„é…ç½®ã€‚æ“ä½œå‘˜å¯ä»¥æ›´è½»æ¾åœ°æŸ¥çœ‹è¿™äº›æ›´æ”¹ä»¥æä¾›åé¦ˆï¼Œå¹¶ä½¿ç”¨è¯¥è‡ªåŠ¨åŒ–å¯é‡å¤åœ°ç¡®ä¿ç³»ç»Ÿå¤„äºå¼€å‘äººå‘˜æœŸæœ›çš„çŠ¶æ€ã€‚ å‡å°‘äººä¸ºé”™è¯¯ â€‹é€šè¿‡ä½¿ç”¨ä»»åŠ¡è‡ªåŠ¨åŒ–å’ŒåŸºç¡€æ¶æ„å³ä»£ç æ–¹æ³•æ¥å‡å°‘åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ‚¨çš„æœåŠ¡å™¨å°†æ›´é¢‘ç¹åœ°å¤„äºä¸€è‡´çš„é…ç½®ä¸­ã€‚è¿™æ„å‘³ç€æ‚¨éœ€è¦ä¹ æƒ¯äºé€šè¿‡æ›´æ–°è‡ªåŠ¨åŒ–ä»£ç è¿›è¡Œæ›´æ”¹ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨å°†å…¶åº”ç”¨åˆ°æœåŠ¡å™¨ã€‚å¦åˆ™ï¼Œåœ¨ä¸‹æ¬¡é€šè¿‡è‡ªåŠ¨åŒ–åº”ç”¨æ›´æ”¹æ—¶æ‚¨å°†é¢ä¸´ä¸¢å¤±ä¹‹å‰æ‰‹åŠ¨åº”ç”¨çš„æ›´æ”¹çš„é£é™©ã€‚ â€‹è‡ªåŠ¨åŒ–å…è®¸æ‚¨ä½¿ç”¨ä»£ç å®¡æŸ¥ã€å¤šä¸ªä¸»é¢˜ä¸“å®¶çš„åŒè¡Œè¯„å®¡ï¼Œä»¥åŠè‡ªåŠ¨åŒ–æœ¬èº«çš„ç¨‹åºæ–‡æ¡£ï¼Œä»¥é™ä½æ‚¨çš„æ“ä½œé£é™©ã€‚ â€‹æœ€ç»ˆï¼Œæ‚¨å¯ä»¥å¼ºåˆ¶å¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–å¯¹ IT åŸºç¡€æ¶æ„è¿›è¡Œæ›´æ”¹ï¼Œä»¥å‡å°‘äººä¸ºé”™è¯¯ã€‚ ä»€ä¹ˆæ˜¯ Ansible â€‹Ansible æ˜¯ä¸€æ¬¾å¼€æºè‡ªåŠ¨åŒ–å¹³å°ã€‚å®ƒæ˜¯ä¸€ç§ç®€å•çš„è‡ªåŠ¨åŒ–è¯­è¨€ï¼Œèƒ½å¤Ÿåœ¨ Ansible Playbook ä¸­å®Œç¾åœ°æè¿° IT åº”ç”¨åŸºç¡€æ¶æ„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–å¼•æ“ï¼Œå¯è¿è¡Œ Ansible Playbookã€‚ â€‹Ansible å¯ä»¥ç®¡ç†å¼ºå¤§çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè€Œä¸”èƒ½å¤Ÿé€‚åº”è®¸å¤šä¸åŒçš„å·¥ä½œæµå’Œç¯å¢ƒã€‚åŒæ—¶ï¼ŒAnsible æ–°ç”¨æˆ·å¯ä»¥éå¸¸å¿«é€Ÿåœ°åˆ©ç”¨å®ƒæ¥æé«˜å·¥ä½œæ•ˆç‡ã€‚ Ansible ç®€å•æ˜äº† â€‹Ansible Playbook æä¾›äººç±»å¯è¯»çš„è‡ªåŠ¨åŒ–ã€‚è¿™è¡¨ç¤ºï¼ŒPlaybook ä¸ä»…æ˜¯è‡ªåŠ¨åŒ–å·¥å…·ï¼Œè€Œä¸”æ˜“äºé˜…è¯»ã€ç†è§£å’Œæ›´æ”¹ã€‚ä¸éœ€è¦æŒæ¡ç‰¹åˆ«çš„ç¼–ç æŠ€èƒ½å°±èƒ½ç¼–å†™å®ƒä»¬ã€‚Playbook æŒ‰é¡ºåºæ‰§è¡Œä»»åŠ¡ã€‚Playbook è®¾è®¡çš„ç®€æ˜“æ€§ä½¿å…¶å¯ä¾›æ¯ä¸ªå›¢é˜Ÿä½¿ç”¨ï¼Œè®© Ansible å…¥é—¨è€…ä¹Ÿèƒ½å¤Ÿå¿«é€Ÿè·å¾—æˆæ•ˆã€‚ Ansible åŠŸèƒ½å¼ºå¤§ â€‹å¯ä»¥åˆ©ç”¨ Ansible éƒ¨ç½²åº”ç”¨ï¼Œä¹Ÿå¯å°†å®ƒç”¨äºé…ç½®ç®¡ç†ã€å·¥ä½œæµè‡ªåŠ¨åŒ–å’Œç½‘ç»œè‡ªåŠ¨åŒ–ã€‚Ansibleå¯ç”¨äºç¼–æ’æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸã€‚ Ansible æ— éœ€ä»£ç† â€‹Ansible å›´ç»•æ— ä»£ç†æ¶æ„æ„å»ºã€‚é€šå¸¸è€Œè¨€ï¼ŒAnsible é€šè¿‡ OpenSSH æˆ– WinRM è¿æ¥å®ƒæ‰€ç®¡ç†çš„ä¸»æœºå¹¶ä¸”è¿è¡Œä»»åŠ¡ï¼Œæ–¹æ³•é€šå¸¸æ˜¯ï¼ˆä½†ä¸æ€»æ˜¯ï¼‰å°†ç§°ä¸º Ansible æ¨¡å—çš„å°ç¨‹åºæ¨é€è‡³è¿™äº›ä¸»æœºã€‚è¿™äº›ç¨‹åºç”¨äºå°†ç³»ç»Ÿç½®äºéœ€è¦çš„ç‰¹å®šçŠ¶æ€ã€‚åœ¨ Ansible è¿è¡Œå®Œå…¶ä»»åŠ¡åï¼Œæ¨é€çš„æ‰€æœ‰æ¨¡å—éƒ½ä¼šè¢«åˆ é™¤ã€‚æ‚¨å‡ ä¹å¯ä»¥ç«‹å³å¼€å§‹ä½¿ç”¨ Ansibleï¼Œå› ä¸ºä¸éœ€è¦æ‰¹å‡†ä½¿ç”¨ä»»ä½•ç‰¹æ®Šä»£ç†ï¼Œç„¶åå†éƒ¨ç½²åˆ°å—ç®¡ä¸»æœºä¸Šã€‚ç”±äºæ²¡æœ‰ä»£ç†ï¼Œä¹Ÿä¸éœ€è¦é¢å¤–çš„è‡ªå®šä¹‰å®‰å…¨åŸºç¡€æ¶æ„ï¼ŒAnsible è¦æ¯”å…¶ä»–å¤‡é€‰æ–¹æ¡ˆæ›´åŠ é«˜æ•ˆå’Œå®‰å…¨ã€‚ â€‹åŒæ—¶ Ansible ä¹Ÿå…·æœ‰ä»¥ä¸‹å¤šä¸ªé‡è¦çš„ä¼˜ç‚¹ï¼š è·¨å¹³å°æ”¯æŒï¼šAnsible æä¾› Linuxã€Windowsã€UNIX å’Œç½‘ç»œè®¾å¤‡çš„æ— ä»£ç†æ”¯æŒï¼Œé€‚ç”¨äºç‰©ç†ã€è™šæ‹Ÿã€äº‘å’Œå®¹å™¨ç¯å¢ƒã€‚ äººç±»å¯è¯»çš„è‡ªåŠ¨åŒ–ï¼šAnsible Playbook é‡‡ç”¨ YAML æ–‡æœ¬æ–‡ä»¶ç¼–å†™ï¼Œæ˜“äºé˜…è¯»ï¼Œæœ‰åŠ©äºç¡®ä¿æ‰€æœ‰äººéƒ½èƒ½ç†è§£å®ƒä»¬çš„ç”¨é€”ã€‚ å®Œç¾æè¿°åº”ç”¨ï¼šå¯ä»¥é€šè¿‡ Ansible Playbook è¿›è¡Œæ¯ä¸€ç§æ›´æ”¹ï¼Œå¹¶æè¿°å’Œè®°å½•åº”ç”¨ç¯å¢ƒçš„æ¯ä¸€ä¸ªæ–¹é¢ã€‚ è½»æ¾ç®¡ç†ç‰ˆæœ¬æ§åˆ¶ï¼šAnsible Playbook å’Œé¡¹ç›®æ˜¯çº¯æ–‡æœ¬ã€‚å®ƒä»¬å¯ä»¥è§†ä½œæºä»£ç ï¼Œæ”¾åœ¨æ‚¨çš„ç°æœ‰ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ã€‚ æ”¯æŒåŠ¨æ€æ¸…å•ï¼šå¯ä»¥ä»å¤–éƒ¨æ¥æºåŠ¨æ€æ›´æ–° Ansible ç®¡ç†çš„è®¡ç®—æœºçš„åˆ—è¡¨ï¼Œéšæ—¶è·å–æ‰€æœ‰å—ç®¡æœåŠ¡å™¨çš„å½“å‰æ­£ç¡®åˆ—è¡¨ï¼Œä¸å—åŸºç¡€æ¶æ„æˆ–ä½ç½®çš„å½±å“ã€‚ ç¼–æ’å¯ä¸å…¶ä»–ç³»ç»Ÿè½»æ¾é›†æˆï¼šèƒ½å¤Ÿåˆ©ç”¨ç¯å¢ƒä¸­ç°æœ‰çš„ HPSAã€Puppetã€Jenkinsã€çº¢å¸½å«æ˜Ÿå’Œå…¶ä»–ç³»ç»Ÿï¼Œå¹¶ä¸”é›†æˆåˆ° Ansible å·¥ä½œæµä¸­ã€‚ Ansible çš„æ¦‚å¿µå’Œæ¶æ„ â€‹Ansibleæ¶æ„ä¸­æœ‰ä¸¤ç§è®¡ç®—æœºç±»å‹ï¼Œå³æ§åˆ¶èŠ‚ç‚¹å’Œå—ç®¡ä¸»æœºã€‚Ansible åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šå®‰è£…å’Œè¿è¡Œï¼Œè¯¥è®¡ç®—æœºä¸Šä¹Ÿå«æœ‰ Ansible é¡¹ç›®æ–‡ä»¶çš„å‰¯æœ¬ã€‚æ§åˆ¶èŠ‚ç‚¹å¯ä»¥æ˜¯ç®¡ç†å‘˜çš„ç¬”è®°æœ¬ç”µè„‘ã€å¤šä¸ªç®¡ç†å‘˜å…±äº«çš„ç³»ç»Ÿï¼Œæˆ–è€…è¿è¡Œçº¢å¸½ Ansible Tower çš„æœåŠ¡å™¨ã€‚ â€‹å—ç®¡ä¸»æœºåˆ—åœ¨æ¸…å•ä¸­ï¼Œæ¸…å•è¿˜å¯ä»¥å°†è¿™äº›ç³»ç»Ÿç»„ç»‡åˆ°ç»„ä¸­ï¼Œä»¥ä¾¿äºé›†ä¸­ç®¡ç†ã€‚æ¸…å•å¯ä»¥åœ¨é™æ€æ–‡æœ¬æ–‡ä»¶ä¸­å®šä¹‰ï¼Œæˆ–è€…é€šè¿‡ä»å¤–éƒ¨æ¥æºè·å–ä¿¡æ¯çš„è„šæœ¬æ¥åŠ¨æ€ç¡®å®šã€‚ â€‹Ansible ç”¨æˆ·æ— éœ€ç¼–å†™å¤æ‚çš„è„šæœ¬ï¼Œè€Œåªè¦åˆ›å»ºé«˜çº§åˆ« play å³å¯ç¡®ä¿ä¸»æœºæˆ–ä¸»æœºç»„å¤„äºç‰¹å®šçŠ¶æ€ã€‚Play æŒ‰è¯¥ play æŒ‡å®šçš„é¡ºåºå¯¹ä¸»æœºæ‰§è¡Œä¸€ç³»åˆ—ä»»åŠ¡ã€‚è¿™äº› play é€šè¿‡é‡‡ç”¨ YAML æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶æ¥è¡¨è¾¾ã€‚åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª play çš„æ–‡ä»¶ç§°ä¸º playbookã€‚ â€‹æ¯ä¸ªä»»åŠ¡è¿è¡Œä¸€ä¸ªæ¨¡å—ï¼Œå³ï¼ˆä½¿ç”¨ Pythonã€PowerShell æˆ–æŸç§å…¶ä»–è¯­è¨€ç¼–å†™çš„ï¼‰ä¸€å°æ®µä»£ç ã€‚å„ä¸ªæ¨¡å—åŸºæœ¬ä¸Šæ˜¯æ‚¨çš„å·¥å…·åŒ…ä¸­çš„ä¸€ä¸ªå·¥å…·ã€‚Ansible éšé™„äº†æ•°ç™¾ä¸ªå®ç”¨æ¨¡å—ï¼Œå®ƒä»¬èƒ½å¤Ÿæ‰§è¡Œè®¸å¤šä¸åŒçš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚å®ƒä»¬å¯ä»¥ä½œç”¨äºç³»ç»Ÿæ–‡ä»¶ï¼Œå®‰è£…è½¯ä»¶æˆ–è€…è¿›è¡Œ API è°ƒç”¨ã€‚ â€‹åœ¨ä»»åŠ¡ä¸­ä½¿ç”¨æ—¶ï¼Œæ¨¡å—é€šå¸¸ç¡®ä¿è®¡ç®—æœºçš„æŸä¸€ç‰¹å®šæ–¹é¢å¤„äºç‰¹å®šçš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨æŸä¸€æ¨¡å—çš„ä»»åŠ¡å¯ä»¥ç¡®ä¿æŸä¸€æ–‡ä»¶å­˜åœ¨ä¸”å…·æœ‰ç‰¹å®šçš„æƒé™å’Œå†…å®¹ï¼Œè€Œä½¿ç”¨å¦ä¸€ä¸åŒæ¨¡å—çš„ä»»åŠ¡å¯ç¡®ä¿å·²æŒ‚è½½ç‰¹å®šçš„æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœç³»ç»Ÿä¸å¤„äºæŒ‡å®šçš„çŠ¶æ€ï¼Œä»»åŠ¡åº”å°†å®ƒç½®äºè¯¥çŠ¶æ€ã€‚å¦‚æœç³»ç»Ÿå·²å¤„äºè¯¥çŠ¶æ€ï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚å¦‚æœä»»åŠ¡å¤±è´¥ï¼ŒAnsible çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å‘ç”Ÿäº†é”™è¯¯çš„ä¸»æœºä¸­æ­¢ playbook çš„å…¶ä½™éƒ¨åˆ†ä»»åŠ¡ã€‚ â€‹play å’Œ playbook è®¾è®¡ä¸ºå…·æœ‰å¹‚ç­‰æ€§ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥åœ¨ç›¸åŒä¸»æœºä¸Šå¤šæ¬¡å®‰å…¨åœ°è¿è¡Œä¸€ä¸ª playbookã€‚å½“æ‚¨çš„ç³»ç»Ÿå¤„äºæ­£ç¡®çŠ¶æ€æ—¶ï¼Œplaybook åœ¨è¿è¡Œæ—¶ä¸ä¼šè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨ç›¸åŒä¸»æœºä¸Šå¤šæ¬¡å®‰å…¨åœ°è¿è¡Œä¸€ä¸ª playbookã€‚å½“æ‚¨çš„ç³»ç»Ÿå¤„äºæ­£ç¡®çŠ¶æ€æ—¶ï¼Œplaybook åœ¨è¿è¡Œæ—¶ä¸åº”è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªæ¨¡å—æ¥è¿è¡Œä»»æ„å‘½ä»¤ã€‚ä½†æ˜¯ï¼Œæ‚¨å¿…é¡»å°å¿ƒä½¿ç”¨è¿™äº›æ¨¡å—ï¼Œä»¥ç¡®ä¿å®ƒä»¬ä»¥å¹‚ç­‰æ–¹å¼è¿è¡Œã€‚ â€‹Ansible ä¹Ÿä½¿ç”¨æ’ä»¶ã€‚æ’ä»¶æ˜¯æ‚¨å¯ä»¥æ·»åŠ åˆ° Ansible ä¸­çš„ä»£ç ï¼Œä»¥å¯¹å®ƒè¿›è¡Œæ‰©å±•å¹¶ä½¿å®ƒé€‚åˆæ–°çš„ç”¨é€”å’Œå¹³å°ã€‚ â€‹Ansible æ¶æ„æ˜¯æ— ä»£ç†çš„ã€‚é€šå¸¸ï¼Œå½“ç®¡ç†å‘˜è¿è¡Œ Ansible Playbook æˆ–ä¸´æ—¶å‘½ä»¤æ—¶ï¼Œæ§åˆ¶èŠ‚ç‚¹ä½¿ç”¨ SSHï¼ˆé»˜è®¤ï¼‰æˆ– WinRM è¿æ¥å—ç®¡ä¸»æœºã€‚è¿™æ„å‘³ç€å®¢æˆ·ç«¯æ— éœ€åœ¨å—ç®¡ä¸»æœºä¸Šå®‰è£…ç‰¹å®šäº Ansible çš„ä»£ç†ï¼Œä¹Ÿä¸éœ€è¦å…è®¸å°†ç‰¹æ®Šçš„ç½‘ç»œæµé‡ä¼ è¾“åˆ°æŸä¸€éæ ‡å‡†ç«¯å£ã€‚ â€‹çº¢å¸½ AnsibleTower æ˜¯ä¸€ç§ä¼ä¸šæ¡†æ¶ï¼Œå¯å¸®åŠ©æ‚¨è§„æ¨¡åŒ–æ§åˆ¶ã€ä¿æŠ¤å’Œç®¡ç† Ansible è‡ªåŠ¨åŒ–ã€‚æ‚¨å¯ä»¥ç”¨å®ƒæ§åˆ¶è°æœ‰æƒåœ¨å“ªäº›ä¸»æœºä¸Šè¿è¡Œ playbookï¼Œå…±äº«ä½¿ç”¨ SSH å‡­æ®è€Œä¸å¿…å…è®¸ç”¨æˆ·ä¼ è¾“æˆ–æŸ¥çœ‹å…¶å†…å®¹ï¼Œè®°å½•æ‚¨çš„æ‰€æœ‰ Ansible ä½œä¸šï¼Œä»¥åŠç®¡ç†æ¸…å•ï¼Œç­‰ç­‰ã€‚å®ƒæä¾›åŸºäºWebçš„ç”¨æˆ·ç•Œé¢ï¼ˆWeb UIï¼‰å’Œ RESTful APIã€‚å®ƒä¸æ˜¯ Ansible çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè€Œæ˜¯å•ç‹¬çš„äº§å“ï¼Œèƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´åŠ æœ‰æ•ˆåœ°ä»¥å›¢é˜Ÿæˆ–æ›´å¤§è§„æ¨¡ä½¿ç”¨ Ansibleã€‚ Ansible æ¶æ„çš„ä¼˜åŠ¿ ä¸ä¼šå› ä¸ºå¤æ‚æ€§è€Œç ´åæ•ˆç‡ â€‹è¶Šç®€å•è¶Šå¥½ã€‚Ansilbleçš„è®¾è®¡å®—æ—¨æ˜¯å·¥å…·æ˜“ç”¨ï¼Œè‡ªåŠ¨åŒ–æ˜“å†™æ˜“è¯»ã€‚æ‚¨åº”åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹åœ¨åˆ›å»ºè‡ªåŠ¨åŒ–æ—¶è¿½æ±‚ç®€å•åŒ–ã€‚ ä¸“ä¸ºæ˜“è¯»æ€§ä¼˜åŒ– â€‹Ansibleè‡ªåŠ¨åŒ–è¯­è¨€å›´ç»•ç®€å•æ˜“è¯»çš„å£°æ˜æ€§æ–‡æœ¬æ–‡ä»¶æ¥æ„å»ºã€‚æ­£ç¡®ç¼–å†™çš„AnsiblePlaybookå¯ä»¥æ¸…æ¥šåœ°è®°å½•æ‚¨çš„å·¥ä½œæµè‡ªåŠ¨åŒ–ã€‚ å£°æ˜å¼æ€ç»´ â€‹Ansible æ˜¯ä¸€ç§è¦æ±‚çŠ¶æ€å¼•æ“ã€‚å®ƒé€šè¿‡è¡¨è¾¾æ‚¨å¸Œæœ›ç³»ç»Ÿå¤„äºä½•ç§çŠ¶æ€æ¥è§£å†³å¦‚ä½•è‡ªåŠ¨åŒ– IT éƒ¨ç½²çš„é—®é¢˜ã€‚Ansible çš„ç›®æ ‡æ˜¯é€šè¿‡ä»…æ‰§è¡Œå¿…è¦çš„æ›´æ”¹ï¼Œä½¿æ‚¨çš„ç³»ç»Ÿå¤„äºæ‰€éœ€çš„çŠ¶æ€ã€‚è¯•å›¾å°† Ansible è§†ä¸ºè„šæœ¬è¯­è¨€å¹¶éæ­£ç¡®çš„åšæ³•ã€‚ Ansible ç”¨ä¾‹ â€‹ä¸æŸäº›å…¶ä»–å·¥å…·ä¸åŒï¼ŒAnsible åœ¨ä¸€ä¸ªæ˜“ç”¨çš„å¹³å°ä¸­ï¼Œå°†ç¼–æ’ä¸é…ç½®ç®¡ç†ã€è°ƒé…å’Œåº”ç”¨éƒ¨ç½²ç›¸ç»“åˆã€‚ â€‹Ansibleçš„ä¸€äº›ç”¨ä¾‹åŒ…æ‹¬ï¼š é…ç½®ç®¡ç† â€‹é›†ä¸­åŒ–é…ç½®æ–‡ä»¶ç®¡ç†å’Œéƒ¨ç½²æ˜¯ Ansible çš„å¸¸è§ç”¨ä¾‹ï¼Œå¾ˆå¤šè¶…çº§ç”¨æˆ·ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ–¹å¼äº†è§£ Ansible è‡ªåŠ¨åŒ–å¹³å°ã€‚ åº”ç”¨éƒ¨ç½² â€‹é€šè¿‡Ansibleå®šä¹‰åº”ç”¨ï¼Œä»¥åŠä½¿ç”¨çº¢å¸½ Ansible Tower ç®¡ç†éƒ¨ç½²æ—¶ï¼Œå„å›¢é˜Ÿå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°ç®¡ç†ä»å¼€å‘åˆ°ç”Ÿäº§çš„æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸã€‚ è°ƒé… â€‹åº”ç”¨å¿…é¡»è¦éƒ¨ç½²æˆ–å®‰è£…åˆ°ç³»ç»Ÿä¸Šã€‚Ansible å’Œçº¢å¸½ Ansible Tower æœ‰åŠ©äºç®€åŒ–è°ƒé…ç³»ç»Ÿçš„æµç¨‹ï¼Œä¸è®ºæ‚¨æ˜¯è¦ PXE å¼•å¯¼å’Œkickstart å®‰è£…è£¸æœºæ¢å¤æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºï¼Œè¿˜æ˜¯ä»æ¨¡æ¿åˆ›å»ºè™šæ‹Ÿæœºæˆ–äº‘å®ä¾‹ã€‚åº”ç”¨å¿…é¡»è¦éƒ¨ç½²æˆ–å®‰è£…åˆ°ç³»ç»Ÿä¸Šã€‚ æŒç»­äº¤ä»˜ â€‹åˆ›å»º CI/CD ç®¡é“éœ€è¦å¤šä¸ªå›¢é˜Ÿçš„åè°ƒå’Œå‚ä¸ã€‚å¦‚æœæ²¡æœ‰ç»„ç»‡å†…äººäººå¯ç”¨çš„ç®€å•è‡ªåŠ¨åŒ–å¹³å°ï¼Œå°±æ— æ³•å®ç°è¿™ä¸ªç›®æ ‡ã€‚Ansible Playbook è®©æ‚¨çš„åº”ç”¨å¯ä»¥åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…å¾—åˆ°æ­£ç¡®éƒ¨ç½²ï¼ˆå’Œç®¡ç†ï¼‰ã€‚ å®‰å…¨å’Œåˆè§„æ€§ â€‹å½“æ‚¨åœ¨ Ansible Playbook ä¸­å®šä¹‰å®‰å…¨ç­–ç•¥æ—¶ï¼Œä¹Ÿå¯ä»¥å°†æ‰«æå’Œä¿®å¤æ•´ç«™å®‰å…¨ç­–ç•¥é›†æˆåˆ°å…¶ä»–è‡ªåŠ¨åŒ–æµç¨‹ä¸­ã€‚ç¡®ä¿å®‰å…¨åº”è¯¥æ˜¯æ‚¨æ‰€æœ‰éƒ¨ç½²ä¸­ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯äº‹åæ‰å»è€ƒè™‘çš„éƒ¨åˆ†ã€‚ ç¼–æ’ â€‹ä»…é…ç½®æœ¬èº«ä¸è¶³ä»¥å®šä¹‰æ‚¨çš„ç¯å¢ƒã€‚æ‚¨è¿˜éœ€è¦å®šä¹‰å¤šä¸ªé…ç½®é—´åº”å¦‚ä½•äº¤äº’ï¼Œå¹¶ä¸”ç¡®ä¿ä»¥æ•´ä½“çš„æ–¹å¼ç®¡ç†å„ç±»åˆ†æ•£çš„èµ„æºã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç®¡ç†ç½‘ç»œå®‰å…¨","slug":"Linux | ç®¡ç†ç½‘ç»œå®‰å…¨","date":"2022-08-15T07:11:49.614Z","updated":"2022-08-15T07:14:18.990Z","comments":true,"path":"2022-08-15-Linux | ç®¡ç†ç½‘ç»œå®‰å…¨.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%AE%A1%E7%90%86%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç®¡ç†æœåŠ¡å™¨é˜²ç«å¢™ é˜²ç«å¢™åŸç†æ¦‚è¿° Netfilter â€‹Linux å†…æ ¸ä¸­åŒ…å« netfilterï¼Œå®ƒæ˜¯ç½‘ç»œæµé‡æ“ä½œï¼ˆå¦‚æ•°æ®åŒ…è¿‡æ»¤ã€ç½‘ç»œåœ°å€è½¬æ¢å’Œç«¯å£è½¬æ¢ï¼‰çš„æ¡†æ¶ã€‚é€šè¿‡åœ¨å†…æ ¸ä¸­å®ç°æ‹¦æˆªå‡½æ•°è°ƒç”¨å’Œæ¶ˆæ¯çš„å¤„ç†ç¨‹åºï¼Œnetfilter å…è®¸å…¶ä»–å†…æ ¸æ¨¡å—ç›´æ¥ä¸å†…æ ¸çš„ç½‘ç»œå †æ ˆè¿›è¡Œæ¥å£è¿æ¥ã€‚é˜²ç«å¢™è½¯ä»¶ä½¿ç”¨ä¸€äº› Hook æ–¹æ³•æ¥æ³¨å†Œè¿‡æ»¤è§„åˆ™å’Œæ•°æ®åŒ…ä¿®æ”¹åŠŸèƒ½ï¼Œä»¥ä¾¿å¯¹ç»è¿‡ç½‘ç»œå †æ ˆçš„æ¯ä¸ªæ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚åœ¨åˆ°è¾¾ç”¨æˆ·ç©ºé—´ç»„ä»¶æˆ–åº”ç”¨ä¹‹å‰ï¼Œä»»ä½•ä¼ å…¥ã€ä¼ å‡ºæˆ–è½¬å‘çš„ç½‘ç»œæ•°æ®åŒ…éƒ½å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ¥æ£€æŸ¥ã€ä¿®æ”¹ã€ä¸¢å¼ƒæˆ–è·¯ç”±ã€‚netfilter æ˜¯çº¢å¸½ä¼ä¸š Linux 8 é˜²ç«å¢™çš„ä¸»è¦ç»„ä»¶ã€‚ Nftables â€‹Linux å†…æ ¸ä¸­è¿˜åŒ…å« nftablesï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„è¿‡æ»¤å™¨å’Œæ•°æ®åŒ…åˆ†ç±»å­ç³»ç»Ÿï¼Œå…¶å¢å¼ºäº† netfilter çš„éƒ¨åˆ†ä»£ç ï¼Œä½†ä»ä¿ç•™äº† netfilter çš„æ¶æ„ï¼Œå¦‚ç½‘ç»œå †æ ˆ Hookã€è¿æ¥è·Ÿè¸ªç³»ç»ŸåŠæ—¥å¿—è®°å½•åŠŸèƒ½ã€‚nftables æ›´æ–°çš„ä¼˜åŠ¿åœ¨äºæ›´å¿«çš„æ•°æ®åŒ…å¤„ç†ã€æ›´å¿«çš„è§„åˆ™é›†æ›´æ–°ï¼Œä»¥åŠä»¥ç›¸åŒçš„è§„åˆ™åŒæ—¶å¤„ç† IPV4 å’Œ IPV6ã€‚nftables ä¸åŸå§‹ netfilter ä¹‹é—´çš„å¦ä¸€ä¸ªä¸»è¦åŒºåˆ«æ˜¯å®ƒä»¬çš„æ¥å£ã€‚Netfilter é€šè¿‡å¤šä¸ªå®ç”¨ç¨‹åºæ¡†æ¶è¿›è¡Œé…ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬ iptablesã€ip6tablesã€arptables å’Œ ebtablesï¼Œè¿™äº›æ¡†æ¶ç°åœ¨å·²è¢«å¼ƒç”¨ã€‚Nftables ä½¿ç”¨å•ä¸ª nft ç”¨æˆ·ç©ºé—´å®ç”¨ç¨‹åºï¼Œé€šè¿‡ä¸€ä¸ªæ¥å£æ¥ç®¡ç†æ‰€æœ‰åè®®ï¼Œç”±æ­¤æ¶ˆé™¤äº†ä»¥å¾€ä¸åŒå‰ç«¯å’Œå¤šä¸ª netfilter æ¥å£å¼•èµ·çš„äº‰ç”¨é—®é¢˜ã€‚ Firewalld â€‹Firewalld æ˜¯ä¸€ä¸ªåŠ¨æ€é˜²ç«å¢™ç®¡ç†å™¨ï¼Œå®ƒæ˜¯ nftables æ¡†æ¶çš„å‰ç«¯ï¼ˆä½¿ç”¨ nft å‘½ä»¤ï¼‰ã€‚åœ¨æ¨å‡º nftables ä¹‹å‰ï¼Œä½œä¸ºä¸€ç§æ”¹è¿› iptables æœåŠ¡çš„æ›¿ä»£æ–¹æ¡ˆï¼Œfirewalld æ›¾ä½¿ç”¨ iptables å‘½ä»¤æ¥ç›´æ¥é…ç½® netfilterã€‚åœ¨ RHEL8 ä¸­ï¼Œfirewalld ä»ç„¶æ˜¯æ¨èçš„å‰ç«¯ï¼Œå®ƒä½¿ç”¨ nft æ¥ç®¡ç†é˜²ç«å¢™è§„åˆ™é›†ã€‚Firewalld ä»å¯ä»¥è¯»å–å’Œç®¡ç† iptables é…ç½®æ–‡ä»¶å’Œè§„åˆ™é›†ï¼Œå¹¶ä½¿ç”¨ xtables-nft-multi å°† iptables å¯¹è±¡ç›´æ¥è½¬æ¢ä¸º nftables è§„åˆ™å’Œå¯¹è±¡ã€‚å¯¹äº nft è½¬æ¢è¿‡ç¨‹æ— æ³•æ­£ç¡®å¤„ç†ç° æœ‰ iptables è§„åˆ™é›†çš„å¤æ‚ç”¨ä¾‹ï¼Œæ‚¨å¯ä»¥å¯¹ firewalld è¿›è¡Œé…ç½®ï¼Œä½¿ä¹‹æ¢å¤ä¸º iptables åç«¯ï¼Œè™½ç„¶å¼ºçƒˆå»ºè®®ä¸è¦è¿™æ ·åšã€‚ â€‹åº”ç”¨ä¼šä½¿ç”¨ D-Bus æ¥å£æŸ¥è¯¢å­ç³»ç»Ÿã€‚firewalld å­ç³»ç»Ÿï¼ˆå¯é€šè¿‡ firewalld RPM è½¯ä»¶åŒ…è·å¾—ï¼‰æœªåŒ…å«åœ¨æœ€å°å®‰è£…ä¸­ï¼Œä½†åŒ…å«åœ¨åŸºæœ¬å®‰è£…ä¸­ã€‚å€ŸåŠ© firewalldï¼Œå¯ä»¥å°†æ‰€æœ‰ç½‘ç»œæµé‡åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œä»è€Œç®€åŒ–é˜²ç«å¢™ç®¡ç†ã€‚æ ¹æ®æ•°æ®åŒ…æºIPåœ°å€æˆ–ä¼ å…¥ç½‘ç»œæ¥å£ç­‰æ¡ä»¶ï¼Œæµé‡å°†è½¬å…¥ç›¸åº”åŒºåŸŸçš„é˜²ç«å¢™è§„åˆ™ã€‚æ¯ä¸ªåŒºåŸŸéƒ½æœ‰è‡ªå·±çš„ç«¯å£å’ŒæœåŠ¡åˆ—è¡¨ï¼Œå®ƒä»¬å¤„äºæ‰“å¼€æˆ–è€…å…³é—­çŠ¶æ€ã€‚ å¯¹äºç¬”è®°æœ¬ç”µè„‘æˆ–ç»å¸¸æ›´æ”¹ç½‘ç»œçš„å…¶ä»–è®¡ç®—æœºï¼Œå¯ä»¥ä½¿ç”¨ NetworkManager è‡ªåŠ¨è®¾ç½®è¿æ¥çš„é˜²ç«å¢™åŒºåŸŸã€‚è¿™äº›åŒºåŸŸä½¿ç”¨é€‚äºç‰¹å®šè¿æ¥çš„è§„åˆ™è¿›è¡Œè‡ªå®šä¹‰ã€‚ å½“æ‚¨ç»å¸¸åœ¨å®¶åº­ã€åŠå…¬å®¤å’Œå…¬å…±æ— çº¿ç½‘ç»œé—´åˆ‡æ¢æ—¶ï¼Œæ­¤åŠŸèƒ½å°¤ä¸ºå®ç”¨ã€‚å½“è¿æ¥åˆ°å®¶åº­ç½‘ç»œå’Œä¼ä¸šç½‘ç»œæ—¶ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›ç³»ç»Ÿçš„sshd æœåŠ¡å¯è®¿é—®ï¼Œä½†å½“ç”¨æˆ·è¿æ¥åˆ°å½“åœ°å’–å•¡é¦†çš„å…¬å…±æ— çº¿ç½‘ç»œæ—¶åˆ™ä¸ç„¶ã€‚ â€‹Firewalld ä¼šæ£€æŸ¥è¿›å…¥ç³»ç»Ÿçš„æ¯ä¸ªæ•°æ®åŒ…çš„æºåœ°å€ã€‚å¦‚æœè¯¥æºåœ°å€è¢«åˆ†é…ç»™ç‰¹å®šåŒºåŸŸï¼Œåˆ™åº”ç”¨è¯¥åŒºåŸŸçš„è§„åˆ™ã€‚å¦‚æœè¯¥æºåœ°å€æœªåˆ†é…ç»™æŸä¸ªåŒºåŸŸï¼Œfirewalld å°±ä¼šå°†æ•°æ®åŒ…ä¸ä¼ å…¥ç½‘ç»œæ¥å£çš„åŒºåŸŸç›¸å…³è”ï¼Œå¹¶åº”ç”¨è¯¥åŒºåŸŸçš„è§„åˆ™ã€‚å¦‚æœå‡ºäºæŸç§åŸå› ï¼Œç½‘ç»œæ¥å£æœªä¸æŸä¸ªåŒºåŸŸå…³è”ï¼Œåˆ™ firewalld ä¼šå°†æ•°æ®åŒ…ä¸é»˜è®¤åŒºåŸŸç›¸å…³è”ã€‚ â€‹é»˜è®¤åŒºåŸŸä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„åŒºåŸŸï¼Œè€Œæ˜¯æŒ‡ä»£ç°æœ‰çš„åŒºåŸŸã€‚æœ€åˆï¼Œfirewalld æŒ‡å®š public åŒºåŸŸä¸ºé»˜è®¤åŒºåŸŸï¼Œå¹¶å°† lo å›ç¯æ¥å£æ˜ å°„è‡³ trusted åŒºåŸŸã€‚ â€‹å¤§å¤šæ•°åŒºåŸŸä¼šå…è®¸ä¸ç‰¹å®šç«¯å£å’Œåè®®ï¼ˆä¾‹å¦‚ 631/udpï¼‰æˆ–é¢„å®šä¹‰æœåŠ¡ï¼ˆä¾‹å¦‚ ssh ï¼‰çš„åˆ—è¡¨åŒ¹é…çš„æµé‡é€šè¿‡é˜²ç«å¢™ã€‚å¦‚æœæµé‡ä¸ä¸å…è®¸çš„ç«¯å£å’Œåè®®æˆ–æœåŠ¡åŒ¹é…ï¼Œåˆ™é€šå¸¸ä¼šè¢«æ‹’ç»ã€‚ï¼ˆtrusted åŒºåŸŸé»˜è®¤æƒ…å†µä¸‹å…è®¸æ‰€æœ‰æµé‡ï¼Œå®ƒæ˜¯æ­¤è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–ã€‚ï¼‰ é¢„å®šä¹‰åŒºåŸŸ â€‹Firewalld ä¸Šæœ‰ä¸€äº›é¢„å®šä¹‰åŒºåŸŸï¼Œå¯åˆ†åˆ«è¿›è¡Œè‡ªå®šä¹‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¼ å…¥æµé‡å±äºç³»ç»Ÿå¯åŠ¨çš„é€šä¿¡çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™æ‰€æœ‰åŒºåŸŸéƒ½å…è®¸è¿™äº›ä¼ å…¥æµé‡å’Œæ‰€æœ‰ä¼ å‡ºæµé‡ã€‚ä¸‹è¡¨è¯¦ç»†ä»‹ç»äº†è¿™äº›åˆå§‹åŒºåŸŸé…ç½®ã€‚ åŒºåŸŸåç§° é»˜è®¤é…ç½® trusted å…è®¸æ‰€æœ‰ä¼ å…¥æµé‡ã€‚ home é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ sshã€mdnsã€ipp-clientã€samba-client æˆ– dhcpv6-client é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚ internal é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ sshã€mdnsã€ipp-clientã€samba-client æˆ– dhcpv6-client é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚ï¼ˆä¸€å¼€å§‹ä¸ home åŒºåŸŸç›¸åŒï¼‰ work é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ sshã€ipp-client æˆ– dhcpv6-client é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚ public é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ ssh æˆ– dhcpv6-client é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚æ–°æ·»åŠ çš„ç½‘ç»œæ¥å£çš„é»˜è®¤åŒºåŸŸã€‚ external é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ ssh é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚é€šè¿‡æ­¤åŒºåŸŸè½¬å‘çš„ IPV4 ä¼ å‡ºæµé‡å°†è¿›è¡Œä¼ªè£…ï¼Œä»¥ä½¿å…¶çœ‹èµ·æ¥åƒæ˜¯æ¥è‡ªä¼ å‡ºç½‘ç»œæ¥å£çš„ IPV4 åœ°å€ã€‚ dmz é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œæˆ–ä¸ ssh é¢„å®šä¹‰æœåŠ¡åŒ¹é…ï¼Œå¦åˆ™æ‹’ç»ä¼ å…¥æµé‡ã€‚ block é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œå¦åˆ™æ‹’ç»æ‰€æœ‰ä¼ å…¥æµé‡ã€‚ drop é™¤éä¸ä¼ å‡ºæµé‡ç›¸å…³ï¼Œå¦åˆ™ä¸¢å¼ƒæ‰€æœ‰ä¼ å…¥æµé‡ï¼ˆç”šè‡³ä¸äº§ç”ŸåŒ…å« ICMP é”™è¯¯çš„å“åº”ï¼‰ã€‚ é¢„å®šä¹‰æœåŠ¡ â€‹Firewald ä¸Šæœ‰ä¸€äº›é¢„å®šä¹‰æœåŠ¡ã€‚è¿™äº›æœåŠ¡å®šä¹‰å¯å¸®åŠ©æ‚¨è¯†åˆ«è¦é…ç½®çš„ç‰¹å®šç½‘ç»œæœåŠ¡ã€‚ä¾‹å¦‚ï¼Œå¯æŒ‡å®šé¢„æ„å»ºçš„ samba-client æœåŠ¡æ¥é…ç½®æ­£ç¡®çš„ç«¯å£å’Œåè®®ï¼Œè€Œæ— éœ€ç ”ç©¶ samba-client æœåŠ¡çš„ç›¸å…³ç«¯å£ã€‚ä¸‹è¡¨åˆ—å‡ºäº†åˆå§‹é˜²ç«å¢™åŒºåŸŸé…ç½®ä¸­ä½¿ç”¨çš„é¢„å®šä¹‰æœåŠ¡ã€‚ æœåŠ¡åç§° é…ç½® SSH æœ¬åœ° SSH æœåŠ¡å™¨ã€‚åˆ° 22/tcp çš„æµé‡ã€‚ dhcpv6-client æœ¬åœ° DHCPv6 å®¢æˆ·ç«¯ã€‚åˆ° fe80::/64 IPV6 ç½‘ç»œä¸­ 546/udp çš„æµé‡ã€‚ ipp-client æœ¬åœ° IPP æ‰“å°ã€‚åˆ° 631/udp çš„æµé‡ã€‚ samba-client æœ¬åœ° Windows æ–‡ä»¶å’Œæ‰“å°å…±äº«å®¢æˆ·ç«¯ã€‚åˆ° 137/udp å’Œ 138/udp çš„æµé‡ã€‚ MDNS å¤šæ’­ DNSï¼ˆmDNSï¼‰æœ¬åœ°é“¾è·¯åç§°è§£æã€‚åˆ° 5353/udp æŒ‡å‘ 224.0.0.251ï¼ˆIPV4ï¼‰æˆ– f02:fbï¼ˆIPV6ï¼‰å¤šæ’­åœ°å€çš„æµé‡ã€‚ è®¸å¤šé¢„å®šä¹‰æœåŠ¡éƒ½åŒ…å«åœ¨ firewalld è½¯ä»¶åŒ…ä¸­ã€‚ä½¿ç”¨ firewall-cmd --get-services å¯ä»¥åˆ—å‡ºè¿™äº›é¢„å®šä¹‰æœåŠ¡ã€‚é¢„å®šä¹‰æœåŠ¡çš„é…ç½®æ–‡ä»¶ä½äº /usr/1ib/firewalld/services ä¸­ï¼Œå…¶æ ¼å¼ç”± firewalld.zoneï¼ˆ5ï¼‰å®šä¹‰ã€‚ å¯ä»¥ä½¿ç”¨é¢„å®šä¹‰æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥æŒ‡å®šæ‰€éœ€çš„ç«¯å£å’Œåè®®ã€‚å¯ä»¥ä½¿ç”¨Webæ§åˆ¶å°å›¾å½¢ç•Œé¢æ¥æŸ¥çœ‹é¢„å®šä¹‰æœåŠ¡å’Œå®šä¹‰æ›´å¤šæœåŠ¡ã€‚ é…ç½®é˜²ç«å¢™ â€‹ç³»ç»Ÿç®¡ç†å‘˜å¯é€šè¿‡ä¸‰ç§ä¸»è¦æ–¹å¼ä¸firewalldäº¤äº’ï¼š ç›´æ¥ç¼–è¾‘/etc/firewalld/ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆæœ¬ç« ä¸­ä¸è®¨è®ºï¼‰ï¼› Webæ§åˆ¶å°å›¾å½¢ç•Œé¢ï¼ˆç•¥ï¼‰ï¼› firewall-cmdå‘½ä»¤è¡Œå·¥å…·ã€‚ æœ¬ç« é‡ç‚¹å…³æ³¨ä»å‘½ä»¤è¡Œé…ç½®é˜²ç«å¢™ã€‚ ä»å‘½ä»¤è¡Œé…ç½®é˜²ç«å¢™ â€‹firewall-cmd å‘½ä»¤å°†ä¼šä¸ firewalld åŠ¨æ€é˜²ç«å¢™ç®¡ç†å™¨è¿›è¡Œäº¤äº’ã€‚å®ƒæ˜¯ä½œä¸ºä¸» firewalld è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†å®‰è£…çš„ï¼Œå¯ç”¨äºå€¾å‘äºä½¿ç”¨å‘½ä»¤è¡Œçš„ç®¡ç†å‘˜ï¼Œåœ¨æ²¡æœ‰å›¾å½¢ç¯å¢ƒçš„ç³»ç»Ÿä¸Šå·¥ä½œï¼Œæˆ–ç¼–å†™æœ‰å…³é˜²ç«å¢™è®¾ç½®çš„è„šæœ¬ã€‚ â€‹ä¸‹è¡¨åˆ—å‡ºä¸€äº›å¸¸ç”¨ firewall-cmd å‘½ä»¤åŠå…¶è¯´æ˜ã€‚è¯·æ³¨æ„ï¼Œé™¤éå¦æœ‰æŒ‡å®šï¼Œå¦åˆ™å‡ ä¹æ‰€æœ‰å‘½ä»¤éƒ½ä½œç”¨äºè¿è¡Œæ—¶é…ç½®ï¼Œå½“æŒ‡å®š*--permanent*é€‰é¡¹æ—¶é™¤å¤–ã€‚å¦‚æœæŒ‡å®šäº† --permanent é€‰é¡¹ï¼Œè¿˜å¿…é¡»é€šè¿‡è¿è¡Œ firewall-cmd -reload å‘½ä»¤æ¥æ¿€æ´»è®¾ç½®ï¼Œå®ƒå°†è¯»å–å½“å‰çš„æ°¸ä¹…é…ç½®å¹¶å°†å…¶ä½œä¸ºæ–°çš„è¿è¡Œæ—¶é…ç½®æ¥åº”ç”¨ã€‚åˆ—å‡ºçš„è®¸å¤šå‘½ä»¤éƒ½é‡‡ç”¨ --zone=ZONE é€‰é¡¹æ¥ç¡®å®šæ‰€å½±å“çš„åŒºåŸŸã€‚å¦‚æœéœ€è¦å­ç½‘æ‹–ç ï¼Œè¯·ä½¿ç”¨ CIDR è¡¨ç¤ºæ³•ï¼Œå¦‚ 192.168.1/24ã€‚ firewall-cmd å‘½ä»¤ è¯´æ˜ --get-default-zone æŸ¥è¯¢å½“å‰é»˜è®¤åŒºåŸŸã€‚ --set-default-zone=ZONE è®¾ç½®é»˜è®¤åŒºåŸŸã€‚æ­¤å‘½ä»¤ä¼šåŒæ—¶æ›´æ”¹è¿è¡Œæ—¶é…ç½®å’Œæ°¸ä¹…é…ç½®ã€‚ --get-zones åˆ—å‡ºæ‰€æœ‰å¯ç”¨åŒºåŸŸã€‚ --get-active-zones åˆ—å‡ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„æ‰€æœ‰åŒºåŸŸï¼ˆå…·æœ‰å…³è”çš„æ¥å£æˆ–æºï¼‰åŠå…¶æ¥å£å’Œæºä¿¡æ¯ã€‚ --add-source=CIDR [--zone=ZONE] å°†æ¥è‡ª IP åœ°å€æˆ–ç½‘ç»œ/å­ç½‘æ©ç çš„æ‰€æœ‰æµé‡è·¯ç”±åˆ°æŒ‡å®šåŒºåŸŸã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --remove-source=CIDR [--zone=ZONE] ä»åŒºåŸŸä¸­åˆ é™¤ç”¨äºè·¯ç”±æ¥è‡ª IP åœ°å€æˆ–ç½‘ç»œ/å­ç½‘æ‹–ç çš„æ‰€æœ‰æµé‡çš„è§„åˆ™ã€‚å¦‚æœæœªæä¾› -zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --add-interface=INTERFACE [--zone=ZONE] å°†æ¥è‡ª INTERFACE çš„æ‰€æœ‰æµé‡è·¯ç”±åˆ°æŒ‡å®šåŒºåŸŸã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --change-interface=INTERFACE [zone=ZONE] å°†æ¥å£ä¸ ZONE è€Œéå…¶å½“å‰åŒºåŸŸå…³è”ã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --list-all [--zone=ZONE] åˆ—å‡º ZONE çš„æ‰€æœ‰å·²é…ç½®æ¥å£ã€æºã€æœåŠ¡å’Œç«¯å£ã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --list-all-zones æ£€ç´¢æ‰€æœ‰åŒºåŸŸçš„æ‰€æœ‰ä¿¡æ¯ï¼ˆæ¥å£ã€æºã€ç«¯å£ã€æœåŠ¡ï¼‰ã€‚ --add-service=SERVICE [--zone=ZONE] å…è®¸åˆ° SERVICE çš„æµé‡ã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --add-port=PORT/PROTOCOL [--zone=ZONE] å…è®¸åˆ° PORT/PROTOCOL ç«¯å£çš„æµé‡ã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --remoce-service=SERVICE [--zone=ZONE] ä»åŒºåŸŸçš„å…è®¸åˆ—è¡¨ä¸­åˆ é™¤ SERVICEã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --remove-port=PORT/PROTOCOL [--zone=ZONE] ä»åŒºåŸŸçš„å…è®¸åˆ—è¡¨ä¸­åˆ é™¤ PORT/PROTOCOL ç«¯å£ã€‚å¦‚æœæœªæä¾› --zone= é€‰é¡¹ï¼Œåˆ™ä½¿ç”¨é»˜è®¤åŒºåŸŸã€‚ --reload ä¸¢å¼ƒè¿è¡Œæ—¶é…ç½®å¹¶åº”ç”¨æŒä¹…é…ç½®ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤ç¤ºä¾‹ä¼šå°†é»˜è®¤åŒºåŸŸè®¾ç½®ä¸º dmzï¼Œå°†æ¥è‡ª 192.168.9.0/24 ç½‘ç»œçš„æ‰€æœ‰æµé‡éƒ½åˆ†é…ç»™ internal åŒºåŸŸï¼Œå¹¶åœ¨internal åŒºåŸŸä¸Šæ‰“å¼€ç”¨äº mysql æœåŠ¡çš„ç½‘ç»œç«¯å£ã€‚ 1234[root@localhost ~]\\# firewall-cmd --set-default-zone=dmz[root@localhost ~]\\# firewall-cmd --permanent --zone=internal --add-source=192.168.0.0/24[root@localhost ~]\\# firewall-cmd --permanent --add-service=mysql[root@localhost ~]\\# firewall-cmd --reload å¯¹äº firewalld çš„åŸºæœ¬è¯­æ³•ä¸å¤Ÿçš„æƒ…å†µï¼Œè¿˜å¯ä»¥æ·»åŠ å¯Œè§„åˆ™ï¼ˆä¸€ç§æ›´å…·è¡¨è¾¾åŠ›çš„è¯­æ³•ï¼‰æ¥ç¼–å†™å¤æ‚çš„è§„åˆ™ã€‚å¦‚æœå¯Œè§„åˆ™è¯­æ³•ä¹Ÿä¸å¤Ÿï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç›´æ¥é…ç½®è§„åˆ™ï¼Œè¿™æ˜¯ä¸ firewalld è§„åˆ™æ··åˆä½¿ç”¨çš„åŸå§‹ nft è¯­æ³•ã€‚ è¿™äº›é«˜çº§æ¨¡å¼è¶…å‡ºäº†æœ¬ç« çš„è®¨è®ºèŒƒå›´ã€‚ æ§åˆ¶ SELinux ç«¯å£æ ‡è®° SELinux ç«¯å£æ ‡è®°æ¦‚è¿° â€‹SELinux ä¸ä»…ä»…æ˜¯è¿›è¡Œæ–‡ä»¶å’Œè¿›ç¨‹æ ‡è®°ã€‚SELinux ç­–ç•¥è¿˜ä¸¥æ ¼å®æ–½ç½‘ç»œæµé‡ã€‚SELinux ç”¨æ¥æ§åˆ¶ç½‘ç»œæµé‡çš„å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯æ ‡è®°ç½‘ç»œç«¯å£ï¼›ä¾‹å¦‚ï¼Œåœ¨ targeted ç­–ç•¥ä¸­ï¼Œç«¯å£ 22/TCP å…·æœ‰æ ‡ç­¾ ssh_port_tä¸å…¶ç›¸å…³è”ã€‚é»˜è®¤ HTTP ç«¯å£ 80/TCP å’Œ 443/TCP å…·æœ‰æ ‡ç­¾ http_port_t ä¸å…¶ç›¸å…³è”ã€‚å½“æŸä¸ªè¿›ç¨‹å¸Œæœ›ä¾¦å¬ç«¯å£æ—¶ï¼ŒSELinuxå°†æ£€æŸ¥æ˜¯å¦å…è®¸ä¸è¯¥è¿›ç¨‹ï¼ˆåŸŸï¼‰ç›¸å…³è”çš„æ ‡ç­¾ç»‘å®šè¯¥ç«¯å£æ ‡ç­¾ã€‚è¿™å¯ä»¥é˜»æ­¢æ¶æ„æœåŠ¡æ§åˆ¶æœ¬åº”ç”±å…¶ä»–ï¼ˆåˆæ³•ï¼‰ç½‘ç»œæœåŠ¡ä½¿ç”¨çš„ç«¯å£ã€‚ ç®¡ç† SELinux ç«¯å£æ ‡è®° â€‹å¦‚æœå†³å®šåœ¨éæ ‡å‡†ç«¯å£ä¸Šè¿è¡ŒæœåŠ¡ï¼ŒSELinux è‚¯å®šä¼šæ‹¦æˆªæ­¤æµé‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»æ›´æ–° SELinux ç«¯å£æ ‡ç­¾ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œtargeted ç­–ç•¥å·²ç»é€šè¿‡å¯ä»¥ä½¿ç”¨çš„ç±»å‹æ ‡è®°äº†ç«¯å£ï¼›ä¾‹å¦‚ï¼Œç”±äºç«¯å£ 8008/TCP é€šå¸¸ç”¨äºWebåº”ç”¨ç¨‹åºï¼Œæ­¤ç«¯å£å·²ä½¿ç”¨http_port_tï¼ˆWeb æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ç±»å‹ï¼‰è¿›è¡Œæ ‡è®°ã€‚ åˆ—å‡ºç«¯å£æ ‡ç­¾ â€‹è¦è·å–æ‰€æœ‰å½“å‰ç«¯å£æ ‡ç­¾åˆ†é…çš„æ¦‚è¿°ï¼Œè¯·è¿è¡Œ semanage port -l å‘½ä»¤ã€‚-l é€‰é¡¹å°†ä»¥ä¸‹åˆ—å½¢å¼åˆ—å‡ºæ‰€æœ‰å½“å‰åˆ†é…ï¼š 1port_label_t tcp|udp comma,separated,list,of,ports â€‹è¾“å‡ºç¤ºä¾‹ï¼š 123456[root@localhost ~]\\# semanage port -l......http_cache_port_t tcp 8080, 8118, 8123, 10001-10010http_cache_port_t udp 8130http_port_t tcp 80, 81, 443, 488, 8008, 8009, 8443, 9000...... â€‹è¦ä¼˜åŒ–æœç´¢ï¼Œå¯ä»¥ä½¿ç”¨ grep å‘½ä»¤ï¼š 12345[root@localhost ~]\\# semanage port -l | grep ftpftp_data_port_t tcp 20ftp_port_t tcp 21, 989, 990ftp_port_t udp 989, 990tftp_port_t udp 69 â€‹ä¸€ä¸ªç«¯å£æ ‡ç­¾å¯èƒ½ä¼šåœ¨è¾“å‡ºä¸­å‡ºç°ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯é’ˆå¯¹ TCP ï¼Œä¸€æ¬¡æ˜¯é’ˆå¯¹ UDPã€‚ æ·»åŠ ç«¯å£æ ‡ç­¾ â€‹ä½¿ç”¨ semanage å‘½ä»¤å¯ä»¥åˆ†é…æ–°ç«¯å£æ ‡ç­¾ã€åˆ é™¤ç«¯å£æ ‡ç­¾æˆ–ä¿®æ”¹ç°æœ‰ç«¯å£æ ‡ç­¾ã€‚ Linux å‘è¡Œç‰ˆä¸­çš„å¤§å¤šæ•°æ ‡å‡†æœåŠ¡éƒ½æä¾›äº†ä¸€ä¸ª SELinux ç­–ç•¥æ¨¡å—ï¼Œç”¨äºåœ¨ç«¯å£ä¸Šè®¾ç½®æ ‡ç­¾ã€‚å…¶ä¸­æ— æ³•ä½¿ç”¨ semanage æ¥æ›´æ”¹è¿™äº›ç«¯å£ä¸Šçš„æ ‡ç­¾ï¼›è¦æ›´æ”¹è¿™äº›æ ‡ç­¾åˆ™éœ€è¦æ›¿æ¢ç­–ç•¥æ¨¡å—ã€‚ç¼–å†™å’Œç”Ÿæˆç­–ç•¥æ¨¡å—åœ¨æ­¤èŠ‚ä¸æ¶‰åŠã€‚ â€‹è¦å‘ç°æœ‰ç«¯å£æ ‡ç­¾ï¼ˆç±»å‹ï¼‰ä¸­æ·»åŠ ç«¯å£ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ã€‚-a å°†æ·»åŠ æ–°ç«¯å£æ ‡ç­¾ï¼Œ-t è¡¨ç¤ºç±»å‹ï¼Œ-p è¡¨ç¤ºåè®®ã€‚ 1[root@localhost ~]\\# semanage port -a -t port_label -p tcp|udp PORTNUMBER â€‹ä¾‹å¦‚ï¼Œè¦å…è®¸ gopher æœåŠ¡ä¾¦å¬ç«¯å£ 71/TCPï¼š 1[root@localhost ~]\\# semanage port -a -t gopher_port_t -p tcp 71 â€‹è¦æŸ¥çœ‹å¯¹é»˜è®¤ç­–ç•¥çš„æœ¬åœ°æ›´æ”¹ï¼Œç®¡ç†å‘˜å¯ä»¥åœ¨ semanage å‘½ä»¤ä¸­æ·»åŠ  -C é€‰é¡¹ã€‚ 1234[root@localhost ~]\\# semanage port -l -CSELinux Port Type Proto Port Number......gopher_port_t tcp 71 targeted ç­–ç•¥éšé™„äº†å¤§é‡ç«¯å£ç±»å‹ã€‚åœ¨ selinux-policy-doc è½¯ä»¶åŒ…ä¸­å¯ä»¥æ‰¾åˆ°ç‰¹å®šäºæœåŠ¡çš„ SELinux man pageï¼Œå…¶ä¸­åŒ…å«äº†æœ‰å…³ SELinux ç±»å‹ã€å¸ƒå°”å€¼å’Œç«¯å£ç±»å‹çš„æ–‡æ¡£ã€‚å¦‚æœç³»ç»Ÿä¸Šå°šæœªå®‰è£…è¿™äº› man pageï¼Œå¯ä»¥é¿å¾ªä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ï¼š 12[root@localhost ~]\\# yum -y install selinux-policy-doc[root@localhost ~]\\# man -k _selinux åˆ é™¤ç«¯å£æ ‡ç­¾ â€‹åˆ é™¤è‡ªå®šä¹‰ç«¯å£æ ‡ç­¾çš„è¯­æ³•ä¸æ·»åŠ ç«¯å£æ ‡ç­¾çš„è¯­æ³•ç›¸åŒï¼Œä½†ä¸æ˜¯ä½¿ç”¨ -a é€‰é¡¹ï¼ˆè¡¨ç¤ºæ·»åŠ ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨ -d é€‰é¡¹ï¼ˆè¡¨ç¤ºåˆ é™¤ï¼‰ã€‚ â€‹ä¾‹å¦‚ï¼Œè¦åˆ é™¤ç«¯å£ 71/TCP ä¸ gopher_port_t çš„ç»‘å®šï¼š 1[root@localhost ~]\\# semanage port -d -t gopher_port_t -p tcp 71 ä¿®æ”¹ç«¯å£æ ‡ç­¾ â€‹è¦æ›´æ”¹ç«¯å£ç»‘å®šï¼ˆå¯èƒ½æ˜¯å› ä¸ºéœ€æ±‚å‘ç”Ÿæ”¹å˜ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ -mï¼ˆä¿®æ”¹ï¼‰é€‰é¡¹ã€‚è¿™ç§æµç¨‹æ¯”åˆ é™¤æ—§ç»‘å®šå¹¶æ·»åŠ æ–°ç»‘å®šæ›´é«˜æ•ˆã€‚ â€‹ä¾‹å¦‚ï¼Œè¦å°†ç«¯å£ 71/TCP ä» gopher_port_t ä¿®æ”¹ä¸º http_port_tï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 1[root@localhost ~]\\# semanage port -m -t http port_t -p tcp 71 â€‹å’Œä»¥å‰ä¸€æ ·ï¼Œä½¿ç”¨ semanage å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ã€‚ 12345678910[root@localhost ~]\\# semanage port -l -C SELinux Port Type Proto Port Number......http_port_t tcp 71[root@localhost ~]\\# semanage port -l | grep httphttp_cache_port_t tcp 8080ï¼Œ8118ï¼Œ8123ï¼Œ10001-10010http_cache_port_t udp 3130http_port_t tcp 71ï¼Œ80ï¼Œ81ï¼Œ443ï¼Œ488ï¼Œ8008ï¼Œ8009ï¼Œ8443ï¼Œ9000pegasus_http_port_t tcp 5988pegasus_https_port_t tcp 5989","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ä»¥è§£å†³å¯åŠ¨é—®é¢˜","slug":"Linux | æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ä»¥è§£å†³å¯åŠ¨é—®é¢˜","date":"2022-08-15T07:07:44.559Z","updated":"2022-08-15T07:10:49.640Z","comments":true,"path":"2022-08-15-Linux | æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ä»¥è§£å†³å¯åŠ¨é—®é¢˜.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E6%8E%A7%E5%88%B6%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E4%BB%A5%E8%A7%A3%E5%86%B3%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ RHEL8 å¯åŠ¨è¿‡ç¨‹æè¿° â€‹ç°ä»£è®¡ç®—æœºç³»ç»Ÿæ˜¯ç¡¬ä»¶ä¸è½¯ä»¶çš„å¤æ‚ç»„åˆã€‚ä»æœªå®šä¹‰çš„æ–­ç”µçŠ¶æ€å¼€å§‹ï¼Œåˆ°æ‹¥æœ‰ç™»å½•æç¤ºç¬¦çš„è¿è¡Œä¸­ç³»ç»Ÿï¼Œè¿™éœ€è¦å¤§é‡çš„ç¡¬ä»¶å’Œè½¯ä»¶é…åˆå·¥ä½œã€‚ä»¥ä¸‹åˆ—è¡¨ä»è¾ƒé«˜å±‚é¢æ¦‚è¿°äº†å¯åŠ¨çº¢å¸½ä¼ä¸š Linux 8 çš„ç‰©ç† X86_64 ç³»ç»Ÿæ‰€æ¶‰åŠçš„ä»»åŠ¡ã€‚X86_64è™šæ‹Ÿæœºåˆ—è¡¨å¤§è‡´ç›¸åŒï¼Œä½†æŸäº›ç‰¹å®šäºç¡¬ä»¶çš„æ­¥éª¤æ˜¯ç”±è™šæ‹Ÿæœºç›‘æ§ç¨‹åºåœ¨è½¯ä»¶ä¸­å¤„ç†çš„ã€‚ è®¡ç®—æœºå·²æ¥é€šç”µæºã€‚ç³»ç»Ÿå›ºä»¶ï¼ˆç°ä»£ UEFI æˆ–æ›´æ—§çš„ BIOSï¼‰è¿è¡Œå¼€æœºè‡ªæ£€ï¼ˆPOSTï¼Œå¹¶å¼€å§‹åˆå§‹åŒ–éƒ¨åˆ†ç¡¬ä»¶ã€‚ ä½¿ç”¨ç³»ç»Ÿ BIOS æˆ– UEFI é…ç½®å±å¹•ã€é€šå¸¸åœ¨å¯åŠ¨è¿‡ç¨‹æ—©æœŸé€šè¿‡æŒ‰ç‰¹å®šçš„ç»„åˆé”®ï¼ˆä¾‹å¦‚F2ï¼‰å³å¯è¿›å…¥ã€‘è¿›è¡Œé…ç½®ã€‚ ç³»ç»Ÿå›ºä»¶ä¼šæœç´¢å¯å¯åŠ¨è®¾å¤‡ï¼Œå¯èƒ½æ˜¯åœ¨ UEFI å¯åŠ¨å›ºä»¶ä¸­é…ç½®çš„ï¼Œä¹Ÿå¯èƒ½æŒ‰ç…§ BIOS ä¸­é…ç½®çš„é¡ºåºæœç´¢æ‰€æœ‰ç£ç›˜ä¸Šçš„ä¸»å¯åŠ¨è®°å½•ï¼ˆMBRï¼‰ã€‚ ä½¿ç”¨ç³»ç»Ÿ BIOS æˆ– UEFI é…ç½®å±å¹•ã€é€šå¸¸åœ¨å¯åŠ¨è¿‡ç¨‹æ—©æœŸé€šè¿‡æŒ‰ç‰¹å®šçš„ç»„åˆé”®ï¼ˆä¾‹å¦‚ F2 ï¼‰å³å¯è¿›å…¥ã€‘è¿›è¡Œé…ç½®ã€‚ ç³»ç»Ÿå›ºä»¶ä¼šä»ç£ç›˜è¯»å–å¯åŠ¨åŠ è½½å™¨ï¼Œç„¶åå°†ç³»ç»Ÿæ§åˆ¶æƒäº¤ç»™å¯åŠ¨åŠ è½½å™¨ã€‚åœ¨çº¢å¸½ä¼ä¸š Linux 8 ç³»ç»Ÿä¸­ï¼Œå¯åŠ¨åŠ è½½å™¨ä¸º GRand Unified Boot loader version 2ï¼ˆGRUB2ï¼‰ã€‚ ä½¿ç”¨ grub2-install å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œå®ƒå°†å®‰è£… GRUB2 ä½œä¸ºç£ç›˜ä¸Šçš„å¯åŠ¨åŠ è½½å™¨ã€‚ GRUB2 å°†ä» /boot/grub2/grub.cfg æ–‡ä»¶åŠ è½½é…ç½®å¹¶æ˜¾ç¤ºä¸€ä¸ªèœå•ï¼Œä»ä¸­å¯ä»¥é€‰æ‹©è¦å¯åŠ¨çš„å†…æ ¸ã€‚ ä½¿ç”¨ /etc/grub.d/ ç›®å½•ã€/etc/default/grub æ–‡ä»¶å’Œ grub2-mkconfig å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œä»¥ç”Ÿæˆ*/boot/grub2/grub.cfg* æ–‡ä»¶ã€‚ é€‰æ‹©å†…æ ¸æˆ–è¶…æ—¶åˆ°æœŸåï¼Œå¯åŠ¨åŠ è½½å™¨ä¼šä»ç£ç›˜ä¸­åŠ è½½å†…æ ¸å’Œ initramfs ï¼Œå¹¶å°†å®ƒä»¬æ”¾å…¥å†…å­˜ä¸­ã€‚initramfsæ˜¯ä¸€ä¸ªå­˜æ¡£ï¼Œå…¶ä¸­åŒ…å«å¯åŠ¨æ—¶æ‰€æœ‰å¿…è¦ç¡¬ä»¶çš„å†…æ ¸æ¨¡å—ã€åˆå§‹åŒ–è„šæœ¬ç­‰ç­‰ã€‚åœ¨çº¢å¸½ä¼ä¸š Linux8 ä¸­ï¼Œ*initramfs åŒ…å«è‡ªèº«å¯ç”¨çš„æ•´ä¸ªç³»ç»Ÿã€‚ ä½¿ç”¨ /etc/dracut.conf.d/ ç›®å½•ã€dracut å‘½ä»¤å’Œ lsinitrd å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œä»¥æ£€æŸ¥initramfs æ–‡ä»¶ã€‚ å¯åŠ¨åŠ è½½å™¨å°†æ§åˆ¶æƒäº¤ç»™å†…æ ¸ï¼Œä»è€Œä¼ é€’å¯åŠ¨åŠ è½½å™¨çš„å†…æ ¸å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ä»»ä½•é€‰é¡¹ï¼Œä»¥åŠ initramfs åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚ ä½¿ç”¨ /etc/grub.d/ ç›®å½•ã€/etc/default/grub æ–‡ä»¶å’Œ grub2-mkconfig å‘½ä»¤è¿›è¡Œé…ç½®ï¼Œä»¥ç”Ÿæˆ /boot/grubz/grub.cfg æ–‡ä»¶ã€‚ å¯¹äºå†…æ ¸å¯åœ¨ initramfs ä¸­æ‰¾åˆ°é©±åŠ¨ç¨‹åºçš„æ‰€æœ‰ç¡¬ä»¶ï¼Œå†…æ ¸ä¼šåˆå§‹åŒ–è¿™äº›ç¡¬ä»¶ï¼Œç„¶åä½œä¸º PID 1 ä» initramfs æ‰§è¡Œ /sbin/initã€‚åœ¨çº¢å¸½ä¼ä¸š Linux8 ä¸­ï¼Œ/sbin/init æ˜¯ä¸€ä¸ªæŒ‡å‘ systemd çš„é“¾æ¥ã€‚ ä½¿ç”¨å†…æ ¸ init= å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œé…ç½®ã€‚ initramfs ä¸­çš„ systemd å®ä¾‹ä¼šæ‰§è¡Œ initrd.target ç›®æ ‡çš„æ‰€æœ‰å•å…ƒã€‚è¿™åŒ…æ‹¬å°†ç£ç›˜ä¸Šçš„ root æ–‡ä»¶ç³»ç»ŸæŒ‚è½½äº /sysroot ç›®å½•ã€‚ ä½¿ç”¨ /etc/fstab è¿›è¡Œé…ç½®ã€‚ å†…æ ¸å°† root æ–‡ä»¶ç³»ç»Ÿä» initramfs åˆ‡æ¢ï¼ˆå›è½¬ï¼‰ä¸º /sysroot ä¸­çš„ root æ–‡ä»¶ç³»ç»Ÿã€‚éšåï¼Œsystemd ä¼šä½¿ç”¨ç£ç›˜ä¸­å®‰è£…çš„ systemd å‰¯æœ¬æ¥è‡ªè¡Œé‡æ–°æ‰§è¡Œã€‚ systemd ä¼šæŸ¥æ‰¾ä»å†…æ ¸å‘½ä»¤è¡Œä¼ é€’æˆ–ç³»ç»Ÿä¸­é…ç½®çš„é»˜è®¤ç›®æ ‡ï¼Œç„¶åå¯åŠ¨ï¼ˆæˆ–åœæ­¢ï¼‰å•å…ƒï¼Œä»¥ç¬¦åˆè¯¥ç›®æ ‡çš„é…ç½®ï¼Œä»è€Œè‡ªåŠ¨è§£å†³å•å…ƒé—´çš„ä¾èµ–å…³ç³»ã€‚æœ¬è´¨ä¸Šï¼Œsystemd ç›®æ ‡æ˜¯ä¸€ç»„ç³»ç»Ÿåº”æ¿€æ´»ä»¥è¾¾åˆ°æ‰€éœ€çŠ¶æ€çš„å•å…ƒã€‚è¿™äº›ç›®æ ‡é€šå¸¸å¯åŠ¨ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„ç™»å½•æˆ–å›¾å½¢ç™»å½•å±å¹•ã€‚ ä½¿ç”¨ /etc/systemd/system/default.target å’Œ /etc/systemd/system/ è¿›è¡Œé…ç½®ã€‚ é‡æ–°å¯åŠ¨å’Œå…³é—­ â€‹è¦å…³é—­æˆ–ä»å‘½ä»¤è¡Œé‡æ–°å¯åŠ¨æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ systemctl å‘½ä»¤ã€‚ â€‹systemctl poweroff ä¼šåœæ­¢æ‰€æœ‰è¿è¡Œçš„æœåŠ¡ï¼Œå¸è½½æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼ˆæˆ–è€…åœ¨æ–‡ä»¶ç³»ç»Ÿæ— æ³•å¸è½½æ—¶ä»¥åªè¯»å½¢å¼å°†å…¶é‡æ–°æŒ‚è½½ï¼‰ï¼Œç„¶åå…³é—­ç³»ç»Ÿã€‚ â€‹systemctl reboot ä¼šåœæ­¢æ‰€æœ‰è¿è¡Œçš„æœåŠ¡ï¼Œå¸è½½æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åé‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤çš„ç®€çŸ­ç‰ˆæœ¬poweroff å’Œ rebootï¼Œå®ƒä»¬æ˜¯ systemctl åŒç­‰å‘½ä»¤çš„ç¬¦å·é“¾æ¥ã€‚ systemctl halt å’Œ halt ä¹Ÿå¯ä»¥ç”¨äºåœæ­¢ç³»ç»Ÿï¼Œä½†ä¸ poweroff ä¸åŒï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šå…³é—­ç³»ç»Ÿï¼Œè€Œæ˜¯è®©ç³»ç»Ÿè¿›å…¥èƒ½å®‰å…¨åœ°æ‰‹åŠ¨å…³é—­çš„çŠ¶æ€ã€‚ SYSTEMD Target â€‹systemd target æ˜¯ä¸€ç»„ç³»ç»Ÿåº”å¯åŠ¨ä»¥è¾¾åˆ°æ‰€éœ€çŠ¶æ€çš„ systemd å•å…ƒã€‚ä¸‹è¡¨åˆ—å‡ºäº†æœ€é‡è¦çš„ç›®æ ‡ï¼š Target ç”¨é€” graphical.target ç³»ç»Ÿæ”¯æŒå¤šç”¨æˆ·ã€å›¾å½¢å’ŒåŸºäºæ–‡æœ¬çš„ç™»å½•ã€‚ multi-user.target ç³»ç»Ÿä»…æ”¯æŒå¤šç”¨æˆ·ã€åŸºäºæ–‡æœ¬çš„ç™»å½•ã€‚ rescue.target sulogin æç¤ºï¼Œè¡¨ç¤ºåŸºæœ¬ç³»ç»Ÿåˆå§‹åŒ–å·²å®Œæˆã€‚ emergency.target sulogin æç¤ºï¼Œè¡¨ç¤º initramfs å›è½¬å®Œæˆï¼Œä¸”ç³»ç»Ÿ root ä»¥åªè¯»å½¢å¼æŒ‚è½½äº / ä¸Šã€‚ â€‹æŸä¸ªç›®æ ‡å¯èƒ½å±äºå¦ä¸€ç›®æ ‡ã€‚ä¾‹å¦‚ï¼Œgraphical.target åŒ…å« multi-user.targetï¼Œåè€…åè¿‡æ¥å–å†³äº basic.target å’Œå…¶ä»–ç›®æ ‡ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹è¿™äº›ä¾èµ–é¡¹ã€‚ 123456789101112[user@localhost ~]\\$ systemctl list-dependencies graphical.target | grep targetgraphical.target* ï¹‚multi-user.target* |-basic.target* | |-paths.target* | |-slices.target* | |-sockets.target* | |-sysinit.target* | | |-cryptsetup.target* | | |-local-fs.target* | | |-swap.target...... â€‹è¦åˆ—å‡ºå¯ç”¨ç›®æ ‡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 12345678910[user@localhost ~]\\$ systemctl list-units --type=target --all UNIT LOAD ACTIVE SUB DESCRIPTION ------------------------------------------------------------------------ basic.target loaded active active Basic System cryptsetup.target loaded active active Local Encrypted Volumes emergency.target loaded inactive dead Emergency Mode getty-pre.target loaded inactive dead Login Prompts (Pre) getty.target loaded active active Login Prompts graphical.target loaded inactive dead Graphical Interface ...... è¿è¡Œæ—¶åˆ‡æ¢ Target åœ¨è¿è¡Œçš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ systemctl isolate å‘½ä»¤æœ¬æ¥åˆ‡æ¢åˆ°å…¶ä»–ç›®æ ‡ã€‚ 1[root@localhost ~]\\# systemctl isolate multi-user.target â€‹éš”ç¦»æŸä¸ªç›®æ ‡ä¼šåœæ­¢è¯¥ç›®æ ‡ï¼ˆåŠå…¶ä¾èµ–é¡¹ï¼‰ä¸éœ€è¦çš„æ‰€æœ‰æœåŠ¡ï¼Œå¹¶å¯åŠ¨ä»»ä½•å°šæœªå¯åŠ¨çš„æ‰€éœ€æœåŠ¡ã€‚ä½†å¹¶éæ‰€æœ‰ç›®æ ‡éƒ½èƒ½éš”ç¦»ï¼Œä¸€èˆ¬åªèƒ½éš”ç¦»å•å…ƒæ–‡ä»¶ä¸­è®¾ç½®äº† A11owIsolate=yes çš„ç›®æ ‡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥éš”ç¦»å›¾å½¢ç›®æ ‡ï¼Œä½†ä¸èƒ½éš”ç¦» cryptsetup ç›®æ ‡ã€‚ 1234567891011[user@localhost ~]\\$ systemctl cat graphical.target# /usr/lib/systemd/system/graphical.target......[Unit]Description=Graphical InterfaceDocumentation=man:systemd.special (7ï¼‰Requires=multi-user.targetWants=display-manager.serviceConflicts=rescue.service rescue.targetAfter=multi-user.target rescue.service rescue.target display-manager.serviceAllowIsolate=yes 123456[user@localhost ~]\\$ systemctl cat cryptsetup.target#/usr/lib/systemd/system/cryptsetup.target......[unit]Description=Local Encrypted VolumesDocumentation=manï¼šsystemdï¼Œspecial (7) è®¾ç½®é»˜è®¤ç›®æ ‡ ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œsystemd ä¼šæ¿€æ´» default.target ç›®æ ‡ã€‚é€šå¸¸ï¼Œ/etc/systemd/system/ ä¸­çš„é»˜è®¤ç›®æ ‡æ˜¯æŒ‡å‘ graphical.target æˆ– multi-user.target çš„ç¬¦å·é“¾æ¥ã€‚systemctl å‘½ä»¤æä¾›äº†ä¸¤ä¸ªå­å‘½ä»¤ï¼ˆget-default å’Œ set-defaultï¼‰ç”¨äºç®¡ç†è¯¥ç¬¦å·é“¾æ¥ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ç¼–è¾‘è¯¥é“¾æ¥ã€‚ 1234567[root@localhost ~]\\# systemctl get-defaultmulti-user.target[root@localhost ~]\\# systemctl set-default graphical.targetRemoved /etc/systemd/system/default.target.Created symlink /etc/systemd/system/default.target -&gt; /usr/lib/systemd/system/graphical.target[root@localhost ~]\\# systemctl get-defaultgraphical.target åœ¨å¯åŠ¨æ—¶é€‰æ‹©å…¶ä»–ç›®æ ‡ â€‹è¦åœ¨å¯åŠ¨æ—¶é€‰æ‹©å…¶ä»–ç›®æ ‡ï¼Œè¯·ä»å¯åŠ¨åŠ è½½å™¨å°† systemd.unit=target.target é€‰é¡¹é™„åŠ åˆ°å†…æ ¸å‘½ä»¤è¡Œã€‚ â€‹ä¾‹å¦‚ï¼Œè¦å°†ç³»ç»Ÿå¯åŠ¨åˆ°æ•‘æ´ shellï¼Œä»¥ä¾¿èƒ½åœ¨å‡ ä¹æ²¡æœ‰ä»»ä½•æœåŠ¡è¿è¡Œçš„æƒ…å†µä¸‹æ›´æ”¹ç³»ç»Ÿé…ç½®ï¼Œå¯ä»¥åœ¨å¯åŠ¨åŠ è½½å™¨å°†ä»¥ä¸‹é€‰é¡¹é™„åŠ åˆ°å†…æ ¸å‘½ä»¤è¡Œã€‚ 1systemd.unit=rescue.target â€‹è¯¥é…ç½®æ›´æ”¹ä»…å½±å“å•ä¸ªå¯åŠ¨ï¼Œè¿™ä½¿å…¶æˆä¸ºå¯¹å¯åŠ¨è¿‡ç¨‹è¿›è¡Œæ•…éšœæ’é™¤çš„æœ‰ç”¨å·¥å…·ã€‚ â€‹è¦ä½¿ç”¨è¿™ç§é€‰æ‹©å…¶ä»–ç›®æ ‡çš„æ–¹æ³•ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š å¯åŠ¨æˆ–é‡æ–°å¯åŠ¨ç³»ç»Ÿï¼› æŒ‰ä»»æ„é”®ï¼ˆEnter é™¤å¤–ï¼Œå®ƒç”¨äºæ‰§è¡Œæ­£å¸¸å¯åŠ¨ï¼‰ä¸­æ–­å¯åŠ¨åŠ è½½å™¨èœå•å€’è®¡æ—¶ï¼› å°†å…‰æ ‡ç§»è‡³è¦å¯åŠ¨çš„å†…æ ¸æ¡ç›®ï¼› æŒ‰ e ç¼–è¾‘å½“å‰æ¡ç›®ï¼› å°†å…‰æ ‡ç§»è‡³ä»¥ linux å¼€å¤´çš„è¡Œ â€”â€” æ­¤ä¸ºå†…æ ¸å‘½ä»¤è¡Œï¼› é™„åŠ  systemd.unit=target.targetï¼Œä¾‹å¦‚ï¼Œsystemd.unit=emergency.targetï¼› æŒ‰ Ctrl + x ä½¿ç”¨è¿™äº›æ›´æ”¹è¿›è¡Œå¯åŠ¨ï¼› é‡ç½® ROOT å¯†ç  â€‹æ¯ä¸ªç³»ç»Ÿç®¡ç†å‘˜éƒ½åº”è¯¥èƒ½å®Œæˆçš„ä¸€é¡¹ä»»åŠ¡æ˜¯é‡ç½®ä¸¢å¤±çš„ root å¯†ç ã€‚å¦‚æœç®¡ç†å‘˜ä»å¤„äºç™»å½•çŠ¶æ€ï¼Œä¸ç®¡æ˜¯ä½œä¸ºæ‹¥æœ‰å®Œå…¨ sudo è®¿é—®æƒé™çš„éç‰¹æƒç”¨æˆ·ï¼Œè¿˜æ˜¯ä½œä¸º root ç”¨æˆ·ï¼Œè¿™ä¸ªä»»åŠ¡éƒ½å¾ˆç®€å•ã€‚å¦‚æœç®¡ç†å‘˜æœªç™»å½•ï¼Œåˆ™è¿™ä¸ªä»»åŠ¡å˜å¾—ç•¥å¾®å¤æ‚ã€‚ â€‹æœ‰å‡ ç§æ–¹æ³•å¯ç”¨äºè®¾ç½®æ–°çš„rootå¯†ç ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ Live CD å¯åŠ¨ç³»ç»Ÿï¼Œä»æ­¤å¤„æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åç¼–è¾‘ /etc/shadowã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸ªæ— éœ€ä½¿ç”¨å¤–éƒ¨ä»‹è´¨çš„æ–¹æ³•ã€‚ ä»å¯åŠ¨åŠ è½½å™¨é‡ç½® ROOT å¯†ç  â€‹åœ¨ RHEL8 ä¸­ï¼Œå¯ä»¥ä½¿ä» initramfs è¿è¡Œçš„è„šæœ¬åœ¨æŸäº›ç‚¹æš‚åœï¼Œæä¾› root shellï¼Œç„¶ååœ¨è¯¥ shell å­˜åœ¨çš„æƒ…å†µä¸‹ç»§ç»­ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†è¿›è¡Œè°ƒè¯•ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ¥é‡ç½®ä¸¢å¤±çš„ root å¯†ç ã€‚ â€‹è¦è®¿é—®è¯¥ root shellï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚ æŒ‰ä»»æ„é”®ï¼ˆEnteré™¤å¤–ï¼‰ä¸­æ–­å¯åŠ¨åŠ è½½å™¨å€’è®¡æ—¶ã€‚ å°†å…‰æ ‡ç§»è‡³è¦å¯åŠ¨çš„å†…æ ¸æ¡ç›®ã€‚ æŒ‰ e ç¼–è¾‘é€‰å®šçš„æ¡ç›®ã€‚ å°†å…‰æ ‡ç§»åˆ°å†…æ ¸å‘½ä»¤è¡Œï¼ˆä»¥linuxå¼€å¤´çš„è¡Œï¼‰ã€‚ é™„åŠ  rd.breakã€‚åˆ©ç”¨è¯¥é€‰é¡¹ï¼Œå°±åœ¨ç³»ç»Ÿä» initramfs å‘å®é™…ç³»ç»Ÿç§»äº¤æ§åˆ¶æƒå‰ï¼Œç³»ç»Ÿå°†ä¼šä¸­æ–­ã€‚ æŒ‰ Ctrl + x ä½¿ç”¨è¿™äº›æ›´æ”¹è¿›è¡Œå¯åŠ¨ã€‚ â€‹æ­¤æ—¶ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤º root shellï¼Œä¸”ç£ç›˜ä¸Šçš„å®é™…æ ¹æ–‡ä»¶ç³»ç»Ÿä¼šåœ¨ /sysroot ä¸­ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚ç”±äºè¿›è¡Œæ•…éšœæ’é™¤ç»å¸¸è¦æ±‚ä¿®æ”¹æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤éœ€è¦å°†æ ¹æ–‡ä»¶ç³»ç»Ÿæ›´æ”¹ä¸ºè¯»/å†™æ¨¡å¼ã€‚ä»¥ä¸‹æ­¥éª¤è¯´æ˜åœ¨å¯¹ mount å‘½ä»¤ä½¿ç”¨ remount,rw é€‰é¡¹çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•åˆ©ç”¨æ‰€è®¾ç½®çš„æ–°é€‰é¡¹ï¼ˆrwï¼‰é‡æ–°æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚ é¢„å»ºçš„æ˜ åƒå¯èƒ½ä¼šåœ¨å†…æ ¸ä¸­æ”¾ç½®å¤šä¸ª console= å‚æ•°ï¼Œä»¥ä¾¿æ”¯æŒå„ç§å„æ ·çš„å®æ–½åœºæ™¯ã€‚è¿™äº› console= å‚æ•°æŒ‡ç¤ºäº†ç”¨äºæ§åˆ¶å°è¾“å‡ºçš„è®¾å¤‡ã€‚å¯¹äº rd.breakï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ç³»ç»Ÿä¼šå°†å†…æ ¸æ¶ˆæ¯å‘é€ç»™æ‰€æœ‰æ§åˆ¶å°ï¼Œä½†æç¤ºç¬¦æœ€ç»ˆå°†ä½¿ç”¨æœ€åæä¾›çš„æ§åˆ¶å°ã€‚å¦‚æœæœªè·å¾—æç¤ºç¬¦ï¼Œåœ¨ä»å¯åŠ¨åŠ è½½å™¨ç¼–è¾‘å†…æ ¸å‘½ä»¤è¡Œæ—¶ï¼Œå¯èƒ½éœ€è¦ä¸´æ—¶å¯¹ console= å‚æ•°é‡æ–°è¿›è¡Œæ’åºã€‚ ç³»ç»Ÿå°šæœªå¯ç”¨ SELinuxï¼Œå› æ­¤æ‚¨æ‰€åˆ›å»ºçš„ä»»ä½•æ–‡ä»¶éƒ½æ²¡æœ‰ SELinux ä¸Šä¸‹æ–‡ã€‚æœ‰äº›å·¥å…·ï¼ˆä¾‹å¦‚ passwd å‘½ä»¤ï¼‰é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åç§»åŠ¨æ–°æ–‡ä»¶ä»¥ä»£æ›¿è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼Œä»è€Œæœ‰æ•ˆåœ°åˆ›å»ºä¸å¸¦ SELinux ä¸Šä¸‹æ–‡çš„æ–°æ–‡ä»¶ã€‚å› æ­¤ï¼Œå½“å¯¹ passwd å‘½ä»¤ä½¿ç”¨ rd.break æ—¶ï¼Œ/etc/shadow æ–‡ä»¶å¹¶æ²¡æœ‰è·å¾— SELinux ä¸Šä¸‹æ–‡ã€‚ â€‹è¦åœ¨æ­¤æ—¶é‡ç½® root å¯†ç ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š ä»¥ è¯»/å†™ å½¢å¼é‡æ–°æŒ‚è½½ /sysrootï¼› 1switch_root:/\\# mount -o remount,rw /sysroot åˆ‡æ¢ä¸º chroot å­˜æ”¾ä½ç½®ï¼Œå…¶ä¸­ /sysroot è¢«è§†ä¸ºæ–‡ä»¶ç³»ç»Ÿæ ‘çš„æ ¹ï¼› 1switch_root:/\\# chroot /sysroot è®¾ç½®æ–° root å¯†ç ï¼› 1sh-4.4\\# passwd root ç¡®ä¿æ‰€æœ‰æœªæ ‡è®°çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ­¤æ—¶çš„ /etc/shadowï¼‰åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­éƒ½ä¼šé‡æ–°è·å¾—æ ‡è®°ï¼› 1sh-4.4\\# touch /.autorelabel é”®å…¥ exit å‘½ä»¤å¹¶æ‰§è¡Œä¸¤æ¬¡ï¼Œåˆ†åˆ«é€€å‡º chroot å’Œ initramfs shellã€‚ â€‹æ­¤æ—¶ï¼Œç³»ç»Ÿå°†ç»§ç»­è¿›è¡Œå¯åŠ¨ï¼Œæ‰§è¡Œå®Œæ•´çš„SELinuxé‡æ–°æ ‡è®°ï¼Œç„¶åå†æ¬¡é‡æ–°å¯åŠ¨ã€‚ æ£€æŸ¥æ—¥å¿—æ¥æ’é™¤å¯åŠ¨é—®é¢˜ â€‹æŸ¥çœ‹ä»¥å‰å¯åŠ¨å¤±è´¥æ—¶çš„æ—¥å¿—ä¼šå¾ˆæœ‰ç”¨ã€‚å¦‚æœç³»ç»Ÿæ—¥å¿—åœ¨é‡å¯åæŒä¹…ä¿ç•™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ journalctl å·¥å…·æ¥æ£€æŸ¥è¿™äº›æ—¥å¿—ã€‚ â€‹éœ€æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ—¥å¿—ä¿å­˜åœ¨ /run/1og/journal ç›®å½•ä¸­ï¼Œè¿™æ„å‘³ç€ç³»ç»Ÿé‡å¯æ—¶è¿™äº›æ—¥å¿—ä¼šè¢«æ¸…é™¤ã€‚è¦å°†æ—¥å¿—å­˜å‚¨åœ¨ /var/log/journal ç›®å½•ä¸­ï¼ˆå¯åœ¨ç³»ç»Ÿé‡å¯åæŒä¹…ä¿ç•™ï¼‰ï¼Œè¯·åœ¨ /etc/systemd/journald.conf ä¸­å°† Storage å‚æ•°è®¾ç½®ä¸º persistentã€‚ 123456[root@localhost ~]\\# vim /etc/systemd/journald.conf......[Journal]Storage=persistent......[root@localhost ~]\\# systemctl restart systemd-journal.service â€‹è¦æ£€æŸ¥ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼Œè¯·å¯¹ journalctl ä½¿ç”¨ -b é€‰é¡¹ã€‚å¦‚æœä¸ä½¿ç”¨ä»»ä½•å‚æ•°ï¼Œ-b é€‰é¡¹å°†ä»…æ˜¾ç¤ºä»ä¸Šä¸€æ¬¡å¯åŠ¨ä»¥æ¥çš„æ¶ˆæ¯ã€‚å¦‚æœå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™æ˜¾ç¤ºä»¥å‰çš„å¯åŠ¨çš„æ—¥å¿—ã€‚ 1[root@localhost ~]\\# journalctl -b -1 -p err â€‹è¯¥å‘½ä»¤å°†æ˜¾ç¤ºä¸Šä¸€æ¬¡å¯åŠ¨ä¸­è¢«è¯„ä¸ºé”™è¯¯æˆ–æ›´ä¸¥é‡çº§åˆ«çš„æ‰€æœ‰æ¶ˆæ¯ã€‚ ä¿®å¤ SYSTEMD å¯åŠ¨é—®é¢˜ â€‹ä¸ºäº†åœ¨å¯åŠ¨æ—¶å¯¹æœåŠ¡å¯åŠ¨é—®é¢˜è¿›è¡Œæ•…éšœæ’é™¤ï¼Œçº¢å¸½ä¼ä¸š Linux 8 æä¾›äº†ä»¥ä¸‹å·¥å…·ã€‚ å¯ç”¨æ—©æœŸè°ƒè¯• Shell â€‹é€šè¿‡æ‰§è¡Œ systemctl enable debug-shell.service æ¥å¯ç”¨ debug-shell æœåŠ¡ï¼Œç³»ç»Ÿä¼šäºå¯åŠ¨åºåˆ—æ—©æœŸåœ¨ TTY9ï¼ˆä½¿ç”¨ctrl + Alt + F9 åˆ‡æ¢ï¼‰ä¸Šç”Ÿæˆä¸€ä¸ª root shellã€‚è¯¥ shell ä¼šè‡ªåŠ¨ä½œä¸º root ç™»å½•ï¼Œè¿™æ ·ï¼Œç®¡ç†å‘˜å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿä»åœ¨å¯åŠ¨æ—¶å¯¹ç³»ç»Ÿè¿›è¡Œè°ƒè¯•ã€‚ åœ¨å®Œæˆè°ƒè¯•ååŠ¡å¿…è¦ç¦ç”¨ debug-shell æœåŠ¡ã€‚ ä½¿ç”¨ç´§æ€¥æƒ…å†µå’Œæ•‘æ´ç›®æ ‡ â€‹é€šè¿‡ä»å¯åŠ¨åŠ è½½å™¨å°† systemd.unit=rescue.target æˆ– systemdï¼Œunit=emergency.target é™„åŠ åˆ°å†…æ ¸å‘½ä»¤è¡Œï¼Œç³»ç»Ÿå°†ç”Ÿæˆæ•‘æ´æˆ–ç´§æ€¥æƒ…å†µ shellï¼Œè€Œä¸æ˜¯æ­£å¸¸å¯åŠ¨ã€‚è¿™ä¸¤ä¸ª shell éƒ½éœ€è¦æä¾› root å¯†ç ã€‚ â€‹ç´§æ€¥æƒ…å†µç›®æ ‡ä½¿ root æ–‡ä»¶ç³»ç»Ÿä»¥åªè¯»æ–¹å¼æŒ‚è½½ï¼Œè€Œæ•‘æ´ç›®æ ‡ä¼šç­‰å¾… sysinit.target å®Œæˆï¼Œè¿™æ ·ç³»ç»Ÿçš„æ›´å¤šéƒ¨åˆ†ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æ—¥å¿—è®°å½•æœåŠ¡æˆ–æ–‡ä»¶ç³»ç»Ÿã€‚æ­¤æ—¶ root ç”¨æˆ·æ— æ³•æ›´æ”¹ /etc/fstabï¼Œç›´è‡³é©±åŠ¨å™¨ä»¥è¯»å†™çŠ¶æ€é‡æ–°æŒ‚è½½ï¼ˆmount -o remount,rw /ï¼‰ã€‚ â€‹ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨è¿™äº› shell æ¥ä¿®å¤åŠç¢ç³»ç»Ÿæ­£å¸¸å¯åŠ¨çš„ä»»ä½•é—®é¢˜ï¼›ä¾‹å¦‚ï¼ŒæœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å¾ªç¯ï¼Œæˆ– /etc/fstab ä¸­çš„é”™è¯¯æ¡ç›®ã€‚ä»è¿™äº› shell é€€å‡ºåï¼Œç³»ç»Ÿä¼šç»§ç»­è¿›è¡Œå¸¸è§„å¯åŠ¨è¿‡ç¨‹ã€‚ è¯†åˆ«é˜»å¡ä½œä¸š â€‹åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œsystemd ä¼šç”Ÿæˆå¤§é‡ä½œä¸šã€‚å¦‚æœå…¶ä¸­å…¶äº›ä½œä¸šæ— æ³•å®Œæˆï¼Œåˆ™å®ƒä»¬ä¼šçººç¢å…¶ä»–ä½œä¸šè¿è¡Œã€‚è¦æ£€æŸ¥å½“å‰ä½œä¸šåˆ—è¡¨ï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ systemctl 1ist-jobs å‘½ä»¤ã€‚æ‰€æœ‰åˆ—ä¸º running çš„ä½œä¸šéƒ½å¿…é¡»å…ˆå®Œæˆï¼Œç„¶ååˆ—ä¸º waiting çš„ä½œä¸šæ‰å¯ä»¥ç»§ç»­ã€‚ ä¿®å¤å¯åŠ¨æ—¶å‡ºç°çš„æ–‡ä»¶ç³»ç»Ÿé—®é¢˜ â€‹*/etc/fstab* ä¸­çš„é”™è¯¯å’ŒæŸåçš„æ–‡ä»¶ç³»ç»Ÿå¯èƒ½ä¼šé˜»æ­¢ç³»ç»Ÿå¯åŠ¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œsystemd ä¼šé™ è‡³éœ€è¦æä¾› root å¯†ç çš„ç´§æ€¥ä¿®å¤ shellã€‚ â€‹ä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›å¸¸è§é”™è¯¯åŠå…¶ç»“æœã€‚ é—®é¢˜ ç»“æœ æŸåæ–‡ä»¶ç³»ç»Ÿ systemd å°è¯•ä¿®å¤æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœé—®é¢˜è¿‡äºä¸¥é‡ï¼Œæ— æ³•è¿›è¡Œè‡ªåŠ¨ä¿®å¤ï¼Œç³»ç»Ÿä¼šå°†ç”¨æˆ·é™è‡³ç´§æ€¥ shellã€‚ /etc/fstab ä¸­å¼•ç”¨çš„è®¾å¤‡UUID ä¸å­˜åœ¨ systemd å°†ç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œç­‰è®¾å¤‡å˜å¾—å¯ç”¨ã€‚å¦‚æœè®¾å¤‡æœªå˜å¾—å¯ç”¨ï¼Œåˆ™ç³»ç»Ÿä¼šåœ¨è¶…æ—¶åå°†ç”¨æˆ·é™è‡³ç´§æ€¥ shellã€‚ /etc/fstab ä¸­çš„æŒ‚è½½ç‚¹ä¸å­˜åœ¨ ç³»ç»Ÿå°†ç”¨æˆ·é™è‡³ç´§æ€¥ shellã€‚ /etc/fstab ä¸­æŒ‡å®šçš„æŒ‚è½½ç‚¹é”™è¯¯ ç³»ç»Ÿå°†ç”¨æˆ·é™è‡³ç´§æ€¥ shellã€‚ â€‹åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜è¿˜éƒ½å¯ä»¥ä½¿ç”¨ emergency.target æ¥è¯Šæ–­å’Œä¿®å¤é—®é¢˜ï¼Œå› ä¸ºåœ¨æ˜¾ç¤ºç´§æ€¥ shell ä¹‹å‰ï¼Œä¸ä¼šæŒ‚è½½ä»»ä½•æ–‡ä»¶ç³»ç»Ÿã€‚ ä½¿ç”¨ç´§æ€¥ shell è§£å†³æ–‡ä»¶ç³»ç»Ÿé—®é¢˜æ—¶ï¼Œåˆ«å¿˜äº†åœ¨ç¼–è¾‘ /etc/fstab ä¹‹åè¿è¡Œ systemctl daemon-reloadã€‚å¦‚æœä¸é‡æ–°åŠ è½½ï¼Œsystemd å¯èƒ½ä¼šç»§ç»­ä½¿ç”¨æ—§ç‰ˆæœ¬ã€‚ â€‹åœ¨ /etc/fstab æ–‡ä»¶ä¸­ï¼Œæ¡ç›®å†…çš„ nofail é€‰é¡¹å…è®¸åœ¨è¯¥æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¸æˆåŠŸçš„æƒ…å†µä¸‹ä»å¯åŠ¨ç³»ç»Ÿã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¯·å‹¿ä½¿ç”¨è¯¥é€‰é¡¹ã€‚ä½¿ç”¨ nofail æ—¶ï¼Œåº”ç”¨å¯ä»¥ä»ç¼ºå¤±çš„å­˜å‚¨å¯åŠ¨ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥ä¸¥é‡åæœã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"è®¿é—®ç½‘ç»œé™„åŠ å­˜å‚¨","slug":"Linux | è®¿é—®ç½‘ç»œé™„åŠ å­˜å‚¨","date":"2022-08-15T07:03:27.839Z","updated":"2022-08-15T07:06:15.091Z","comments":true,"path":"2022-08-15-Linux | è®¿é—®ç½‘ç»œé™„åŠ å­˜å‚¨.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C%E9%99%84%E5%8A%A0%E5%AD%98%E5%82%A8.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æŒ‚è½½å’Œå¸è½½ NFS å…±äº« â€‹NFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰æ˜¯ç”±Linuxã€UNIXåŠç±»ä¼¼æ“ä½œç³»ç»Ÿä½¿ç”¨çš„äº’è”ç½‘æ ‡å‡†åè®®ï¼Œå¯ä½œä¸ºå®ƒä»¬çš„æœ¬åœ°ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚å®ƒæ˜¯ä¸€ç§ä»åœ¨ç§¯æå¢å¼ºçš„å¼€æ”¾æ ‡å‡†ï¼Œå¯æ”¯æŒæœ¬åœ°Linuxæƒé™å’Œæ–‡ä»¶ç³»ç»ŸåŠŸèƒ½ã€‚ â€‹çº¢å¸½ä¼ä¸š Linux 8 ä¸­çš„é»˜è®¤ NFS ç‰ˆæœ¬ä¸º 4.2 ã€‚æ”¯æŒNFSV4å’ŒNFSV3çš„ä¸»è¦ç‰ˆæœ¬ã€‚NFSV2 å·²ä¸å†å—æ”¯æŒã€‚NFSV4 ä»…ä½¿ç”¨TCP åè®®ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼›è¾ƒæ—©çš„ NFS ç‰ˆæœ¬å¯ä½¿ç”¨ TCP æˆ– UDPã€‚ â€‹NFS æœåŠ¡å™¨å¯¼å‡ºå…±äº«ï¼ˆç›®å½•ï¼‰ã€‚NFS å®¢æˆ·ç«¯å°†å¯¼å‡ºçš„å…±äº«æŒ‚è½½åˆ°æœ¬åœ°æŒ‚è½½ç‚¹ï¼ˆç›®å½•ï¼‰ï¼Œè¯¥æŒ‚è½½ç‚¹å¿…é¡»å­˜åœ¨ã€‚å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æŒ‚è½½ NFS å…±äº«ï¼š ä½¿ç”¨ mount å‘½ä»¤æ‰‹åŠ¨æŒ‚è½½ï¼› ä½¿ç”¨ /etc/fstab æ¡ç›®åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ï¼› æŒ‰éœ€æŒ‚è½½ï¼šä½¿ç”¨ autofs æœåŠ¡æˆ– systemd.automount åŠŸèƒ½ã€‚ æŒ‚è½½ NFS å…±äº« â€‹è¦æŒ‚è½½ NFS å…±äº«ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š è¯†åˆ«ï¼šNFS å®¢æˆ·ç«¯ç³»ç»Ÿçš„ç®¡ç†å‘˜å¯ä»¥é€šè¿‡å„ç§æ–¹å¼è¯†åˆ«å¯ç”¨çš„ NFS å…±äº« NFS æœåŠ¡å™¨çš„ç®¡ç†å‘˜å¯ä»¥æä¾›å¯¼å‡ºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§è¦æ±‚ã€‚ æˆ–è€…ï¼Œå®¢æˆ·ç«¯ç®¡ç†å‘˜å¯ä»¥é€šè¿‡æŒ‚è½½ NFS æœåŠ¡å™¨çš„æ ¹ç›®å½•å¹¶æµè§ˆå·²å¯¼å‡ºç›®å½•æ¥è¯†åˆ« NFSV4 å…±äº«ã€‚ä»¥ root ç”¨æˆ·èº«ä»½æ‰§è¡Œè¯¥æ“ä½œã€‚å¯¹ä½¿ç”¨ Kerberos å®‰å…¨æ€§çš„å…±äº«çš„è®¿é—®å°†è¢«æ‹’ç»ï¼Œä½†å…±äº«ï¼ˆç›®å½•ï¼‰åç§°ä»å¯è§ã€‚å¯ä»¥æµè§ˆå…¶ä»–å…±äº«ç›®å½•ã€‚ 123[user@localhost ~]\\$ sudo mkdir mountpoint[user@localhost ~]\\$ sudo mount serverb:/ mountpoint[user@localhost ~]\\$ sudo ls mount point æŒ‚è½½ç‚¹ï¼šä½¿ç”¨ mkdir åœ¨åˆé€‚çš„ä½ç½®åˆ›å»ºæŒ‚è½½ç‚¹ 1[user@localhost ~]\\$ mkdir -p mountpoint æŒ‚è½½ï¼šä¸åˆ†åŒºä¸Šçš„æ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼ŒNFS å…±äº«å¿…é¡»å…ˆè¿›æ€§æŒ‚è½½æ‰å¯ç”¨ã€‚è¦æŒ‚è½½ NFS å…±äº«ï¼Œå¯ä»¥ä»ä»¥ä¸‹é€‰é¡¹ä¸­è¿›è¡Œé€‰æ‹©ã€‚æ— è®ºåœ¨å“ªç§æƒ…å†µä¸‹ï¼Œéƒ½å¿…é¡»ä½œä¸º root ç”¨æˆ·ç™»é™†ï¼Œæˆ–ä½¿ç”¨ sudo å‘½ä»¤ï¼Œä»¥è¶…çº§ç”¨æˆ·èº«ä»½è¿è¡Œè¿™äº›å‘½ä»¤ã€‚ ä¸´æ—¶æŒ‚è½½ï¼šä½¿ç”¨ mount å‘½ä»¤æŒ‚è½½ NFS å…±äº«ï¼š 1[user@localhost ~]\\$ sudo mount -t nfs -o rw,sync serverb:/share mountpoint â€‹*-t nfs* é€‰é¡¹æ˜¯ NFS å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆæœªä¸¥æ ¼è¦æ±‚ï¼Œä¸ºå®Œæ•´æ€§è€Œæ˜¾ç¤ºï¼‰ã€‚-o sync é€‰é¡¹ä½¿ mount ç«‹å³ä¸ NFS æœåŠ¡å™¨åŒæ­¥å†™æ“ä½œï¼ˆé»˜è®¤å€¼ä¸ºå¼‚æ­¥ï¼‰ã€‚ â€‹æ­¤å‘½ä»¤å°†ç«‹å³ä½†å¹¶ä¸æŒä¹…æŒ‚è½½å…±äº«ï¼›ä¸‹ä¸€æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œæ­¤NFSå…±äº«å°†ä¸å¯ç”¨ã€‚å¯¹äºä¸€æ¬¡æ€§è®¿é—®æ•°æ®çš„æƒ…å†µï¼Œè¯¥é€‰é¡¹å¾ˆæœ‰ç”¨ã€‚å®ƒä¹Ÿå¯ç”¨äºåœ¨æŒä¹…æä¾›å…±äº«ä¹‹å‰å¯¹æŒ‚è½½NFSå…±äº«è¿›è¡Œæµ‹è¯•ã€‚ æŒä¹…æŒ‚è½½ï¼šä¸ºäº†ç¡®ä¿åœ¨å¯åŠ¨æ—¶æŒ‚è½½ NFS å…±äº«ï¼Œå¯ä»¥ç¼–è¾‘ /etc/fstab æ–‡ä»¶æ¥æ·»åŠ æŒ‚è½½æ¡ç›®ã€‚ 123[user@localhost ~]\\$ sudo vim /etc/fstab# ä»¥ä¸‹æ˜¯ /etc/fstab æ–‡ä»¶æ¡ç›®serverb:/share /mountpoint nfs rw,soft 0 0 â€‹æ¥ç€ï¼ŒæŒ‚è½½ NFS å…±äº«ï¼š 1[user@localhost ~]\\$ sudo mount /mountpoint â€‹ç”±äº NFS å®¢æˆ·ç«¯æœåŠ¡ä¼šåœ¨ /etc/fstab æ–‡ä»¶ä¸­æŸ¥æ‰¾ NFS æœåŠ¡å™¨å’ŒæŒ‚è½½é€‰é¡¹ï¼Œå› æ­¤æ‚¨æ— éœ€åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šè¿™äº›å†…å®¹ã€‚ å¸è½½ NFS å…±äº« â€‹ä»¥ root ç”¨æˆ·èº«ä»½ï¼ˆæˆ–ä½¿ç”¨ sudoï¼‰ï¼Œä½¿ç”¨ umount å‘½ä»¤å¸è½½ NFS å…±äº«ã€‚ 1[user@localhost ~]\\$ sudo umount mountpoint å¸è½½å…±äº«ä¸ä¼šåˆ é™¤å®ƒçš„ /etc/fstab æ¡ç›®ã€‚é™¤éåˆ é™¤æˆ–æ³¨é‡Šæ‰è¯¥æ¡ç›®ï¼Œå¦åˆ™åœ¨ä¸‹ä¸€æ¬¡ç³»ç»Ÿå¯åŠ¨æˆ–é‡å¯ NFS å®¢æˆ·ç«¯æœåŠ¡æ—¶å°†é‡æ–°æŒ‚è½½ NFS å…±äº«ã€‚ NFSCONF å·¥å…· â€‹RHEL8 å¼•å…¥äº† nfsconf å·¥å…·ï¼Œç”¨äºç®¡ç† NFSv4 ä¸ NFSv3 ä¸‹çš„ NFS å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨ /etc/nfs.confé…ç½® nfsconf å·¥å…·ï¼ˆæ—©æœŸç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿä¸­çš„ /etc/sysconfig/nfsæ–‡ä»¶ç°å·²è¢«å¼ƒç”¨ï¼‰ã€‚ä½¿ç”¨ nfsconf å·¥å…·æ¥è·å–ã€è®¾ç½®æˆ–å–æ¶ˆè®¾ç½®NFSé…ç½®å‚æ•°ã€‚ â€‹*/etc/nfs.conf* é…ç½®æ–‡ä»¶ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œå®ƒçš„å¼€å¤´æ˜¯ä¸€ä¸ªä½äºæ–¹æ‹¬å·ä¸­çš„å…³é”®å­—ï¼ˆ[keyword]ï¼‰ä»¥åŠè¿™ä¸€éƒ¨åˆ†çš„å€¼åˆ†é…ã€‚å¯¹äº NFS æœåŠ¡å™¨ï¼Œè¯·é…ç½® [nfsd] éƒ¨åˆ†ã€‚å€¼çš„åˆ†é…ï¼ˆæˆ–é”®ï¼‰ç”±å€¼çš„åç§°ã€ç­‰å·å’Œå€¼çš„è®¾ç½®ç»„æˆï¼Œä¾‹å¦‚ vers4.2=yã€‚ä»¥ â€œ#â€ æˆ– â€œ;â€ å¼€å¤´çš„è¡Œå°†è¢«å¿½ç•¥ï¼Œå°±åƒç©ºç™½è¡Œä¸€æ ·ã€‚ 1[user@localhost ~]\\$ sudo cat /etc/nfs.conf 12345678910111213141516[nfsd]# debug=0# threads=0# host=# port=0# grace-time=90# lease-time=90# tcp=y# vers2=n# vers3=y# vers4=y# vers4.0=y# vers4.1=y# vers4.2=y# rdma=n# ...... â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œ[nfsd] éƒ¨åˆ†çš„é”®å€¼å¯¹ä¼šè¢«æ³¨é‡Šæ‰ã€‚ä¸è¿‡ï¼Œæ³¨é‡Šä¸­ä¼šæ˜¾ç¤ºåœ¨ä¸åšæ›´æ”¹çš„æƒ…å†µä¸‹å°†ä¼šç”Ÿæ•ˆçš„é»˜è®¤é€‰é¡¹ã€‚è¿™ä¸ºé…ç½® NFS æä¾›äº†å¾ˆå¥½çš„èµ·ç‚¹ã€‚ â€‹ä½¿ç”¨ nfsconf --set section key value æ¥è®¾ç½®æŒ‡å®šéƒ¨åˆ†çš„é”®å€¼ã€‚ 1[user@localhost ~]\\$ sudo nfsconf --set nfsd vers4.2 y â€‹æ­¤å‘½ä»¤å°†æ›´æ–° /etc/nfs.conf é…ç½®æ–‡ä»¶ï¼š 1[user@localhost ~]\\$ sudo cat /etc/nfs.conf 1234[nfsd]# ......vers4.2 = y# ...... â€‹ä½¿ç”¨ nfsconf --get section key æ¥æ£€ç´¢æŒ‡å®šéƒ¨åˆ†çš„é”®å€¼ï¼š 12[user@localhost ~]\\$ sudo nfsconf --get nfsd vers4.2y â€‹ä½¿ç”¨ nfsconf --unset section key æ¥å–æ¶ˆè®¾ç½®æŒ‡å®šéƒ¨åˆ†çš„é”®å€¼ï¼š 1[user@localhost ~]\\$ sudo nfsconf --unset nfsd vers4.2 é…ç½®ä¸€ä¸ªä»…é™ä½¿ç”¨ NFSv4 çš„å®¢æˆ·ç«¯ â€‹é€šè¿‡åœ¨ /etc/nfs.conf é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä»¥ä¸‹å€¼ï¼Œå¯ä»¥é…ç½®ä¸€ä¸ªä»…é™ä½¿ç”¨ NFSv4 çš„å®¢æˆ·ç«¯ã€‚ â€‹é¦–å…ˆç¦ç”¨ UDP ä»¥åŠå…¶ä»–ä¸ NFSv2 å’Œ NFSv3 æœ‰å…³çš„é”®ï¼š 123[user@localhost ~]\\$ sudo nfsconf --set nfsd udp n[user@localhost ~]\\$ sudo nfsconf --set nfsd vers2 n[user@localhost ~]\\$ sudo nfsconf --set nfsd vers3 n â€‹å¯ç”¨ TCP å’Œ NFSv4 ç›¸å…³é”®ï¼š 12345[user@localhost ~]\\$ sudo nfsconf --set nfsd tcp y[user@localhost ~]\\$ sudo nfsconf --set nfsd vers4 y[user@localhost ~]\\$ sudo nfsconf --set nfsd vers4.0 y[user@localhost ~]\\$ sudo nfsconf --set nfsd vers4.1 y[user@localhost ~]\\$ sudo nfsconf --set nfsd vers4.2 y â€‹å’Œä»¥å‰ä¸€æ ·ï¼Œ/etc/nfs.conf é…ç½®æ–‡ä»¶ä¸­ä¼šæ˜¾ç¤ºæ‰€åšçš„æ›´æ”¹ï¼š 1[user@localhost ~]\\$ cat /etc/nfs.conf 12345678910[nfsd]udp = nvers2 = nvers3 = ntcp = yvers4 = yvers4.0 = yvers4.1 = yvers4.2 = y# ...... è‡ªåŠ¨æŒ‚è½½ç½‘ç»œé™„åŠ å­˜å‚¨ ä½¿ç”¨è‡ªåŠ¨æŒ‚è½½å™¨æŒ‚è½½ NFS å…±äº« â€‹è‡ªåŠ¨æŒ‚è½½å™¨æ˜¯ä¸€ç§æœåŠ¡ï¼ˆautofsï¼‰ï¼Œå®ƒå¯ä»¥ â€œæ ¹æ®éœ€è¦â€ è‡ªåŠ¨æŒ‚è½½NFSå…±äº«ï¼Œå¹¶å°†åœ¨ä¸å†ä½¿ç”¨ NFS å…±äº«æ—¶è‡ªåŠ¨å¸è½½è¿™äº›å…±äº«ã€‚ â€‹è‡ªåŠ¨æŒ‚è½½æœåŠ¡çš„ä¼˜åŠ¿ï¼š ç”¨æˆ·æ— éœ€å…·æœ‰rootç‰¹æƒå°±å¯ä»¥è¿è¡Œ mount å’Œ umount å‘½ä»¤ã€‚ è‡ªåŠ¨æŒ‚è½½å™¨ä¸­é…ç½®çš„ NFS å…±äº«å¯ä¾›è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨ï¼Œå—è®¿é—®æƒé™çº¦æŸã€‚ NFS å…±äº«ä¸åƒ /etc/fstab ä¸­çš„æ¡ç›®ä¸€æ ·æ°¸ä¹…è¿æ¥ï¼Œä»è€Œå¯é‡Šæ”¾ç½‘ç»œå’Œç³»ç»Ÿèµ„æºã€‚ è‡ªåŠ¨æŒ‚è½½å™¨åœ¨å®¢æˆ·ç«¯é…ç½®ï¼Œæ— éœ€è¿›è¡Œä»»ä½•æœåŠ¡å™¨ç«¯é…ç½®ã€‚ è‡ªåŠ¨æŒ‚è½½å™¨ä¸ mount å‘½ä»¤ä½¿ç”¨ç›¸åŒçš„é€‰é¡¹ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§é€‰é¡¹ã€‚ è‡ªåŠ¨æŒ‚è½½å™¨æ”¯æŒç›´æ¥å’Œé—´æ¥æŒ‚è½½ç‚¹æ˜ å°„ï¼Œåœ¨æŒ‚è½½ç‚¹ä½ç½®æ–¹é¢æä¾›äº†çµæ´»æ€§ã€‚ autofs å¯åˆ›å»ºå’Œåˆ é™¤é—´æ¥æŒ‚è½½ç‚¹ï¼Œä»è€Œé¿å…äº†æ‰‹åŠ¨ç®¡ç†ã€‚ NFS æ˜¯é»˜è®¤çš„è‡ªåŠ¨æŒ‚è½½å™¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä¹Ÿå¯ä»¥è‡ªåŠ¨æŒ‚è½½å…¶ä»–ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚ autofs æ˜¯ä¸€ç§æœåŠ¡ï¼Œå…¶ç®¡ç†æ–¹å¼ç±»ä¼¼äºå…¶ä»–ç³»ç»ŸæœåŠ¡ã€‚ é…ç½®è‡ªåŠ¨æŒ‚è½½ NFS å…±äº« â€‹é…ç½®è‡ªåŠ¨æŒ‚è½½åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š å®‰è£… autofs è½¯ä»¶åŒ…ï¼› 1[user@localhost ~]\\$ sudo yum install autofs â€‹æ­¤è½¯ä»¶åŒ…åŒ…å«ä½¿ç”¨è‡ªåŠ¨æŒ‚è½½å™¨æŒ‚è½½NFSå…±äº«æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ã€‚ å‘ /etc/auto.master.d æ·»åŠ ä¸€ä¸ªä¸»æ˜ å°„æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶ç¡®å®šç”¨äºæŒ‚è½½ç‚¹çš„åŸºç¡€ç›®å½•ï¼Œå¹¶ç¡®å®šç”¨äºåˆ›å»ºè‡ªåŠ¨æŒ‚è½½çš„æ˜ å°„æ–‡ä»¶ï¼› 1[user@localhost ~]\\$ sudo vim /etc/auto.master.d/demo.autofs â€‹ä¸»æ˜ å°„æ–‡ä»¶çš„åç§°æ˜¯ä»»æ„çš„ï¼ˆå°½ç®¡é€šå¸¸ä¼šæœ‰ä¸€å®šçš„å«æ„ï¼‰ï¼Œä½†ä¸ºäº†è®©å­ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«ï¼Œå®ƒå¿…é¡»ä»¥ .autofs ä½œä¸ºæ‰©å±•åã€‚å¯ä»¥åœ¨ä¸€ä¸ªä¸»æ˜ å°„æ–‡ä»¶ä¸­æ”¾ç½®å¤šä¸ªæ¡ç›®ï¼›æˆ–è€…å¯ä»¥åˆ›å»ºå¤šä¸ªä¸»æ˜ å°„æ–‡ä»¶ï¼Œä¸”æ¯ä¸ªæ–‡ä»¶çš„æ¡ç›®éƒ½è¿›è¡Œé€»è¾‘åˆ†ç»„ã€‚ â€‹åœ¨æ­¤ä¾‹ä¸­ï¼Œä¸ºç®€ä»‹æ˜ å°„çš„æŒ‚è½½æ·»åŠ ä¸»æ˜ å°„æ¡ç›®ï¼š 1/shares /etc/auto.demo åˆ›å»ºæ˜ å°„æ–‡ä»¶ã€‚æ¯ä¸ªæ˜ å°„æ–‡ä»¶ç¡®å®šä¸€ç»„è‡ªåŠ¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ã€æŒ‚è½½é€‰é¡¹åŠæŒ‚è½½çš„æºä½ç½®ï¼› 1[user@localhost ~]\\$ sudo vim /etc/auto.demo â€‹æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™æ˜¯ /etc/auto.name, å…¶ä¸­ name åæ˜ äº†æ˜ å°„å†…å®¹ã€‚ 1work -rw,sync serverb:/shares/work â€‹æ¡ç›®çš„æ ¼å¼ä¸ºæŒ‚è½½ç‚¹ã€æŒ‚è½½é€‰é¡¹å’Œæºä½ç½®ã€‚æ­¤ç¤ºä¾‹æ˜¾ç¤ºåŸºæœ¬çš„é—´æ¥æ˜ å°„æ¡ç›®ã€‚æœ¬èŠ‚ç¨åéƒ¨åˆ†å°†è®¨è®ºç›´æ¥æ˜ å°„å’Œä½¿ç”¨é€šé…ç¬¦çš„é—´æ¥æ˜ å°„ã€‚ æŒ‚è½½ç‚¹åœ¨ man page è¢«ç§°ä¸º â€œå¯†é’¥â€ï¼Œå®ƒç”± autofs æœåŠ¡è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œå®Œå…¨é™å®šæŒ‚è½½ç‚¹æ˜¯ /shares/workï¼ˆè¯·å‚é˜…ä¸»æ˜ å°„æ–‡ä»¶ï¼‰ã€‚autofs æœåŠ¡å°†æ ¹æ®éœ€è¦åˆ›å»ºå’Œåˆ é™¤ /shares ç›®å½•å’Œ /shares/work ç›®å½•ã€‚ åœ¨æ­¤ä¾‹ä¸­ï¼Œæœ¬åœ°æŒ‚è½½ç‚¹å°†é•œåƒæœåŠ¡å™¨çš„ç›®å½•ç»“æ„ï¼Œä½†è¿™ä¸æ˜¯å¿…éœ€çš„ï¼›æœ¬åœ°æŒ‚è½½ç‚¹å¯ä»¥éšæ„å‘½åã€‚autofs æœåŠ¡ä¸ä¼šåœ¨å®¢æˆ·ç«¯ä¸Šå¼ºåˆ¶æ‰§è¡Œç‰¹å®šçš„å‘½åç»“æ„ã€‚ æŒ‚è½½é€‰é¡¹ä»¥çŸ­åˆ’çº¿å­—ç¬¦ - å¼€å¤´ï¼Œå¹¶ä½¿ç”¨é€—å·åˆ†éš”ï¼Œä¸å¸¦ç©ºæ ¼ã€‚è‡ªåŠ¨æŒ‚è½½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åº”çš„æŒ‚è½½é€‰é¡¹æ¥æ‰‹åŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œè‡ªåŠ¨æŒ‚è½½å™¨å°†æŒ‚è½½å…·æœ‰è¯»/å†™è®¿é—®æƒé™çš„å…±äº«å†…å®¹ï¼ˆrwé€‰é¡¹ï¼‰ï¼Œå¹¶ä¸”åœ¨å†™å…¥æ“ä½œæœŸé—´æœåŠ¡å™¨ä¼šç«‹å³åŒæ­¥ï¼ˆsync é€‰é¡¹ï¼‰ã€‚ æœ‰ç”¨çš„è‡ªåŠ¨æŒ‚è½½å™¨ç‰¹å®šé€‰é¡¹åŒ…æ‹¬ -fstype= å’Œ -strictã€‚ä½¿ç”¨ fstype æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¦‚ nfs4 æˆ– xfsï¼›æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ strict å¯å°†é”™è¯¯è§†ä¸ºä¸¥é‡ã€‚ NFS å…±äº«çš„æºä½ç½®éµå¾ª host:/pathname æ¨¡å¼ï¼›åœ¨æ­¤ç¤ºä¾‹ä¸­ä¸º serverb:/shares/workã€‚ä¸ºäº†ç¡®ä¿æ­¤æ¬¡è‡ªåŠ¨æŒ‚è½½æˆåŠŸï¼ŒNFS æœåŠ¡å™¨ serverb å¿…é¡»ä»¥è¯»/å†™è®¿é—®æƒé™å¯¼å‡ºç›®å½•ï¼Œè€Œè¯·æ±‚è®¿é—®çš„ç”¨æˆ·å¿…é¡»å¯¹è¯¥ç›®å½•å…·æœ‰æ ‡å‡† Linux æ–‡ä»¶æƒé™ã€‚å¦‚æœ serverb ä»¥åªè¯»è®¿é—®æƒé™å¯¼å‡ºç›®å½•ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¹Ÿä»…è·å¾—åªè¯»è®¿é—®æƒé™ï¼Œå³ä½¿å®ƒè¦æ±‚è¯»/å†™è®¿é—®æƒé™ã€‚ å¯åŠ¨å¹¶å¯ç”¨è‡ªåŠ¨æŒ‚è½½å™¨æœåŠ¡ï¼› ä½¿ç”¨ systemctl å¯åŠ¨å¹¶å¯ç”¨ autofs æœåŠ¡ã€‚ 12[user@localhost ~]\\$ sudo systemctl enable --now autofsCreated symlink /etc/systemd/system/multi-user.target.wants/autofs.service -&gt; /usr/lib/systemd/system/autofs.service. ç›´æ¥æ˜ å°„ â€‹ç›´æ¥æ˜ å°„ç”¨äºå°†NFSå…±äº«æ˜ å°„åˆ°ç°æœ‰çš„ç»å¯¹è·¯å¾„æŒ‚è½½ç‚¹ã€‚ â€‹è¦ä½¿ç”¨ç›´æ¥æ˜ å°„çš„æŒ‚è½½ç‚¹ï¼Œä¸»æ˜ å°„æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1/- /etc/auto.direct â€‹æ‰€æœ‰ç›´æ¥æ˜ å°„æ¡ç›®éƒ½ä½¿ç”¨ /- ä½œä¸ºåŸºç¡€ç›®å½•ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼ŒåŒ…å«æŒ‚è½½è¯¦ç»†ä¿¡æ¯çš„æ˜ å°„æ–‡ä»¶æ˜¯ /etc/auto,directã€‚ â€‹*/etc/auto.direct* æ–‡ä»¶çš„å†…å®¹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1/mnt/docs -rw,sync serverb:/shares/docs â€‹æŒ‚è½½ç‚¹ï¼ˆæˆ–å¯†é’¥ï¼‰å§‹ç»ˆä¸ºç»å¯¹è·¯å¾„ã€‚æ˜ å°„æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†ä½¿ç”¨ç›¸åŒçš„ç»“æ„ã€‚ â€‹åœ¨æ­¤ä¾‹ä¸­ï¼Œå­˜åœ¨ /mnt ç›®å½•ï¼Œå®ƒç”± autofs ç®¡ç†ã€‚autofs æœåŠ¡å°†è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤æ•´ä¸ª /mnt/docs ç›®å½•ã€‚ é—´æ¥é€šé…ç¬¦æ˜ å°„ â€‹å½“NFSæœåŠ¡å™¨å¯¼å‡ºä¸€ä¸ªç›®å½•ä¸­çš„å¤šä¸ªå­ç›®å½•æ—¶ï¼Œå¯å°†è‡ªåŠ¨æŒ‚è½½ç¨‹åºé…ç½®ä¸ºä½¿ç”¨å•ä¸ªæ˜ å°„æ¡ç›®è®¿é—®è¿™äº›å­ç›®å½•å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ â€‹ç»§ç»­å‰é¢çš„ç¤ºä¾‹ï¼Œå¦‚æœ serverb:/shares å¯¼å‡ºä¸¤ä¸ªæˆ–å¤šä¸ªå­ç›®å½•ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„æŒ‚è½½é€‰é¡¹è®¿é—®è¿™äº›å­ç›®å½•ï¼Œåˆ™ /etc/auto.demo æ–‡ä»¶çš„å†…å®¹å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1* -rw,sync serverb:/shares/&amp; â€‹æŒ‚è½½ç‚¹ï¼ˆæˆ–å¯†é’¥ï¼‰æ˜¯æ˜Ÿå·å­—ç¬¦ *ï¼Œè€Œæºä½ç½®ä¸Šçš„å­ç›®å½•æ˜¯ &amp; ç¬¦å·ã€‚æ¡æ—¥ä¸­çš„æ‰€æœ‰å…¶ä»–å†…å®¹éƒ½ç›¸åŒã€‚ â€‹å½“ç”¨æˆ·å°è¯•è®¿é—® /shares/work æ—¶ï¼Œå¯†é’¥ *ï¼ˆæ­¤ä¾‹ä¸­ä¸º work ï¼‰å°†ä»£æ›¿æºä½ç½®ä¸­çš„ &amp; ç¬¦å·ï¼Œå¹¶æŒ‚è½½ serverb:/shares/workã€‚å¯¹äºé—´æ¥ç¤ºä¾‹ï¼Œautofs å°†è‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤ work ç›®å½•ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ä½¿ç”¨ Stratis ç®¡ç†åˆ†å±‚å­˜å‚¨","slug":"Linux | ä½¿ç”¨ Stratis ç®¡ç†åˆ†å±‚å­˜å‚¨","date":"2022-08-15T06:50:24.466Z","updated":"2022-08-15T07:01:55.282Z","comments":true,"path":"2022-08-15-Linux | ä½¿ç”¨ Stratis ç®¡ç†åˆ†å±‚å­˜å‚¨.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E4%BD%BF%E7%94%A8%20Stratis%20%E7%AE%A1%E7%90%86%E5%88%86%E5%B1%82%E5%AD%98%E5%82%A8.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ STRATIS æ¶æ„æ¦‚è¿° â€‹RHEL å½“å‰çš„æœ¬åœ°å­˜å‚¨è§£å†³æ–¹æ¡ˆä¸­åŒ…å«è®¸å¤šæˆç†Ÿã€ç¨³å®šçš„æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬è®¾å¤‡æ˜ å°„å™¨ï¼ˆdmï¼‰ã€é€»è¾‘å·ç®¡ç†å™¨ï¼ˆLVMï¼‰åŠ XFS æ–‡ä»¶ç³»ç»Ÿã€‚è¿™äº›ç»„ä»¶æä¾›çš„åŠŸèƒ½åŒ…æ‹¬å¯å¤§è§„æ¨¡æ‰©å±•çš„æ–‡ä»¶ç³»ç»Ÿã€å¿«ç…§ã€å†—ä½™ï¼ˆRAIDï¼‰é€»è¾‘è®¾å¤‡ã€å¤šè·¯å¾„ã€ç²¾ç®€é…ç½®ã€ç¼“å­˜ã€é‡å¤æ•°æ®åˆ é™¤ï¼Œä»¥åŠå¯¹è™šæ‹Ÿæœºå’Œå®¹å™¨çš„æ”¯æŒã€‚æ¯ä¸ªå­˜å‚¨å †æ ˆå±‚ï¼ˆdmã€LVM å’Œ XFSï¼‰å‡ä½¿ç”¨ä¸“é—¨é¢å‘å±‚çš„å‘½ä»¤å’Œå®ç”¨ç¨‹åºè¿›è¡Œç®¡ç†ï¼Œè¿™å°±è¦æ±‚ç³»ç»Ÿç®¡ç†å‘˜å°†ç‰©ç†è®¾å¤‡ã€å›ºå®šå¤§å°çš„å·å’Œæ–‡ä»¶ç³»ç»Ÿä½œä¸ºç‹¬ç«‹çš„å­˜å‚¨ç»„ä»¶è¿›è¡Œç®¡ç†ã€‚ â€‹åœ¨ RHEL 8 ä¸­ï¼Œçº¢å¸½æ¨å‡ºäº† Stratis å­˜å‚¨ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚Straits ä»¥ç®¡ç†ç‰©ç†å­˜å‚¨è®¾å¤‡æ± çš„æœåŠ¡å½¢å¼è¿è¡Œï¼Œå¹¶é€æ˜åœ°ä¸ºæ‰€åˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’Œç®¡ç†å·ã€‚ç”±äº Stratis ä½¿ç”¨ç°æœ‰çš„å­˜å‚¨é©±åŠ¨ç¨‹åºå’Œå·¥å…·ï¼Œå› æ­¤ Stratis ä¹Ÿæ”¯æŒå½“å‰åœ¨ LVMã€XFS å’Œè®¾å¤‡æ˜ å°„å™¨ä¸­ä½¿ç”¨çš„æ‰€æœ‰é«˜çº§å­˜å‚¨åŠŸèƒ½ã€‚ â€‹åœ¨å·ç®¡ç†æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿå€ŸåŠ©ä¸€ä¸ªåä¸ºç²¾ç®€é…ç½®çš„æ¦‚å¿µå†…ç½®äºç£ç›˜è®¾å¤‡çš„å…±äº«æ± ä¸­ã€‚Straits æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰å›ºå®šå¤§å°ï¼Œä¹Ÿä¸å†é¢„åˆ†é…æœªä½¿ç”¨çš„å¿«ç©ºé—´ã€‚å°½ç®¡æ–‡ä»¶ç³»ç»Ÿä»æ„å»ºåœ¨éšè—çš„ LVM å·ä¸Šï¼Œä½† Stratis ä¼šç®¡ç†åŸºç¡€å·ï¼Œå¹¶å¯åœ¨éœ€è¦æ—¶å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚æ–‡ä»¶ç³»ç»Ÿçš„ â€œä½¿ç”¨ä¸­â€ å¤§å°å¯è§†ä½œæ‰€å«æ–‡ä»¶å ç”¨çš„å®é™…å—æ•°é‡ã€‚æ–‡ä»¶ç³»ç»Ÿçš„å¯ç”¨ç©ºé—´å°±æ˜¯å®ƒæ‰€é©»ç•™çš„æ± è®¾å¤‡ä¸­ä»æœªä½¿ç”¨çš„ç©ºé—´é‡ã€‚å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿå¯ä»¥é©»ç•™åœ¨åŒä¸€ç£ç›˜è®¾å¤‡æ± ä¸­ï¼Œå…±äº«å¯ç”¨ç©ºé—´ï¼Œä½†æ–‡ä»¶ç³»ç»Ÿä¹Ÿå¯ä»¥ä¿ç•™æ± ç©ºé—´ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶ä¿è¯å¯ç”¨æ€§ã€‚ â€‹Straitis ä½¿ç”¨å­˜å‚¨çš„å…ƒæ•°æ®æ¥è¯†åˆ«æ‰€ç®¡ç†çš„æ± ã€å·å’Œæ–‡ä»¶ç³»ç»Ÿã€‚å› æ­¤ï¼Œç»ä¸åº”è¯¥å¯¹ Stratis åˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ‰‹åŠ¨é‡æ–°æ ¼å¼åŒ–æˆ–é‡æ–°é…ç½®ï¼›åªåº”ä½¿ç”¨ Straitis å·¥å…·å’Œå‘½ä»¤å¯¹å®ƒä»¬è¿›è¡Œç®¡ç†ã€‚æ‰‹åŠ¨é…ç½® Stratis æ–‡ä»¶ç³»ç»Ÿå¯èƒ½ä¼šå¯¼è‡´è¯¥å…ƒæ•°æ®ä¸¢å¤±ï¼Œå¹¶é˜»æ­¢ Stratis è¯†åˆ«å®ƒå·²åˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿã€‚ â€‹å¯ä»¥ä½¿ç”¨ä¸åŒç»„çš„å—è®¾å¤‡æ¥åˆ›å»ºå¤šä¸ªæ± ã€‚åœ¨æ¯ä¸ªæ± ä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ç›®å‰ï¼Œæ¯ä¸ªæ± æœ€å¤šå¯ä»¥åˆ›å»º 224 ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ä¸‹å›¾è¯´æ˜äº† Stratis å­˜å‚¨ç®¡ç†è§£å†³æ–¹æ¡ˆçš„å…ƒç´ æ˜¯å¦‚ä½•å®šä½çš„ã€‚ â€‹å­˜å‚¨æ± å¯å°†å—è®¾å¤‡åˆ†ç»„åˆ°æ•°æ®å±‚ï¼Œæˆ–åˆ†ç»„åˆ°ç¼“å­˜å±‚ã€‚æ•°æ®å±‚ä¾§é‡äºçµæ´»æ€§å’Œå®Œæ•´æ€§ï¼Œè€Œç¼“å­˜å±‚åˆ™ä¾§é‡äºæé«˜æ€§èƒ½ã€‚ç”±äºç¼“å­˜å±‚æ—¨åœ¨æé«˜æ€§èƒ½ï¼Œå› æ­¤åº”ä½¿ç”¨å…·æœ‰æ›´é«˜æ¯ç§’è¾“å…¥ã€è¾“å‡ºæ“ä½œæ¬¡æ•°ï¼ˆIOPSï¼‰çš„å—è®¾å¤‡ï¼Œå¦‚ SSDã€‚ â€‹åœ¨å†…éƒ¨ï¼ŒStratis ä½¿ç”¨ Backstore å­ç³»ç»Ÿæ¥ç®¡ç†å—è®¾å¤‡ï¼Œå¹¶ä½¿ç”¨ Thinpool å­ç³»ç»Ÿæ¥ç®¡ç†æ± ã€‚Backstore æœ‰ä¸€ä¸ªæ•°æ®å±‚ï¼Œè´Ÿè´£ç»´æŠ¤å—è®¾å¤‡ç£ç›˜ä¸Šçš„å…ƒæ•°æ®ï¼Œä»¥åŠæ£€æµ‹å’Œçº æ­£æ•°æ®æŸåã€‚ç¼“å­˜å±‚ä½¿ç”¨é«˜æ€§èƒ½å—è®¾å¤‡ï¼Œä½œä¸ºæ•°æ®å±‚ä¹‹ä¸Šçš„ç¼“å­˜ã€‚Thinpool å­ç³»ç»Ÿç®¡ç†ä¸ Straitis æ–‡ä»¶ç³»ç»Ÿå…³è”çš„ç²¾ç®€éƒ¨ç½²å·ã€‚è¯¥å­ç³»ç»Ÿä½¿ç”¨ dm-thin è®¾å¤‡æ˜ å°„å™¨é©±åŠ¨ç¨‹åºå–ä»£ LVM è¿›è¡Œè™šæ‹Ÿå·å¤§å°è°ƒæ•´å’Œç®¡ç†ã€‚dm-thin å¯ä»¥åˆ›å»ºè™šæ‹Ÿå¤§å°æ¯”è¾ƒå¤§ã€é‡‡ç”¨ XFS æ ¼å¼ï¼Œä½†ç‰©ç†å¤§å°æ¯”è¾ƒå°çš„å·ã€‚å½“ç‰©ç†å¤§å°å¿«è¦æ»¡æ—¶ï¼ŒStratis ä¼šè‡ªåŠ¨å°†å…¶æ‰©å¤§ã€‚ ç®¡ç†ç²¾ç®€é…ç½®çš„æ–‡ä»¶ç³»ç»Ÿ â€‹è¦ä½¿ç”¨ Stratis å­˜å‚¨ç®¡ç†è§£å†³æ–¹æ¡ˆæ¥ç®¡ç†ç²¾ç®€é…ç½®çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥å®‰è£… stratis-cli å’Œ stratisd è½¯ä»¶åŒ…ã€‚stratis-cli è½¯ä»¶åŒ…ä¸­æä¾›äº† stratis å‘½ä»¤ï¼Œå®ƒé€šè¿‡ D-Bus API å°†ç”¨æˆ·è¯·æ±‚è½¬æ¢ä¸º stratisd æœåŠ¡ã€‚stratisd è½¯ä»¶åŒ…ä¸­æä¾›äº† stratisd æœåŠ¡ï¼Œå®ƒå®ç° D-Bus æ¥å£å¹¶ç®¡ç†å’Œç›‘æ§ Stratis çš„å…ƒç´ ï¼Œå¦‚å—è®¾å¤‡ã€æ± å’Œæ–‡ä»¶ç³»ç»Ÿã€‚å½“ stratisd æœåŠ¡å¤„äºè¿è¡ŒçŠ¶æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ D-Bus APIã€‚ â€‹ä½¿ç”¨å¸¸ç”¨å·¥å…·å®‰è£…å¹¶æ¿€æ´» Stratisï¼š ä½¿ç”¨ yum install å‘½ä»¤å®‰è£… stratis-cli å’Œ stratisdï¼› 12345[root@localhost ~]\\# yum install stratis-cli stratisd......Is this ok [y/N]: y......complete! ä½¿ç”¨ systemctl å‘½ä»¤æ¿€æ´» stratisd æœåŠ¡ï¼› 1[root@localhost ~]\\# systemctl enable --now stratisd â€‹ä½¿ç”¨ stratis å­˜å‚¨ç®¡ç†è§£å†³æ–¹æ¡ˆæ‰§è¡Œå¸¸è§ç®¡ç†æ“ä½œï¼š ä½¿ç”¨ stratis pool create å‘½ä»¤æ¥åˆ›å»ºåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå—è®¾å¤‡çš„æ± ï¼› 1[root@localhost ~]\\# stratis pool create pool1 /dev/vdb â€‹æ¯ä¸ªæ± éƒ½æ˜¯ /stratis ç›®å½•ä¸‹çš„ä¸€ä¸ªå­ç›®å½•ã€‚ä½¿ç”¨ stratis pool list å‘½ä»¤æŸ¥çœ‹å¯ç”¨æ± çš„åˆ—è¡¨ï¼š 123[root@localhost ~]\\# stratis pool listName Total Physical Size Total Physical Usedpool1 5 GiB 52 MiB ä½¿ç”¨ stratis pool add-data å‘½ä»¤å‘æ± ä¸­æ·»åŠ é¢å¤–çš„å—è®¾å¤‡ï¼› 1[root@localhost ~]\\# stratis pool add-data pool1 /dev/vdc â€‹ä½¿ç”¨ stratis pool list å‘½ä»¤æŸ¥çœ‹å¯ç”¨æ± çš„å—è®¾å¤‡ï¼š 1234[root@localhost ~]\\# stratis pool list pool1Pool Name Device Node Physical Size State Tierpool1 /dev/vdb 5 GiB In-use Datapool1 /dev/vdc 5 GiB In-use Data ä½¿ç”¨ stratis filesystem create å‘½ä»¤ä¸ºæ± åˆ›å»ºåŠ¨æ€ã€çµæ´»çš„æ–‡ä»¶ç³»ç»Ÿï¼› 1[root@localhost ~]\\# stratis filesystem create pool1 filesystem1 â€‹Stratis æ–‡ä»¶ç³»ç»Ÿçš„é“¾æ¥ä½äº /stratis/pool1 ç›®å½•ä¸­ã€‚ Stratis æ”¯æŒé€šè¿‡ stratis filesystem snapshot å‘½ä»¤åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿå¿«ç…§ã€‚å¿«ç…§ç‹¬ç«‹äºæºæ–‡ä»¶ç³»ç»Ÿã€‚ 1[root@localhost ~]\\# stratis filesystem snapshot pool1 filesystem1 snapshot1 ä½¿ç”¨ stratis filesystem list å‘½ä»¤æŸ¥çœ‹å¯ç”¨æ–‡ä»¶ç³»ç»Ÿçš„åˆ—è¡¨ã€‚ 12[root@localhost ~]\\# stratis filesystem list...... â€‹ä¸ºäº†ç¡®ä¿æŒä¹…æŒ‚è½½ Stratis æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·ç¼–è¾‘ /etc/fstab å¹¶æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯ã€‚ä»¥ä¸‹å‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ UUIDï¼Œåœ¨ /etc/fstab ä¸­åº”ä½¿ç”¨è¯¥ UUID æ¥è¯†åˆ«æ–‡ä»¶ç³»ç»Ÿã€‚ 12[root@localhost ~]\\# lsblk --output=UUID /stratis/pool1/filesystem1UUID 31b9363b-add8-4b46-a4bf-c199cd478c55 â€‹ä»¥ä¸‹æ˜¯ /etc/fstab æ–‡ä»¶ä¸­ç”¨äºæŒä¹…æŒ‚è½½ Stratis æ–‡ä»¶ç³»ç»Ÿçš„æ¡ç›®ç¤ºä¾‹ã€‚ 1UUID=31b9363b-add8-4b46-a4bf-c199cd478c55 /dir1 xfs defaults,x-systemd.requires=stratisd.service 0 0 â€‹x-systemd.requires=stratisd.service æŒ‚è½½é€‰é¡¹å¯å»¶è¿ŸæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œç›´åˆ° systemd åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å¯åŠ¨ stratisd.service ä¸ºæ­¢ã€‚ å¦‚æœåœ¨ /etc/fstab ä¸­æœªå¯¹ stratis æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ x-systemd.requires=stratisd.service æŒ‚è½½é€‰é¡¹ï¼Œå°†ä¼šå¯¼è‡´è®¡ç®—æœºåœ¨ä¸‹ä¸€æ¬¡é‡å¯æ—¶å¼•å¯¼è‡³ emergency.targetã€‚ ä½¿ç”¨ VDO å‹ç¼©å­˜å‚¨å’Œåˆ é™¤é‡å¤æ•°æ® â€‹çº¢å¸½ä¼ä¸š Linux8 åŒ…å«è™šæ‹Ÿæ•°æ®ä¼˜åŒ–å™¨ï¼ˆVDOï¼‰é©±åŠ¨ç¨‹åºï¼Œå¯ä»¥ä¼˜åŒ–å—è®¾å¤‡ä¸Šæ•°æ®çš„ç©ºé—´å ç”¨ã€‚VDO æ˜¯ä¸€ä¸ª Linux è®¾å¤‡æ˜ å°„å™¨é©±åŠ¨ç¨‹åºï¼Œå®ƒå¯ä»¥å‡å°‘å—è®¾å¤‡ä¸Šçš„ç£ç›˜ç©ºé—´ä½¿ç”¨ï¼ŒåŒæ—¶æœ€å¤§é™åº¦å‡å°‘æ•°æ®é‡å¤ï¼Œä»è€ŒèŠ‚çœç£ç›˜ç©ºé—´ï¼Œç”šè‡³æé«˜æ•°æ®ååé‡ã€‚VDO åŒ…æ‹¬ä¸¤ä¸ªå†…æ ¸æ¨¡å—ï¼škvdo æ¨¡å—ç”¨äºä»¥é€æ˜çš„æ–¹å¼æ§åˆ¶æ•°æ®å‹ç¼©ï¼Œuds åˆ™å¯ç”¨äºé‡å¤æ•°æ®åˆ é™¤ã€‚ â€‹VDO å±‚ä½äºç°æœ‰å—å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ RAIDè®¾å¤‡æˆ–æœ¬åœ°ç£ç›˜ï¼‰çš„é¡¶éƒ¨ã€‚è¿™äº›å—è®¾å¤‡ä¹Ÿå¯ä»¥æ˜¯åŠ å¯†è®¾å¤‡ã€‚å­˜å‚¨å±‚ï¼ˆå¦‚ LVMé€»è¾‘å·å’Œæ–‡ä»¶ç³»ç»Ÿï¼‰ä½äº VDO è®¾å¤‡ä¹‹ä¸Šã€‚ä¸‹å›¾æ˜¾ç¤ºäº†åœ¨ä¸€ä¸ªç”±ä½¿ç”¨ä¼˜åŒ–å­˜å‚¨è®¾å¤‡çš„ KVM è™šæ‹Ÿæœºæ„æˆçš„åŸºç¡€æ¶æ„ä¸­ï¼ŒVDO æ‰€å¤„çš„ä½ç½®ã€‚ â€‹VDO ä¼šæŒ‰ä»¥ä¸‹é¡ºåºå¯¹æ•°æ®å®æ–½ä¸‰ä¸ªé˜¶æ®µçš„å¤„ç†ï¼Œä»¥å‡å°‘å­˜å‚¨è®¾å¤‡ä¸Šçš„ç©ºé—´å ç”¨ï¼š é›¶å—æ¶ˆé™¤å°†è¿‡æ»¤æ‰ä»…åŒ…å«é›¶ï¼ˆ0ï¼‰çš„æ•°æ®å—ï¼Œä¸”ä»…åœ¨å…ƒæ•°æ®ä¸­è®°å½•è¿™äº›å—çš„ä¿¡æ¯ã€‚éé›¶æ•°æ®å—éšå³è¢«ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªå¤„ç†é˜¶æ®µã€‚è¯¥é˜¶æ®µå°†å¯ç”¨VDOè®¾å¤‡ä¸­çš„ç²¾ç®€é…ç½®åŠŸèƒ½ã€‚ é‡å¤æ•°æ®åˆ é™¤å°†å»é™¤å‡ ä½™çš„æ•°æ®å—ã€‚åœ¨åˆ›å»ºç›¸åŒæ•°æ®çš„å¤šä¸ªå‰¯æœ¬æ—¶ï¼ŒVDO ä¼šæ£€æµ‹é‡å¤æ•°æ®å—å¹¶æ›´æ–°å…ƒæ•°æ®ï¼Œä»¥ä¾¿ä½¿ç”¨è¿™äº›é‡å¤å—æ¥å¼•ç”¨åŸå§‹æ•°æ®å—ï¼Œè€Œä¸ä¼šåˆ›å»ºå‡ ä½™æ•°æ®å—ã€‚é€šç”¨é‡å¤æ•°æ®åˆ é™¤æœåŠ¡ï¼ˆUDSï¼‰å†…æ ¸æ¨¡å—å°†é€šè¿‡å…¶ç»´æŠ¤çš„å…ƒæ•°æ®æ¥æ£€æŸ¥æ•°æ®çš„å‡ ä½™ã€‚è¯¥å†…æ ¸æ¨¡å—æ˜¯ä½œä¸º VDO çš„ä¸€éƒ¨åˆ†è€Œæä¾›çš„ã€‚ æœ€åä¸€ä¸ªé˜¶æ®µæ˜¯å‹ç¼©ã€‚kvdo å†…æ ¸æ¨¡å—ä½¿ç”¨ LZ4 å‹ç¼©å¯¹å—è¿›è¡Œå‹ç¼©ï¼Œå¹¶ä»¥ 4KB å—è¿›è¡Œåˆ†ç»„ã€‚ å®æ–½è™šæ‹Ÿæ•°æ®ä¼˜åŒ–å™¨ â€‹åˆ©ç”¨ VDO åˆ›å»ºçš„é€»è¾‘è®¾å¤‡è¢«ç§°ä¸º VDO å·ã€‚VDO å·ä¸ç£ç›˜åˆ†åŒºç±»ä¼¼ï¼›æ‚¨å¯ä»¥å°†è¿™äº›å·æ ¼å¼åŒ–ä¸ºæ‰€éœ€çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¹¶åƒå¸¸è§„æ–‡ä»¶ç³»ç»Ÿé‚£æ ·è¿›è¡ŒæŒ‚è½½ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°† VDO å·ç”¨ä½œLVMç‰©ç†å·ã€‚ â€‹è¦åˆ›å»º VDO å·ï¼Œè¯·æŒ‡å®šå—è®¾å¤‡ä»¥åŠ VDO å‘ç”¨æˆ·æ˜¾ç¤ºçš„é€»è¾‘è®¾å¤‡çš„åç§°ã€‚æ‚¨å¯ä»¥æŒ‡å®š VDO å·çš„é€»è¾‘å¤§å°ï¼ˆå¯é€‰ï¼‰ã€‚VDO å·çš„é€»è¾‘å¤§å°å¯ä»¥å¤§äºå®é™…å—è®¾å¤‡çš„ç‰©ç†å¤§å°ã€‚ â€‹ç”±äº VDO å·é‡‡ç”¨äº†ç²¾ç®€é…ç½®ï¼Œå› æ­¤ç”¨æˆ·åªèƒ½çœ‹åˆ°æ­£åœ¨ä½¿ç”¨çš„é€»è¾‘ç©ºé—´ï¼Œè€Œæ— æ³•äº†è§£å®é™…å¯ç”¨çš„ç‰©ç†ç©ºé—´ã€‚å¦‚æœåœ¨åˆ›å»ºå·æ—¶æœªæŒ‡å®šé€»è¾‘å¤§å°ï¼Œåˆ™ VDO ä¼šå°†å®é™…ç‰©ç†å¤§å°è§†ä¸ºå·çš„é€»è¾‘å¤§å°ã€‚è¿™ç§é‡‡ç”¨ 1:1 çš„æ¯”ç‡æ˜ å°„é€»è¾‘å¤§å°ä¸ç‰©ç†å¤§å°çš„æ–¹å¼æœ‰åˆ©äºæé«˜æ€§èƒ½ï¼Œä½†åŒæ—¶ä¹Ÿä¼šé™ä½å­˜å‚¨ç©ºé—´çš„ä½¿ç”¨æ•ˆç‡ã€‚åº”æ ¹æ®æ‚¨çš„åŸºç¡€æ¶æ„è¦æ±‚æ¥ç¡®å®šæ˜¯ä¼˜å…ˆè€ƒè™‘æ€§èƒ½è¿˜æ˜¯ç©ºé—´æ•ˆç‡ã€‚ â€‹å½“ VDO å·çš„é€»è¾‘å¤§å°è¶…è¿‡å®é™…ç‰©ç†å¤§å°æ—¶ï¼Œåº”ä½¿ç”¨ vdostats--verbose å‘½ä»¤ä¸»åŠ¨ç›‘æ§å·ç»Ÿè®¡ä¿¡æ¯ï¼Œä»¥æŸ¥çœ‹å®é™…ä½¿ç”¨æƒ…å†µã€‚ å¯ç”¨ VDO â€‹å®‰è£… VDO å’Œ kmod è½¯ä»¶åŒ…ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿä¸­å¯ç”¨ VDOã€‚ 12345[root@localhost ~]\\# yum install vdo kmod-kvdo......Is this ok [y/N]: y......complete! åˆ›å»º VDO â€‹è¦åˆ›å»º VDO å·ï¼Œè¯·è¿è¡Œ vdo create å‘½ä»¤ã€‚ 12[root@localhost ~]\\# vdo create --name=vdo1 --device=/dev/vdd --vdoLogicalSize=50G...... â€‹å¦‚æœçœç•¥é€»è¾‘å¤§å°ï¼Œåˆ™ç”Ÿæˆçš„VDOå·å°†ä¸å…¶ç‰©ç†è®¾å¤‡çš„å¤§å°ç›¸åŒã€‚ â€‹å½“ VDO å·å°±ä½æ—¶ï¼Œå¯ä»¥å°†å®ƒæ ¼å¼åŒ–ä¸ºæ‰€é€‰çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹å¹¶æŒ‚è½½äºç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ä¸‹ã€‚ åˆ†æ VDO å· â€‹è¦åˆ†æ VDO å·ï¼Œè¯·è¿è¡Œ vdostatus å‘½ä»¤ã€‚æ­¤å‘½ä»¤å°†ä»¥ YAML æ ¼å¼æ˜¾ç¤ºæœ‰å…³ VDO ç³»ç»Ÿçš„æŠ¥å‘Šä»¥åŠ VDO å·çš„çŠ¶æ€ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ˜¾ç¤º VDO å·çš„å±æ€§ã€‚ä½¿ç”¨ --name= é€‰é¡¹å¯æŒ‡å®šç‰¹å®šå·çš„åç§°ã€‚å¦‚æœçœç•¥ç‰¹å®šå·çš„åç§°ï¼Œvdostatus å‘½ä»¤çš„è¾“å‡ºä¸­å°†æ˜¾ç¤ºæ‰€æœ‰VDOå·çš„çŠ¶æ€ã€‚ 12[root@localhost ~]\\# vdo status --name=vdo1...... â€‹vdolist å‘½ä»¤æ˜¾ç¤ºå½“å‰å¯åŠ¨çš„ VDO å·çš„åˆ—è¡¨ã€‚æ‚¨å¯ä»¥åˆ†åˆ«ä½¿ç”¨ vdostart å’Œ vdostop å‘½ä»¤æ¥å¯åŠ¨å’Œåœæ­¢ VDO å·ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç®¡ç†é€»è¾‘å·","slug":"Linux | ç®¡ç†é€»è¾‘å·","date":"2022-08-15T06:42:07.887Z","updated":"2022-08-15T06:48:49.165Z","comments":true,"path":"2022-08-15-Linux | ç®¡ç†é€»è¾‘å·.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%AE%A1%E7%90%86%E9%80%BB%E8%BE%91%E5%8D%B7.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ é€»è¾‘å·ç®¡ç† (LVM) æ¦‚è¿° â€‹é€»è¾‘å·å’Œé€»è¾‘å·ç®¡ç†æœ‰åŠ©äºæ›´åŠ è½»æ¾åœ°ç®¡ç†ç£ç›˜ç©ºé—´ã€‚å¦‚æœæ‰˜ç®¡é€»è¾‘å·çš„æ–‡ä»¶ç³»ç»Ÿéœ€è¦æ›´å¤šç©ºé—´ï¼Œå¯ä»¥å°†å…¶å·ç»„ä¸­çš„å¯ç”¨ç©ºé—´åˆ†é…ç»™é€»è¾‘å·ï¼Œå¹¶ä¸”å¯ä»¥è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ã€‚å¦‚æœç£ç›˜å¼€å§‹å‡ºç°é”™è¯¯ï¼Œå¯ä»¥å°†æ›¿æ¢ç£ç›˜æ³¨å†Œä¸ºç‰©ç†å·æ”¾å…¥å·ç»„ä¸­ï¼Œå¹¶ä¸”é€»è¾‘å·çš„åŒºå—å¯è¿ç§»åˆ°æ–°ç£ç›˜ã€‚ LVM æ¦‚å¿µ å®šä¹‰ ç‰©ç†è®¾å¤‡ ç‰©ç†è®¾å¤‡æ˜¯ç”¨äºä¿å­˜é€»è¾‘å·ä¸­æ‰€å­˜å‚¨æ•°æ®çš„å­˜å‚¨è®¾å¤‡ã€‚å®ƒä»¬æ˜¯å—è®¾å¤‡ï¼Œå¯ä»¥æ˜¯ç£ç›˜åˆ†åŒºã€æ•´ä¸ªç£ç›˜ã€RAID é˜µåˆ—æˆ– SAN ç£ç›˜ã€‚è®¾å¤‡å¿…é¡»åˆå§‹åŒ–ä¸º LVM ç‰©ç†å·ï¼Œæ‰èƒ½ä¸ LVM ç»“åˆä½¿ç”¨ã€‚æ•´ä¸ªè®¾å¤‡å°†ç”¨ä½œä¸€ä¸ªç‰©ç†å·ã€‚ ç‰©ç†å·ï¼ˆPVï¼‰ åœ¨ LVM ç³»ç»Ÿä¸­ä½¿ç”¨è®¾å¤‡ä¹‹å‰ï¼Œå¿…é¡»å°†è®¾å¤‡åˆå§‹åŒ–ä¸ºç‰©ç†å·ã€‚LVM å·¥å…·ä¼šå°†ç‰©ç†å·åˆ’åˆ†ä¸ºç‰©ç†åŒºå—ï¼ˆPEï¼‰ï¼Œå®ƒä»¬æ˜¯å……å½“ç‰©ç†å·ä¸Šæœ€å°å­˜å‚¨å—çš„å°å—æ•°æ®ã€‚ å·ç»„ï¼ˆVGï¼‰ å·ç»„æ˜¯å­˜å‚¨æ± ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·ç»„æˆã€‚å®ƒåœ¨åŠŸèƒ½ä¸Šä¸åŸºæœ¬å­˜å‚¨ä¸­çš„æ•´ä¸ªç£ç›˜ç›¸å½“ã€‚ä¸€ä¸ª PV åªèƒ½åˆ†é…ç»™ä¸€ä¸ª VGã€‚VG å¯ä»¥åŒ…å«æœªä½¿ç”¨çš„ç©ºé—´å’Œä»»æ„æ•°ç›®çš„é€»è¾‘å·ã€‚ é€»è¾‘å·ï¼ˆLVï¼‰ é€»è¾‘å·æ ¹æ®å·ç»„ä¸­çš„ç©ºé—²ç‰©ç†åŒºå—åˆ›å»ºï¼Œæä¾›åº”ç”¨ã€ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿæ‰€ä½¿ç”¨çš„ â€œå­˜å‚¨â€ è®¾å¤‡ã€‚LV æ˜¯é€»è¾‘åŒºå—ï¼ˆLEï¼‰çš„é›†åˆï¼ŒLE æ˜ å°„åˆ°ç‰©ç†åŒºå—ï¼ˆPV çš„æœ€å°å­˜å‚¨å—ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ª LE å°†æ˜ å°„åˆ°ä¸€ä¸ª PEã€‚è®¾ç½®ç‰¹å®š LV é€‰é¡¹å°†ä¼šæ›´æ”¹æ­¤æ˜ å°„ï¼›ä¾‹å¦‚ï¼Œé•œåƒä¼šå¯¼è‡´æ¯ä¸ª LE æ˜ å°„åˆ°ä¸¤ä¸ª PEã€‚ å®æ–½ LVM å­˜å‚¨ â€‹åˆ›å»º LVM å­˜å‚¨éœ€è¦å‡ ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šè¦ä½¿ç”¨çš„ç‰©ç†è®¾å¤‡ã€‚åœ¨ç»„è£…å®Œä¸€ç»„åˆé€‚çš„è®¾å¤‡ä¹‹åï¼Œç³»ç»Ÿä¼šå°†å®ƒä»¬åˆå§‹åŒ–ä¸ºç‰©ç†å·ï¼Œä»¥ä¾¿å°†å®ƒä»¬è¯†åˆ«ä¸ºå±äº LVMã€‚è¿™äº›ç‰©ç†å·éšæœºè¢«åˆå¹¶åˆ°å·ç»„ä¸­ã€‚æ­¤æ—¶å°†ä¼šåˆ›å»ºä¸€ä¸ªç£ç›˜ç©ºé—´æ± ï¼Œä»ä¸­å¯ä»¥åˆ†é…é€»è¾‘å·ã€‚åˆ©ç”¨å·ç»„çš„å¯ç”¨ç©ºé—´åˆ›å»ºçš„é€»è¾‘å·å¯ä»¥æ ¼å¼åŒ–ä¸ºæ–‡ä»¶ç³»ç»Ÿã€ä½œä¸ºäº¤æ¢ç©ºé—´æ¿€æ´»ï¼Œä¹Ÿå¯ä»¥å®ç°æŒä¹…æŒ‚è½½æˆ–æ¿€æ´»ã€‚ â€‹LVM æä¾›äº†ä¸€ç»„å…¨é¢çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå®æ–½å’Œç®¡ç† LVM å­˜å‚¨ã€‚è¿™äº›å‘½ä»¤è¡Œå·¥å…·å¯ç”¨åœ¨è„šæœ¬ä¸­ï¼Œä»è€Œä½¿å®ƒä»¬æ›´é€‚äºè‡ªåŠ¨åŒ–ã€‚ åˆ›å»ºé€»è¾‘å· â€‹åˆ›å»ºé€»è¾‘å·çš„æ­¥éª¤å¦‚ä¸‹ï¼š å‡†å¤‡ç‰©ç†è®¾å¤‡ â€‹ä½¿ç”¨ partedã€gdisk æˆ– fdisk åˆ›å»ºæ–°åˆ†åŒºï¼Œä»¥ä¾¿ä¸ LVM ç»“åˆä½¿ç”¨ã€‚åœ¨ LVM åˆ†åŒºä¸Šï¼Œå§‹ç»ˆå°†åˆ†åŒºç±»å‹è®¾ç½®ä¸º Linux LVMï¼›å¯¹äº MBR åˆ†åŒºï¼Œä½¿ç”¨ 0x8eã€‚å¦‚æœ‰å¿…è¦ï¼Œä½¿ç”¨ partprobe å‘å†…æ ¸æ³¨å†Œæ–°åˆ†åŒºã€‚ â€‹ä¹Ÿå¯ä»¥ä½¿ç”¨å®Œæ•´ç£ç›˜ã€RAID é˜µåˆ—æˆ– SAN ç£ç›˜ã€‚ â€‹åªæœ‰å½“æ²¡æœ‰å·²å‡†å¤‡å¥½çš„ç‰©ç†è®¾å¤‡å¹¶ä¸”éœ€è¦éœ€è¦æ–°ç‰©ç†å·æ¥åˆ›å»ºæˆ–æ‰©å±•å·ç»„æ—¶ï¼Œæ‰éœ€è¦å‡†å¤‡ç‰©ç†è®¾å¤‡ã€‚ 1234[root@localhost ~]\\# parted -s /dev/nvme1n0 mkpart primary 1MiB 769MiB[root@localhost ~]\\# parted -s /dev/nvme1n0 mkpart primary 770MiB 1026MiB[root@localhost ~]\\# parted -s /dev/nvme1n0 mkpart set 1 lvm on[root@localhost ~]\\# parted -s /dev/nvme1n0 mkpart set 2 lvm on åˆ›å»ºç‰©ç†å· â€‹ä½¿ç”¨ pvcreate å°†åˆ†åŒºï¼ˆæˆ–å…¶ä»–ç‰©ç†è®¾å¤‡ï¼‰æ ‡è®°ä¸ºç‰©ç†å·ã€‚pvcreate å‘½ä»¤ä¼šå°†ç‰©ç†å·åˆ†æˆè‹¥å¹²å›ºå®šå¤§å°çš„ç‰©ç†åŒºå—ï¼ˆPEï¼‰ï¼Œå¦‚ 4MiB å—ã€‚ 1[root@localhost ~]\\# pvcreate /deb/nvme0n1p2 /dev/nvme0n1p1 â€‹æ­¤å‘½ä»¤ä¼šå°†è®¾å¤‡ /dev/nvme0n1p2 å’Œ /dev/nvme0n1p1 æ ‡è®°ä¸º PVï¼Œå‡†å¤‡å¥½åˆ†é…åˆ°å·ç»„ä¸­ã€‚ â€‹ä»…å½“æ²¡æœ‰ç©ºé—²çš„ PV å¯ä»¥åˆ›å»ºæˆ–æ‰©å±• VG æ—¶ï¼Œæ‰éœ€è¦åˆ›å»º PVã€‚ åˆ›å»ºå·ç»„ â€‹ä½¿ç”¨ vgcreate å°†ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·ç»“åˆä¸ºä¸€ä¸ªå·ç»„ã€‚å·ç»„åœ¨åŠŸèƒ½ä¸Šä¸ç¡¬ç›˜ç›¸å½“ï¼›åˆ©ç”¨å·ç»„ä¸­çš„å¯ç”¨ç‰©ç†åŒºå—æ± å¯ä»¥åˆ›å»ºé€»è¾‘å·ã€‚ â€‹vgcreate å‘½ä»¤è¡Œç”±å·ç»„ååè·Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¦åˆ†é…ç»™æ­¤å·ç»„çš„ç‰©ç†å·ç»„æˆã€‚ 1[root@localhost ~]\\# vgcreate vg01 /dev/nvme0n1p1 /dev/nvme0n1p2 â€‹æ­¤å‘½ä»¤å°†åˆ›å»ºåä¸º vg01 çš„ VGï¼Œä»–çš„å¤§å°æ˜¯ /dev/nvme0n1p1 å’Œ /dev/nvme0n1p2 ä¸¤ä¸ª PV çš„å¤§å°ä¹‹å’Œï¼ˆä»¥ PE å•ä½è®¡ï¼‰ã€‚ â€‹ä»…å½“ VG å°šä¸å­˜åœ¨æ—¶ï¼Œæ‰éœ€è¦åˆ›å»º VGã€‚å¯èƒ½ä¼šå‡ºäºç®¡ç†åŸå› åˆ›å»ºé¢å¤–çš„ VGï¼Œç”¨äºç®¡ç† PV å’Œ LV çš„ä½¿ç”¨ã€‚å¦åˆ™ï¼Œå¯åœ¨éœ€è¦æ—¶æ‰©å±•ç°æœ‰ VG ä»¥å®¹çº³æ–°çš„ LVã€‚ åˆ›å»ºé€»è¾‘å· â€‹ä½¿ç”¨ lvcreate å¯æ ¹æ®å·ç»„ä¸­çš„å¯ç”¨ç‰©ç†åŒºå—åˆ›å»ºæ–°çš„é€»è¾‘å·ã€‚lvcreate å‘½ä»¤ä¸­è‡³å°‘åŒ…å«ç”¨äºè®¾ç½® LV åç§°çš„ -n é€‰é¡¹ã€ç”¨äºè®¾ç½® LV å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰çš„ -L é€‰é¡¹æˆ–ç”¨äºè®¾ç½® LV å¤§å°ï¼ˆä»¥åŒºå—æ•°ä¸ºå•ä½ï¼‰çš„ -l é€‰é¡¹ï¼Œä»¥åŠæ‰˜ç®¡æ­¤é€»è¾‘å·çš„å·ç»„çš„åç§°ã€‚ 1[root@localhost ~]\\# lvcreate -n 1v01 -L 700M vg01 â€‹è¿™ä¼šåœ¨ VG vg01 ä¸­åˆ›å»ºä¸€ä¸ªåä¸º lv01ã€å¤§å°ä¸º 700 MiB çš„LVã€‚é’ˆå¯¹æ‰€è¯·æ±‚çš„å¤§å°ï¼Œå¦‚æœå·ç»„æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„å¯ç”¨ç‰©ç†åŒºå—ï¼Œæ­¤å‘½ä»¤å°†å¤±è´¥ã€‚å¦å¤–è¯·æ³¨æ„ï¼Œå¦‚æœå¤§å°æ— æ³•å®Œå…¨åŒ¹é…ï¼Œåˆ™å°†å››èˆäº”å…¥ä¸ºç‰©ç†åŒºå—å¤§å°çš„å€æ•°ã€‚ â€‹æ‚¨å¯ä»¥ä½¿ç”¨ -L é€‰é¡¹æ¥æŒ‡å®šå¤§å°ï¼Œå®ƒé¢„æœŸå¤§å°å•ä½ä¸ºå­—èŠ‚ã€å…†å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶å…†å­—èŠ‚ï¼Œ1048576 å­—èŠ‚ï¼‰ã€åƒå…†å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶åƒå…†å­—èŠ‚ï¼‰ç­‰ç­‰ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ -l é€‰é¡¹ï¼Œå®ƒé¢„æœŸå¤§å°æŒ‡å®šä¸ºè‹¥å¹²ç‰©ç†åŒºå—ã€‚ â€‹ä»¥ä¸‹åˆ—è¡¨æä¾›äº†ä¸€äº›åˆ›å»º LV çš„ç¤ºä¾‹ï¼š lvcreate -L 128Mï¼šå°†é€»è¾‘å·çš„å¤§å°ç¡®å®šä¸ºæ­£å¥½ 128MiBã€‚ lvcreate -l 128ï¼šå°†é€»è¾‘å·çš„å¤§å°ç¡®å®šä¸ºæ­£å¥½ 128 ä¸ªåŒºå—ã€‚å­—èŠ‚æ€»æ•°å–å†³äºåŸºç¡€ç‰©ç†å·ä¸Šç‰©ç†åŒºå—å—çš„å¤§å°ã€‚ ä¸åŒçš„å·¥å…·å°†ä½¿ç”¨ä¼ ç»Ÿåç§° /dev/vgname/lvname æˆ–å†…æ ¸è®¾å¤‡æ˜ å°„ç¨‹åºå /dev/mapper/vgname-lvnameï¼Œæ˜¾ç¤ºé€»è¾‘å·åã€‚ æ·»åŠ æ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ mkfs åœ¨æ–°é€»è¾‘å·ä¸Šåˆ›å»º xfs æ–‡ä»¶ç³»ç»Ÿã€‚æˆ–è€…ï¼Œæ ¹æ®é¦–é€‰æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼Œä¾‹å¦‚ ext4ã€‚ 1[root@localhost ~]\\# lvcreate -n 1v01 -L 700M vg01 â€‹è¦ä½¿æ–‡ä»¶ç³»ç»Ÿåœ¨é‡æ–°å¯åŠ¨åä¾ç„¶å¯ç”¨ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š ä½¿ç”¨ mkdir åˆ›å»ºæŒ‚è½½ç‚¹ã€‚ 1[root@localhost ~]\\# mkdir /mnt/data å‘ /etc/fstab æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ¡ç›®ï¼š 1/dev/vg01/lv01 /mnt/data xfs defaults 1 2 æŒ‰åç§°æŒ‚è½½é€»è¾‘å·ç­‰åŒäºæŒ‰ UUID è¿›è¡ŒæŒ‚è½½ï¼Œå› ä¸ºå³ä½¿æœ€åˆæŒ‰åç§°å°†å®ƒä»¬æ·»åŠ åˆ°å·ç»„ä¸­ï¼ŒLVM ä¹Ÿä¼šæ ¹æ® UUID æŸ¥æ‰¾ç‰©ç†å·ã€‚ æ‰§è¡Œ mount /mnt/dataï¼ŒæŒ‚è½½åˆšåˆšåœ¨ /etc/fstab ä¸­æ·»åŠ çš„æ–‡ä»¶ç³»ç»Ÿã€‚ 1[root@localhost ~]\\# mount /mnt/data åˆ é™¤é€»è¾‘å· â€‹åˆ é™¤é€»è¾‘å·çš„æ­¥éª¤å¦‚ä¸‹ï¼š å‡†å¤‡æ–‡ä»¶ç³»ç»Ÿ â€‹å°†å¿…é¡»ä¿ç•™çš„æ‰€æœ‰æ•°æ®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ä½¿ç”¨ umount å‘½ä»¤å¸è½½æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶ååˆ é™¤ä¸è¯¥æ–‡ä»¶ç³»ç»Ÿå…³è”çš„æ‰€æœ‰ /etc/fstab æ¡ç›®ã€‚ 1[root@localhost ~]\\# umount /mnt/data æ­¤æ“ä½œä¼šç ´åæ‰€å­˜å‚¨çš„æ•°æ®ï¼Œä¸€å®šè¦æ³¨æ„å¤‡ä»½æˆ–ç§»åŠ¨æ•°æ®ã€‚ åˆ é™¤é€»è¾‘å· â€‹ä½¿ç”¨ lvremove DEVICE_NAME åˆ é™¤ä¸å†éœ€è¦çš„é€»è¾‘å·ã€‚ 1[root@localhost ~]\\# lvremove /dev/vg01/lv01 â€‹è¿è¡Œæ­¤å‘½ä»¤ä¹‹å‰ï¼Œå¸è½½ LV æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨åˆ é™¤ LV ä¹‹å‰ï¼Œè¯¥å‘½ä»¤ä¼šæç¤ºè¿›è¡Œç¡®è®¤ã€‚LV çš„ç‰©ç†åŒºå—ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶å¯ç”¨äºåˆ†é…ç»™å·ç»„ä¸­çš„ç°æœ‰ LV æˆ–æ–° LVã€‚ åˆ é™¤å·ç»„ â€‹ä½¿ç”¨ vgremove VG_NAME åˆ é™¤ä¸å†éœ€è¦çš„å·ç»„ã€‚ 1[root@localhost ~]\\# vgremove vg01 â€‹VG çš„ç‰©ç†å·ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶å¯ç”¨äºåˆ†é…ç»™ç³»ç»Ÿä¸­çš„ç°æœ‰ VG æˆ–æ–° VGã€‚ åˆ é™¤ç‰©ç†å· â€‹ä½¿ç”¨ pvremove åˆ é™¤ä¸å†éœ€è¦çš„ç‰©ç†å·ã€‚ä½¿ç”¨ç©ºæ ¼åˆ†éš”çš„ PV è®¾å¤‡åˆ—è¡¨åŒæ—¶åˆ é™¤å¤šä¸ª PVã€‚æ­¤å‘½ä»¤å°†ä»åˆ†åŒºï¼ˆæˆ–ç£ç›˜ï¼‰ä¸­åˆ é™¤ PV å…ƒæ•°æ®ã€‚åˆ†åŒºç°å·²ç©ºé—²ï¼Œå¯é‡æ–°åˆ†é…æˆ–é‡æ–°æ ¼å¼åŒ–ã€‚ 1[root@localhost ~]\\# pvremove /dev/nvme0n1p2 /dev/nvmen1p1 æŸ¥çœ‹ LVM çŠ¶æ€ä¿¡æ¯ ç‰©ç†å· â€‹ä½¿ç”¨ pvdisplay æ˜¾ç¤ºæœ‰å…³ç‰©ç†å·çš„ä¿¡æ¯ã€‚è¦åˆ—å‡ºæœ‰å…³æ‰€æœ‰ç‰©ç†å·çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„å‘½ä»¤ã€‚è¦åˆ—å‡ºæœ‰å…³ç‰¹å®šç‰©ç†å·çš„ä¿¡æ¯ï¼Œå¯ä»¥å°†ç›¸åº”çš„è®¾å¤‡åç§°ä¼ ç»™è¯¥å‘½ä»¤ã€‚ 123456789101112131415161718192021[root@localhost ~]\\# vgdisplay vg01--- Volume group ---VG Name vg01System IDFormat lvm2Metadata Areas 2Metadata Sequence No 2VG Access read/writeVG Status resizableMAX LV 0Cur LV 1Open LV 1Max PV 0Cur PV 2Act PV 2VG Size 1016.00 MiBPE Size 4.00MiBTotal PE 254Alloc PE / Size 175 / 700.00 MiBFree PE / Size 79 / 316.00 MiBVG UUID 3snNw3-CF71-CcYG-Llk1-p6EY-rHEv-xFUSez VG Name å·ç»„çš„åç§°ï¼› VG Size æ˜¯å­˜å‚¨æ± å¯ç”¨äºé€»è¾‘å·åˆ†é…çš„æ€»å¤§å°ï¼› Total PE æ˜¯ä»¥ PE å•ä½è¡¨ç¤ºçš„æ€»å¤§å°ï¼› Free PE / Size æ˜¾ç¤º VG ä¸­æœ‰å¤šå°‘ç©ºé—²ç©ºé—´å¯ç”¨äºåˆ†é…ç»™æ–° LV æˆ–æ‰©å±•ç°æœ‰ LVã€‚ é€»è¾‘å· â€‹ä½¿ç”¨ lvdisplay æ˜¾ç¤ºæœ‰å…³é€»è¾‘å·çš„ä¿¡æ¯ã€‚å¦‚æœæœªå‘å‘½ä»¤æä¾›ä»»ä½•å‚æ•°ï¼Œåˆ™å°†æ˜¾ç¤ºæœ‰å…³æ‰€æœ‰ LV çš„ä¿¡æ¯ï¼›å¦‚æœæä¾›äº† LV è®¾å¤‡åç§°ä½œä¸ºå‚æ•°ï¼Œæ­¤å‘½ä»¤å°†æ˜¾ç¤ºæœ‰å…³è¯¥ç‰¹å®šè®¾å¤‡çš„ä¿¡æ¯ã€‚ 1234567891011121314151617[root@localhost ~]\\# lvdisplay /dev/vg01/lv01--- Logical volume ---LV Path /dev/vg01/lv01LV Name lv01VG Name vg01LV UUID 5IyRea-WBZw-xLHK-3h2a-IuVN-YaeZ-i3IRrNLV Write Access read / writeLV Creation host, time host.lab.example.com, 2019-03-28 17:17:47 -0400LV Status available# open 1LV Size 700MiBCurrent LE 175Segments 1Allocation inheritRead ahead sectors auto- current set to 256Block device 252:0 LV Path æ˜¾ç¤ºé€»è¾‘å·çš„è®¾å¤‡åç§°ï¼› æŸäº›å·¥å…·å¯èƒ½ä¼šå°†è®¾å¤‡åæŠ¥å‘Šä¸º /dev/mapper//vgname-lvnameï¼›ä¸¤ä¸ªåç§°éƒ½è¡¨ç¤ºåŒä¸€ LVã€‚ VG Name æ˜¾ç¤ºä»å…¶åˆ†é… LV çš„å·ç»„ã€‚ LV Size æ˜¾ç¤º LV çš„æ€»å¤§å°ã€‚ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå·¥å…·ç¡®å®šå¯ç”¨ç©ºé—´å’Œæ•°æ®å­˜å‚¨çš„å·²ç”¨ç©ºé—´ã€‚ Current LE æ˜¾ç¤ºæ­¤ LV ä½¿ç”¨çš„é€»è¾‘åŒºå—æ•°ã€‚LE é€šå¸¸æ˜ å°„åˆ° VG ä¸­çš„ç‰©ç†åŒºå—ï¼Œå¹¶å› æ­¤æ˜ å°„åˆ°ç‰©ç†å·ã€‚ æ‰©å±•é€»è¾‘å· æ‰©å±•å’Œç¼©å‡å·ç»„ â€‹æ‰©å±•å·ç»„æŒ‡å¯ä»¥é€šè¿‡æ·»åŠ é¢å¤–çš„ç‰©ç†å·å¹¶ä¸ºé€»è¾‘å·åˆ†é…æ–°çš„ç‰©ç†åŒºå—æ¥ä¸ºå·ç»„å¢åŠ æ›´å¤šç£ç›˜ç©ºé—´ã€‚ â€‹ç¼©å‡å·ç»„æŒ‡å°†æœªä½¿ç”¨çš„ç‰©ç†å·ä»å·ç»„ä¸­åˆ é™¤ã€‚é¦–å…ˆï¼Œä½¿ç”¨ pvmove å‘½ä»¤å°†æ•°æ®ä»ä¸€ä¸ªç‰©ç†å·ä¸Šçš„åŒºå—ç§»åŠ¨åˆ°å·ç»„ä¸­å…¶ä»–ç‰©ç†å·ä¸Šçš„åŒºå—ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å°†æ–°ç£ç›˜æ·»åŠ åˆ°ç°æœ‰å·ç»„ï¼Œå°†æ•°æ®ä»è¾ƒæ—§æˆ–è¾ƒæ…¢çš„ç£ç›˜ç§»åŠ¨åˆ°æ–°ç£ç›˜ï¼Œå¹¶å°†æ—§ç£ç›˜ä»å·ç»„ä¸­åˆ é™¤ã€‚å¯åœ¨å·ç»„ä¸­çš„é€»è¾‘å·æ­£åœ¨ä½¿ç”¨æ—¶æ‰§è¡Œè¿™äº›æ“ä½œã€‚ ä»¥ä¸‹æ“ä½œä»¥ /dev/nvme0n1 ä¸ºä¾‹ï¼Œå‘½ä»¤å‚æ•°éœ€ä»¥å®é™…æ“ä½œçš„ç£ç›˜ä¸ºå‡†ã€‚ æ‰©å±•å·ç»„ â€‹æ‰©å±•å·ç»„åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š å‡†å¤‡ç‰©ç†è®¾å¤‡å¹¶åˆ›å»ºç‰©ç†å· åƒåˆ›å»ºæ–°å·ç»„ä¸€æ ·ï¼Œå¦‚æœè¿˜æ²¡æœ‰å‡†å¤‡å¥½ç‰©ç†å·ï¼Œåˆ™å¿…é¡»åˆ›å»ºæ–°åˆ†åŒºï¼Œå¹¶å‡†å¤‡å¥½å°†å…¶ç”¨ä½œç‰©ç†å·ã€‚ 123[root@localhost ~]\\# parted -s /dev/nvme0n1 mkpart primary 1027MiB 1539MiB[root@localhost ~]\\# parted -s /dev/nvme0n1 set 3 lvm on[root@localhost ~]\\# pvcreate /dev/nvme0n1p3 â€‹ä»…å½“æ²¡æœ‰ç©ºé—²çš„ PV å¯ä»¥æ‰©å±• VG æ—¶ï¼Œæ‰éœ€è¦åˆ›å»º PVã€‚ æ‰©å±•å·ç»„ ä½¿ç”¨ vgextend å‘å·ç»„ä¸­æ·»åŠ æ–°ç‰©ç†å·ã€‚ä½¿ç”¨ VG åç§°å’Œ PV è®¾å¤‡åç§°ä½œä¸º vgextend çš„å‚æ•°ã€‚ 1[root@localhost ~]\\# vgextend vg01 /dev/nvme0n1p3 â€‹æ­¤å‘½ä»¤ä¼šå¯¹ vg01 VG è¿›è¡Œæ‰©å±•ï¼Œæ‰©å±•å¹…åº¦ä¸º /dev/nvme0n1p3 PV çš„å¤§å°ã€‚ éªŒè¯æ–°ç©ºé—´æ˜¯å¦å¯ç”¨ ä½¿ç”¨ vgdisplay ç¡®è®¤é¢å¤–çš„ç‰©ç†åŒºå—æ˜¯å¦å¯ç”¨ã€‚æ£€æŸ¥è¾“å‡ºä¸­çš„ Free PE / Sizeã€‚ä»–ä¸åº”å½“ä¸ºé›¶ã€‚ 123456[root@localhost ~]\\# vgdisplay vg01--- Volume group ---VG Name vg01......Free PE / Size 178 / 712.00 MiB...... ç¼©å‡å·ç»„ â€‹ç¼©å‡å·ç»„åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š ç§»åŠ¨ç‰©ç†åŒºå— ä½¿ç”¨ pvmove PV_DEVICE_NAME å°†è¦åˆ é™¤çš„ç‰©ç†å·ä¸­çš„æ‰€æœ‰ç‰©ç†åŒºå—éƒ½é‡æ–°æ”¾ç½®åˆ°å·ç»„ä¸­çš„å…¶ä»–ç‰©ç†å·ä¸Šã€‚å…¶ä»–ç‰©ç†å·ä¸­å¿…é¡»æœ‰è¶³å¤Ÿæ•°é‡çš„ç©ºé—²åŒºå—æ¥å®¹çº³è¿™äº›ç§»åŠ¨å†…å®¹ã€‚ä»…å½“ VG ä¸­å­˜åœ¨è¶³å¤Ÿçš„ç©ºé—²åŒºå—ï¼Œä¸”æ‰€æœ‰è¿™äº›åŒºå—éƒ½æ¥è‡ªå…¶ä»– PV æ—¶ï¼Œæ‰èƒ½æ‰§è¡Œæ­¤æ“ä½œã€‚ 1[root@localhost ~]\\# pvmove /dev/nvme0n1p3 â€‹æ­¤å‘½ä»¤ä¼šå°† PE ä» /dev/nvme0n1p3 ç§»åŠ¨åˆ°åŒä¸€ VG ä¸­å…·æœ‰ç©ºé—² PE çš„ PVã€‚ ä½¿ç”¨ pvmove å‰éœ€å¤‡ä»½å·ç»„ä¸­æ‰€æœ‰é€»è¾‘å·ä¸Šå­˜å‚¨çš„æ•°æ®ã€‚å¦‚æœæ“ä½œæœŸé—´æ„å¤–æ–­ç”µï¼Œå¯èƒ½ä¼šå¯¼è‡´å·ç»„çŠ¶æ€ä¸ä¸€è‡´ã€‚è¿™å¯èƒ½å¯¼è‡´å·ç»„ä¸­é€»è¾‘å·ä¸Šçš„æ•°æ®ä¸¢å¤±ã€‚ ç¼©å‡å·ç»„ ä½¿ç”¨ vgreduce VG_NAME PV_DEVICE_NAME ä»å·ç»„ä¸­åˆ é™¤ç‰©ç†å·ã€‚ 1[root@localhost ~]\\# vgreduce vg01 /dev/nvme0n1p3 â€‹å®ƒå°†ä» vg01 VG ä¸­åˆ é™¤ /dev/nvme0n1p3 PVï¼Œå¹¶å¯ä»¥æ·»åŠ åˆ°å…¶ä»– VGã€‚æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ pvremove æ°¸ä¹…åœæ­¢å°†è®¾å¤‡ç”¨ä½œ PVã€‚ æ‰©å±•é€»è¾‘å·å’Œ XFS æ–‡ä»¶ç³»ç»Ÿ â€‹é€»è¾‘å·çš„ä¸€ä¸ªä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿåœ¨ä¸åœæœºçš„æƒ…å†µä¸‹å¢åŠ å…¶å¤§å°ã€‚å¯å°†å·ç»„ä¸­çš„ç©ºé—²ç‰©ç†åŒºå—æ·»åŠ åˆ°é€»è¾‘å·ä»¥æ‰©å±•å…¶å®¹é‡ï¼Œç„¶åå¯ä½¿ç”¨é€»è¾‘å·æ‰©å±•æ‰€åŒ…å«çš„æ–‡ä»¶ç³»ç»Ÿã€‚ æ‰©å±•é€»è¾‘å· â€‹ç¼©å‡é€»è¾‘å·åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š éªŒè¯å·ç»„æ˜¯å¦å…·æœ‰å¯ç”¨çš„ç©ºé—´ ä½¿ç”¨ vgdisplay éªŒè¯æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç‰©ç†åŒºå—å¯ä¾›ä½¿ç”¨ã€‚ 123456[root@localhost ~]\\# vgdisplay vg01--- Volume group ---VG Name vg01......Free PE / Size 178 / 712.00 MiB...... æ‰©å±•é€»è¾‘å· ä½¿ç”¨ lvextend LV_DEVICE_NAME å°†é€»è¾‘å·æ‰©å±•ä¸ºæ–°çš„å¤§å°ã€‚ 1[root@localhost ~]\\# lvextend -L +300M /dev/vg01/lv01 â€‹æ­¤å‘½ä»¤ä¼šå°†é€»è¾‘å· lv01 çš„å¤§å°å¢åŠ  300 MiBã€‚è¯·æ³¨æ„å¤§å°å‰é¢çš„åŠ å·ï¼ˆ+ï¼‰ï¼Œå®ƒè¡¨ç¤ºå‘ç°æœ‰å¤§å°å¢åŠ æ­¤å€¼ï¼›å¦‚æ— è¯¥ç¬¦å·ï¼Œè¯¥å€¼å®šä¹‰ LV çš„æœ€ç»ˆå¤§å°ã€‚ â€‹å’Œ lvcreate ä¸€æ ·ï¼Œå­˜åœ¨ä¸åŒçš„æ–¹æ³•æ¥æŒ‡å®šå¤§å°ï¼š-l é€‰é¡¹é¢„æœŸä»¥ç‰©ç†åŒºå—æ•°ä½œä¸ºå‚æ•°ã€‚-L é€‰é¡¹åˆ™é¢„æœŸä»¥å¤§å°ï¼ˆå•ä½ä¸ºå­—èŠ‚ã€å…†å­—èŠ‚ã€åƒå…†å­—èŠ‚ç­‰ç­‰ï¼‰ä½œä¸ºå‚æ•°ã€‚ â€‹ä»¥ä¸‹åˆ—è¡¨æä¾›äº†ä¸€äº›æ‰©å±• LV çš„ç¤ºä¾‹ã€‚ å‘½ä»¤ ç»“æœ lvextend -l 128 å°†é€»è¾‘å·å¤§å°è°ƒæ•´ä¸ºæ­£å¥½ 128 ä¸ªåŒºå—ã€‚ lvextend -l +128 å‘é€»è¾‘å·çš„å½“å‰å¤§å°æ·»åŠ  128 ä¸ªåŒºå—ã€‚ lvextend -L 128M å°†é€»è¾‘å·çš„å¤§å°è°ƒæ•´ä¸ºæ­£å¥½ 128 MiBã€‚ lvextend -L +128M å‘é€»è¾‘å·çš„å½“å‰å¤§å°æ·»åŠ  128 MiBã€‚ lvextend -l +50%FREE å‘ LV æ·»åŠ  VG ä¸­å½“å‰å¯ç”¨ç©ºé—´çš„ 50%ã€‚ æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ xfs_growfs mountpoint å¯ä»¥æ‰©å±•æ–‡ä»¶ç³»ç»Ÿä»¥å ç”¨å·²æ‰©å±•çš„ LVã€‚ä½¿ç”¨ xfs_growfs å‘½ä»¤æ—¶ï¼Œå¿…é¡»æŒ‚è½½ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°æ—¶ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨è¯¥æ–‡ä»¶ç³»ç»Ÿã€‚ 1[root@localhost ~]\\# xfs_growfs /mnt/data å¸¸è§é”™è¯¯æ˜¯è¿è¡Œ lvextend ä½†å¿˜è®°è¿è¡Œ xfs_growfsã€‚è¿ç»­è¿è¡Œä¸¤ä¸ªæ­¥éª¤çš„ä¸€ç§æ›¿ä»£æ–¹æ³•æ˜¯åœ¨ lvextend å‘½ä»¤ä¸­åŒ…å« -r é€‰é¡¹ã€‚è¿™å°†ä½¿ç”¨ fsadm åœ¨æ‰©å±• LV åè°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ã€‚å®ƒå¯ä»¥ç”¨äºå¤šç§ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚ â€‹éªŒè¯å·²æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„æ–°å¤§å°ï¼š 1[root@localhost ~]\\# df -h /mountpoint æ‰©å±•é€»è¾‘å·å’Œ EXT4 æ–‡ä»¶ç³»ç»Ÿ â€‹åŒæ ·éœ€è¦å…ˆæ‰©å±•é€»è¾‘å·ï¼Œå‚è€ƒ c. æ‰©å±•é€»è¾‘å·å’Œ XFS æ–‡ä»¶ç³»ç»Ÿ ä¸­çš„ æ‰©å±•é€»è¾‘å· ä¸€èŠ‚ã€‚è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°æ—¶ä¸ XFS ä¸åŒã€‚ éªŒè¯å·ç»„æ˜¯å¦å…·æœ‰å¯ç”¨çš„ç©ºé—´ ä½¿ç”¨ vgdisplay VGNAME éªŒè¯å·ç»„ä¸­æ˜¯å¦æœ‰è¶³å¤Ÿæ•°é‡çš„ç‰©ç†åŒºå—å¯ä¾›ä½¿ç”¨ã€‚ æ‰©å±•é€»è¾‘å· ä½¿ç”¨ lvextend -l +extents /dev/vgname/lvname å¯¹é€»è¾‘å· /dev/vgname/lvname è¿›è¡Œæ‰©å±•ï¼Œæ‰©å±•çš„å¹…åº¦ä¸º extents å€¼ã€‚ æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ resize2fs /dev/vgname/lvname å¯ä»¥æ‰©å±•æ–‡ä»¶ç³»ç»Ÿå·²å ç”¨æ–°æ‰©å±•çš„ LVã€‚è¿è¡Œæ‰©å±•å‘½ä»¤æ—¶ï¼Œå¯ä»¥æŒ‚è½½å¹¶ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥åŒ…å« -p é€‰é¡¹ä»¥ç›‘æ§è°ƒæ•´å¤§å°æ“ä½œçš„è¿›åº¦ã€‚ 1[root@localhost ~]\\# resize2fs -p /dev/vgname/lvname xfs_growfs å’Œ resize2fs ä¼ é€’çš„å‚æ•°ç±»å‹ä¸åŒï¼Œå‰è€…ä¼ æŒ‚è½½ç‚¹ã€åè€…ä¼ é€»è¾‘å·åç§°ã€‚ æ‰©å±•é€»è¾‘å·å’Œäº¤æ¢ç©ºé—´ â€‹æ ¼å¼åŒ–ä¸ºäº¤æ¢ç©ºé—´çš„é€»è¾‘å·å¿…é¡»å¸è½½åæ‰èƒ½è¿›è¡Œæ‰©å±•ã€‚ éªŒè¯å·ç»„æ˜¯å¦å…·æœ‰å¯ç”¨çš„ç©ºé—´ ä½¿ç”¨ vgdisplay VGNAME éªŒè¯å·ç»„ä¸­æ˜¯å¦æœ‰è¶³å¤Ÿæ•°é‡çš„ç‰©ç†åŒºå—å¯ä¾›ä½¿ç”¨ã€‚ åœç”¨äº¤æ¢ç©ºé—´ ä½¿ç”¨ swapoff -v /dev/vgname/lvname å¯ä»¥åœç”¨é€»è¾‘å·ä¸Šçš„äº¤æ¢ç©ºé—´ã€‚ ç³»ç»Ÿå¿…é¡»æœ‰è¶³å¤Ÿå†…å­˜æˆ–äº¤æ¢ç©ºé—´ä»¥ä¾¿è¢«åœç”¨çš„é€»è¾‘å·ä¸Šçš„äº¤æ¢ç©ºé—´ä¸Šçš„å†…å®¹å¯ä»¥è½¬ç§»åˆ°å®ƒä»¬ä¸Šã€‚ æ‰©å±•é€»è¾‘å· ä½¿ç”¨ lvextend -l +extents /dev/vgname/lvname å¯å¯¹é€»è¾‘å· /dev/vgname/lvname è¿›è¡Œæ‰©å±•ï¼Œæ‰©å±•çš„å¹…åº¦ä¸º extents å€¼ã€‚ å°†é€»è¾‘å·æ ¼å¼åŒ–ä¸ºäº¤æ¢ç©ºé—´ ä½¿ç”¨ mkswap /dev/vgname/lvname å¯å°†æ•´ä¸ªé€»è¾‘å·æ ¼å¼åŒ–ä¸ºäº¤æ¢ç©ºé—´ã€‚ æ¿€æ´»äº¤æ¢ç©ºé—´ ä½¿ç”¨ swapon -va /dev/vgname/lvname å¯ä»¥æ¿€æ´»é€»è¾‘å·ä¸Šçš„äº¤æ¢ç©ºé—´ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"åŸºæœ¬çš„å­˜å‚¨ç®¡ç†","slug":"Linux | åŸºæœ¬çš„å­˜å‚¨ç®¡ç†","date":"2022-08-15T06:31:35.176Z","updated":"2022-08-15T06:40:36.998Z","comments":true,"path":"2022-08-15-Linux | åŸºæœ¬çš„å­˜å‚¨ç®¡ç†.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ·»åŠ åˆ†åŒºã€æ–‡ä»¶ç³»ç»Ÿå’ŒæŒä¹…æŒ‚è½½ ç£ç›˜åˆ†åŒº â€‹é€šè¿‡åˆ›å»ºç£ç›˜åˆ†åŒºï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨å…¶æ‰§è¡Œä¸åŒåŠŸèƒ½ã€‚åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œç£ç›˜åˆ†åŒºæ˜¯å¿…è¦æˆ–æœ‰ç›Šçš„ï¼š é™åˆ¶åº”ç”¨æˆ–ç”¨æˆ·çš„å¯ç”¨ç©ºé—´ï¼› å°†æ“ä½œç³»ç»Ÿå’Œç¨‹åºæ–‡ä»¶ä¸ç”¨æˆ·æ–‡ä»¶åˆ†éš”å¼€ï¼› åˆ›å»ºç”¨äºå†…å­˜äº¤æ¢çš„å•ç‹¬åŒºåŸŸï¼› é™åˆ¶ç£ç›˜ç©ºé—´ä½¿ç”¨ï¼Œä»¥æé«˜è¯Šæ–­å·¥å…·å’Œå¤‡ä»½æ˜ åƒçš„æ€§èƒ½ã€‚ MBR åˆ†åŒºæ–¹æ¡ˆ â€‹MBR æ˜¯ä¸€ç§æ¯”è¾ƒä¼ ç»Ÿçš„åˆ†åŒºæ–¹æ¡ˆï¼Œå…¶æ”¯æŒæœ€å¤š 4 ä¸ªä¸»åˆ†åŒºã€‚åœ¨ Linux ç³»ç»Ÿä¸Šï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ æ‰©å±•åˆ†åŒºå’Œé€»è¾‘åˆ†åŒºæ¥åˆ›å»ºæœ€å¤š 15 ä¸ªåˆ†åŒºã€‚ç”±äºåˆ†åŒºå¤§å°æ•°æ®ä»¥ 32 ä½å€¼å­˜å‚¨ï¼Œä½¿ç”¨ MBR æ–¹æ¡ˆåˆ†åŒºæ—¶ï¼Œæœ€å¤§ç£ç›˜å’Œåˆ†åŒºå¤§å°ä¸º 2TBã€‚ â€‹ç”±äºç°ä»£å­˜å‚¨æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒMBR åˆ†åŒºçš„ 2TiB é™åˆ¶å·²ä»ç†è®ºè½¬åŒ–ä¸ºç°åœ¨è¶Šæ¥è¶Šé¢‘ç¹çš„ç°å®é—®é¢˜ï¼Œæ•…æ–°çš„ GUID åˆ†åŒºè¡¨ï¼ˆGPT åˆ†åŒºï¼‰æ­£åœ¨å–ä»£ MBR åˆ†åŒºæ–¹æ¡ˆã€‚ GPT åˆ†åŒºæ–¹æ¡ˆ â€‹GPT åˆ†åŒºæ–¹æ¡ˆä¾èµ–äºæ–°çš„å›ºä»¶ç³»ç»Ÿ â€”â€” UEFIã€‚GPT æ˜¯ UEFI æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è§£å†³åŸæœ‰åŸºäº MBR çš„æ–¹æ¡ˆæ‰€å¸¦æ¥çš„è®¸å¤šé™åˆ¶ã€‚ â€‹GPT åˆ†åŒºæ–¹æ¡ˆæœ€å¤šå¯æä¾› 128 ä¸ªåˆ†åŒºä»¥åŠ 8ZiBï¼ˆ80 äº¿ TiBï¼‰çš„åˆ†åŒºå’Œç£ç›˜ã€‚GPT åˆ†åŒºæä¾›äº†å¤‡ä»½å‰¯æœ¬æ¥ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ï¼Œä¸”æä¾›äº†æ ¡éªŒç®—æ³•æ¥æ£€æµ‹ GPT å¤´å’Œåˆ†åŒºè¡¨ä¸­çš„é”™è¯¯å’ŒæŸåã€‚ ä½¿ç”¨ PARTED ç®¡ç†åˆ†åŒº â€‹Parted åˆ†åŒºå®ç”¨ç¨‹åºåŒæ—¶æ”¯æŒç®¡ç† MBR å’Œ GPT ä¸¤ç§åˆ†åŒºã€‚ 123456789101112131415161718192021222324252627282930[root@localhost ~]\\# parted -hç”¨æ³•: parted [é€‰é¡¹]... [è®¾å¤‡ [å‘½ä»¤ [å‚æ•°]...]...]æ¥å—ä»¥ å‚æ•°s æ‰§è¡Œçš„ å‘½ä»¤s æ¥ç®¡ç† è®¾å¤‡. å¦‚æœæœªæä¾›ä»»ä½•å‘½ä»¤, å°†ä»¥äº¤äº’æ¨¡å¼è¿è¡Œã€‚é€‰é¡¹s: -h, --help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯ -l, --list åˆ—ä¸¾æ‰€æœ‰å—è®¾å¤‡çš„åˆ†åŒºç»“æ„ä¿¡æ¯ -m, --machine displays machine parseable output -s, --script never prompts for user intervention -v, --version displays the version -a, --align=[none|cyl|min|opt] alignment for new partitionså‘½ä»¤s: align-check TYPE N æ£€æŸ¥åˆ†åŒº N çš„å¯¹é½ç±»å‹(min|opt) help [COMMAND] æ‰“å°é€šç”¨å¸®åŠ©ä¿¡æ¯, æˆ–é’ˆå¯¹ COMMAND çš„å¸®åŠ©ä¿¡æ¯ mklabel,mktable LABEL-TYPE åˆ›å»ºæ–°çš„ç£ç›˜æ ‡ç­¾(åˆ†åŒºè¡¨) mkpart PART-TYPE [FS-TYPE] START END åˆ›å»ºæ–°åˆ†åŒº name NUMBER NAME ä»¥ NAME å‘½ååˆ†åŒº NUMBER print [devices|free|list,all|NUMBER] æ˜¾ç¤º åˆ†åŒºè¡¨|å¯ç”¨è®¾å¤‡|ç©ºé—²ç©ºé—´|æ‰€æœ‰åˆ†åŒº|æŒ‡å®šåˆ†åŒº (NUMBER) quit é€€å‡ºç¨‹åº rescue START END æ¢å¤åœ¨ START å’Œ END ä¹‹é—´ä¸¢å¤±çš„åˆ†åŒº resizepart NUMBER END é‡æ–°è§„åˆ’åˆ†åŒº NUMBER çš„å¤§å° rm NUMBER åˆ é™¤åˆ†åŒº NUMBER select DEVICE é€‰æ‹©è¦æ“ä½œçš„å­˜å‚¨è®¾å¤‡ disk_set FLAG STATE æ›´æ”¹é€‰å®šè®¾å¤‡ä¸Šçš„ FLAG çš„çŠ¶æ€ä¸º STATE disk_toggle [FLAG] åˆ‡æ¢é€‰å®šè®¾å¤‡ä¸Šçš„ FLAG çš„ FLAG ä¸º STATE set NUMBER FLAG STATE æ›´æ”¹åˆ†åŒº NUMBER ä¸Šçš„ FLAG ä¸ºçŠ¶æ€ STATE toggle [NUMBER [FLAG]] åˆ‡æ¢åˆ†åŒº NUMBER çš„ FLAG ä¸º STATE unit UNIT è®¾ç½®é»˜è®¤å•ä½ä¸º UNIT version display the version number and copyright information of GNU Parted é»˜è®¤æƒ…å†µä¸‹ï¼Œparted æ˜¾ç¤ºä»¥ 10 çš„å¹‚æ¬¡æ–¹è¡¨ç¤ºçš„æ‰€æœ‰ç©ºé—´å¤§å°ï¼ˆKBã€MBã€GBï¼‰ã€‚å¯ä»¥ä½¿ç”¨ unit å­å‘½ä»¤æ¥æ›´æ”¹é»˜è®¤è®¾ç½®ï¼Œè¯¥å­å‘½ä»¤æ¥å—ä»¥ä¸‹å‚æ•°ï¼š s è¡¨ç¤ºæ‰‡åŒºï¼› B è¡¨ç¤ºå­—èŠ‚ï¼› MiBã€GiB æˆ– TiBï¼ˆ2 çš„å¹‚æ¬¡æ–¹ï¼‰ï¼› MBã€GB æˆ– TB ï¼ˆ10 çš„å¹‚æ¬¡æ–¹ï¼‰ï¼› 1234567891011[root@localhost ~]\\# parted /dev/nvme0n1 unit s printModel: NVMe Device (nvme)Disk /dev/nvme0n1: 41943040sSector size (logical/physical): 512B/512BPartition Table: msdosDisk Flags: Number Start End Size Type File system Flags 1 2048s 616447s 614400s primary xfs boot 2 616448s 4810751s 4194304s primary linux-swap(v1) 3 4810752s 41943039s 37132288s primary xfs å‘æ–°ç£ç›˜å†™å…¥åˆ†åŒºè¡¨ â€‹è¦å¯¹æ–°é©±åŠ¨å™¨è¿›è¡Œåˆ†åŒºï¼Œé¦–å…ˆå¿…é¡»ä¸ºå…¶å†™å…¥ç£ç›˜æ ‡ç­¾ã€‚ç£ç›˜æ ‡ç­¾æŒ‡ç¤ºäº†æ‰€ç”¨çš„åˆ†åŒºæ–¹æ¡ˆã€‚ parted å‘½ä»¤çš„æ›´æ”¹æ˜¯å³æ—¶ç”Ÿæ•ˆçš„ï¼Œè‹¥è¯¯ç”¨äº†è¯¥å‘½ä»¤ï¼Œæ³¨å®šä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚ â€‹ä»¥ root ç”¨æˆ·èº«ä»½ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† MBR ç£ç›˜æ ‡ç­¾å†™å…¥ç£ç›˜ï¼š 1[root@localhost ~]\\# parted /dev/nvme0n1 mklabel msdos â€‹è‹¥è¦å†™å…¥ GPT ç£ç›˜æ ‡ç­¾ï¼Œåˆ™éœ€ä½¿ç”¨è¯¥å‘½ä»¤ï¼š 1[root@localhost ~]\\# parted /dev/nvme0n1 mklabel gpt mklabel å­å‘½ä»¤ä¼šæ“¦é™¤ç°æœ‰åˆ†åŒºè¡¨ï¼Œå…¶æ•ˆæœç±»ä¼¼äº windows ä¸­çš„æ ¼å¼åŒ–ï¼Œä»…å½“é‡å¤åˆ©ç”¨æ—§ç£ç›˜è€Œä¸ä¿ç•™å…¶ä¸­çš„æ—§æœ‰æ•°æ®æ—¶ä½¿ç”¨ã€‚ åˆ›å»º MBR åˆ†åŒº â€‹åˆ›å»º MBR ç£ç›˜åˆ†åŒºåŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š æŒ‡å®šè¦åœ¨å…¶ä¸Šåˆ›å»ºåˆ†åŒºçš„ç£ç›˜è®¾å¤‡ã€‚ ä»¥ root ç”¨æˆ·èº«ä»½æ‰§è¡Œ parted å‘½ä»¤ï¼Œå¹¶æŒ‡å®šè¯¥ç£ç›˜è®¾å¤‡åç§°ä½œä¸ºå‚æ•°ã€‚è¿™æ ·å°†ä¼šä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ parted å‘½ä»¤å¹¶æ˜¾ç¤ºå‘½ä»¤æç¤ºç¬¦ã€‚ 12345[root@localhost ~]\\# parted /dev/nvme0n1GNU Parted 3.2Using /dev/nvme0n1Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.(parted) ä½¿ç”¨ mkpart å­å‘½ä»¤åˆ›å»ºæ–°çš„ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºã€‚ 12(parted) mkpartPartition type? primary/extended? primary # åˆ›å»ºä¸»åˆ†åŒº è‹¥éœ€åˆ›å»ºå¤šäºå››ä¸ªåˆ†åŒºï¼Œå¯ä»¥é€‚å½“å°†åé¢çš„åˆ†åŒºåˆ›å»ºä¸ºæ‰©å±•åˆ†åŒºï¼Œå¹¶åœ¨å…¶ä¸Šåˆ›å»ºé€»è¾‘åˆ†åŒºã€‚ æŒ‡ç¤ºè¦åœ¨åˆ†åŒºä¸Šåˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¦‚ xfs æˆ– ext4ï¼Œæ­¤æ“ä½œä¸ä¼šåœ¨åˆ†åŒºä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼Œä»…ä¸ºæŒ‡ç¤ºåˆ†åŒºç±»å‹ä½œç”¨ã€‚ 1File system type? [ext2]? xfs # xfs â€‹è¦äº†è§£æ”¯æŒå“ªäº›æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥è¯¢ã€‚ 1[root@localhost ~]\\# parted /dev/nvme0n1 help mkpart æŒ‡å®šç£ç›˜ä¸Šæ–°åˆ†åŒºå¼€å§‹çš„æ‰‡åŒºã€‚ 1Start? 2048s # ç¬¬ 2948 ä¸ªæ‰‡åŒºå¼€å§‹ â€‹ä¹Ÿå¯ä»¥ä½¿ç”¨ MBã€MiB ç­‰å•ä½ï¼Œé»˜è®¤å•ä½ä¸º MBã€‚ç¨‹åºä¼šè‡ªåŠ¨èˆå…¥è¿›è¡Œå¯¹é½ã€‚å¯¹äºå¤§å¤šæ•°ç£ç›˜è€Œè¨€ï¼Œèµ·å§‹æ‰‡åŒºè®¾ç½®ä¸º 2048 çš„å€æ•°è¾ƒä¸ºå®‰å…¨ã€‚ æŒ‡å®šåº”ç»“æŸæ–°åˆ†åŒºçš„ç£ç›˜æ‰‡åŒºã€‚ 1End? 1000MB # åˆ†åŒºå¤§å° Size = End - Start â€‹æä¾›äº†ç»“æŸä½ç½®åï¼Œparted å³å¯åˆ©ç”¨æ–°åˆ†åŒºçš„è¯¦ç»†ä¿¡æ¯æ¥æ›´æ–°ç£ç›˜ä¸Šçš„åˆ†åŒºè¡¨ã€‚ é€€å‡º partedã€‚ 1234(parted) quitInformation: You may need to update /etc/fstab.[root@localhost ~] è¿è¡Œ udevadm settle å‘½ä»¤ã€‚æ­¤å‘½ä»¤ä¼šç­‰å¾…ç³»ç»Ÿæ£€æµ‹æ–°åˆ†åŒºå¹¶åœ¨ /dev ç›®å½•ä¸‹åˆ›å»ºå…³è”çš„è®¾å¤‡æ–‡ä»¶ï¼Œå®Œæˆæ“ä½œåæ‰ä¼šè¿”å›ã€‚ 12[root@localhost ~] udevadm settle[root@localhost ~] â€‹ä¸Šè¿°æ“ä½œçš„ä¸€æ¡å‘½ä»¤ç‰ˆæœ¬ä¸ºï¼š 1[root@localhost ~] parted /dev/nvme0n1 mkpart primary xfs 2048s 1000MB åˆ›å»º GPT åˆ†åŒº â€‹åˆ›å»º GPT ç£ç›˜åˆ†åŒºåŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š æŒ‡å®šè¦åœ¨å…¶ä¸Šåˆ›å»ºåˆ†åŒºçš„ç£ç›˜è®¾å¤‡ã€‚ ä»¥ root ç”¨æˆ·èº«ä»½æ‰§è¡Œ parted å‘½ä»¤ï¼Œå¹¶æŒ‡å®šè¯¥ç£ç›˜è®¾å¤‡åç§°ä½œä¸ºå‚æ•°ã€‚è¿™æ ·å°†ä¼šä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ parted å‘½ä»¤å¹¶æ˜¾ç¤ºå‘½ä»¤æç¤ºç¬¦ã€‚ 12345[root@localhost ~]\\# parted /dev/nvme0n1GNU Parted 3.2Using /dev/nvme0n1Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.(parted) ä½¿ç”¨ mkpart å­å‘½ä»¤åˆ›å»ºæ–°çš„ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºã€‚ å¯¹äº GPT æ–¹æ¡ˆè€Œè¨€ï¼Œæ¯ä¸ªåˆ†åŒºéƒ½ä¼šè·å¾—ä¸€ä¸ªåç§°ã€‚ 12(parted) mkpartPartition name? []? userdata æŒ‡ç¤ºè¦åœ¨åˆ†åŒºä¸Šåˆ›å»ºçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¦‚ xfs æˆ– ext4ã€‚è¿™å¹¶ä¸ä¼šåœ¨åˆ†åŒºä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼›å®ƒä»…ä»…æŒ‡ç¤ºåˆ†åŒºç±»å‹ã€‚ 1File system type? [ext2]? xfs æŒ‡å®šç£ç›˜ä¸Šæ–°åˆ†åŒºå¼€å§‹çš„æ‰‡åŒºã€‚ 1Start? 2048s æŒ‡å®šåº”ç»“æŸæ–°åˆ†åŒºçš„ç£ç›˜æ‰‡åŒºã€‚ 1End? 1000MB â€‹ä¸€æ—¦æä¾›äº†ç»“æŸä½ç½®ï¼Œparted å³å¯åˆ©ç”¨æ–°åˆ†åŒºçš„è¯¦ç»†ä¿¡æ¯æ¥æ›´æ–°ç£ç›˜ä¸Šçš„åˆ†åŒºè¡¨ã€‚ é€€å‡º partedã€‚ 1234(parted) quitInformation: You may need to update /etc/fstab.[root@localhost ~]\\# è¿è¡Œ udevadm settle å‘½ä»¤ã€‚ æ­¤å‘½ä»¤ä¼šç­‰å¾…ç³»ç»Ÿæ£€æµ‹æ–°åˆ†åŒºå¹¶åœ¨ /dev ç›®å½•ä¸‹åˆ›å»ºå…³è”çš„è®¾å¤‡æ–‡ä»¶ã€‚åªæœ‰åœ¨å®Œæˆä¸Šè¿°æ“ä½œåï¼Œä»–æ‰è¿”å›ã€‚ 12[root@localhost ~]\\# udevadm settle[root@localhost ~]\\# â€‹ä½œä¸ºäº¤äº’æ¨¡å¼çš„æ›¿ä»£æ–¹æ³•ï¼Œæ‚¨ä¹Ÿå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼åˆ›å»ºåˆ†åŒºï¼š 1[root@localhost ~]\\# parted /dev/nvme0n1 mkpart userdata xfs 2048s 1000MB åˆ é™¤åˆ†åŒº â€‹ä»¥ä¸‹æ­¥éª¤é€‚ç”¨äº MBR å’Œ GPT ä¸¤ç§åˆ†åŒºæ–¹æ¡ˆã€‚ æŒ‡å®šåŒ…å«è¦åˆ é™¤çš„åˆ†åŒºçš„ç£ç›˜ã€‚ ä½œä¸º root ç”¨æˆ·ï¼Œä»¥ç£ç›˜è®¾å¤‡ä½œä¸ºå”¯ä¸€å‚æ•°æ‰§è¡Œ parted å‘½ä»¤ï¼Œä»è€Œé€šè¿‡å‘½ä»¤æç¤ºç¬¦åœ¨äº¤äº’æ¨¡å¼ä¸‹å¯åŠ¨ partedã€‚ 12345[root@localhost ~]\\# parted /dev/nvme0n1GNU Parted 3.2Using /dev/nvme0n1Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.(parted) ç¡®å®šè¦åˆ é™¤çš„åˆ†åŒºçš„åˆ†åŒºç¼–å·ã€‚ 12345678910(parted) printModel: Virtio Block Device (virtblk)Disk /dev/nvme0n1: 5369MBSector size (logical/physical): 512B/512BPartition Table: gptDisk Flags:Number Start End Size File system Name Flags 1 1049kB 1000MB 999MB xfs userdata åˆ é™¤åˆ†åŒºã€‚ 1(parted) rm 1 â€‹rm å­å‘½ä»¤ä¼šç«‹å³ä»ç£ç›˜ä¸Šçš„åˆ†åŒºè¡¨ä¸­åˆ é™¤è¯¥åˆ†åŒºã€‚ é€€å‡º partedã€‚ 1234(parted) quitInformation: You may need to update /etc/fstab.[root@localhost ~]\\# åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ â€‹åˆ›å»ºå—è®¾å¤‡åï¼Œä¸‹ä¸€æ­¥æ˜¯å‘å…¶ä¸­æ·»åŠ æ–‡ä»¶ç³»ç»Ÿã€‚çº¢å¸½ä¼ä¸š Linux æ”¯æŒè®¸å¤šä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå…¶ä¸­ä¸¤ç§å¸¸è§çš„ç±»å‹æ˜¯ XFS å’Œ ext4ã€‚çº¢å¸½ä¼ä¸š Linux çš„å®‰è£…ç¨‹åº Anaconda é»˜è®¤ä½¿ç”¨ XFSã€‚ â€‹ä»¥ root ç”¨æˆ·èº«ä»½ï¼Œä½¿ç”¨ mkfs.xfs å‘½ä»¤ä¸ºå—è®¾å¤‡åº”ç”¨ XFS æ–‡ä»¶ç³»ç»Ÿã€‚å¯¹äº ext4ï¼Œå¯ä»¥ä½¿ç”¨ mkfs .ext4ã€‚ 1234567891011[root@localhost ~]\\# mkfs.xfs /dev/nvme0n1meta-data=/dev/nvme0n1 isize=512 account=4, agsize=60992 blks = sects=512 attr=2, projid32bit=1 = crc=1 finobt=1, sparse=1, rmapbt=0 = reflink=1data = bsize=4096 blocks=243968, imaxpct=25 = sunit=0 swidth=0 blksnaming =version 2 bsize=4096 ascii-ci=0, ftype=1log =internal log bsize=4096 blocks=1566, version=2 = sectsz=512 sunit=0 blks, lazy-count=1realtime =none extsz=4096 blocks=0, rtextents=0 æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ â€‹å…³äºæ‰‹åŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„æ–¹æ³•å·²åœ¨ 23. è®¿é—® Linux æ–‡ä»¶ç³»ç»Ÿ ä¸­é˜è¿°ï¼Œæœ¬èŠ‚é‡ç‚¹è¯´æ˜æŒä¹…æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚æŒä¹…æŒ‚è½½æ˜¯æŒ‡ç³»ç»Ÿå¼€æœºæˆ–é‡å¯è¿›å…¥ç³»ç»Ÿåè‡ªåŠ¨æŒ‚è½½æŸå—è®¾å¤‡è€Œæ— éœ€è¿›è¡Œæ‰‹åŠ¨æŒ‚è½½ï¼Œæ­¤è¡Œä¸ºè·Ÿå›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­çš„è‡ªåŠ¨æŒ‚è½½æœ‰åŒºåˆ«ã€‚ â€‹è¦å®ç°æŒä¹…åŒ–æŒ‚è½½å¯å·²ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œå‘å…¶æ·»åŠ æ–°çš„æ¡ç›®ã€‚ä¿®æ”¹å®Œæ¯•åä½¿ç”¨ systemctl daemon-reload å‘½ä»¤æ¥å®ç°ä¿®æ”¹ç”Ÿæ•ˆã€‚ 123456789101112131415[root@localhost ~]\\# cat /etc/fstab## /etc/fstab# Created by anaconda on Wed Jun 2 22:59:16 2021## Accessible filesystems, by reference, are maintained under &#x27;/dev/disk/&#x27;.# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.## After editing this file, run &#x27;systemctl daemon-reload&#x27; to update systemd# units generated from this file.#UUID=360e2f42-d6de-4209-8487-f36b7cc69cc2 / xfs defaults 0 0UUID=529dd49b-7b72-4394-8fbb-98eb7f24de1e /boot xfs defaults 0 0UUID=bb97577f-bf23-4a75-8ff1-46b7dce21eb9 none swap defaults 0 0 â€‹fstab æ–‡ä»¶çš„æ¡ç›®çš„ç¬¬ä¸€ä¸ªå­—æ®µæŒ‡å®šè®¾å¤‡ã€‚æœ¬ç¤ºä¾‹ä½¿ç”¨ UUID æ¥æŒ‡å®šè®¾å¤‡ï¼ˆæ¨èï¼‰ã€‚åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ—¶ä¼šåœ¨å…¶è¶…çº§å—ä¸­åˆ›å»ºå’Œå­˜å‚¨ UUIDã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨è®¾å¤‡æ–‡ä»¶ã€‚ åˆ—å‡ºå—è®¾å¤‡çš„ UUID å¯ä»¥ä½¿ç”¨ lsblk æˆ– blkid å‘½ä»¤ï¼š 123456789101112131415[student@localhost ~]\\$ lsblk -fsNAME FSTYPE LABEL UUID MOUNTPOINTsr0 nvme0n1p1 xfs 529dd49b-7b72-4394-8fbb-98eb7f24de1e /bootâ””â”€nvme0n1 nvme0n1p2 swap bb97577f-bf23-4a75-8ff1-46b7dce21eb9 [SWAP]â””â”€nvme0n1 nvme0n1p3 xfs 360e2f42-d6de-4209-8487-f36b7cc69cc2 /â””â”€nvme0n1 [student@localhost ~]\\$ sudo blkid[sudo] password for student: /dev/nvme0n1: PTUUID=&quot;3c479f3a&quot; PTTYPE=&quot;dos&quot;/dev/nvme0n1p1: UUID=&quot;529dd49b-7b72-4394-8fbb-98eb7f24de1e&quot; BLOCK_SIZE=&quot;512&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;3c479f3a-01&quot;/dev/nvme0n1p2: UUID=&quot;bb97577f-bf23-4a75-8ff1-46b7dce21eb9&quot; TYPE=&quot;swap&quot; PARTUUID=&quot;3c479f3a-02&quot;/dev/nvme0n1p3: UUID=&quot;360e2f42-d6de-4209-8487-f36b7cc69cc2&quot; BLOCK_SIZE=&quot;512&quot; TYPE=&quot;xfs&quot; PARTUUID=&quot;3c479f3a-03&quot; â€‹ç¬¬äºŒä¸ªå­—æ®µæŒ‡å®šæŒ‚è½½ç‚¹ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¿é—®ç›®å½•ç»“æ„ä¸­çš„å—è®¾å¤‡ï¼ŒæŒ‚è½½ç‚¹å¿…é¡»å­˜åœ¨äºçˆ¶æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ â€‹ç¬¬ä¸‰ä¸ªå­—æ®µåŒ…å«æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¦‚ xfsã€ext4ã€swapï¼ˆäº¤æ¢åˆ†åŒºï¼‰ç­‰ã€‚ â€‹ç¬¬å››ä¸ªå­—æ®µçš„å€¼å¯ä»¥å–ä»¥é€—å·åˆ†éš”çš„å¤šä¸ªåº”ç”¨äºè®¾å¤‡çš„é€‰é¡¹ã€‚å¸¸è§å€¼çš„æ„ä¹‰å¦‚ä¸‹ï¼š é€‰é¡¹ æè¿° rw æŒ‰å¯è¯»å¯å†™æƒé™æŒ‚è½½ã€‚ suid å…è®¸æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç”¨æˆ·ä½å’Œæ‰€å±ç»„ä½ç”Ÿæ•ˆã€‚ exec å…è®¸æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºã€‚ dev è§£é‡Šå­—ç¬¦æˆ–å±è”½ç‰¹æ®Šè®¾å¤‡äºæ–‡ä»¶ç³»ç»Ÿä¸Šã€‚ auto å¯ä»¥ä½¿ç”¨ mount -a æ‰‹åŠ¨æŒ‚è½½ä¸Šã€‚ nouser ä¸å…è®¸æ™®é€šç”¨æˆ·æ‰‹åŠ¨æŒ‚è½½æ­¤è®¾å¤‡ã€‚ async å¼‚æ­¥å­˜å‚¨ï¼ˆæ€§èƒ½è¾ƒä½³ï¼‰ï¼Œå°†å†…å®¹å†™å…¥æ—¥å¿—åœ¨ä¿å­˜åˆ°ç£ç›˜ã€‚ defaults ä»¥ä¸Šé€‰é¡¹çš„åˆé›†ã€‚ â€‹ç¬¬äº”ä¸ªå­—æ®µçš„å€¼è¡¨ç¤º â€æŒ‡å®šåˆ†åŒºæ˜¯å¦è¢« dump ç¨‹åºå¤‡ä»½â€œï¼Œ0 ä»£è¡¨ä¸å¤‡ä»½ï¼Œ1 ä»£è¡¨å¤‡ä»½ï¼Œ2 ä»£è¡¨ä¸å®šæœŸå¤‡ä»½ã€‚ â€‹ç¬¬å…­ä¸ªå­—æ®µçš„å€¼è¡¨ç¤º â€æŒ‡å®šåˆ†åŒºæ˜¯å¦è¢« fsck ç¨‹åºæ£€æµ‹â€œ, 0 ä»£è¡¨ä¸æ£€æµ‹ï¼Œå…¶ä»–æ•°å­—ä»£è¡¨æ£€æµ‹çš„ä¼˜å…ˆçº§ï¼Œé€’å¢ä¼˜å…ˆçº§è¶Šä½ã€‚ æ·»åŠ æ–°æ¡ç›®äº /etc/fstab ä¸­åéœ€ä½¿ç”¨ mount -a é€‰é¡¹æ¥æµ‹è¯•ä¸‹æŒ‚è½½æ˜¯å¦æˆåŠŸï¼Œç¡®ä¿æ— è¯¯åå†é‡å¯æµ‹è¯•ï¼ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ï¼‰ã€‚ ä¿®æ”¹å®Œ /etc/fstab ä¸­çš„æ¡ç›®éœ€ä½¿ç”¨ mount -o remount å‘½ä»¤æ¥é‡æ–°æŒ‚è½½ï¼ˆmount -a å‘½ä»¤å¯¹å·²æŒ‚è½½ä¸Šçš„åŒåè®¾å¤‡ä¸ä¼šé‡æ–°æŒ‚è½½ï¼‰ã€‚ ç®¡ç†äº¤æ¢ç©ºé—´ â€‹äº¤æ¢ç©ºé—´æ˜¯å— Linux å†…æ ¸å†…å­˜ç®¡ç†å­ç³»ç»Ÿæ§åˆ¶çš„ç£ç›˜åŒºåŸŸã€‚å†…æ ¸é€šè¿‡ä½¿ç”¨äº¤æ¢ç©ºé—´å°†ä¸æ´»åŠ¨çš„å†…å­˜é¡µæš‚å­˜åœ¨äº¤æ¢ç©ºé—´ä¸­æ¥èŠ‚çœ RAMï¼Œäº¤æ¢ç©ºé—´ä¸€èˆ¬ä»¥ç£ç›˜åˆ†åŒºçš„å½¢å¼å­˜åœ¨ï¼Œç§°ä¸º äº¤æ¢åˆ†åŒºã€‚ç³»ç»Ÿå†…å­˜å’Œäº¤æ¢åˆ†åŒºç»„åˆåœ¨ä¸€èµ·ç§°ä¸ºè™šæ‹Ÿå†…å­˜ã€‚ç”±äºäº¤æ¢åˆ†åŒºä½äºç£ç›˜ä¸Šï¼Œå…¶è¯»å–å’Œå†™å…¥é€Ÿåº¦è¾ƒæ…¢ã€‚ â€‹å…³äºäº¤æ¢åˆ†åŒºçš„åˆ’å®šå¤§å°æœ‰ä¸‹è¡¨çš„å»ºè®®ï¼š RAM äº¤æ¢åˆ†åŒºå¤§å° å…è®¸ä¼‘çœ åŠŸèƒ½æ—¶çš„äº¤æ¢å†…å­˜å¤§å° 2GiB æˆ– ä»¥ä¸‹ RAM å¤§å° x 2 RAM å¤§å° x 3 ä»‹äº 2GiB å’Œ 8GiB ä¹‹é—´ ä¸ RAM å¤§å° ç›¸åŒ RAM å¤§å° x 2 ä»‹äº 8GiB å’Œ 64GiB ä¹‹é—´ è‡³å°‘ 4GiB RAM å¤§å° x 1.5 64 GiB ä»¥ä¸Š è‡³å°‘ 4GiB ä¸å»ºè®®å¼€å¯ä¼‘çœ åŠŸèƒ½ â€‹ä¼‘çœ ï¼šæŒ‡å…³é—­è®¡ç®—æœºç”µæºä¹‹å‰å°†å†…å­˜å†…å®¹è½¬å‚¨åˆ°äº¤æ¢åˆ†åŒºï¼ˆæ³¨æ„ï¼šç¡¬ç›˜æ˜¯éæ˜“å¤±æ€§å­˜å‚¨è®¾å¤‡ï¼‰ï¼Œé‡æ–°æ‰“å¼€è®¡ç®—æœºåç³»ç»Ÿä¼šä»äº¤æ¢åˆ†åŒºä¸­æ¢å¤å†…å­˜ä¸Šçš„å†…å®¹ï¼Œæ— éœ€å®Œå…¨å¯åŠ¨ã€‚ åˆ›å»ºäº¤æ¢ç©ºé—´ â€‹åˆ›å»ºäº¤æ¢ç©ºé—´çš„åŸºæœ¬æ“ä½œå¯æ¦‚è¿°ä¸ºï¼šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸º linux-swap çš„åˆ†åŒºã€ä¸ºè®¾å¤‡æ”¾ç½®äº¤æ¢ç­¾åã€‚ â€‹ä»¥å‰ parted å·¥å…·å¯ä»¥æ ¹æ®åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿç±»å‹æ¥ç¡®å®šæ˜¯å¦åº”æ¿€æ´»è®¾å¤‡ï¼Œä½†ç°åœ¨å³ä½¿è¯¥ç¨‹åºä¸å†ä½¿ç”¨åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œè®¾ç½®æ­¤ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç®¡ç†å‘˜å¿«é€Ÿç¡®å®šè¯¥åˆ†åŒºçš„ç”¨é€”ã€‚ 12345678910111213141516171819202122232425262728293031323334[root@localhost ~]\\# parted /dev/nvme0n1GNU Parted 3.2Using /dev/nvme0n1Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.(parted) printModel: Virtio Block Device (virtblk)Disk /dev/nvme0n1: 5369MBSector size (logical/physical): 512B/512BPartition Table: gptDisk Flags:Number Start End Size File system Name Flags 1 1049kB 1001MB 1000MB data(parted) mkpartPartition name? []? swap1File system type? [ext2]? linux-swapStart? 1001MBEnd? 1257MB(parted) printModel: Virtio Block Device (virtblk)Disk /dev/nvme0n1: 5369MBSector size (logical/physical): 512B/512BPartition Table: gptDisk Flags:Number Start End Size File system Name Flags 1 1049kB 1001MB 1000MB data 2 1001MB 1257MB 256MB linux-swap(v1) swap(parted) quitInformation: You may need to update /etc/fstab.[root@localhost ~]\\# â€‹åˆ›å»ºåˆ†åŒºåï¼Œè¿è¡Œ udevadm settle å‘½ä»¤ã€‚æ­¤å‘½ä»¤ä¼šç­‰å¾…ç³»ç»Ÿæ£€æµ‹æ–°åˆ†åŒºå¹¶åœ¨ /dev ä¸­åˆ›å»ºå…³è”çš„è®¾å¤‡æ–‡ä»¶ã€‚åªæœ‰åœ¨å®Œæˆä¸Šè¿°æ“ä½œåï¼Œå®ƒæ‰è¿”å›ã€‚ 12[root@localhost ~]\\# udevadm settle[root@localhost ~]\\# æ ¼å¼åŒ–è®¾å¤‡ â€‹mkswap å‘½ä»¤å‘è®¾å¤‡åº”ç”¨äº¤æ¢ç­¾åã€‚ä¸å…¶ä»–æ ¼å¼åŒ–å®ç”¨ç¨‹åºä¸åŒï¼Œmkswap åœ¨è®¾å¤‡å¼€å¤´å†™å…¥å•ä¸ªæ•°æ®å—ï¼Œè€Œå°†è®¾å¤‡çš„å…¶ä½™éƒ¨åˆ†ä¿ç•™ä¸ºæœªæ ¼å¼åŒ–ï¼Œè¿™æ ·å†…æ ¸å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥å­˜å‚¨å†…å­˜é¡µã€‚ 123[root@localhost ~]\\# mkswap /dev/nvme0n1Setting up swapspace version 1, size = 244 MiB(255848448 bytes) no label, UUID=39e2667a-9458-42fe-9665-c5c854605881 æ¿€æ´»äº¤æ¢ç©ºé—´ â€‹å¯ä»¥ä½¿ç”¨ swapon å‘½ä»¤æ¿€æ´»å·²æ ¼å¼åŒ–çš„äº¤æ¢ç©ºé—´ã€‚ â€‹ä½¿ç”¨ swapon å¹¶å°†è®¾å¤‡ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…ä½¿ç”¨ swapon -a æ¥æ¿€æ´» /etc/fstab æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰äº¤æ¢ç©ºé—´ã€‚ä½¿ç”¨ swapon --show å’Œ free å‘½ä»¤æ£€æŸ¥å¯ç”¨çš„äº¤æ¢ç©ºé—´ã€‚ 123456789[root@localhost ~]\\# free total used free shared buff/cache availableMem: 1873036 134688 1536436 16748 201912 1576044Swap: 0 0 0[root@localhost ~]\\# swapon /dev/nvme0n1[root@localhost ~]\\# free total used free shared buff/cache availableMem: 1873036 135044 1536040 16748 201952 1575690Swap: 249852 0 249852 â€‹å¯ä»¥ä½¿ç”¨ swapoff å‘½ä»¤åœç”¨äº¤æ¢ç©ºé—´ã€‚å¦‚æœäº¤æ¢ç©ºé—´å…·æœ‰å†™å…¥çš„é¡µé¢ï¼Œswapoff ä¼šå°è¯•å°†è¿™äº›é¡µé¢ç§»åŠ¨åˆ°å…¶ä»–æ´»åŠ¨äº¤æ¢ç©ºé—´æˆ–å°†å…¶å†™å›åˆ°å†…å­˜ä¸­ã€‚å¦‚æœæ— æ³•å°†æ•°æ®å†™å…¥åˆ°å…¶ä»–ä½ç½®ï¼Œåˆ™ swapoff å‘½ä»¤ä¼šå¤±è´¥ï¼Œå¹¶æ˜¾ç¤ºé”™è¯¯ï¼Œè€Œäº¤æ¢ç©ºé—´ä»ä¿æŒæ´»åŠ¨ã€‚ æŒä¹…æ¿€æ´»äº¤æ¢ç©ºé—´ â€‹è¦æƒ³åœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½æ¿€æ´»äº¤æ¢ç©ºé—´ï¼Œè¯·åœ¨ /etc/fstab æ–‡ä»¶ä¸­æ”¾ç½®ä¸€ä¸ªæ¡ç›®ã€‚åŸºäºä¸Šé¢åˆ›å»ºçš„äº¤æ¢ç©ºé—´ï¼Œä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº† /etc/fstab ä¸­æ¯”è¾ƒå…¸å‹çš„ä¸€è¡Œã€‚ 1UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap defaults 0 0 â€‹è¯¥ç¤ºä¾‹ä½¿ç”¨ UUID ä½œä¸ºç¬¬ä¸€ä¸ªå­—æ®µã€‚æ ¼å¼åŒ–è®¾å¤‡æ—¶ï¼Œmkswap å‘½ä»¤ä¼šæ˜¾ç¤ºè¯¥ UUIDã€‚å¦‚æœä¸¢å¤±äº† mkswap çš„è¾“å‡ºï¼Œè¯·ä½¿ç”¨ lsblk --fs å‘½ä»¤ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ³•ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå­—æ®µä¸­ä½¿ç”¨è®¾å¤‡åç§°ã€‚ â€‹ç¬¬äºŒä¸ªå­—æ®µé€šå¸¸ä¸º mount point ä¿ç•™ã€‚ä½†æ˜¯ï¼Œç”±äºäº¤æ¢è®¾å¤‡æ— æ³•é€šè¿‡ç›®å½•ç»“æ„è®¿é—®ï¼Œå› æ­¤è¯¥å­—æ®µå–å ä½ç¬¦å€¼ä¸º swap æˆ–è€… noneã€‚ â€‹ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚äº¤æ¢ç©ºé—´çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹æ˜¯ swapã€‚ â€‹ç¬¬å››ä¸ªå­—æ®µæ˜¯é€‰é¡¹ï¼Œæœ¬ç¤ºä¾‹ä¸­ä½¿ç”¨äº† defaults é€‰é¡¹ï¼Œå…³äºæ­¤é€‰é¡¹çš„ä»‹ç»å¯ä»¥å‚è§ä¸Šæ–‡ã€‚ â€‹æœ€åä¸¤ä¸ªå­—æ®µæ˜¯ dump æ ‡å¿—å’Œ fsck é¡ºåºï¼Œè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼é»˜è®¤ä¸º 0 å°±è¡Œã€‚ â€‹åœ¨ /etc/fstab æ–‡ä»¶ä¸­æ·»åŠ æˆ–åˆ é™¤æ¡ç›®æ—¶ï¼Œå¯ä»¥è¿è¡Œ systemctl daemon-reload å‘½ä»¤æˆ–é‡å¯æœåŠ¡å™¨ï¼Œä»¥ä¾¿è®© systemd æ³¨å†Œæ–°é…ç½®ã€‚ 1[root@localhost ~]\\# systemctl daemon-reload è®¾ç½®äº¤æ¢ç©ºé—´ä¼˜å…ˆçº§ â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šæŒ‰é¡ºåºä½¿ç”¨äº¤æ¢ç©ºé—´ï¼Œå³å†…æ ¸å…ˆä½¿ç”¨ç¬¬ä¸€ä¸ªå·²æ¿€æ´»äº¤æ¢ç©ºé—´ï¼Œç›´è‡³å…¶ç©ºé—´å·²æ»¡ï¼Œç„¶åå¼€å§‹ä½¿ç”¨ç¬¬äºŒä¸ªäº¤æ¢ç©ºé—´ã€‚ä¸è¿‡ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªäº¤æ¢ç©ºé—´å®šä¹‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä»è€Œå¼ºåˆ¶æŒ‰è¯¥é¡ºåºä½¿ç”¨äº¤æ¢ç©ºé—´ã€‚ â€‹è¦è®¾ç½®ä¼˜å…ˆçº§ï¼Œè¯·åœ¨ /etc/fstab ä¸­ä½¿ç”¨ pri é€‰é¡¹ã€‚å†…æ ¸ä¼šé¦–å…ˆä½¿ç”¨ä¼˜å…ˆçº§æœ€é«˜çš„äº¤æ¢ç©ºé—´ã€‚é»˜è®¤ä¼˜å…ˆçº§ä¸º -2ã€‚ â€‹ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº† /etc/fstab ä¸­å®šä¹‰çš„ä¸‰ä¸ªäº¤æ¢ç©ºé—´ã€‚å†…æ ¸é¦–å…ˆä½¿ç”¨æœ€åä¸€ä¸ªæ¡ç›®ï¼Œå…¶ä¼˜å…ˆçº§ä¸º pri=10ã€‚å½“è¯¥ç©ºé—´å·²æ»¡æ—¶ï¼Œä»–å°†ä½¿ç”¨ç¬¬äºŒä¸ªæ¡ç›®ï¼Œå…¶ä¼˜å…ˆçº§ä¸º pri=4ã€‚æœ€åï¼Œå®ƒå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªæ¡ç›®ï¼Œå…¶é»˜è®¤ä¼˜å…ˆçº§ä¸º -2ã€‚ 123UUID=a2345678-9458-42fe-9665-c5c854605881 swap swap defaults 0 0UUID=b3245c23-9458-42fe-9665-c5c854605881 swap swap defaults 0 0UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap defaults 0 0 â€‹ä½¿ç”¨ swapon --show å¯ä»¥æ˜¾ç¤ºäº¤æ¢ç©ºé—´çš„ä¼˜å…ˆçº§ã€‚ â€‹å½“äº¤æ¢ç©ºé—´å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§æ—¶ï¼Œå†…æ ¸ä¼šä»¥è½®è¯¢æ–¹å¼å‘å…¶ä¸­å†™å…¥ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ä½¿ç”¨ SELinux ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§","slug":"Linux | ä½¿ç”¨ SELinux ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§","date":"2022-08-15T06:25:32.733Z","updated":"2022-08-15T06:29:27.021Z","comments":true,"path":"2022-08-15-Linux | ä½¿ç”¨ SELinux ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E4%BD%BF%E7%94%A8%20SELinux%20%E7%A1%AE%E4%BF%9D%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8%E6%80%A7.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ SELinux ç®€è¿° â€‹SELinux æ˜¯ Security Enhanced Linux çš„ç®€ç§°ã€‚ â€‹SELinux åœ¨ Linux ä¸­å…·æœ‰é‡è¦çš„å®‰å…¨ç”¨é€”ï¼Œå®ƒå¯ä»¥å…è®¸æˆ–æ‹’ç»è®¿é—®æ–‡ä»¶åŠå…¶ä»–èµ„æºï¼Œä¸”ç²¾å‡†åº¦ç›¸æ¯”ç”¨æˆ·æƒé™è¦å¤§å¹…æé«˜ã€‚SELinux ç›¸æ¯”æ™®é€šçš„æ–‡ä»¶æƒé™æ§åˆ¶æä¾›äº†æ›´å¤šå®‰å…¨ç»†èŠ‚ï¼Œä¸ä»…å¯ä»¥é™åˆ¶è°èƒ½è¯»å–ã€å†™å…¥ã€æ‰§è¡ŒæŸæ–‡ä»¶ï¼Œè¿˜èƒ½æ§åˆ¶å¦‚ä½•æ¥ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚ â€‹SELinux ç”±åº”ç”¨å¼€å‘äººå‘˜å®šä¹‰çš„è‹¥å¹²ç­–ç•¥ç»„æˆï¼Œè¿™äº›ç­–ç•¥å‡†ç¡®å£°æ˜äº†å¯¹äºåº”ç”¨ä½¿ç”¨çš„æ¯ä¸ªäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ï¼Œå“ªäº›æ“ä½œå’Œè®¿é—®æƒé™æ˜¯æ°å½“ä¸”è¢«å…è®¸çš„ã€‚è¿™è¢«ç§°ä¸ºç›®æ ‡æ”¿ç­–ï¼Œå› ä¸ºä¼šç¼–å†™ä¸€ä¸ªç­–ç•¥ä»¥æ¶µç›–å•ä¸ªåº”ç”¨çš„æ´»åŠ¨ã€‚ç­–ç•¥å£°æ˜äº†å„ä¸ªç¨‹åºã€æ–‡ä»¶å’Œç½‘ç»œç«¯å£ä¸Šæ”¾ç½®çš„é¢„å®šä¹‰æ ‡ç­¾ã€‚ â€‹SELinux å®æ–½äº†ä¸€ç»„å¯ä»¥é˜²æ­¢ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¼±ç‚¹å½±å“å…¶ä»–åº”ç”¨æˆ–åŸºç¡€ç³»ç»Ÿçš„è®¿é—®è§„åˆ™ã€‚SELinux æä¾›äº†ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œæ­¤å¤–è¿˜å¢åŠ äº†ä¸€å±‚å¤æ‚ç»“æ„ï¼Œè¿™ä½¿å¾— SELinux çš„å­¦ä¹ æˆæœ¬å¢åŠ ï¼Œä½†æ‰§è¡Œæ”¿ç­–æ„å‘³ç€ç³»ç»ŸæŸä¸€éƒ¨åˆ†çš„å¼±ç‚¹ä¸ä¼šæ‰©æ•£åˆ°å…¶ä»–éƒ¨åˆ†ã€‚å¦‚æœ SELinux åœ¨ç‰¹å®šçš„å­ç³»ç»Ÿä¸Šè¿è¡Œä¸ä½³ï¼Œåˆ™å¯ä»¥å…³é—­è¯¥ç‰¹å®šæœåŠ¡çš„æ‰§è¡Œï¼Œç›´è‡³æ‰¾åˆ°æ½œåœ¨é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ â€‹SELinux æœ‰ä¸‰ç§æ¨¡å¼ï¼š å¼ºåˆ¶ï¼ˆEnforcingï¼‰ï¼šSELinux å¼ºåˆ¶æ‰§è¡Œè®¿é—®æ§åˆ¶è§„åˆ™ã€‚è®¡ç®—æœºé€šå¸¸åœ¨æ­¤æ¨¡å¼ä¸‹è¿è¡Œï¼› è®¸å¯ï¼ˆPermissiveï¼‰ï¼šSELinux å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œä½†ä¸å¼ºåˆ¶æ‰§è¡Œè®¿é—®æ§åˆ¶è§„åˆ™ï¼Œè€Œæ˜¯è®°å½•è¿åè§„åˆ™çš„è­¦å‘Šã€‚è¯¥æ¨¡å¼ä¸»è¦ç”¨äºæµ‹è¯•å’Œæ•…éšœæ’é™¤ï¼› ç¦ç”¨ï¼ˆDisableï¼‰ï¼šSELinux å®Œå…¨å…³é—­ â€”â€” ä¸æ‹’ç»ä»»ä½• SELinux è¿è§„ï¼Œç”šè‡³ä¸äºˆè®°å½•ã€‚ä¸å»ºè®®ç¦ç”¨ SELinuxã€‚ SELinux å·¥ä½œåŸç† â€‹SELinux æ˜¯ç”¨äºç¡®å®šå“ªä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®å“ªäº›æ–‡ä»¶ã€ç›®å½•å’Œç«¯å£çš„ä¸€ç»„å®‰å…¨è§„åˆ™ã€‚æ¯ä¸ªæ–‡ä»¶ã€è¿›ç¨‹ã€ç›®å½•å’Œç«¯å£éƒ½å…·æœ‰ä¸“é—¨çš„å®‰å…¨æ ‡ç­¾ï¼Œç§°ä¸º SELinux ä¸Šä¸‹æ–‡ã€‚ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªåç§°ï¼ŒSELinux ç­–ç•¥ä½¿ç”¨å®ƒæ¥ç¡®å®šæŸä¸ªè¿›ç¨‹èƒ½å¦è®¿é—®æ–‡ä»¶ã€ç›®å½•æˆ–ç«¯å£ã€‚é™¤éæ˜¾å¼è§„åˆ™æˆäºˆè®¿é—®æƒé™ï¼Œå¦åˆ™ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç­–ç•¥ä¸å…è®¸ä»»ä½•äº¤äº’ã€‚å¦‚æœæ²¡æœ‰å…è®¸è§„åˆ™ï¼Œåˆ™ä¸å…è®¸è®¿é—®ã€‚ â€‹SELinux æ ‡ç­¾å…·æœ‰å¤šç§ä¸Šä¸‹æ–‡ï¼šç”¨æˆ·ã€è§’è‰²ã€ç±»å‹å’Œæ•æ„Ÿåº¦ã€‚ç›®æ ‡ç­–ç•¥ä¼šæ ¹æ®ä¸‰ä¸ªä¸Šä¸‹æ–‡ï¼ˆå³ç±»å‹ä¸Šä¸‹æ–‡ï¼‰æ¥åˆ¶å®šè‡ªå·±çš„è§„åˆ™ã€‚ç±»å‹ä¸Šä¸‹æ–‡åç§°é€šå¸¸ä»¥ _t ç»“å°¾ã€‚ â€‹ unconfined_u:object_r:httpd_sys_content_t:s0 /var/www/html/file2 â€‹ SELinux ç”¨æˆ· è§’è‰² ç±»å‹ çº§åˆ« æ–‡ä»¶ â€‹è¯´æ˜ï¼š Web æœåŠ¡å™¨çš„ç±»å‹ä¸Šä¸‹æ–‡æ˜¯ httpd_tã€‚é€šå¸¸ä½äº /var/www/html ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„ç±»å‹ä¸Šä¸‹æ–‡æ˜¯ httpd_sys_content_tã€‚é€šå¸¸ä½äº /tmp å’Œ /var/tmp ä¸­çš„æ–‡ä»¶å’Œç›®å½•ä¸Šä¸‹æ–‡æ˜¯ tmp_tã€‚Web æœåŠ¡å™¨ç«¯å£çš„ç±»å‹ä¸Šä¸‹æ–‡æ˜¯ http_port_tã€‚ â€‹Apache å…·æœ‰ç±»å‹ä¸Šä¸‹æ–‡ httpd_tã€‚æœ‰ä¸€ä¸ªç­–ç•¥è§„åˆ™å…è®¸ Apache è®¿é—®å…·æœ‰ httpd_sys_content_t ç±»å‹ä¸Šä¸‹æ–‡çš„æ–‡ä»¶å’Œç›®å½•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ var/www/html å’Œå…¶ä»– Web æœåŠ¡å™¨ç›®å½•ä¸­æ‰¾åˆ°çš„æ–‡ä»¶å…·æœ‰ httpd_sys_content_t ç±»å‹ä¸Šä¸‹æ–‡ã€‚ç­–ç•¥ä¸­æ²¡æœ‰å…è®¸è§„åˆ™é€‚ç”¨äºé€šå¸¸ä½äº /tmp å’Œ /var/tmp ä¸­çš„æ–‡ä»¶ï¼Œå› æ­¤ä¸å…è®¸è®¿é—®ã€‚åœ¨å¯ç”¨ SELinux çš„æƒ…å†µä¸‹ï¼Œç ´åäº†WebæœåŠ¡å™¨è¿›ç¨‹çš„æ¶æ„ç”¨æˆ·å°†æ— æ³•è®¿é—® /tmp ç›®å½•ã€‚ â€‹MariaDB æœåŠ¡å™¨å…·æœ‰ç±»å‹ä¸Šä¸‹æ–‡ mysqld_tã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ /data/mysql ä¸­æ‰¾åˆ°çš„æ–‡ä»¶å…·æœ‰ mysqld_db_t ç±»å‹ä¸Šä¸‹æ–‡ã€‚è¯¥ç±»å‹ä¸Šä¸‹æ–‡å…è®¸ MariaDB è®¿é—®è¿™äº›æ–‡ä»¶ï¼Œä½†ç¦æ­¢å…¶ä»–æœåŠ¡ï¼ˆå¦‚Apache WebæœåŠ¡ï¼‰è®¿é—®ã€‚ è®¸å¤šå¤„ç†æ–‡ä»¶çš„å‘½ä»¤éƒ½ä½¿ç”¨ -Z é€‰é¡¹æ¥æ˜¾ç¤ºæˆ–è®¾ç½® SELinux ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œpsã€lsã€cp å’Œ mkdir éƒ½ä½¿ç”¨ -Z é€‰é¡¹æ˜¾ç¤ºæˆ–è®¾ç½® SELinux ä¸Šä¸‹æ–‡ã€‚ 12345678910111213[root@localhost ~]\\# ps axZ | head -n 3LABEL PID TTY STAT TIME COMMANDsystem_u:system_r:init_t:s0 1 ? Ss 0:05 /usr/lib/systemd/systemd --switched-root --system --deserialize 18system_u:system_r:kernel_t:s0 2 ? S 0:00 [kthreadd][root@localhost ~]\\# ls -Z /homeunconfined_u:object_r:user_home_dir_t:s0 student[root@localhost ~]\\# ls -Z /var/log/cupssystem_u:object_r:cupsd_log_t:s0 access_logsystem_u:object_r:cupsd_log_t:s0 access_log-20210819system_u:object_r:cupsd_log_t:s0 error_logsystem_u:object_r:cupsd_log_t:s0 error_log-20210819system_u:object_r:cupsd_log_t:s0 page_logsystem_u:object_r:cupsd_log_t:s0 page_log-20210819 SELinux å·¥ä½œæ¨¡å¼ â€‹SELinux å­ç³»ç»Ÿæä¾›äº†æ˜¾ç¤ºå’Œæ›´æ”¹æ¨¡å¼çš„å·¥å…·ã€‚è¦ç¡®å®šå½“å‰çš„ SELinux æ¨¡å¼ï¼Œå¯ä»¥è¿è¡Œ getenforce å‘½ä»¤ï¼š 12[root@localhost ~]\\# getenforceEnforcing â€‹è¦ä¸´æ—¶æ›´æ”¹ SELinux å·¥ä½œæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨ setenforce å‘½ä»¤ï¼š 12[root@localhost ~]\\# setenforceusage: setenforce [ Enforcing | Permissive | 1 | 0 ] å¯ä»¥åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶é€šè¿‡å°†å‘å†…æ ¸ä¼ é€’å‚æ•°æ¥è®¾ç½® SELinux æ¨¡å¼ï¼šå†…æ ¸å‚æ•° enforcing=0 å°†ä»¥è®¸å¯æ¨¡å¼å¯åŠ¨ç³»ç»Ÿï¼›å€¼ enforcing=1 åˆ™è®¾ç½®å¼ºåˆ¶æ¨¡å¼ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ä¼ é€’å†…æ ¸å‚æ•° selinux=0 æ¥å½»åº•ç¦ç”¨ SELinuxã€‚å€¼ selinux=1 å°†å¯ç”¨ SELinuxã€‚ â€‹å¯ä»¥åœ¨ /etc/selinux/config æ–‡ä»¶æ¥æŒä¹…é…ç½® SELinuxã€‚å†…æ ¸å‚æ•°ä¼šè¦†ç›–æ­¤è®¾ç½®ã€‚ 1234567891011# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=enforcing# SELINUXTYPE= can take one of these three values:# targeted - Targeted processes are protected,# minimum - Modification of targeted policy. Only selected processes are protected. # mls - Multi Level Security protection.SELINUXTYPE=targeted SELinux ä¸Šä¸‹æ–‡ â€‹åœ¨è¿è¡Œ SELinux çš„ç³»ç»Ÿä¸Šï¼Œæ‰€æœ‰è¿›ç¨‹å’Œæ–‡ä»¶éƒ½ä¼šæœ‰å“åº”çš„æ ‡ç­¾ã€‚æ ‡ç­¾ä»£è¡¨äº†ä¸å®‰å…¨æœ‰å…³çš„ä¿¡æ¯ï¼Œç§°ä¸º SELinux ä¸Šä¸‹æ–‡ã€‚ â€‹æ–°æ–‡ä»¶é€šå¸¸ä»çˆ¶ç›®å½•ç»§æ‰¿å…¶ SELinux ä¸Šä¸‹æ–‡ï¼Œä»è€Œç¡®ä¿å®ƒä»¬å…·æœ‰é€‚å½“çš„ä¸Šä¸‹æ–‡ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼å¯èƒ½ä¼šç ´åè¯¥ç»§æ‰¿è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œå¦‚æœæ‚¨åœ¨ä¸æœ€ç»ˆç›®æ ‡ä½ç½®ä¸åŒçš„ä½ç½®åˆ›å»ºæ–‡ä»¶ï¼Œç„¶åç§»åŠ¨æ–‡ä»¶ï¼Œåˆ™è¯¥æ–‡ä»¶å°†å…·æœ‰åˆ›å»ºå®ƒæ—¶æ‰€åœ¨ç›®å½•çš„ SELinux ä¸Šä¸‹æ–‡ï¼Œè€Œä¸æ˜¯ç›®æ ‡ç›®å½•çš„ SELinux ä¸Šä¸‹æ–‡ã€‚å…¶æ¬¡ï¼Œå¦‚æœæ˜¯å¤åˆ¶ä¸€ä¸ªä¿ç•™ SELinux ä¸Šä¸‹æ–‡çš„æ–‡ä»¶ï¼ˆæ­£å¦‚ä½¿ç”¨ cp -a å‘½ä»¤ï¼‰ï¼Œåˆ™ SELinux ä¸Šä¸‹æ–‡å°†åæ˜ åŸå§‹æ–‡ä»¶çš„ä½ç½®ã€‚ â€‹ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†ç»§æ‰¿å…³ç³»åŠå­˜åœ¨çš„ç¼ºé™·ã€‚ä»¥ /tmp ä¸­åˆ›å»ºçš„ä¸¤ä¸ªæ–‡ä»¶ä¸ºä¾‹ï¼Œä¸€ä¸ªç§»åŠ¨åˆ° /var/www/htmlï¼Œå¦ä¸€ä¸ªå¤åˆ¶åˆ°åŒä¸€ç›®å½•ä¸­ã€‚ç§»åŠ¨åˆ° /var/www/html ç›®å½•çš„æ–‡ä»¶ä¿ç•™äº† /tmp ç›®å½•çš„æ–‡ä»¶ä¸Šä¸‹æ–‡ã€‚å¤åˆ¶åˆ° /var/www/html ç›®å½•ä¸­çš„æ–‡ä»¶åˆ™ç»§æ‰¿äº† /var/www/html ç›®å½•çš„ SELinux ä¸Šä¸‹æ–‡ã€‚ â€‹ä½¿ç”¨ ls -Z å‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„ SELinux ä¸Šä¸‹æ–‡ã€‚ 12[root@localhost ~]\\# ls -Z /var/lib/nfs/etabsystem_u:object_r:var_lib_nfs_t:s0 /var/lib/nfs/etab â€‹ä½¿ç”¨ ls -Zd å‘½ä»¤æ˜¾ç¤ºç›®å½•çš„ SELinux ä¸Šä¸‹æ–‡ã€‚ 12[root@localhost ~]\\# ls -dZ /var/lib/nfssystem_u:object_r:var_lib_nfs_t:s0 /var/lib/nfs æ›´æ”¹æ–‡ä»¶çš„ SELinux ä¸Šä¸‹æ–‡ â€‹ç”¨äºæ›´æ”¹æ–‡ä»¶ SELinux ä¸Šä¸‹æ–‡çš„å‘½ä»¤åŒ…æ‹¬ï¼šsemanage fcontextã€restorecon å’Œ chconã€‚ â€‹ä¸ºæ–‡ä»¶è®¾ç½® SELinux ä¸Šä¸‹æ–‡çš„é¦–é€‰æ–¹æ³•æ˜¯ä½¿ç”¨ semanage fcontext å‘½ä»¤æ¥å£°æ˜æ–‡ä»¶çš„é»˜è®¤æ ‡ç­¾ï¼Œç„¶åä½¿ç”¨ restorecon å‘½ä»¤å°†è¯¥ä¸Šä¸‹æ–‡åº”ç”¨äºæ–‡ä»¶ã€‚è¿™æ ·å¯ç¡®ä¿æ ‡ç­¾ç¬¦åˆé¢„æœŸï¼Œå³ä¾¿åœ¨å¯¹æ–‡ä»¶ç³»ç»Ÿå®Œå…¨é‡æ–°æ ‡è®°ä¹‹åä¹Ÿæ˜¯å¦‚æ­¤ã€‚ â€‹chcon å‘½ä»¤æ›´æ”¹ SELinux ä¸Šä¸‹æ–‡ã€‚chcon è®¾ç½®å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡ã€‚å®ƒå¯¹äºæµ‹è¯•å’Œå®éªŒå¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå®ƒä¸ä¼šå°†ä¸Šä¸‹æ–‡æ›´æ”¹ä¿å­˜åˆ° SELinux ä¸Šä¸‹æ–‡æ•°æ®åº“ä¸­ã€‚å½“ restorecon å‘½ä»¤è¿è¡Œæ—¶ï¼Œchcon å‘½ä»¤æ‰€åšçš„æ›´æ”¹ä¹ŸåŒæ ·æ— æ³•ä¿ç•™ã€‚æ­¤å¤–ï¼Œå¦‚æœå¯¹æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œé‡æ–°æ ‡è®°ï¼Œåˆ™ä½¿ç”¨ chcon æ›´æ”¹è¿‡çš„æ–‡ä»¶çš„ SELinux ä¸Šä¸‹æ–‡å°†æ¢å¤ã€‚ 12345678910111213# 1. åˆ›å»ºæµ‹è¯•ç›®å½•å¹¶æŸ¥çœ‹å…¶ SELinux ä¸Šä¸‹æ–‡[root@localhost ~]\\# mkdir testdir[root@localhost ~]\\# ls -dZ testdirunconfined_u:object_r:admin_home_t:s0 testdir# 2. ä½¿ç”¨ chcon å‘½ä»¤ä¿®æ”¹å…¶ SELinux ä¸Šä¸‹æ–‡[root@localhost ~]\\# chcon -t var_lib_nfs_t testdir[root@localhost ~]\\# ls -dZ testdirunconfined_u:object_r:var_lib_nfs_t:s0 testdir# 3. ä½¿ç”¨ restorecon å‘½ä»¤é‡ç½®å…¶ SELinux ä¸Šä¸‹æ–‡[root@localhost ~]\\# restorecon -v testdirRelabeled /root/testdir from unconfined_u:object_r:var_lib_nfs_t:s0 to unconfined_u:object_r:admin_home_t:s0[root@localhost ~]\\# ls -dZ testdirunconfined_u:object_r:admin_home_t:s0 testdir å®šä¹‰ SELinux é»˜è®¤æ–‡ä»¶ä¸Šä¸‹æ–‡è§„åˆ™ â€‹semanager fcontext å‘½ä»¤å¯æ˜¾ç¤ºå’Œä¿®æ”¹ restorecon ç”¨æ¥è®¾ç½®é»˜è®¤æ–‡ä»¶ä¸Šä¸‹æ–‡çš„è§„åˆ™ã€‚å®ƒä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼æ¥æŒ‡å®šè·¯å¾„å’Œæ–‡ä»¶åã€‚fcontext è§„åˆ™ä¸­æœ€å¸¸ç”¨çš„æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼æ˜¯ (/.*)?ï¼Œè¡¨ç¤º â€œå¯é€‰æ‹©åŒ¹é…åè·Ÿä»»ä½•æ•°é‡å­—ç¬¦çš„/â€ ã€‚å®ƒå°†ä¼šåŒ¹é…åœ¨è¡¨è¾¾å¼å‰é¢åˆ—å‡ºçš„ç›®å½•å¹¶é€’å½’åœ°åŒ¹é…è¯¥ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚ â€‹semanage fcontext å‘½ä»¤çš„é€‰é¡¹ï¼š é€‰é¡¹ æè¿° -a, --add æ·»åŠ æŒ‡å®šå¯¹è±¡ç±»å‹çš„è®°å½• -d, --delete åˆ é™¤æŒ‡å®šå¯¹è±¡ç±»å‹çš„è®°å½• -l, --list åˆ—å‡ºæŒ‡å®šå¯¹è±¡ç±»å‹çš„è®°å½• restorecon å‘½ä»¤ä¾èµ–äº policycoreutil è½¯ä»¶åŒ…ï¼Œsemanage å‘½ä»¤ä¾èµ–äº policycoreutil-python è½¯ä»¶åŒ…ã€‚ 123[root@localhost ~]\\# semanage fcontext -l | grep var/lib/nfs/var/lib/nfs(/.*)? all files system_u:object_r:var_lib_nfs_t:s0 /var/lib/nfs/rpc_pipefs(/.*)? all files &lt;&lt;None&gt;&gt; â€‹æ¥ 1 ä¸­çš„ä¾‹å­ï¼ˆæ–‡ä»¶å·²åˆ›å»ºï¼‰ï¼Œæ­¤æ¬¡æ°¸ä¹…è®¾ç½®å…¶ SELinux ä¸Šä¸‹æ–‡ï¼š 123456789101112131415# 4. å°† /root/testdir çš„ç±»å‹ä¸Šä¸‹æ–‡æ°¸ä¹…ä¿®æ”¹ä¸º var_lib_nfs_tï¼ˆç»§æ‰¿ï¼‰[root@localhost ~]\\# semanage fcontext -a -t var_lib_nfs_t &#x27;/root/testdir(/.*)?&#x27;[root@localhost ~]\\# ls -dZ testdir/unconfined_u:object_r:admin_home_t:s0 testdir/[root@localhost ~]\\# restorecon -RFvv testdir/Relabeled /root/testdir from unconfined_u:object_r:admin_home_t:s0 to system_u:object_r:var_lib_nfs_t:s0# 5. å°è¯•åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å†éªŒè¯ï¼š[root@localhost ~]\\# touch testdir/test.txt[root@localhost ~]\\# ls -Z testdir/test.txt unconfined_u:object_r:var_lib_nfs_t:s0 testdir/test.txt# 6. åˆ é™¤åˆšæ‰çš„é…ç½®[root@localhost ~]\\# semanage fcontext -d -t var_lib_nfs_t &#x27;/root/testdir(/.*)?&#x27;[root@localhost ~]\\# restorecon -RFvv testdir/Relabeled /root/testdir from system_u:object_r:var_lib_nfs_t:s0 to system_u:object_r:admin_home_t:s0Relabeled /root/testdir/test.txt from unconfined_u:object_r:var_lib_nfs_t:s0 to system_u:object_r:admin_home_t:s0 ä½¿ç”¨å¸ƒå°”å€¼è°ƒæ•´ SELinux ç­–ç•¥ â€‹SELinux å¸ƒå°”å€¼æ˜¯å¯æ›´æ”¹ SELinux ç­–ç•¥è¡Œä¸ºçš„å‚æ•°ã€‚SELinux å¸ƒå°”å€¼æ˜¯å¯ä»¥å¯ç”¨æˆ–ç¦ç”¨çš„è§„åˆ™ã€‚å®‰å…¨ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ SELinux å¸ƒå°”å€¼æ¥æœ‰é€‰æ‹©åœ°è°ƒæ•´ç­–ç•¥ã€‚ selinux-policy-doc è½¯ä»¶åŒ…é™„å¸¦çš„ SELinux man page ä¸­ä»‹ç»äº†å¯ç”¨å¸ƒå°”å€¼çš„ç”¨é€”ã€‚ä½¿ç”¨ man -k '_selinux' å‘½ä»¤å¯ä»¥åˆ—å‡ºè¿™äº› man pageã€‚ â€‹ä½¿ç”¨ getsebool å‘½ä»¤åˆ—å‡ºæœºå™¨çŠ¶æ€çš„å¸ƒå°”å€¼ã€‚ 12345678910111213141516# é€‰é¡¹ï¼š-a # åˆ—å‡ºæ‰€æœ‰é…ç½®# ä¾‹å­ï¼š[root@localhost ~]\\# getsebool -a | head -n 10abrt_anon_write --&gt; offabrt_handle_event --&gt; offabrt_upload_watch_anon_write --&gt; onantivirus_can_scan_system --&gt; offantivirus_use_jit --&gt; offauditadm_exec_content --&gt; onauthlogin_nsswitch_use_ldap --&gt; offauthlogin_radius --&gt; offauthlogin_yubikey --&gt; offawstats_purge_apache_log_files --&gt; off[root@localhost ~]\\# getsebool httpd_enable_homedirshttpd_enable_homedirs --&gt; off â€‹ä½¿ç”¨ setsebool å‘½ä»¤ä¿®æ”¹å¸ƒå°”å€¼ã€‚ 12345# é€‰é¡¹ï¼š-P # å°†è®¾ç½®æŒä¹…åŒ–åˆ°æ”¿ç­–æ–‡ä»¶ä¸­# ä¾‹å­ï¼š[root@localhost ~]\\# setsebool httpd_enable_homedirs on[root@localhost ~]\\# getsebool -P httpd_enable_homedirs off â€‹ä½¿ç”¨ semanage boolean -l å°†æŠ¥å‘Šå¸ƒå°”å€¼æ˜¯å¦ä¸ºæŒä¹…å€¼ï¼Œå¹¶æä¾›è¯¥å¸ƒå°”å€¼çš„ç®€çŸ­æè¿°ã€‚ 12[root@localhost ~]\\# semanage boolean -l | grep httpd_enable_homedirs httpd_enable_homedirs (off , off) Allow httpd to enable homedirs â€‹ä½¿ç”¨ semanage boolean -l -C åˆ—å‡ºå½“å‰çŠ¶æ€ä¸é»˜è®¤é…ç½®ä¸åŒçš„å¸ƒå°”å€¼. 1[root@localhost ~]\\# semanage boolean -l -C æ’æŸ¥å’Œè§£å†³ SELinux é—®é¢˜ â€‹è§£å†³å›  SELinux é˜»æ­¢è€Œä½¿å¾—æŸäº›åº”ç”¨æ— æ³•è®¿é—®æŸäº›æ–‡ä»¶æ—¶åº”æ³¨æ„ä»¥ä¸‹åŸåˆ™ï¼š åœ¨è€ƒè™‘ä»»ä½•è°ƒæ•´ä¹‹å‰ï¼Œåº”äº†è§£åˆ° SELinux ç¦æ­¢æ„å›¾è®¿é—®çš„è¿™ä¸€åšæ³•ä¹Ÿè®¸å¾ˆæ­£ç¡®ï¼Œå¦‚ Web æœåŠ¡å™¨å¯¹ /home çš„è®¿é—®ï¼› æœ€å¸¸è§çš„ SELinux é—®é¢˜æ˜¯ä½¿ç”¨ä¸æ­£ç¡®çš„æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥è¿è¡Œ restorecon æ¥æ›´æ­£å› ä¸ºç§»åŠ¨æ–‡ä»¶äº§ç”Ÿçš„æ–‡ä»¶è®¿é—®é—®é¢˜ï¼› å¯¹äºä¸¥è‹›é™åˆ¶æ€§è®¿é—®çš„å¦ä¸€ä¸ªè¡¥æ•‘æªæ–½å¯ä»¥æ˜¯è°ƒæ•´å¸ƒå°”å€¼ï¼Œå¦‚ ftpd_anon_write å¸ƒå°”å€¼æ§åˆ¶åŒ¿å FTP ç”¨æˆ·èƒ½å¦ä¸Šä¼ æ–‡ä»¶ï¼› SELinux ç­–ç•¥å¯èƒ½å­˜åœ¨é˜»æ­¢åˆæ³•è®¿é—®çš„æ¼æ´ï¼Œæ­¤ç§æƒ…å†µæå°‘ã€‚ ç›‘æ§ SELinux å†²çª ä¾èµ–è½¯ä»¶åŒ…ï¼šsetroubleshoot-serverã€‚å®‰è£…å SELinux æ¶ˆæ¯å°†ä¼šå‘é€è‡³ /var/log/messagesã€‚ â€‹setroubleshoot-server ä¾¦å¬ /var/log/audit/audit.log ä¸­çš„å®¡æ ¸æ¶ˆæ¯ï¼Œå¹¶å‘é€ç®€çŸ­æ‘˜è¦åˆ° /var/log/messagesã€‚è¯¥æ‘˜è¦åŒ…æ‹¬ SELinux å†²çªçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰ï¼Œå¯ç”¨äºæ”¶é›†æ›´å¤šä¿¡æ¯ã€‚sealert -l UUID å‘½ä»¤ç”¨äºç”Ÿæˆç‰¹å®šäº‹ä»¶çš„æŠ¥å‘Šã€‚ä½¿ç”¨ sealert -a /var/log/audit/audit.log å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­ç”Ÿæˆæ‰€æœ‰äº‹ä»¶çš„æŠ¥å‘Šã€‚ ä½¿ç”¨ ausearch å‘½ä»¤å¯ä»¥æ£€ç´¢ /var/log/audit.log ä¸­çš„æ—¥å¿—å†…å®¹ï¼Œ-m é€‰é¡¹æŒ‡å®šæ¶ˆæ¯ç±»å‹ï¼Œ-ts æŒ‡å®šæ—¶é—´ï¼Œå¦‚ï¼š 12[root@localhost ~]\\# ausearch -m AVC -ts recent&lt;no matches&gt; ä»¥æ ‡å‡† Apache Web æœåŠ¡å™¨ä¸ºä¾‹ â€‹åœ¨ root ç”¨æˆ·å®¶ç›®å½•åˆ›å»º html æ–‡ä»¶å¹¶å°†å…¶ç§»åŠ¨åˆ° Apache é™æ€é¡µå­˜æ”¾ç›®å½•ï¼Œå¯åŠ¨ Apache æœåŠ¡åè®¿é—®ï¼š 12345678[root@localhost ~]\\# touch /root/file &amp;&amp; mv /root/file /var/www/html[root@localhost ~]\\# systemctl start httpd[root@localhost ~]\\# curl http://localhost/file&lt;!DOCTYPE HTML PUBLIC &quot;-//IFTF//DTD HTML 2.0//EN&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Forbidden&lt;/h1&gt;&lt;p&gt;You don\\`t have permission to access /file on this server.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; â€‹æŒ‰ç†è¯´ file æ–‡ä»¶åœ¨ Apache çš„é™æ€é¡µç›®å½•é‡Œï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°è®¿é—®è¢«æ‹’ç»çš„æƒ…å†µï¼Œä½†æ˜¯å®ƒå´è¿”å›äº† permission denied çš„é”™è¯¯æç¤ºé¡µé¢ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹ 1.ç›‘æ§ SELinux å†²çª é‡Œçš„ä¸¤ä¸ªæ–‡ä»¶æ¥åˆ†æé—®é¢˜ï¼š 1234567[root@localhost ~]\\# tail /var/log/audit/audit.logtype=AVC msg=audit(1392944135.482:429): avc: denied &#123; getattr &#125; for pid=1609 comm=&quot;httpd&quot; path=&quot;/var/www/html/file&quot; dev=&quot;sda1&quot; ino=8980981 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file[root@localhost ~]\\# tail /var/log/messagesOct 8 10:18:20 localhost setroubleshoot: SELinux is preventing /usr/sbin/httpd from getattr access on the file. For complete SELinux messages, run `sealert -l 12345678-1234-5678-1234567890ab`. â€‹æ ¹æ®æç¤ºå¯ä»¥ä½¿ç”¨ sealert -l 12345678-1234-5678-1234567890ab æ¥æŸ¥çœ‹æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯èƒ½çš„è§£å†³åŠæ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142[root@localhost ~]\\# sealert -l 12345678-1234-5678-1234567890abSELinux is preventing /usr/sbin/httpd from getattr access on the file.***** Plugin catchall (100. confidence) suggests *****************************************If you believe that httpd should be allowed getattr access on the file by default.Then you should report this as a bug.You can generate a local policy module to allow this access. Doallow this access for now by executing:# grep httpd /var/log/audit/audit.log | audit2allow -M mypol# semodule -i mypol.ppAdditional Information:Source Context system_u:system_r:httpd_t:s0Target Context unconfined_u:object_r:admin_home_t:s0Target Objects [ file ]Source httpdSource Path /usr/sbin/httpdPort &lt;Unknown&gt;Host localhostSource RPM Packages httpd-2.4.6-14.el7.x86_64Target RPM PackagesPolicy RPM selinux-policy-3.12.1-124.el7.noarchSelinux Enabled TruePolicy Type targetedEnforcing Mode Enforcing......Raw Audit Messagestype=AVC msg=audit(1392944135.482:429): avc: denied &#123; getattr &#125; for pid=1609 comm=&quot;httpd&quot; path=&quot;/var/www/html/file&quot; dev=&quot;sda1&quot; ino=8980981 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=filetype=SYSCALL msg=audit(1392944135.482:429): arch=x86_64 syscall=lstat success=no exit=EACCES a0=7f9fed0edea88 a1=7fff7bffc770 a2=7fff7bffc770 a3=0 items=0 ppid=1608 pid=1609 auid=4294967295 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=4294967295 comm=httpd exe=/usr/sbin/httpd subj=system_u:system_r:httpd_t:s0 key=(null)Hash: httpd,httpd_t,admin_home_t,file,getattr â€‹ä»è¯¥è¯¦ç»†ä¿¡æ¯çš„ &quot;Raw Audit Messages&quot; éƒ¨åˆ†å¯ä»¥çœ‹å‡ºæ¥ç›®æ ‡æ–‡ä»¶ /var/www/html/file æ­£æ˜¯é—®é¢˜æ‰€åœ¨ï¼šç›®æ ‡ä¸Šä¸‹æ–‡ tcontext å¹¶ä¸å±äº Web æœåŠ¡å™¨ã€‚å¯ä»¥ä½¿ç”¨ restorecon /var/www/html/file å‘½ä»¤ä¿®å¤æ­¤æ–‡ä»¶ä¸Šä¸‹æ–‡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ä½¿ç”¨ ACL æ§åˆ¶å¯¹æ–‡ä»¶çš„è®¿é—®","slug":"Linux | ä½¿ç”¨ ACL æ§åˆ¶å¯¹æ–‡ä»¶çš„è®¿é—®","date":"2022-08-15T06:23:02.784Z","updated":"2022-08-15T06:32:10.133Z","comments":true,"path":"2022-08-15-Linux | ä½¿ç”¨ ACL æ§åˆ¶å¯¹æ–‡ä»¶çš„è®¿é—®.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E4%BD%BF%E7%94%A8%20ACL%20%E6%8E%A7%E5%88%B6%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ¦‚è¿° â€‹ACL,å³è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œå®ƒå¯ä»¥æ ¹æ®å®é™…è¦æ±‚æŒ‡å®šå¤šä¸ªç”¨æˆ·å’Œç»„ä»¥ä¸åŒçš„æ–‡ä»¶æƒé™é›†æ¥è®¿é—®æ–‡ä»¶ã€‚å€ŸåŠ© ACLï¼Œå¯ä»¥ä½¿ç”¨ä¸å¸¸è§„æ–‡ä»¶æƒé™ç›¸åŒçš„æƒé™æ ‡å¿—ï¼ˆè¯»å–ã€å†™å…¥å’Œæ‰§è¡Œï¼‰å‘ç”±ç”¨æˆ·åã€ç»„åã€UID æˆ– GID æ ‡è¯†çš„å¤šä¸ªç”¨æˆ·å’Œç»„æˆäºˆæƒé™ã€‚é™¤äº†æ–‡ä»¶æ‰€æœ‰è€…å’Œæ–‡ä»¶çš„ç»„ä»å±å…³ç³»ä¹‹å¤–ï¼Œè¿™äº›é¢å¤–çš„ç”¨æˆ·å’Œç»„åˆ†åˆ«è¢«ç§°ä¸ºæŒ‡å®šç”¨æˆ·å’ŒæŒ‡å®šç»„ï¼Œå› ä¸ºä»–ä»¬ä¸æ˜¯åœ¨é•¿åˆ—è¡¨ä¸­æŒ‡å®šçš„ï¼Œè€Œåœ¨ ACL ä¸­æŒ‡å®šçš„ã€‚ â€‹ç”¨æˆ·å¯ä»¥å¯¹å±äºè‡ªå·±çš„æ–‡ä»¶å’Œç›®å½•è®¾ç½® ACLã€‚è¢«åˆ†é…äº† CAP_FOWNER Linux åŠŸèƒ½çš„ç‰¹æƒç”¨æˆ·å¯ä»¥å¯¹ä»»ä½•æ–‡ä»¶æˆ–ç›®å½•è®¾ç½® ACLã€‚æ–°æ–‡ä»¶å’Œå­ç›®å½•ä¼šè‡ªåŠ¨ä»çˆ¶ç›®å½•çš„é»˜è®¤ ACLï¼ˆè‹¥å·²è®¾ç½®ï¼‰ä¸­ç»§æ‰¿ ACL è®¾ç½®ã€‚ä¸å¸¸è§„æ–‡ä»¶çš„è®¿é—®è§„åˆ™ç›¸ä¼¼ï¼Œçˆ¶ç›®å½•å±‚æ¬¡ç»“æ„è‡³å°‘éœ€è¦å…¶ä»–æœç´¢ï¼ˆæ‰§è¡Œï¼‰æƒé™é›†ï¼Œä»¥ä¾¿å¯ç”¨æŒ‡å®šç”¨æˆ·å’ŒæŒ‡å®šç»„çš„è®¿é—®æƒé™ã€‚ â€‹æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿéœ€æŒ‡å®šå¯ç”¨ ACL æ”¯æŒï¼Œå…¶ä¸­ XFS æ–‡ä»¶ç³»ç»Ÿå†…ç½®æœ‰ ACL æ”¯æŒï¼Œext4 æˆ– ext4 é»˜è®¤æƒ…å†µä¸‹ä¼šå¯ç”¨ acl é€‰é¡¹ï¼Œä½†åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œåº”ç¡®è®¤æ˜¯å¦å¯ç”¨äº† ACL æ”¯æŒã€‚è¦å¯ç”¨æ–‡ä»¶ç³»ç»Ÿ ACL æ”¯æŒï¼Œé¡»åœ¨ mount å‘½ä»¤æˆ– /etc/fstab é…ç½®æ–‡ä»¶çš„æ–‡ä»¶ç³»ç»Ÿæ¡ç›®ä¸­ä½¿ç”¨ ACL é€‰é¡¹ã€‚ æŸ¥çœ‹ ACL æƒé™ â€‹ä½¿ç”¨ ls -l å‘½ä»¤ä»…æŸ¥çœ‹æ–‡ä»¶æœ€å°‘çš„ ACL è®¾ç½®è¯¦ç»†ä¿¡æ¯ï¼š 1234567[root@localhost ~]\\# ls -ltotal 16-rw-r--r--. 1 root root 18 Sep 16 17:01 1-rw-------. 1 root root 2760 Jun 3 07:16 anaconda-ks.cfg-rw-------. 1 root root 2078 Jun 3 07:16 original-ks.cfg-rw-r--r--. 1 root root 140 Sep 16 17:31 tmp.sh# æƒé™åˆ—æœ€åä¸€ä¸ªå­—ç¬¦ä¸ºåŠ å·(+)ä»£è¡¨è¯¥æ–‡ä»¶ä¸Šå­˜åœ¨è‹¥å¹²æ¡ç›®çš„æ‹“å±• ACL ç»“æ„ï¼Œä½†æˆ‘æ²¡æ‰¾åˆ°è¿™æ ·çš„æ–‡ä»¶ã€‚ ä½¿ç”¨ chmod å‘½ä»¤æ›´æ”¹å…·æœ‰ ACL çš„æ–‡ä»¶çš„ç»„æƒé™åˆ™ä¸ä¼šæ›´æ”¹ç»„æ‰€æœ‰è€…æƒé™ï¼Œè€Œæ˜¯æ›´æ”¹ ACL æ©ç ã€‚å¦‚æœç›®çš„æ˜¯æ›´æ–°æ–‡ä»¶çš„ç»„æ‰€æœ‰è€…æƒé™ï¼Œéœ€ä½¿ç”¨ setfacl -m g::perms &lt;file&gt;ã€‚ â€‹ä½¿ç”¨ getfacl &lt;file&gt; æŸ¥çœ‹æ–‡ä»¶çš„ ACL è¯¦ç»†ä¿¡æ¯ã€‚ 123456789101112[root@localhost ~]\\# getfacl /run/log/journal/6651ee1da4824a37975cd5245c8cb076/system.journal getfacl: Removing leading &#x27;/&#x27; from absolute path names# file: run/log/journal/6651ee1da4824a37975cd5245c8cb076/system.journal# owner: root# group: systemd-journaluser::rw-group::r--group:adm:r--group:wheel:r--mask::r--other::--- 12345678[root@localhost ~]\\# getfacl .# file: .# owner: root# group: rootuser::r-xgroup::r-xother::--- â€‹ä¸€ä¸ªè¿›ç¨‹èƒ½å¦è®¿é—®æ–‡ä»¶ï¼Œå°†æŒ‰ç…§ä»¥ä¸‹è§„åˆ™åº”ç”¨æ–‡ä»¶æƒé™å’Œ ACLï¼š å¦‚æœæ­£åœ¨ä»¥æ–‡ä»¶æ‰€æœ‰è€…èº«ä»½è¿è¡Œè¿›ç¨‹ï¼Œåˆ™åº”ç”¨æ–‡ä»¶çš„ç”¨æˆ· ACL æƒé™ï¼› å¦‚æœæ­£åœ¨ä»¥æŒ‡å®šç”¨æˆ· ACL æ¡ç›®ä¸­åˆ—å‡ºçš„ç”¨æˆ·èº«ä»½è¿è¡Œè¿›ç¨‹ï¼Œåˆ™åº”æŒ‡å®šç”¨æˆ· ACL æƒé™ï¼ˆåªè¦æ©ç å…è®¸ï¼‰ï¼› å¦‚æœæ­£åœ¨ä»¥ä¸æ–‡ä»¶çš„ç»„æ‰€æœ‰è€…ç›¸åŒ¹é…çš„ç»„èº«ä»½è¿è¡Œè¿›ç¨‹ï¼Œæˆ–è€…ä»¥å…·æœ‰æ˜¾ç¤ºæŒ‡å®šç»„ ACL æ¡ç›®çš„ç»„èº«ä»½è¿è¡Œè¿›ç¨‹ï¼Œåˆ™åº”ç”¨ç›¸åŒ¹é…çš„ ACL æƒé™ï¼ˆåªè¦æ©ç å…è®¸ï¼‰ï¼› å¦åˆ™ï¼Œå°†åº”ç”¨æ–‡ä»¶çš„å…¶ä»– ACL æƒé™ã€‚ å½“ systemd-journald é…ç½®ä¸ºä½¿ç”¨æŒä¹…å­˜å‚¨æ—¶ï¼Œç³»ç»Ÿç®¡ç†å‘˜åº”åœ¨ /var/log/journal æ–‡ä»¶å¤¹ä¸Šè®¾ç½® ACLã€‚ â€‹systemd-udevd ç›‘å¬å†…æ ¸å‘å‡ºçš„è®¾å¤‡äº‹ä»¶ï¼Œå¹¶æ ¹æ® udev è§„åˆ™å¤„ç†æ¯ä¸ªäº‹ä»¶ï¼Œè¯¥æœåŠ¡çš„åŠŸèƒ½ç›¸å½“äº Windows ä¸Šçš„è®¾å¤‡ç®¡ç†å™¨ã€‚å®ƒæ ¹æ®ä¸€ç»„ udev è§„åˆ™ï¼Œæ¥å¯ç”¨æŸäº›è®¾å¤‡çš„ uaccess æ ‡è®°ï¼Œå¦‚ CD/DVD æ’­æ”¾å™¨æˆ–åˆ»å½•æœºã€USB å­˜å‚¨è®¾å¤‡ã€å£°å¡ç­‰ç­‰ã€‚æ¯ä¸ªç™»é™† GUI çš„ç”¨æˆ·å°†ä¼šåˆ·æ–°çƒ­æ’æ‹”è®¾å¤‡çš„ ACLã€‚ 1234567891011[root@localhost ~]\\# getfacl /dev/sr0getfacl: Removing leading &#x27;/&#x27; from absolute path names# file: dev/sr0# owner: root# group: cdromuser::rw-user:student:rw-group::rw-mask::rw-other::--- æ›´æ”¹ ACL æƒé™ â€‹ä½¿ç”¨ setfacl -m &lt;acl&gt; file æˆ– setfacl -M &lt;file&gt; file æ¥ä¿®æ”¹æ–‡ä»¶çš„ acl è§„åˆ™ã€‚ï¼ˆæ·»åŠ æˆ–ä¿®æ”¹ã€ä¸ä¼šèˆå¼ƒå…¶ä»–è§„åˆ™ï¼‰ã€‚ 1234567891011[root@localhost ~]\\# setfacl -m u:student:rwx tmp.sh[root@localhost ~]\\# getfacl tmp.sh# file: tmp.sh# owner: root# group: rootuser::rw-user:student:rwxgroup::r--mask::rwxother::r-- â€‹ä½¿ç”¨ setfacl --set &lt;acl&gt; file æˆ– setfacl --set-file &lt;file&gt; file é€‰é¡¹æ¥å®Œå…¨æ›¿ä»£æ–‡ä»¶çš„ acl è§„åˆ™ã€‚ï¼ˆåº”ç”¨æ–°è§„åˆ™ï¼Œèˆå¼ƒæ‰€æœ‰æ—§è§„åˆ™ï¼‰ â€‹é€šè¿‡ç®¡é“å°† fileA æ–‡ä»¶çš„ ACL è§„åˆ™åº”ç”¨è‡³ fileBï¼š 1[root@localhost ~]\\# getfacl fileA | setfacl --set-file=- fileB # - å¯ä»¥æŒ‡å®šä½¿ç”¨ stdin æ–‡ä»¶ â€‹ä½¿ç”¨ -R é€‰é¡¹å¯ä»¥é€’å½’çš„ä¿®æ”¹ç›®å½•ä¸­æ–‡ä»¶çš„ ACLã€‚ 1[root@localhost ~]\\# setfacl -R -m u:name:rx directory â€‹ä½¿ç”¨ setfacl -x &lt;acl&gt; file æ¥åˆ é™¤ acl æ¡ç›®ï¼š 1[root@localhost ~]\\# setfacl -x u:name, g:name file â€‹ä½¿ç”¨ setfacl -b file æ¥åˆ é™¤æ–‡ä»¶çš„æ‰€æœ‰ ACL æ¡ç›®ï¼š 123456789[root@localhost ~]\\# setfacl -b tmp.sh[root@localhost ~]\\# getfacl tmp.sh# file: tmp.sh# owner: root# group: rootuser::rw-group::r--other::r-- â€‹ä¸ºäº†ç¡®ä¿åœ¨ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ç»§æ‰¿ç‰¹å®šçš„ ACLï¼Œé¡»åœ¨ç›®å½•ä¸Šä½¿ç”¨é»˜è®¤ ACLã€‚ 1[root@localhost ~]\\# setfacl -m d:u:name:rx directory â€‹ä½¿ç”¨ setfacl -k directory å‘½ä»¤åˆ é™¤ç›®å½•çš„æ‰€æœ‰é»˜è®¤ ACL æ¡ç›®ã€‚ 1[root@localhost ~]\\# setfacl -k directory","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜","slug":"Linux | ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜","date":"2022-08-15T06:18:03.264Z","updated":"2022-08-15T06:20:03.403Z","comments":true,"path":"2022-08-15-Linux | ç³»ç»Ÿæ€§èƒ½è°ƒä¼˜.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ¦‚è¿° â€‹ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥åŸºäºå¤šç§ç”¨ä¾‹å·¥ä½œè´Ÿè½½æ¥è°ƒæ•´å„ç§è®¾å¤‡è®¾ç½®ï¼Œä»¥æ­¤ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚tuned å®ˆæŠ¤è¿›ç¨‹ä¼šåˆ©ç”¨åæ˜ ç‰¹å®šå·¥ä½œè´Ÿè½½è¦æ±‚çš„è°ƒä¼˜é…ç½®æ–‡ä»¶ï¼Œä»¥é™æ€å’ŒåŠ¨æ€ä¸¤ç§æ–¹å¼åº”ç”¨è°ƒä¼˜è°ƒæ•´ã€‚ é™æ€è°ƒä¼˜ â€‹tuned å®ˆæŠ¤è¿›ç¨‹ä¼šåœ¨æœåŠ¡å¯åŠ¨æ—¶æˆ–é€‰æ‹©æ–°çš„è°ƒä¼˜é…ç½®æ–‡ä»¶æ—¶åº”ç”¨ç³»ç»Ÿè®¾ç½®ã€‚é™æ€è°ƒä¼˜ä¼šå¯¹é…ç½®æ–‡ä»¶ä¸­ç”± tuned åœ¨è¿è¡Œæ—¶åº”ç”¨çš„é¢„å®šä¹‰ kernel å‚æ•°è¿›è¡Œé…ç½®ã€‚å¯¹äºé™æ€è°ƒä¼˜è€Œè¨€ï¼Œå†…æ ¸å‚æ•°æ˜¯é’ˆå¯¹æ•´ä½“æ€§èƒ½é¢„æœŸè€Œè®¾ç½®çš„ï¼Œä¸ä¼šéšç€æ´»è·ƒåº¦çš„å˜åŒ–è€Œè¿›è¡Œè°ƒæ•´ã€‚ åŠ¨æ€è°ƒä¼˜ â€‹å¯¹äºåŠ¨æ€è°ƒä¼˜è€Œè¨€ï¼Œtuned å®ˆæŠ¤è¿›ç¨‹ä¼šç›‘è§†ç³»ç»Ÿæ´»åŠ¨ï¼Œå¹¶æ ¹æ®è¿è¡Œæ—¶è¡Œä¸ºçš„å˜åŒ–æ¥è°ƒæ•´è®¾ç½®ã€‚ä»æ‰€é€‰è°ƒä¼˜é…ç½®æ–‡ä»¶ä¸­å£°æ˜çš„åˆå§‹è®¾ç½®å¼€å§‹ï¼ŒåŠ¨æ€è°ƒä¼˜ä¼šä¸æ–­è¿›è¡Œè°ƒä¼˜è°ƒæ•´ä»¥é€‚åº”å½“å‰å·¥ä½œè´Ÿè½½ã€‚ é…ç½®æ–‡ä»¶ â€‹tuned åº”ç”¨æä¾›çš„é…ç½®æ–‡ä»¶åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç±»åˆ«ï¼š èŠ‚èƒ½å‹é…ç½®æ–‡ä»¶ï¼› æ€§èƒ½æå‡å‹é…ç½®æ–‡ä»¶ï¼› â€‹æ€§èƒ½æå‡å‹é…ç½®æ–‡ä»¶ä¸­åŒ…æ‹¬ä¾§é‡äºä»¥ä¸‹æ–¹é¢çš„é…ç½®æ–‡ä»¶ï¼š å­˜å‚¨å’Œç½‘ç»œçš„ä½å»¶è¿Ÿï¼› å­˜å‚¨å’Œç½‘ç»œçš„é«˜ååé‡ï¼› è™šæ‹Ÿæœºæ€§èƒ½ï¼› è™šæ‹ŸåŒ–ä¸»æœºæ€§èƒ½ã€‚ è°ƒä¼˜é…ç½®æ–‡ä»¶ ç”¨é€” balanced(å‡è¡¡) é€‚åˆéœ€è¦åœ¨èŠ‚èƒ½å’Œæ€§èƒ½ä¹‹é—´è¿›è¡ŒæŠ˜è¡·çš„ç³»ç»Ÿã€‚ desktop ä» balanced é…ç½®æ–‡ä»¶è¡ç”Ÿè€Œæ¥ã€‚åŠ å¿«äº¤äº’å¼åº”ç”¨å“åº”é€Ÿåº¦ã€‚ throughput-performance è°ƒä¼˜ç³»ç»Ÿï¼Œä»¥è·å¾—æœ€å¤§ååé‡ã€‚ latency-performance é€‚åˆéœ€è¦ç‰ºç‰²èƒ½è€—æ¥è·å–ä½å»¶è¿Ÿçš„æœåŠ¡å™¨ç³»ç»Ÿã€‚ network-latency ä» latency-performance é…ç½®æ–‡ä»¶è¡ç”Ÿè€Œæ¥ã€‚å®ƒå¯ä»¥å¯ç”¨é¢å¤–çš„ç½‘ç»œè°ƒä¼˜å‚æ•°ä»¥æä¾›ä½ç½‘ç»œå»¶è¿Ÿã€‚ network-throughput ä» throughput-performance é…ç½®æ–‡ä»¶è¡ç”Ÿè€Œæ¥ã€‚åº”ç”¨å…¶ä»–ç½‘ç»œè°ƒä¼˜å‚æ•°ï¼Œä»¥è·å¾—æœ€å¤§ç½‘ç»œååé‡ã€‚ powersave è°ƒä¼˜ç³»ç»Ÿï¼Œä»¥æœ€å¤§ç¨‹åº¦å®ç°èŠ‚èƒ½ã€‚ oracle åŸºäº throughput-performance é…ç½®æ–‡ä»¶ï¼Œé’ˆå¯¹ oracle æ•°æ®åº“è´Ÿè½½è¿›è¡Œä¼˜åŒ–ã€‚ virtual-guest å½“ç³»ç»Ÿåœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œæ—¶ï¼Œè°ƒä¼˜ç³»ç»Ÿä»¥è·å¾—æœ€é«˜æ€§èƒ½ã€‚ virtual-host å½“ç³»ç»Ÿå……å½“è™šæ‹Ÿæœºå®¿ä¸»æœºæ—¶ï¼Œè°ƒä¼˜ç³»ç»Ÿä»¥è·å¾—æœ€é«˜æ€§èƒ½ã€‚ â€‹é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ï¼šaccelerator-performanceã€hpc-computeã€intel-sstã€optimize-serial-console ç­‰é…ç½®æ–‡ä»¶ã€‚ ä»å‘½ä»¤è¡Œç®¡ç†è°ƒä¼˜é…ç½®æ–‡ä»¶ â€‹ä½¿ç”¨ tuned-adm å‘½ä»¤æ¥æ›´æ”¹ tuned å®ˆæŠ¤è¿›ç¨‹çš„è®¾ç½®ã€‚æ­¤å‘½ä»¤å¯ä»¥æŸ¥è¯¢å½“å‰è®¾ç½®ã€åˆ—å‡ºå¯ç”¨çš„é…ç½®æ–‡ä»¶ã€ä¸ºç³»ç»Ÿæ¨èè°ƒä¼˜é…ç½®æ–‡ä»¶ã€ç›´æ¥æ›´æ”¹é…ç½®æ–‡ä»¶æˆ–å…³é—­è°ƒä¼˜ã€‚ â€‹ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨ tuned-adm active æ¥ç¡®å®šå½“å‰æ´»åŠ¨çš„è°ƒä¼˜é…ç½®æ–‡ä»¶ã€‚ 12[root@localhost ~]\\# tuned-adm activeCurrent active profile: virtual-guest â€‹ä½¿ç”¨ tuned-adm list å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è°ƒä¼˜é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬å†…ç½®çš„é…ç½®æ–‡ä»¶å’Œç³»ç»Ÿç®¡ç†å‘˜åˆ›å»ºçš„è‡ªå®šä¹‰è°ƒä¼˜é…ç½®æ–‡ä»¶ã€‚ 12345678910111213141516[root@localhost ~]\\# tuned-adm listAvailable profiles:- accelerator-performance - Throughput performance based tuning with disabled higher latency STOP states- balanced - General non-specialized tuned profile- desktop - Optimize for the desktop use-case- hpc-compute - Optimize for HPC compute workloads- intel-sst - Configure for Intel Speed Select Base Frequency- latency-performance - Optimize for deterministic performance at the cost of increased power consumption- network-latency - Optimize for deterministic performance at the cost of increased power consumption, focused on low latency network performance- network-throughput - Optimize for streaming network throughput, generally only necessary on older CPUs or 40G+ networks- optimize-serial-console - Optimize for serial console use.- powersave - Optimize for low power consumption- throughput-performance - Broadly applicable tuning that provides excellent performance across a variety of common server workloads- virtual-guest - Optimize for running inside a virtual guest- virtual-host - Optimize for running KVM guestsCurrent active profile: virtual-guest â€‹ä½¿ç”¨ tuned-adm profile &lt;profilename&gt; æ¿€æ´»æ›´åŠ ç¬¦åˆå½“å‰æœºå™¨è°ƒä¼˜è¦æ±‚çš„å…¶å®ƒé…ç½®æ–‡ä»¶ã€‚ 123[root@localhost ~]\\# tuned-adm profile desktop[root@localhost ~]\\# tuned-adm activeCurrent active profile: desktop â€‹ä½¿ç”¨ tuned-adm recommend å‘½ä»¤æ¥è·å¾—ç³»ç»Ÿæ¨èçš„è°ƒä¼˜é…ç½®æ–‡ä»¶ï¼Œè¯¥æœºåˆ¶ç”¨äºåœ¨å®‰è£…åç¡®å®šç³»ç»Ÿçš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚ 12[root@localhost ~]\\# tuned-adm recommendvirtual-guest â€‹ä½¿ç”¨ tuned-adm off å…³é—­ tuned-adm è°ƒä¼˜ã€‚ 123[root@localhost ~]\\# tuned-adm off[root@localhost ~]\\# tuned-adm activeNo current active profile. â€‹å¦‚éœ€å¼€å¯è°ƒä¼˜ï¼Œä½¿ç”¨ tuned-adm profile &lt;profilename&gt; å¯ç”¨è°ƒä¼˜é…ç½®æ–‡ä»¶å³å¯ã€‚ è°ƒä¼˜è¿›ç¨‹è°ƒåº¦ â€‹è®¡ç®—æœºç³»ç»Ÿä¸Šè¿è¡Œçš„è¿›ç¨‹çº¿ç¨‹æ•°è¶…å‡ºäº† CPU æ•°é‡ï¼Œé€šè¿‡ä½¿ç”¨å¤šä»»åŠ¡æŠ€æœ¯ï¼ŒLinux å’Œå…¶ä»–æ“ä½œç³»ç»Ÿå¯è¿è¡Œè¶…å‡ºå…¶å¤„ç†å•å…ƒæ•°çš„è¿›ç¨‹ã€‚æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦ç¨‹åºåœ¨å•ä¸ªæ ¸å¿ƒä¸Šçš„è¿›ç¨‹ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ï¼Œä»è€Œç»™äººä¸€ç§æœ‰å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œçš„å°è±¡ã€‚ â€‹ä¸åŒè¿›ç¨‹çš„é‡è¦ç¨‹åº¦ä¸åŒï¼Œè¿›ç¨‹è°ƒåº¦ç¨‹åºå¯ä»¥é…ç½®ä¸ºé’ˆå¯¹ä¸åŒçš„è¿›ç¨‹é‡‡ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ã€‚å¸¸è§„ç³»ç»Ÿä¸Šè¿è¡Œçš„å¤§å¤šæ•°è¿›ç¨‹æ‰€ä½¿ç”¨çš„è°ƒåº¦ç­–ç•¥ç§°ä¸º SCHED_OTHERï¼ˆä¹Ÿç§°ä¸ºSCHED_NORMALï¼‰ï¼Œä½†è¿˜æœ‰å…¶ä»–ä¸€äº›ç­–ç•¥å¯æ»¡è¶³å„ç§å„æ ·çš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚ä¸ºè¿›ç¨‹è®¾ç½®é™æ€çš„ nice å€¼å¯ä»¥è®¾ç½®è¿›ç¨‹çš„é™æ€ä¼˜å…ˆåº¦ã€‚Linux çš„ nice å€¼èŒƒå›´ä¸º -20 åˆ° 19ï¼Œæ•°å€¼è¶Šå¤§åˆ™ä¼˜å…ˆçº§è¶Šä½ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹å°†ç»§æ‰¿å…¶çˆ¶è¿›ç¨‹çš„ nice çº§åˆ«ï¼Œé€šå¸¸ä¸º 0ï¼Œä¼˜å…ˆçº§è¾ƒé«˜çš„è¿›ç¨‹æ›´åŠ å®¹æ˜“è·å¾— CPU èµ„æºã€‚ æŸ¥çœ‹è¿›ç¨‹çš„ nice çº§åˆ« â€‹ä½¿ç”¨ top å‘½ä»¤å¯é€šè¿‡äº¤äº’æ–¹å¼æŸ¥çœ‹å’Œç®¡ç†è¿›ç¨‹ã€‚è¯¥å‘½ä»¤çš„è¾“å‡ºé»˜è®¤æ˜¾ç¤º nice çº§åˆ«ï¼ˆNIåˆ—ï¼‰å’Œä¼˜å…ˆçº§ï¼ˆPRåˆ—ï¼‰ï¼Œåœ¨ top ç•Œé¢ä¸­ï¼Œnice çº§åˆ«æ˜ å°„è‡³å†…éƒ¨ç³»ç»Ÿä¼˜å…ˆçº§çš„å…³ç³»æ˜¯ï¼šNIå€¼ + 20 = PRå€¼ã€‚ 123456789101112131415[root@localhost ~]\\# toptop - 14:55:11 up 6:11, 2 users, load average: 0.05, 0.01, 0.00Tasks: 333 total, 1 running, 332 sleeping, 0 stopped, 0 zombie%Cpu(s): 0.5 us, 0.2 sy, 0.0 ni, 99.0 id, 0.0 wa, 0.2 hi, 0.2 si, 0.0 stMiB Mem : 3709.4 total, 1792.8 free, 1289.7 used, 626.9 buff/cacheMiB Swap: 2048.0 total, 2048.0 free, 0.0 used. 2169.3 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 2374 student 20 0 2854124 180868 92620 S 0.7 4.8 0:22.67 gnome-shell 2010 gdm 20 0 2789052 159172 89064 S 0.3 4.2 0:13.35 gnome-shell 1 root 20 0 180464 14660 9212 S 0.0 0.4 0:06.62 systemd 2 root 20 0 0 0 0 S 0.0 0.0 0:00.09 kthreadd 3 root 0 -20 0 0 0 I 0.0 0.0 0:00.00 rcu_gp 4 root 0 -20 0 0 0 I 0.0 0.0 0:00.00 rcu_par_gp . ...... â€‹ä½¿ç”¨ ps å‘½ä»¤æ­é…é€‚å½“çš„é€‰é¡¹ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°è¿›ç¨‹çš„ nice å€¼ï¼Œè¯¥å‘½ä»¤ç»“æœä¸­å€¼ä¸º - çš„ nice å€¼ä»£è¡¨è¯¥è¿›ç¨‹æŒ‰ç…§å…¶ä»–è°ƒåº¦ç­–ç•¥è¿è¡Œï¼Œå¹¶è¢«è°ƒåº¦ç¨‹åºè§£è¯»ä¸ºå…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚è¿›ç¨‹é‡‡ç”¨çš„è¿›ç¨‹è°ƒåº¦æ–¹å¼å¯åœ¨ CLS åˆ—æŸ¥çœ‹ï¼Œå…¶ä¸­ TS ä»£è¡¨é‡‡ç”¨äº† SCHED_NORMAL è°ƒåº¦ç­–ç•¥è¿è¡Œã€‚ 123456789[root@localhost ~]\\# ps axo pid,comm,cls,nice --sort=-nice PID COMMAND CLS NI 34 khugepaged TS 19 1017 alsactl IDL - 2763 tracker-miner-a IDL - 2764 tracker-miner-f TS 19 33 ksmd TS 5 1034 rtkit-daemon TS 1 .... ...... ä»¥æŒ‡å®š nice å€¼å¯åŠ¨æŸè¿›ç¨‹ â€‹ä½¿ç”¨ nice å‘½ä»¤æ¥ä»¥æŒ‡å®š nice å€¼ï¼ˆé»˜è®¤ä¸º 10ï¼‰æ¥å¯åŠ¨ä¸€ä¸ªç¨‹åºã€‚ 12345[root@localhost ~]\\# nice sha1sum /dev/zero &amp;[1] 6788[root@localhost ~]\\# ps -o pid,comm,nice 6788 PID COMMAND NI 6788 sha1sum 10 â€‹å¯ä»¥ä½¿ç”¨ -n é€‰é¡¹æ¥æŒ‡å®š nice å€¼ã€‚ 12345[root@localhost ~]\\# nice -n 20 sha1sum /dev/zero &amp; # æŒ‡å®š nice è¶…å‡ºè¾¹ç•Œåˆ™ä¼šä»¥è¾¹ç•Œå€¼ä¸ºå‡†[1] 6808[root@localhost ~]\\# ps -o pid,comm,nice 6808 PID COMMAND NI 6808 sha1sum 19 æ›´æ”¹è¿è¡Œä¸­çš„è¿›ç¨‹çš„ nice å€¼ â€‹ä½¿ç”¨ renice å‘½ä»¤æ›´æ”¹è¿è¡Œä¸­çš„è¿›ç¨‹çš„ nice å€¼ã€‚ 12[root@localhost ~]\\# renice -n 15 68086808 ï¼ˆprocess IDï¼‰old priority 19, new priority 15 â€‹ä¹Ÿå¯ä»¥æ­é… top å‘½ä»¤ï¼Œåœ¨ top ç•Œé¢ä¸­ï¼ŒæŒ‰ä¸‹ r é€‰é¡¹ä¼šæç¤ºï¼šPID to renice [default pid = ****]ï¼Œç„¶åè¾“å…¥è¦æ›´æ”¹çš„è¿›ç¨‹çš„ pid å’Œ nice çº§åˆ«ã€‚ 123456789101112top - 15:19:05 up 6:35, 2 users, load average: 0.00, 0.02, 0.04Tasks: 333 total, 1 running, 332 sleeping, 0 stopped, 0 zombie%Cpu(s): 0.1 us, 0.1 sy, 0.0 ni, 99.6 id, 0.0 wa, 0.1 hi, 0.1 si, 0.0 stMiB Mem : 3709.4 total, 1792.2 free, 1290.1 used, 627.1 buff/cacheMiB Swap: 2048.0 total, 2048.0 free, 0.0 used. 2168.9 avail Mem PID to renice [default pid = 2522] PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 2522 root 20 0 205208 32316 10372 S 0.2 0.9 0:49.24 sssd_kcm 1039 root 20 0 369624 12628 10504 S 0.1 0.3 0:34.17 vmtoolsd 2739 student 20 0 534444 38860 31804 S 0.1 1.0 0:34.34 vmtoolsd 6904 root 20 0 65620 5364 4328 R 0.1 0.1 0:00.04 top .... ......","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç®¡ç†ä¸´æ—¶æ–‡ä»¶","slug":"Linux | ç®¡ç†ä¸´æ—¶æ–‡ä»¶","date":"2022-08-15T06:15:46.625Z","updated":"2022-08-15T06:17:04.932Z","comments":true,"path":"2022-08-15-Linux | ç®¡ç†ä¸´æ—¶æ–‡ä»¶.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%AE%A1%E7%90%86%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ¦‚è¿° â€‹ç°ä»£æ“ä½œæ–‡ä»¶ä¼šåœ¨è¿è¡Œæ—¶äº§ç”Ÿå¤§é‡çš„ä¸´æ—¶æ–‡ä»¶å’Œç›®å½•ï¼Œæœ‰äº›åº”ç”¨ï¼ˆå’Œç”¨æˆ·ï¼‰ä¼šä½¿ç”¨ /tmp ç›®å½•æ¥ä¿å­˜ä¸´æ—¶æ•°æ®ï¼Œè¿˜æœ‰ä¸€äº›åº”ç”¨ï¼ˆå’Œç”¨æˆ·ï¼‰åˆ™ä½¿ç”¨æ›´ç‰¹å®šäºä»»åŠ¡çš„ä½ç½®ï¼Œå¦‚å®ˆæŠ¤è¿›ç¨‹ä»¥åŠ /run ä¸‹ç‰¹å®šäºç”¨æˆ·çš„æ˜“å¤±æ€§ï¼ˆå­˜å‚¨äºå†…å­˜ï¼Œæ–­ç”µæˆ–é‡å¯ä¸¢å¤±ï¼‰ç›®å½•ã€‚ â€‹ä¸ºäº†ä¿æŒç³»ç»Ÿå……åˆ†è¿è¡Œï¼Œæœ‰å¿…è¦åˆ›å»ºé‚£äº›ä¸å­˜åœ¨çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œå› ä¸ºå®ˆæŠ¤è¿›ç¨‹å’Œè„šæœ¬å¯èƒ½ä¼šä¾é å®ƒä»¬çš„å­˜åœ¨ï¼Œè€Œæ¸…é™¤æ—§æ–‡ä»¶åå°±ä¸ä¼šå¡«æ»¡ç£ç›˜ç©ºé—´æˆ–æä¾›é”™è¯¯ä¿¡æ¯ã€‚ â€‹RHEL 7 ä»¥ä¸Šå¼•å…¥äº†ä¸€ä¸ªåä¸º systemd-tmpfiles çš„æ–°å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ç§ç»“æ„åŒ–å’Œå¯é…ç½®çš„æ–¹æ³•æ¥ç®¡ç†ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶ã€‚åœ¨ systemd å¯åŠ¨ç³»ç»Ÿåï¼Œå…¶ä¸­ä¸€ä¸ªæœ€å…ˆå¯åŠ¨çš„æœåŠ¡å•å…ƒæ˜¯ systemd-tmpfiles-setupã€‚è¯¥æœåŠ¡è¿è¡Œå‘½ä»¤ systemd-tmpfiles --create --removeã€‚æ­¤å‘½ä»¤ä» /usr/lib/tmpfiles.d/*.confã€/run/tmpfiles.d/*.conf å’Œ /etc/tmpfiles.d/*.conf è¯»å–é…ç½®æ–‡ä»¶ã€‚ç³»ç»Ÿä¼šåˆ é™¤è¿™äº›é…ç½®æ–‡ä»¶ä¸­æ ‡è®°çš„è¦åˆ é™¤çš„ä»»ä½•æ–‡ä»¶å’Œç›®å½•ï¼Œå¹¶ä¸”ä¼šåˆ›å»ºæ ‡è®°è¦åˆ›å»ºï¼ˆæˆ–ä¿®å¤æƒé™ï¼‰çš„ä»»ä½•æ–‡ä»¶å’Œç›®å½•ï¼Œå¹¶ä½¿å…¶æ‹¥æœ‰æ­£ç¡®çš„æƒé™ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰ã€‚ ä½¿ç”¨å®šæ—¶å™¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶ â€‹RHEL å†…å»ºäº†ä¸€ä¸ªåä¸º systemd-tmpfiles-clean.timer çš„ systemd å®šæ—¶å™¨å•å…ƒå®šæ—¶è§¦å‘ systemd-tmpfiles-clean.service æ¥æ‰§è¡Œ systemd-tmpfiles --clean å‘½ä»¤ã€‚ â€‹å®šæ—¶å™¨ systemd-tmpfiles-clean.timer æ–‡ä»¶çš„å†…å®¹ï¼š 123456789101112131415161718# SPDX-License-Identifier: LGPL-2.1+# # This file is part of systemd.## systemd is free software; you can redistribute it and/or modify it# under the terms of the GNU Lesser General Public License as published by# the Free Software Foundation; either version 2.1 of the License, or# (at your option) any later version.[Unit]Description=Daily Cleanup of Temporary DirectoriesDocumentation=man:tmpfiles.d(5) man:systemd-tmpfiles(8)[Timer]# è¡¨ç¤º systemd-tmpfiles-clean.service å°†åœ¨ç³»ç»Ÿå¯åŠ¨ 15min åè¢«è§¦å‘OnBootSec=15min# è¡¨ç¤ºåœ¨ä¸Šä¸€æ¬¡æ¿€æ´»æœåŠ¡å•å…ƒ 1d åå†æ¬¡è§¦å‘ systemd-tmpfiles-clean.serviceOnUnitActiveSec=1d â€‹æœåŠ¡å•å…ƒ systemd-tmpfiles-clean.service æ–‡ä»¶çš„å†…å®¹ï¼š 123456789101112131415161718192021## This file is part of systemd.## systemd is free software; you can redistribute it and/or modify it# under the terms of the GNU Lesser General Public License as published by# the Free Software Foundation; either version 2.1 of the License, or# (at your option) any later version.[Unit]Description=Cleanup of Temporary DirectoriesDocumentation=man:tmpfiles.d(5) man:systemd-tmpfiles(8)DefaultDependencies=noConflicts=shutdown.targetAfter=local-fs.target time-sync.targetBefore=shutdown.target[Service]Type=oneshotExecStart=/usr/bin/systemd-tmpfiles --cleanSuccessExitStatus=65IOSchedulingClass=idle â€‹å¯ä»¥åœ¨ /etc/systemd/system é‡Œæ›´æ”¹ systemd-tmpfiles-clean.timer çš„å†…å®¹æ¥å®šåˆ¶è‡ªå·±çš„ä¸´æ—¶æ–‡ä»¶æ¸…ç†é¢‘ç‡ã€‚ æ‰‹åŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶ â€‹å‘½ä»¤ systemd-tmpfiles --clean è§£æçš„é…ç½®æ–‡ä»¶ä¸ systemd-tmpfiles --create å‘½ä»¤ç›¸åŒï¼Œä½†å‰è€…ä¸ä¼šåˆ›å»ºæ–‡ä»¶å’Œç›®å½•ï¼Œè€Œæ˜¯ä¼šæ¸…é™¤åœ¨æ¯”é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æœ€é•¿æœŸé™æ›´è¿‘çš„æ—¶é—´å°šæœªè®¿é—®ã€æ›´æ”¹æˆ–ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ â€‹systemd-tmpfilesåˆ°çš„é…ç½®æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•ç”±ä¸ƒåˆ—æ„æˆï¼šâ€ç±»å‹â€œã€â€è·¯å¾„â€œã€â€æ¨¡å¼â€œã€â€UIDâ€œã€â€GIDâ€œã€â€æœŸé™â€œ å’Œ â€å‚æ•°â€œã€‚ç±»å‹æŒ‡çš„æ˜¯ systemd-tmpfiles åº”æ‰§è¡Œçš„æ“ä½œï¼›ä¾‹å¦‚ d è¡¨ç¤ºåˆ›å»ºè¿˜ä¸å­˜åœ¨çš„ç›®å½•ï¼Œæˆ–è€… Z è¡¨ç¤ºä»¥é€’å½’æ–¹å¼æ¢å¤ SELinux ä¸Šä¸‹æ–‡ä»¥åŠæ–‡ä»¶æƒé™å’Œæ‰€æœ‰æƒã€‚ç¤ºä¾‹ï¼š 123456d /run/systemd/seats 0755 root root -# åœ¨åˆ›å»ºæ–‡ä»¶å’Œç›®å½•æ—¶ï¼Œå¦‚æœç›®å½• /run/systemd/seats è¿˜ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥ç›®å½•ï¼Œæ‰€æœ‰è€…ä¸ºç”¨æˆ· root å’Œç»„ root ï¼Œæƒé™è®¾ç½®ä¸º rwxr-x-r-xã€‚ç³»ç»Ÿä¸ä¼šè‡ªåŠ¨æ¸…é™¤è¯¥ç›®å½•ã€‚D /home/student 0700 student student 1d# å¦‚æœç›®å½• /home/student è¿˜ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥ç›®å½•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™æ¸…ç©ºå…¶æ‰€æœ‰å†…å®¹ã€‚è¿è¡Œ systemd-tmpfiles --clean æ—¶ï¼Œåˆ é™¤åœ¨è¶…è¿‡ä¸€å¤©æ—¶é—´å†…å°šæœªè¢«è®¿é—®ã€æ›´æ”¹æˆ–åˆ é™¤çš„æ‰€æœ‰æ–‡ä»¶ã€‚L /run/fstablink - root root - /etc/fstab# åˆ›å»ºæŒ‡å‘ /etc/fstab çš„ç¬¦å·é“¾æ¥ /run/fstabã€‚ç»å¯¹ä¸è¦è‡ªåŠ¨æ¸…é™¤è¿™ä¸€è¡Œã€‚ é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§ â€‹é…ç½®æ–‡ä»¶å¯ä½äºä¸‰ä¸ªä½ç½®ï¼š /etc/tmpfiles.d/*.conf /run/tmpfiles.d/*.conf /usr/lib/tmpfiles.d/*.conf â€‹*/usr/lib/tmpfiles.d* ä¸­çš„æ–‡ä»¶æ˜¯ç”±ç›¸å…³ RPM è½¯ä»¶åŒ…æä¾›çš„ï¼Œä¸åº”ç¼–è¾‘è¿™äº›æ–‡ä»¶ã€‚/run/tmpfiles.d/ ä¸‹çš„æ–‡ä»¶æœ¬èº«æ˜¯æ˜“å¤±æ€§æ–‡ä»¶ï¼Œé€šå¸¸ç”±å®ˆæŠ¤è¿›ç¨‹ç”¨æ¥ç®¡ç†è‡ªå·±çš„è¿è¡Œæ—¶ä¸´æ—¶æ–‡ä»¶ã€‚/etc/tmpfiles.d/ ä¸‹çš„æ–‡ä»¶æ—¨åœ¨ä¾›ç®¡ç†å‘˜é…ç½®è‡ªå®šä¹‰ä¸´æ—¶ä½ç½®ï¼Œä»¥åŠè¦†ç›–ä¾›åº”å•†æä¾›çš„é»˜è®¤å€¼ã€‚ â€‹åŒåæ–‡ä»¶ç”Ÿæ•ˆä¼˜å…ˆçº§ï¼š/etc/tmpfiles.d/ &gt; /run/tmpfiles.d/ &gt; /usr/lib/tmpfiles.d/ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"è®¾ç½®ä»»åŠ¡è®¡åˆ’","slug":"Linux | è®¾ç½®è®¡åˆ’ä»»åŠ¡","date":"2022-08-15T04:40:39.381Z","updated":"2022-08-15T04:42:56.774Z","comments":true,"path":"2022-08-15-Linux | è®¾ç½®è®¡åˆ’ä»»åŠ¡.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E8%AE%BE%E7%BD%AE%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ è®¾ç½®ä¸€æ¬¡æ€§ä»»åŠ¡ â€‹ä½¿ç”¨ at å‘½ä»¤å¯ä»¥è®¾ç½®åœ¨å°†æ¥æŸä¸ªè®¾å®šçš„ç‚¹è¿è¡Œä¸€ä¸ªå‘½ä»¤æˆ–ä¸€ç»„å‘½ä»¤ã€‚æ­¤å‘½ä»¤çš„æ‰§è¡Œå’Œç”Ÿæ•ˆä¾èµ–äº atd æœåŠ¡ï¼Œè¦ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œè¯·ç¡®ä¿å·²ç»å®‰è£…è¯¥è½¯ä»¶åŒ…ä¸” atd æœåŠ¡å·²ç»å¯åŠ¨ã€‚ â€‹ä½¿ç”¨ at è®¾ç½®çš„ä»»åŠ¡ä¼šè¿›å…¥ a åˆ° z 26 ä¸ªé˜Ÿåˆ—ï¼Œä½œä¸šæŒ‰å­—æ¯é¡ºåºæ’åˆ—ï¼Œé˜Ÿåˆ—è¶Šå¾€ååˆ™ä¼˜å…ˆçº§è¶Šä½ã€‚ ç”¨æ³• â€‹ä½¿ç”¨ at TIMESPEC æ¥è®¾ç½®æ–°çš„ä½œä¸šï¼š 123[root@localhost ~]\\# at now + 5minwarning: commands will be executed using /bin/shat&gt; # æ¥ç€è¾“å…¥è‡ªå·±æƒ³è®¾ç½®çš„å‘½ä»¤ï¼ŒæŒ‰ Ctrl + D æ¥å®Œæˆè¾“å…¥ â€‹å¯¹äºå¤æ‚çš„é•¿ä¸²å‘½ä»¤ï¼Œä½¿ç”¨é‡å®šå‘å¯¼å…¥è¦æ¯”æ‰‹åŠ¨è¾“å…¥æ›´æ–¹ä¾¿ï¼Œå¦‚ï¼š 1[root@localhost ~]\\# at now + 5min &lt; myscript.txt # å…¶ä¸­ myscript.txt ä¸­å·²è®¾ç½®å¥½è¦æ‰§è¡Œçš„å‘½ä»¤ â€‹å…¶ä¸­ TIMESPEC çš„å½¢å¼è¾ƒä¸ºçµæ´»ï¼Œä»¥ä¸‹åˆ—å‡ºäº†ä¸€äº›å¯ç”¨çš„å½¢å¼ï¼š now + 5min; teatime tomorrow;ï¼ˆä¸‹åˆèŒ¶æ—¶é—´ä¸º 16:00ï¼‰ noon + 4days; 5pm august 3 2021ã€‚ ç®¡ç†è®¡åˆ’çš„ä»»åŠ¡ â€‹ä½¿ç”¨å‘½ä»¤ atq æˆ– at -l æ¥è·å¾—å½“å‰ç”¨æˆ·çš„å¾…å¤„ç†ä½œä¸šçš„åˆ—è¡¨ã€‚ 123[root@localhost ~]\\# at -l3 Fri Sep 17 11:04:00 2021 a root# ç¼–å· æ—¥æœŸ æ—¶é—´ æ‰€å¤„çš„é˜Ÿåˆ—ç¼–å· ä½œä¸šæ‰€æœ‰è€…å³æ‰§è¡Œè€… â€‹ä½¿ç”¨å‘½ä»¤ at -c JOBNUMBER å‘½ä»¤æŸ¥çœ‹æŒ‡å®šä½œä¸šç¼–å·çš„è®¡åˆ’ä½œä¸šçš„ç¯å¢ƒå’Œæ‰§è¡Œå†…å®¹ã€‚ 123456[root@localhost ~]\\# at -c 3#!/bin/sh# atrun uid=0 gid=0# mail root 0umask 22...... â€‹ä½¿ç”¨å‘½ä»¤ atrm JOBNUMBER å‘½ä»¤æ¥åˆ é™¤è®¡åˆ’çš„ä½œä¸šã€‚ 12[root@localhost ~]\\# atrm 3Cannot find jobid 3 ä½¿ç”¨ watch å‘½ä»¤å¯ä»¥è®¾ç½®æ¯ä¸€æ®µæ—¶é—´æ‰§è¡Œå‘½ä»¤å¹¶å°†å…¶ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Šã€‚ è®¾ç½®å‘¨æœŸæ€§ä½œä¸š â€‹ä½¿ç”¨ crontab å‘½ä»¤å¯ä»¥è®¾ç½®å‘¨æœŸæ€§æ‰§è¡Œçš„ä½œä¸šï¼Œæ­¤å‘½ä»¤çš„è®¾ç½®å’Œæ‰§è¡Œä¾èµ–äº crond å®ˆæŠ¤è¿›ç¨‹ï¼Œcrond å®ˆæŠ¤è¿›ç¨‹ä¼šè¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆæ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼‰ä»¥åŠä¸€ç»„ç³»ç»ŸèŒƒå›´å†…çš„æ–‡ä»¶ã€‚è¿™äº›é…ç½®æ–‡ä»¶ä½¿ç”¨æˆ·å’Œç®¡ç†å‘˜æ‹¥æœ‰ç»†å¾®çš„æ§åˆ¶æƒï¼Œå¯ä»¥æ§åˆ¶åº”æ‰§è¡Œå‘¨æœŸä½œä¸šçš„æ—¶é—´ã€‚ ç”¨æ³• å‘½ä»¤ ç”¨é€” crontab -l åˆ—å‡ºå½“å‰ç”¨æˆ·çš„è®¡åˆ’ä½œä¸š crontab -r åˆ é™¤å½“å‰ç”¨æˆ·çš„æ‰€æœ‰ä½œä¸š crontab -e ç¼–è¾‘å½“å‰ç”¨æˆ·çš„ä½œä¸š crontab filename åˆ é™¤æ‰€æœ‰ä½œä¸šï¼Œå¹¶æ›¿æ¢ä¸ºä» filename è¯»å–çš„ä½œä¸šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶ï¼Œåˆ™ä½¿ç”¨ stdinã€‚ Root ç”¨æˆ·å¯ä»¥ä½¿ç”¨ crontab -u &lt;USER&gt; å‘½ä»¤æ¥ç®¡ç†å…¶ä»–ç”¨æˆ·çš„ä½œä¸šï¼Œä¸åº”ä»¥ root ç”¨æˆ·ç›´æ¥è®¾ç½®ç³»ç»Ÿä½œä¸šï¼Œè€Œåº”é€šè¿‡ä¿®æ”¹ /etc/crontab é…ç½®æ–‡ä»¶ã€‚ â€‹crontab -e å‘½ä»¤ä¼šé»˜è®¤è°ƒç”¨ vim ç¼–è¾‘å™¨ï¼ˆé™¤é EDITOR ç¯å¢ƒå˜é‡æŒ‡å®šå…¶ä»–è®¾ç½®ï¼‰æ¥ç¼–è¾‘ä»»åŠ¡è®¡åˆ’è®¾ç½®æ–‡ä»¶ï¼Œæ¯è¡Œåªè¾“å…¥ä¸€ä¸ªä½œä¸šï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä½¿ç”¨æ³¨é‡Šã€å˜é‡ä»¥åŠç©ºè¡Œã€‚å…¶ä¸­å¸¸è§å˜é‡çš„è®¾ç½®åŒ…æ‹¬ SHELL å˜é‡å’Œ MAILTO å˜é‡ã€‚ â€‹Crontab æ–‡ä»¶ä¸­çš„å­—æ®µæŒ‰ä»¥ä¸‹é¡ºåºæ˜¾ç¤ºï¼šåˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€æ˜ŸæœŸã€å‘½ä»¤ã€‚ è‹¥æŒ‡å®šçš„æ—¥å’Œæ˜ŸæœŸéƒ½ä¸æ˜¯ *ï¼Œåˆ™è¯¥å‘½ä»¤ä¼šåœ¨æ¯ä¸ªæŒ‡å®šçš„æ—¥æœŸæˆ–æ˜ŸæœŸæ‰§è¡Œã€‚ â€‹å‰äº”ä¸ªå­—æ®µå…¨éƒ¨ä½¿ç”¨ç›¸åŒçš„è¯­æ³•è§„åˆ™ï¼š * è¡¨ç¤º â€œæ— å…³ç´§è¦â€ æˆ–å§‹ç»ˆï¼› æ•°å­— å¯ç”¨äºæŒ‡å®šä¸åŒæ—¶é—´æ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯ 1-6 åˆ†åˆ«è¡¨ç¤ºæ˜ŸæœŸä¸€è‡³æ˜ŸæœŸå…­ï¼Œ0 æˆ– 7 éƒ½å¯ä»¥ä»£è¡¨æ˜ŸæœŸå¤©ï¼› x-y è¡¨ç¤ºèŒƒå›´ï¼Œ(xï¼Œy]ï¼› x,y è¡¨ç¤ºåˆ—è¡¨ï¼Œåˆ—è¡¨ä¹Ÿå¯åŒ…å«èŒƒå›´ï¼Œå¦‚åˆ†é’Ÿåˆ—å¯ä»¥è®¾ç½®æˆ 5, 10-13, 17ï¼› */x è¡¨ç¤ºæ¯ x æ—¶é—´çš„é—´éš”ï¼Œå¦‚æŒ‡å®šåˆ†é’Ÿåˆ— */7 ä»£è¡¨æ¯ 7 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ä½œä¸šã€‚ â€‹æ­¤å¤–ï¼Œæœˆä»½å’Œæ˜ŸæœŸä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå­—æ¯çš„ç¼©å†™æ¥è¡¨ç¤ºï¼Œå¦‚ï¼šJanã€Febã€Mar...ä»¥åŠ Monã€Tueã€Wed...ã€‚ å‘½ä»¤å­—æ®µä¸­è‹¥åŒ…å«æœªè½¬ä¹‰çš„ % ç¬¦å·ï¼Œåˆ™è¯¥ç™¾åˆ†æ¯”ç¬¦å·å°†è¢«å½“ä½œæ¢è¡Œå­—ç¬¦ï¼Œä¸”ç™¾åˆ†æ¯”ä¹‹åçš„æ‰€æœ‰å†…å®¹å°†ä¼ ç»™ stdin ä¸­çš„å‘½ä»¤ã€‚ ä½œä¸šç¤ºä¾‹ â€‹ä»¥ä¸‹ä½œä¸šå°†åœ¨æ¯å¹´ 2 æœˆ 2 æ—¥ä¸Šåˆ 9 ç‚¹å‡†ç‚¹æ‰§è¡Œå‘½ä»¤ /usr/local/bin/yearly_backupã€‚ 10 9 2 2 * /usr/local/bin/yearly_backup â€‹ä»¥ä¸‹ä½œä¸šå°†åœ¨æ¯ä¸ªå·¥ä½œæ—¥åˆå¤œå‰çš„ä¸¤åˆ†é’Ÿè¿è¡Œå‘½ä»¤ /usr/local/bin/daily_reportã€‚ 158 23 * * 1-5 /usr/local/bin/daily_report â€‹ä»¥ä¸‹ä½œä¸šå°†åœ¨æ¯ä¸ªå·¥ä½œæ—¥ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰ä¸Šåˆ 9 ç‚¹æ‰§è¡Œ mutt å‘½ä»¤ï¼Œä»è€Œå°†é‚®ä»¶æ¶ˆæ¯ Checking in å‘é€ç»™æ”¶ä»¶äºº boss@example.com ã€‚ 10 9 * * 1-5 mutt -s &quot;Check in&quot; boss@example % Hi there boss, just checking in. å‘¨æœŸæ€§ç³»ç»Ÿä½œä¸š â€‹è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å‚è€ƒæ–‡ç« ï¼šhttps://cloud.tencent.com/developer/article/1619542ï¼Œå†™çš„éå¸¸è¯¦ç»†ã€‚ â€‹ç³»ç»Ÿç®¡ç†å‘˜ç»å¸¸éœ€è¦è¿è¡Œå‘¨æœŸæ€§ä½œä¸šï¼Œæœ€ä½³çš„åšæ³•æ˜¯ä»ç³»ç»Ÿè´¦æˆ·è€Œä¸æ˜¯ä»ç”¨æˆ·è´¦æˆ·è¿è¡Œè¿™äº›ä½œä¸šï¼Œå³ä¸ç”¨ä½¿ç”¨ crontab å‘½ä»¤æ¥å®‰æ’è¿™äº›ä½œä¸šï¼Œè€Œæ˜¯è¦ä½¿ç”¨ç³»ç»ŸèŒƒå›´çš„ crontab æ–‡ä»¶ã€‚ â€‹/etc/crontab æ–‡ä»¶çš„è¯­æ³•è·Ÿæ™®é€šç”¨æˆ·åˆ›å»º crontab ä»»åŠ¡ç±»ä¼¼ï¼Œcrontab æ–‡ä»¶ä¸­éœ€é¢å¤–æŒ‡å®šä¸€ä¸ªç”¨æˆ·å­—æ®µï¼š 12345678910[root@localhost ~]\\# cat /etc/crontab | grep ^# # For details see man 4 crontabs# Example of job definition:# .---------------- minute (0 - 59)# | .------------- hour (0 - 23)# | | .---------- day of month (1 - 31)# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat# | | | | |# * * * * * user-name command to be executed â€‹å‘¨æœŸæ€§ç³»ç»Ÿä½œä¸šå¯ä»¥åœ¨ä¸¤ä¸ªä½ç½®å®šä¹‰ï¼š/etc/crontab æ–‡ä»¶å’Œ /etc/cron.d ç›®å½•ä¸­çš„è‡ªå®šä¹‰æ–‡ä»¶ï¼ˆæ¨èï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œcrontab ç³»ç»Ÿä¸­è¿˜åŒ…å«éœ€è¦æ¯å°æ—¶ã€æ¯å¤©ã€æ¯å‘¨å’Œæ¯æœˆè¿è¡Œçš„è„šæœ¬çš„å­˜å‚¨åº“ï¼Œè¿™äº›å­˜å‚¨åº“åˆ†åˆ«å¯¹åº”äºåä¸º /etc/cron.hourlyã€/etc/cron.dailyã€/etc/cron.weeklyã€/etc/cron.monthly çš„ç›®å½•ã€‚è¿™äº›ç›®å½•ä¸­å­˜æ”¾çš„æ˜¯è„šæœ¬æ–‡ä»¶è€Œä¸æ˜¯ crontab é…ç½®æ–‡ä»¶ã€‚ è¿™äº›æ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬æ–‡ä»¶éœ€è¦è¢«æˆäºˆæ‰§è¡Œæƒé™ï¼Œå¦åˆ™å°†ä¸ä¼šè§¦å‘ã€‚ â€‹ä¸ºäº†å¤„ç†ç”±äºç³»ç»Ÿå…³æœºç­‰æŸäº›åŸå› å¯¼è‡´çš„ä¸€äº›ä»»åŠ¡è®¡åˆ’ç”±äºè¶…å‡ºæ—¶é—´èŒƒå›´è€Œæœªè¢« crontab æ‰§è¡Œçš„é—®é¢˜ï¼Œanacron è¢«å¼•å…¥ï¼Œanacron æ¯å°æ—¶è¢« crond æœåŠ¡æ‰§è¡Œä¸€æ¬¡ä»¥æ£€æŸ¥ä¸€äº›ä»»åŠ¡è®¡åˆ’æ˜¯å¦åœ¨è®¾å®šçš„æ—¶é—´æ‰§è¡Œï¼Œè‹¥æœ‰åˆ™æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œå¾…æ‰§è¡Œå®Œæ¯•æˆ–è€…æ— ä»»ä½•é€¾æœŸçš„ä»»åŠ¡è®¡åˆ’æ—¶å°±ä¼šç»“æŸ anacron è¿›ç¨‹ã€‚ â€‹åœ¨ /etc/cron.hourly å¯ä»¥æ‰¾åˆ° anacron çš„é…ç½®æ‰§è¡Œæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627#!/bin/sh# Check whether 0anacron was run today alreadyif test -r /var/spool/anacron/cron.daily; then day=`cat /var/spool/anacron/cron.daily`fiif [ `date +%Y%m%d` = &quot;$day&quot; ]; then exit 0fi# Do not run jobs when on battery poweronline=1for psupply in AC ADP0 ; do sysfile=&quot;/sys/class/power_supply/$psupply/online&quot; if [ -f $sysfile ] ; then if [ `cat $sysfile 2&gt;/dev/null`x = 1x ]; then online=1 break else online=0 fi fidoneif [ $online = 0 ]; then exit 0fi/usr/sbin/anacron -s SYSTEMD å®šæ—¶å™¨ ä¸€äº›æ“ä½œç³»ç»Ÿè®¾å®šçš„è®¡æ—¶å™¨ 12345678[root@localhost etc]\\# systemctl status *timerâ— dnf-makecache.timer - dnf makecache --timer Loaded: loaded (/usr/lib/systemd/system/dnf-makecache.timer; enabled; vendor preset&gt; Active: active (waiting) since Fri 2021-09-17 09:07:25 CST; 6h ago Trigger: Fri 2021-09-17 16:23:21 CST; 36min leftSep 17 09:07:25 localhost.localdomain systemd[1]: Started dnf makecache --timer....... è‡ªå®šä¹‰å®šæ—¶å™¨ â€‹åœ¨ /etc/systemd/system ä¸‹æ·»åŠ è‡ªå®šä¹‰å®šæ—¶å™¨å•å…ƒé…ç½®æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 1234567891011121314151617[Unit]Description=â€å¯¹è¯¥å®šæ—¶å™¨åŠŸèƒ½çš„æè¿°â€œ[Timer]# ä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´OnCalendar=*-*-* *:*:00 # ç²¾åº¦ï¼ˆç§’ï¼‰ï¼Œå…è®¸æµ®åŠ¨çš„åå·®AccuracySec=24h# æ˜¯å¦Persistent=true# æœ€å¤§éšæœºå»¶è¿Ÿæ—¶é—´#RandomizedDelaySec=14400# å®šæ—¶å™¨è¢«æ¿€æ´»æ—¶æ‰§è¡Œçš„æœåŠ¡Requires=MyService.service[Install]WantedBy=timers.target","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"æé«˜å‘½ä»¤è¡Œç”Ÿäº§æ•ˆç‡","slug":"Linux | æé«˜å‘½ä»¤è¡Œç”Ÿäº§æ•ˆç‡","date":"2022-08-15T04:31:08.599Z","updated":"2022-08-15T04:35:30.416Z","comments":true,"path":"2022-08-15-Linux | æé«˜å‘½ä»¤è¡Œç”Ÿäº§æ•ˆç‡.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E6%8F%90%E9%AB%98%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%94%9F%E4%BA%A7%E6%95%88%E7%8E%87.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç¼–å†™ç®€å•çš„ BASH è„šæœ¬ â€‹Shell è„šæœ¬å¯ä»¥å¤§å¹…æé«˜å·¥ä½œæ•ˆç‡ï¼Œå¯¹å¤„ç†é‡å¤ã€å¤æ‚çš„ä»»åŠ¡å¾ˆæœ‰ç”¨ã€‚ç²¾é€š Shell è„šæœ¬ç¼–å†™æ˜¯ Linux ä»ä¸šè€…çš„åŸºæœ¬è¦æ±‚ã€‚ â€‹Shell è„šæœ¬æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå…¶å†…å®¹æ˜¯ä¸€ç³»åˆ—å‘½ä»¤å’Œé€»è¾‘çš„é›†åˆã€‚ â€‹Shell è„šæœ¬çš„ç¬¬ä¸€è¡Œä»¥ â€œ#!â€ å¼€å¤´ï¼Œåé¢è·Ÿä¸ºæ‰§è¡Œè¯¥è„šæœ¬çš„å†…å®¹æ—¶æ‰€éœ€è¦çš„æ­£ç¡®çš„å‘½ä»¤è§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œå¦‚ï¼š 1#!/bin/bash â€‹Shell è„šæœ¬å¿…é¡»è¢«èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œæ‰èƒ½ä½œä¸ºå¸¸è§„å‘½ä»¤è¿è¡Œã€‚ä½¿ç”¨ chmod å‘½ä»¤å¯ä¸ºå…¶æ·»åŠ æ‰§è¡Œæƒé™ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦ä¸ chown å‘½ä»¤ç»„åˆæ¥æ›´æ”¹è„šæœ¬çš„æ–‡ä»¶æ‰€æœ‰æƒï¼Œä»…ä¸ºè„šæœ¬çš„ç›®æ ‡ç”¨æˆ·æˆäºˆæ‰§è¡Œæƒé™ã€‚ â€‹å°†è„šæœ¬æ”¾åœ¨ shell çš„ PATH ç¯å¢ƒå˜é‡ä¸­æ‰€åˆ—å‡ºçš„æŸä¸ªç›®å½•ä¸‹ï¼Œåˆ™å¯ä»¥åƒå…¶ä»–å‘½ä»¤é‚£æ ·å•ç‹¬ç”¨æ–‡ä»¶åæ¥è°ƒç”¨ shell è„šæœ¬ã€‚ä½†åº”æ³¨æ„è‡ªå·±ç¼–å†™çš„è„šæœ¬åéœ€è¦åŒºåˆ«äº linux ç³»ç»Ÿå‘½ä»¤æˆ–å·²æœ‰çš„è„šæœ¬æ–‡ä»¶ã€‚ ç¼–å†™è„šæœ¬çš„ä¸¤ä¸ªé¡»çŸ¥ç‚¹ ç‰¹æ®Šå­—ç¬¦çš„å­—é¢åŒ–å¤„ç† â€‹ä¸€äº›å­—ç¬¦æˆ–è¯è¯­å¯¹ shell æ¥è¯´æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œåœ¨ä½¿ç”¨è¿™äº›å­—ç¬¦å’Œè¯è¯­çš„æ—¶å€™å¦‚æœåªæƒ³ç”¨å…¶å­—é¢å€¼çš„è¯åˆ™éœ€è¦ä»¥ä¸‹ä¸‰ç§æ–¹æ³•æ¥å–æ¶ˆæˆ–è½¬ä¹‰å¯¹åº”ç‰¹æ®Šå­—ç¬¦æˆ–è¯è¯­ã€‚ â€‹å‰ç¼€è½¬ä¹‰å­—ç¬¦æ¥è¾“å‡º # å·ï¼š 1234[root@localhost ~]\\# echo #1 is here[root@localhost ~]\\# echo \\#1 is here\\#1 is here # md æ ¼å¼å†²çªï¼Œè¯·å¿½ç•¥è¾“å‡ºç»“æœä¸­çš„è½¬ä¹‰ç¬¦å·ï¼Œä¸‹åŒ ä½¿ç”¨å•å¼•å·æ‹¬èµ·éœ€è¦å¤šæ¬¡è½¬ä¹‰çš„è¯­å¥è€Œä¸ç”¨åˆ†åˆ«è¿›è¡Œè½¬ä¹‰ï¼š 1234[root@localhost ~]\\# echo \\#1 is here, but where is \\#2?\\#1 is here, but where is \\#2?[root@localhost ~]\\# echo &#x27;#1 is here, but where is #2&#x27;\\#1 is here, but where is \\#2 â€‹ä½¿ç”¨åŒå¼•å·å¯ä»¥é˜»æ­¢é€šé…å’Œ shell æ‰©å±•ï¼Œä½†ä¾ç„¶å…è®¸å‘½ä»¤å’Œå˜é‡æ›¿æ¢ï¼Œå•å¼•å·åˆ™è¿›ä¸€æ­¥ä¸å…è®¸å‘½ä»¤å’Œå˜é‡æ›¿æ¢ã€‚é—®å·ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦é˜²æ­¢æ‰©å±•çš„å…ƒå­—ç¬¦ã€‚ 12345678910111213141516[root@localhost ~]\\# var=$(hostname -s); echo $var # å°†å‘½ä»¤çš„æ‰§è¡Œç»“æœè¿›è¡Œå˜é‡èµ‹å€¼ï¼š VAR=$&#123;COMMAND&#125;localhost[root@localhost ~]\\# echo &quot;****** hostname is $&#123;var&#125; ******&quot;****** hostname is localhost ******[root@localhost ~]\\# echo Your username variable is \\$USER. # å¯¹ $ è¿›è¡Œäº†è½¬ä¹‰ã€å› è€Œ $ å¤±å»äº†åŸæœ‰ä½œç”¨Your username variable is $USER.[root@localhost ~]\\# echo &quot;Variable $var is evaluate to $(hostname -s)&quot;Variable localhost is evaluate to localhost[root@localhost ~]\\# echo &#x27;Variable $var is evaluate to $(hostname -s)&#x27;Variable $var is evaluate to $(hostname -s)[root@localhost ~]\\# echo &quot;\\&quot;Hello,world and $var\\&quot;&quot;; echo &#x27;&quot;Hello,world and $var&quot;&#x27;&quot;Hello,world and localhost&quot;&quot;Hello,world and $var&quot;[root@localhost ~]\\# echo &quot;&#x27;Hello,world and $var&#x27;&quot;; echo \\&quot;&quot;Hello,world and $var&quot;\\&quot;&#x27;Hello,world and localhost&#x27;&quot;Hello,world and localhost&quot; å¤šä½¿ç”¨ echo å‘½ä»¤æ¥è¾“å‡ºæ‰§è¡ŒçŠ¶æ€ä¿¡æ¯ â€‹æœ€å¥½å°†æ™®é€šæç¤ºä¿¡æ¯è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼Œè€Œå°†é”™è¯¯ä¿¡æ¯è¾“å‡ºè‡³é”™è¯¯è¾“å‡ºã€‚ 123456#!/bin/bash......echo &quot;Something has done!&quot;;......echo &quot;Error: Something went wrong and need to exit!&quot; &gt;&amp;2;...... è„šæœ¬ç¼–å†™ä¹‹å¾ªç¯ â€‹Bash çš„ for å¾ªç¯ç»“æ„ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š 123for VARIABLE in LIST; doCOMMAND VARIABLEdone â€‹ä»¥ä¸‹è¯­å¥çš„è¾“å‡ºç»“æœæ˜¯ä¸€æ ·çš„ï¼š 12345678910# è¯­å¥ä¸€[root@localhost ~]\\# for HOST in host1 host2 host3; do echo $HOST; done# è¯­å¥äºŒ[root@localhost ~]\\# for HOST in host&#123;1,2,3&#125;; do echo $HOST; done# è¯­å¥ä¸‰[root@localhost ~]\\# for HOST in host&#123;1...3&#125;; do echo $HOST; done# è¾“å‡ºç»“æœhost1host2host3 â€‹æŸ¥è¯¢å®‰è£…çš„è·Ÿå†…æ ¸ç›¸å…³çš„åŒ…å¹¶è¾“å‡ºå…¶å®‰è£…æ—¶é—´ï¼š 123456789101112[root@localhost ~]\\# for PKG in $(rpm -qa | grep &quot;kernel&quot;); \\do echo &quot;$PKG was installed in $(date -d @$(rpm -q --qf &quot;%&#123;INSTALLTIME&#125;\\n&quot; $PKG))&quot;; \\donekernel-tools-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:08:19 CST 2021kernel-core-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:05:38 CST 2021kernel-tools-libs-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:04:20 CST 2021abrt-addon-kerneloops-2.10.9-20.el8.x86_64 was installed in Thu Jun 3 07:08:21 CST 2021kernel-modules-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:06:03 CST 2021kernel-devel-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:10:07 CST 2021kernel-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:09:28 CST 2021kernel-headers-4.18.0-240.el8.x86_64 was installed in Thu Jun 3 07:04:49 CST 2021# date -d @æ—¶é—´æˆ³ # å°†æŸä¸€æ—¶é—´æˆ³ï¼ˆ1970 å¹´ 01 æœˆ 01 æ—¥ 08 æ—¶æ•´èµ·ç»è¿‡çš„ç§’æ•°ï¼‰è½¬æ¢æˆæ ‡å‡†æ—¥æœŸæ ¼å¼ â€‹è¾“å‡º 2 - 10 ä¹‹é—´çš„æ‰€æœ‰å¶æ•°ï¼š 1234567[root@localhost ~]\\# for EVEN in $(seq 2 2 10); do echo &quot;$EVEN&quot;; done246810# seq å‘½ä»¤ï¼šç”Ÿæˆæ•°å­—åºåˆ—ã€‚seq 2 2 10ï¼Œä» 2 å¼€å§‹ï¼Œæ¯æ¬¡å¢åŠ  2ï¼Œç›´è‡³ 10ã€‚ â€‹ä¸€ä¸ªç–‘é—®ï¼š 12345678910# è¿™æ˜¯ä¸ºå•¥ï¼Ÿ[root@localhost ~]\\# for VAR in var&#123;$(seq -s , 0 1 5)&#125;; do echo $VAR; donevar&#123;0,1,2,3,4,5&#125;[root@localhost ~]\\# for NUM in $(seq 0 1 5); do echo var$NUM; done var0var1var2var3var4var5 â€‹Shell è„šæœ¬åœ¨å¤„ç†å®Œè‡ªå·±çš„æ‰€æœ‰å†…å®¹åï¼Œè„šæœ¬ä¼šé€€å‡ºåˆ°è°ƒç”¨å®ƒçš„è¿›ç¨‹ã€‚è‹¥éœ€åœ¨è„šæœ¬æ‰§è¡Œå®Œæˆä¹‹å‰é€€å‡ºæ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡åœ¨è„šæœ¬ä¸­ä½¿ç”¨ exit å‘½ä»¤æ¥å®ç°ã€‚å¯ä»¥ä¸º exit å‘½ä»¤æŒ‡å®šä¸€ä¸ªå‚æ•°æ¥è¡¨æ˜æ•´ä¸ªæ“ä½œçš„æ‰§è¡ŒçŠ¶æ€ï¼Œå…¶ä¸­ 0 ä»£è¡¨æˆåŠŸæ‰§è¡Œï¼Œå…¶ä»–éé›¶å€¼å‡ä»£è¡¨å­˜åœ¨é”™è¯¯ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„éé›¶å€¼æ¥ä»£è¡¨ä¸åŒçš„é”™è¯¯ç±»å‹ï¼Œé€€å‡ºåï¼Œè¯¥å‘½ä»¤ã€è„šæœ¬è¿›ç¨‹çš„æ‰§è¡Œç»“æœå°†ä¼ å›çˆ¶è¿›ç¨‹ï¼Œå¯ä»¥è®¿é—®å˜é‡ ï¼Ÿ æ¥è·å–å­è¿›ç¨‹çš„æ‰§è¡Œç»“æœã€‚å¦‚ï¼š 1234[root@localhost ~]\\# rmdir DirThatNotExistedrmdir: failed to remove &#x27;DirThatNotExisted&#x27;: No such file or directory[root@localhost ~]\\# echo $? # ï¼Ÿå˜é‡çš„å€¼æ˜¯éšæ—¶æ ¹æ®å­è¿›ç¨‹çš„æ‰§è¡Œç»“æœæ”¹å˜çš„1 å¦‚æœä¸ä½¿ç”¨ä»»ä½•å‚æ•°è°ƒç”¨ exit å‘½ä»¤ï¼Œé‚£ä¹ˆè„šæœ¬å°†é€€å‡ºå¹¶ä¸”å°†æœ€åæ‰§è¡Œçš„å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ä¼ é€’ç»™çˆ¶è¿›ç¨‹ã€‚ ä¸ºç¡®ä¿è„šæœ¬ä¸ä¼šç”±äºæ„å¤–æƒ…å†µè½»æ˜“ä¸­æ–­ï¼Œä¸€ç§è‰¯å¥½çš„åšæ³•æ˜¯ä¸è¦è¿›è¡Œä¸è¾“å…¥æœ‰å…³çš„å‡è®¾ï¼Œå¦‚å‘½ä»¤è¡Œå‚æ•°ã€ç”¨æˆ·è¾“å…¥ã€å‘½ä»¤æ›¿æ¢ã€å˜é‡æ‰©å±•åŠæ–‡ä»¶åæ‰©å±•ã€‚å¯ä»¥ä½¿ç”¨ Bash çš„ test å‘½ä»¤æ¥æ‰§è¡Œå®Œæ•´æ€§æ£€æŸ¥ã€‚ â€‹ä¸æ‰€æœ‰å‘½ä»¤ä¸€æ ·ï¼Œtest å‘½ä»¤ä¼šåœ¨å®Œæˆåç”Ÿæˆä¸€ä¸ªé€€å‡ºä»£ç ï¼Œè¯¥é€€å‡ºä»£ç å­˜å‚¨ä¸ºå€¼ $?ã€‚è¦æŸ¥çœ‹æµ‹è¯•çš„ç»“è®ºï¼Œè¯·åœ¨æ‰§è¡Œ test å‘½ä»¤åç«‹å³æ˜¾ç¤º $? çš„å€¼ã€‚ å¸¸ç”¨è¿ç®—ç¬¦ â€‹Bash æµ‹è¯•å‘½ä»¤è¯­æ³•ï¼š[&lt;TESTEXPRESSION&gt;]ï¼Œè¾ƒæ–°çš„æ‰©å±•æµ‹è¯•å‘½ä»¤ï¼š[&lt;TESTEXPRESSION&gt;]ï¼ˆBash 2.02 åŠæ›´é«˜ç‰ˆæœ¬å¯ç”¨ï¼Œå¯æä¾›è¯¸å¦‚é€šé…æ¨¡å¼åŒ¹é…å’Œæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…ç­‰åŠŸèƒ½ï¼‰ã€‚ ç®—æ•°æ¯”è¾ƒè¿ç®—ç¬¦ æ¯”è¾ƒè¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ num1 -eq num2 ç­‰äº [ 1 -eq 1 ] num1 -ne num2 ä¸ç­‰äº [ 1 -ne 1 ] num1 -lt num2 å°äº [ 1 -lt 2 ] num1 -le num2 å°äºç­‰äº [ 2 -le 2 ] num1 -gt num2 å¤§äº [ 8 -gt 2 ] num1 -ge num2 å¤§äºç­‰äº [ 2 -gt 2 ] 1234567891011121314[root@localhost ~]\\# [ 1 -eq 1 ]; echo $? # -eqï¼šç­‰äºï¼Œ1 ç­‰äº 1 ï¼Ÿ0 # true[root@localhost ~]\\# [ 1 -ne 1 ]; echo $? # -neï¼šä¸ç­‰äºï¼Œ1 ä¸ç­‰äº 1 ï¼Ÿ1 # false[root@localhost ~]\\# [ 8 -gt 2 ]; echo $? # -gtï¼šå¤§äºï¼Œ8 å¤§äº 2 ï¼Ÿ0 # true[root@localhost ~]\\# [ 2 -ge 2 ]; echo $? # -geï¼šå¤§äºç­‰äºï¼Œ2 å¤§äºç­‰äº 2 ï¼Ÿ0 # true[root@localhost ~]\\# [ 2 -lt 2 ]; echo $? # -ltï¼šå°äºï¼Œ2 å°äº 2 ï¼Ÿ1 # false[root@localhost ~]\\# [ 1 -lt 2 ]; echo $? # -ltï¼šå°äºï¼Œ1 å°äº 2 ï¼Ÿ0 # true[root@localhost ~]\\# [ 1 -le 2 ]; echo $? # -leï¼šå°äºç­‰äºï¼Œ1 å°äºç­‰äº 2 ï¼Ÿ0 # true å­—ç¬¦ä¸²æ¯”è¾ƒè¿ç®—ç¬¦ æ³¨æ„å¼•å·çš„ä½¿ç”¨ï¼Œè¿™æ˜¯é˜²æ­¢ç©ºæ ¼æ‰°ä¹±ä»£ç çš„å¥½æ–¹æ³•ã€‚[ ] è¯­å¥ä¸­ä¸¤ä¾§çš„ç©ºæ ¼ä»¥åŠè¿ç®—ç¬¦ä¸¤ä¾§çš„ç©ºæ ¼æ˜¯å¿…é¡»çš„ã€‚ æ¯”è¾ƒè¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ -z string è‹¥ string é•¿åº¦ä¸º 0ï¼Œåˆ™ä¸ºçœŸ [ -z &quot;$MyVariable&quot; ] -n string è‹¥ string é•¿åº¦ä¸º 0ï¼Œåˆ™ä¸ºçœŸ [ -n &quot;$MyVariable&quot; ] string1 = string2 è‹¥ string1 ä¸ string2 ç›¸åŒï¼Œåˆ™ä¸ºçœŸ [ &quot;$MyVariable&quot; = &quot;Some words&quot; ] string1 != string2 è‹¥ string1 ä¸ string2 ä¸åŒï¼Œåˆ™ä¸ºçœŸ [ &quot;$MyVariable&quot; != &quot;Some words&quot; ] string1 == string2 è‹¥ string1 ä¸ string2 ç›¸åŒï¼Œåˆ™ä¸ºçœŸ [ &quot;$MyVariable&quot; == &quot;Some words&quot; ] 12345678910[root@localhost ~]\\# [ abc = abc ]; echo $?0[root@localhost ~]\\# [ abc == def ]; echo $?1[root@localhost ~]\\# [ abc != def ]; echo $?0[root@localhost ~]\\# [ -z &quot;&quot; ]; echo $?0[root@localhost ~]\\# [ -n &quot;&quot; ]; echo $?1 æ–‡ä»¶æ¯”è¾ƒè¿ç®—ç¬¦ æ¯”è¾ƒè¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ -e filename è‹¥ filename å­˜åœ¨ï¼Œåˆ™ä¸ºçœŸ [ -e /var/log/syslog ] -d filename è‹¥ filename å­˜åœ¨ï¼Œåˆ™ä¸ºçœŸ [ -d /tmp/mydir ] -f filename è‹¥ filenamee ä¸ºå¸¸è§„æ–‡ä»¶ï¼Œåˆ™ä¸ºçœŸ [ -f /usr/bin/grep ] -L filename è‹¥ filename ä¸ºç¬¦å·é“¾æ¥ï¼Œåˆ™ä¸ºçœŸ [ -L /usr/bin/grep ] -r filename è‹¥ filename ä¸ºå¯è¯»ï¼Œåˆ™ä¸ºçœŸ [ -r /var/log/syslog ] -w filename è‹¥ filename ä¸ºå¯å†™ï¼Œåˆ™ä¸ºçœŸ [ -w /root/log.txt ] -x filename è‹¥ filename ä¸ºå¯æ‰§è¡Œï¼Œåˆ™ä¸ºçœŸ [ -x /usr/bin/grep ] filename1 -nt filename2 è‹¥ filename1 æ¯” filename2 æ–°ï¼Œåˆ™ä¸ºçœŸ [ /tmp/install/etc/services -nt /etc/services ] filename1 -ot filename2 è‹¥ filename1 æ¯” filename2 æ—§ï¼Œåˆ™ä¸ºçœŸ [ /boot/bzImage -ot arch/i386/boot/bzImage ] 123456789101112131415161718[root@localhost ~]\\# [ -e /var/log/syslog ]; echo $?1[root@localhost ~]\\# [ -d /tmp/mydir ]; echo $?1[root@localhost ~]\\# [ -f /usr/bin/grep ]; echo $?0[root@localhost ~]\\# [ -L /usr/bin/grep ]; echo $?1[root@localhost ~]\\# [ -r /var/log/syslog ]; echo $?1[root@localhost ~]\\# [ -w /root/log.txt ]; echo $?1[root@localhost ~]\\# [ -x /usr/bin/grep ]; echo $?0[root@localhost ~]\\# [ /tmp/install/etc/services -nt /etc/services ]; echo $?1[root@localhost ~]\\# [ /boot/bzImage -ot arch/i386/boot/bzImage ]; echo $?1 è„šæœ¬ç¼–å†™ä¹‹æ¡ä»¶ â€‹Bash ä¸­æœ€ç®€å•çš„ if æ¡ä»¶åˆ¤æ–­è¯­å¥çš„æ ¼å¼å¦‚ä¸‹ï¼š 1234if &lt;CONDITION&gt;; then &lt;STATEMENT&gt; ...fi â€‹ä»¥ä¸‹ä»£ç æ®µæ¼”ç¤ºä½¿ç”¨ if è¯­å¥åˆ¤æ–­è‹¥ psacct æœåŠ¡æœªå¤„äºæ´»åŠ¨çŠ¶æ€åˆ™å¯åŠ¨è¯¥æœåŠ¡ï¼š 123[root@localhost ~]\\# systemctl is-active psacct &gt; /dev/null 2&gt;&amp;1[root@localhost ~]\\# if [ $? -ne 0 ]; then sudo systemctl start psacct; fi[root@localhost ~]\\# â€‹ä¸¤æ¡çº¿çš„ if æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼š 1234567if &lt;CONDITION&gt;; then &lt;STATEMENT&gt; ...else &lt;STATEMENT&gt; ...fi â€‹ä»¥ä¸‹ä»£ç æ®µæ¼”ç¤ºäº†ä½¿ç”¨ if/then/else è¯­å¥æ¥å¯åŠ¨ psacct æœåŠ¡ï¼ˆè‹¥å…¶æœªå¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰å’Œåœæ­¢è¯¥æœåŠ¡ï¼ˆå¦‚æœå…¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰ã€‚ 123456[root@localhost ~]\\# systemctl is-active psacct &gt; /dev/null 2&gt;&amp;1[root@localhost ~]\\# if [ $? -ne 0 ]; then \\&gt; sudo systemctl start psacct \\&gt; else \\&gt; sudo systemctl stop psacct \\&gt; fi â€‹å¤šçº¿çš„ if æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼š 12345678910if &lt;CONDITION&gt;; then &lt;STATEMENT&gt; ...elif &lt;CONDITION&gt;; then &lt;STATEMENT&gt; ...else &lt;STATEMENT&gt; ...fi â€‹ä»¥ä¸‹ä»£ç æ®µæ¼”ç¤ºäº†ä½¿ç”¨ if/then/elif/then/else è¯­å¥æ¥è¿è¡Œ mysql å®¢æˆ·ç«¯ï¼ˆè‹¥ mariadb æœåŠ¡å¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰ï¼Œè¿è¡Œ psql å®¢æˆ·ç«¯ï¼ˆè‹¥ postgresql æœåŠ¡å¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰æˆ–è¿è¡Œ sqlite3 å®¢æˆ·ç«¯ï¼ˆè‹¥ mariadb å’Œ postgresql æœåŠ¡å‡æœªå¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰ã€‚ 1234567891011[root@localhost ~]\\# systemctl is-active mariadb &gt; /dev/null 2&gt;&amp;1[root@localhost ~]\\# MARIADB_ACTIVE=$?[root@localhost ~]\\# sudo systemctl is-active postgresql &gt; /dev/null 2&gt;&amp;1[root@localhost ~]\\# POSTGRESQL_ACTIVE=$?[root@localhost ~]\\# if [ &quot;$MARIADB_ACTIVE&quot; -eq 0 ]; then \\&gt; mysql \\&gt; elif [ &quot;$POSTGRESQL_ACTIVE&quot; -eq 0 ]; then \\&gt; psql \\&gt; else \\&gt; sqlite3 \\&gt; fi ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ â€‹ç”¨æ³•å¯ä»¥å‚è€ƒæ­¤ç½‘ç«™ï¼šhttps://regexr.com/ã€‚ â€‹æŸ¥çœ‹é…ç½®æ–‡ä»¶æ—¶å¿½ç•¥æ³¨é‡Šå’Œç©ºç™½è¡Œï¼š 12345678[root@localhost ~]\\# cat /etc/ssh/sshd_config | grep -v &quot;#&quot; | grep -v ^$HostKey /etc/ssh/ssh_host_rsa_keyHostKey /etc/ssh/ssh_host_ecdsa_keyHostKey /etc/ssh/ssh_host_ed25519_keySyslogFacility AUTHPRIVPermitRootLogin yesAuthorizedKeysFile .ssh/authorized_keys......","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"è®¿é—® Linux æ–‡ä»¶ç³»ç»Ÿ","slug":"Linux | è®¿é—® Linux æ–‡ä»¶ç³»ç»Ÿ","date":"2022-08-15T04:10:23.992Z","updated":"2022-08-15T04:15:07.355Z","comments":true,"path":"2022-08-15-Linux | è®¿é—® Linux æ–‡ä»¶ç³»ç»Ÿ.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E8%AE%BF%E9%97%AE%20Linux%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨è®¾å¤‡ â€‹Linux æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æ˜¯æŒ‰ç…§æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ï¼ˆä¸€æ£µé¢ å€’çš„ç›®å½•æ ‘ï¼‰è®¿é—®çš„ï¼Œä¸åŒç›®å½•ä¸‹çš„æ–‡ä»¶å¯èƒ½å­˜å‚¨åœ¨ä¸åŒçš„å­˜å‚¨è®¾å¤‡ä¸‹ã€‚æŸä¸ªå­˜å‚¨è®¾å¤‡çš„æ–‡ä»¶ç³»ç»Ÿè¦æƒ³æ¥å…¥å½“å‰ç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­éœ€è¦å°†å…¶æŒ‚è½½åˆ°å½“å‰ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªç©ºç›®å½•ä¸Šï¼Œè¯¥ç›®å½•è¢«ç§°ä¸º â€œæŒ‚è½½ç‚¹â€ã€‚è¿›è¡ŒæŒ‚è½½åä¾¿å¯ä»¥è®¿é—®è¯¥è®¾å¤‡å­˜å‚¨çš„æ–‡ä»¶ï¼Œè¯¥æŒ‚è½½ç‚¹ç›¸å½“äºè¯¥å­˜å‚¨è®¾å¤‡çš„æ ¹ç›®å½•ã€‚ æ–‡ä»¶ç³»ç»Ÿã€å­˜å‚¨å’Œå—è®¾å¤‡ â€‹åœ¨ Linux ä¸­ï¼Œå¯¹å­˜å‚¨è®¾å¤‡çš„ä½çº§åˆ«è®¿é—®æ˜¯ç”±ä¸€ç§ç§°ä¸ºå—è®¾å¤‡çš„ç‰¹æ®Šç±»å‹æ–‡ä»¶æä¾›çš„ã€‚åœ¨æŒ‚è½½è¿™äº›è®¾å¤‡å‰ï¼Œå¿…é¡»å…ˆä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ã€‚ â€‹å—è®¾å¤‡æ–‡ä»¶å’Œå…¶ä»–çš„è®¾å¤‡æ–‡ä»¶ä¸€èµ·å­˜å‚¨åœ¨ /dev ç›®å½•ä¸­ã€‚è®¾å¤‡æ–‡ä»¶æ˜¯ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ã€‚åœ¨çº¢å¸½ä¼ä¸š Linux ä¸­ï¼Œæ£€æµ‹åˆ°çš„ç¬¬ä¸€ä¸ª SATA/PATA ã€SASã€SCSI æˆ– USB ç¡¬ç›˜é©±åŠ¨å™¨è¢«ç§°ä¸º /dev/sdaï¼Œç¬¬äºŒä¸ªè¢«ç§°ä¸º /dev/sdbï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›åç§°ä»£è¡¨æ•´ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ã€‚ è®¾å¤‡ç±»å‹ è®¾å¤‡å‘½åæ¨¡å¼ SATA/SAS/USB é™„åŠ å­˜å‚¨ /dev/sdaã€/dev/sdb... virtio-blk è¶…è™šæ‹ŸåŒ–å­˜å‚¨ï¼ˆéƒ¨åˆ†è™šæ‹Ÿæœºï¼‰ /dev/nvme0ã€/dev/nvme1 NVMe é™„åŠ å­˜å‚¨ï¼ˆå¾ˆå¤š SSDï¼‰ /dev/nvme0ã€/dev/nvme1 SD/MMC/eMMC å­˜å‚¨ï¼ˆSDå¡ï¼‰ /dev/mmcblk0ã€/dev/mmcblk1 æœ€æ–°çš„ virtio-scsi è¶…è™šæ‹ŸåŒ–å­˜å‚¨æŠ€æœ¯å¯¹åº”çš„å‘½åå½¢å¼ä¸º /dev/sd*ã€‚ ç£ç›˜åˆ†åŒºå’Œé€»è¾‘å· â€‹ä¸€å—ç£ç›˜å¯èƒ½ä¼šè¢«åˆ†ä¸ºè‹¥å¹²ä¸ªåˆ†åŒºä»¥å®ç°ä¸åŒç”¨é€”çš„å­˜å‚¨éœ€æ±‚ï¼Œå¦‚ç³»ç»Ÿåˆ†åŒºã€ç”¨æˆ·ä¸»ç›®å½•åˆ†åŒºã€äº¤æ¢åˆ†åŒºã€å¯åŠ¨åˆ†åŒºç­‰ã€‚è¿™äº›åˆ†åŒºçš„æœ¬è´¨ä¹Ÿæ˜¯å—è®¾å¤‡ï¼Œå…¶å‘½åå½¢å¼ä¸ºï¼šsd*nã€nvmempnï¼ˆn ä»£è¡¨ç¬¬å‡ ä¸ªåˆ†åŒºï¼‰ç­‰ã€‚ â€‹æ•´ç†ç£ç›˜å’Œåˆ†åŒºçš„å¦ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡é€»è¾‘å·ç®¡ç†ï¼ˆLVMï¼‰ã€‚é€šè¿‡ LVMï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå—è®¾å¤‡å¯ä»¥æ±‡é›†ä¸ºä¸€ä¸ªå­˜å‚¨æ± ï¼Œç§°ä¸ºå·ç»„ã€‚ç„¶åï¼Œå·ç»„ä¸­çš„ç£ç›˜ç©ºé—´è¢«åˆ†é…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé€»è¾‘å·ï¼Œå®ƒä»¬çš„åŠŸèƒ½ç­‰åŒäºé©»ç•™åœ¨ç‰©ç†ç£ç›˜ä¸Šçš„åˆ†åŒºã€‚LVM ç³»ç»Ÿåœ¨åˆ›å»ºæ—¶ä¸ºå·ç»„å’Œé€»è¾‘å·åˆ†é…åç§°ã€‚LVM åœ¨ /dev ä¸­åˆ›å»ºä¸€ä¸ªåç§°ä¸ç»„ååŒ¹é…çš„ç›®å½•ï¼Œç„¶ååœ¨è¯¥æ–°ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä¸é€»è¾‘å·åŒåçš„ç¬¦å·é“¾æ¥ã€‚ä¹‹åï¼Œå¯ä»¥æŒ‚è½½è¯¥é€»è¾‘å·æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå·ç»„å myvgï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåä¸º mylv çš„é€»è¾‘å·ï¼Œé‚£ä¹ˆå…¶é€»è¾‘å·è®¾å¤‡æ–‡ä»¶çš„å®Œæ•´è·¯å¾„åä¸º /dev/myvg/mylvã€‚ é€»è¾‘å·è®¾å¤‡çš„å‘½åå½¢å¼å®é™…ä¸Šæ˜¯å»ºç«‹ä¸å®é™…è®¾å¤‡æ–‡ä»¶çš„ç¬¦å·é“¾æ¥ï¼Œä»¥æ­¤æ¥è®¿é—®è¯¥æ–‡ä»¶ï¼Œå…¶åç§°åœ¨æ¯æ¬¡å¯åŠ¨æ—¶å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚è¿˜æœ‰ä¸€ç§é€»è¾‘å·è®¾å¤‡çš„å‘½åå½¢å¼ï¼Œé‚£å°±æ˜¯ä¸å¸¸ç”¨çš„ /dev/mapper ä¸­çš„æ–‡ä»¶å»ºç«‹é“¾æ¥ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸å®é™…è®¾å¤‡æ–‡ä»¶çš„ç¬¦å·é“¾æ¥ã€‚ æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ â€‹ä½¿ç”¨ df å‘½ä»¤å¯¹æœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶ç³»ç»Ÿè®¾å¤‡åŠå¯ç”¨ç©ºé—´å¤§å°å¯ä»¥æœ‰ä¸ªç®€ç•¥äº†è§£ã€‚ 12345678910[root@localhost ~]\\# dfFilesystem 1K-blocks Used Available Use% Mounted ondevtmpfs 1880292 0 1880292 0% /devtmpfs 1899208 0 1899208 0% /dev/shmtmpfs 1899208 9884 1889324 1% /runtmpfs 1899208 0 1899208 0% /sys/fs/cgroup/dev/nvme0n1p3 18555904 4878480 13677424 27% //dev/nvme0n1p1 301728 178008 123720 59% /boottmpfs 379840 1168 378672 1% /run/user/42tmpfs 379840 0 379840 0% /run/user/0 â€‹å…¶ä¸­ tmpfs å’Œ devtmpfs è®¾å¤‡æ˜¯ç³»ç»Ÿå†…å­˜ä¸­çš„æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨ç³»ç»Ÿé‡å¯åï¼Œå†™å…¥ tmpfs æˆ– devtmpfs çš„æ–‡ä»¶éƒ½ä¼šæ¶ˆå¤±ã€‚ â€‹ä½¿ç”¨é€‰é¡¹ -hã€å•ä½ä¸º KiBï¼ˆ2^10ï¼‰ã€MiBï¼ˆ2^20ï¼‰æˆ–GiBï¼ˆ2^30ï¼‰ã€‘æˆ–é€‰é¡¹ -Hã€å•ä½ä¸º KB(10^3)ã€MB(10^6)æˆ–GB(10^9)ã€‚ 1234567891011[root@localhost ~]\\# df -hFilesystem Size Used Avail Use% Mounted ondevtmpfs 1.8G 0 1.8G 0% /devtmpfs 1.9G 0 1.9G 0% /dev/shmtmpfs 1.9G 9.6M 1.9G 1% /runtmpfs 1.9G 0 1.9G 0% /sys/fs/cgroup/dev/nvme0n1p3 18G 4.7G 14G 27% //dev/nvme0n1p1 295M 174M 121M 59% /boottmpfs 371M 1.2M 370M 1% /run/user/42tmpfs 371M 0 371M 0% /run/user/0-i, --inodes # è¾“å‡º inodes æ•°è€Œä¸æ˜¯å¤§å° â€‹ä½¿ç”¨ du å‘½ä»¤æŸ¥çœ‹æŸä¸€ç‰¹å®šç›®å½•æ ‘ä½¿ç”¨çš„ç©ºé—´çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ dfï¼Œå…¶ä¹Ÿæœ‰ -h å’Œ -H ä¸¤ä¸ªé€‰é¡¹ã€‚ 12345678910[root@localhost ~]\\# du /home/student/.config64 /home/student/.config/pulse0 /home/student/.config/gnome-session/saved-session0 /home/student/.config/gnome-session......[root@localhost ~]\\# du -h /home/student/.config64K /home/student/.config/pulse0 /home/student/.config/gnome-session/saved-session0 /home/student/.config/gnome-session...... æŒ‚è½½å’Œå¸è½½æ–‡ä»¶ç³»ç»Ÿ æ‰‹åŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ â€‹è¦åœ¨ç³»ç»Ÿä¸­æŒ‚è½½æŸä¸ªå­˜å‚¨è®¾å¤‡æ‰èƒ½è®¿é—®å…¶å†…å®¹ï¼Œä½¿ç”¨ mount å‘½ä»¤æ¥æ‰‹åŠ¨æŒ‚è½½æŸä¸ªå­˜å‚¨è®¾å¤‡ã€‚ 12mount -a [options] # æŒ‚è½½ /etc/fstab é…ç½®æ–‡ä»¶ä¸­æ¶‰åŠçš„æ‰€æœ‰é…ç½®mount [options] &lt;source&gt; &lt;directory&gt; # å°†è®¾å¤‡æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°ç›®å½• â€‹å…¶ä¸­ï¼ŒæŒ‡å®šè®¾å¤‡æ—¶æ—¢å¯ä»¥ä½¿ç”¨ /dev ç›®å½•ä¸­çš„è®¾å¤‡åç§°ä¹Ÿå¯ä»¥ä½¿ç”¨æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿæ—¶äº§ç”Ÿçš„ UUIDã€‚ æŸ¥çœ‹ç³»ç»Ÿè¿æ¥çš„å—è®¾å¤‡ â€‹ä½¿ç”¨ lsblk å‘½ä»¤æ¥åˆ—å‡ºæŒ‡å®šå—è®¾å¤‡æˆ–æ‰€æœ‰å¯ç”¨å—è®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯ï¼š 1234567[root@localhost ~]\\# lsblk # ä¸ä¼šåˆ—å‡ºä¸´æ—¶å†…å­˜æ–‡ä»¶ç³»ç»Ÿ tmpfsNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTsr0 11:0 1 1024M 0 rom nvme0n1 259:0 0 20G 0 disk â”œâ”€nvme0n1p1 259:1 0 300M 0 part /bootâ”œâ”€nvme0n1p2 259:2 0 2G 0 part [SWAP]â””â”€nvme0n1p3 259:3 0 17.7G 0 part / æŒ‰å—è®¾å¤‡åç§°æŒ‚è½½ â€‹ä»¥ä¸‹å‘½ä»¤å°† /dev/sdb1 è®¾å¤‡æŒ‚è½½åˆ° /mnt/data ç›®å½•ä¸­ã€‚ 1[root@localhost ~]\\# mount /dev/sdb1 /mnt/data â€‹è‹¥è¦æŒ‚è½½æˆåŠŸï¼Œç›®æ ‡ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ/mnt ç›®å½•å­˜åœ¨å¹¶ç”¨ä½œä¸´æ—¶æŒ‚è½½ç‚¹ï¼Œå¯ä»¥å°† /mnt ç›®å½•ç”¨ä½œä¸´æ—¶æŒ‚è½½ç‚¹ï¼ˆåˆ›å»º /mnt çš„ä¸€ä¸ªå­ç›®å½•ä¼šæ›´å¥½ï¼‰ã€‚ è‹¥ç³»ç»Ÿè°ƒæ•´è¿‡å­˜å‚¨è®¾å¤‡åˆ™æ“ä½œç³»ç»Ÿæ£€æµ‹ç£ç›˜çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå°†ä¼šå¯¼è‡´å­˜å‚¨è®¾å¤‡çš„åç§°çš„æ”¹å˜ï¼Œæœ€å¥½é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼ˆæŒ‰ç…§æ–‡ä»¶ç³»ç»Ÿ UUID æŒ‚è½½ï¼‰è¿›è¡ŒæŒ‚è½½ã€‚ æŒ‰æ–‡ä»¶ç³»ç»Ÿ UUID æŒ‚è½½ â€‹UUID å³é€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼Œå®ƒå”¯ä¸€æ€§çš„ä»£è¡¨æŸä¸ªäº‹ç‰©ï¼Œå¯ç”¨ä½œæŸä¸ªå­˜å‚¨è®¾å¤‡ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿçš„å”¯ä¸€æ€§æ ‡è¯†ã€‚ä½¿ç”¨ lsblk -fp å‘½ä»¤å¯ä»¥åˆ—å‡ºè®¾å¤‡çš„å®Œæ•´è·¯å¾„ã€å…¶ UUID å’ŒæŒ‚è½½ç‚¹ï¼Œä»¥åŠåˆ†åŒºä¸­æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹ã€‚å¦‚æœæœªæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™æŒ‚è½½ç‚¹å°†ä¸ºç©ºã€‚ 1234567[root@localhost ~]\\# lsblk -fpNAME FSTYPE LABEL UUID MOUNTPOINT/dev/sr0 /dev/nvme0n1 â”œâ”€/dev/nvme0n1p1 xfs 529dd49b-7b72-4394-8fbb-98eb7f24de1e /bootâ”œâ”€/dev/nvme0n1p2 swap bb97577f-bf23-4a75-8ff1-46b7dce21eb9 [SWAP]â””â”€/dev/nvme0n1p3 xfs 360e2f42-d6de-4209-8487-f36b7cc69cc2 / â€‹æ ¹æ®æ–‡ä»¶ç³»ç»Ÿçš„ UUID æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚ 1[root@localhost ~]\\# mount UUID=&quot;360e2f42-d6de-4209-8487-f36b7cc69cc2&quot; / è‡ªåŠ¨æŒ‚è½½å¯ç§»åŠ¨å­˜å‚¨è®¾å¤‡ â€‹ç™»é™†å›¾å½¢ç•Œé¢æ’å…¥ä»»ä½•å¯ç§»åŠ¨å­˜å‚¨æ—¶ä¼šè‡ªåŠ¨æŒ‚è½½ã€‚å¯ç§»åŠ¨å­˜å‚¨è®¾å¤‡å°†æŒ‚è½½åˆ° /run/media/USERNAME/LABELï¼Œå…¶ä¸­ USERNAME æ˜¯ç™»é™†å›¾å½¢ç•Œé¢ç¯å¢ƒçš„ç”¨æˆ·åï¼Œè€Œ LABEL æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œé€šå¸¸æ˜¯åˆ›å»ºæ—¶ç»™æ–‡ä»¶ç³»ç»Ÿå–çš„åç§°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚åœ¨ç§»é™¤è®¾å¤‡ä¹‹å‰ï¼Œåº”æ‰‹åŠ¨å°†å®ƒå¸è½½ã€‚ å¸è½½æ–‡ä»¶ç³»ç»Ÿ â€‹å…³æœºå’Œé‡æ–°å¯åŠ¨è¿‡ç¨‹ä¼šè‡ªåŠ¨å¸è½½æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œç¼“å­˜åœ¨å†…å­˜ä¸­çš„ä»»ä½•æ–‡ä»¶ç³»ç»Ÿæ•°æ®éƒ½å°†ä¼šåˆ·æ–°åˆ°å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä»è€Œç¡®ä¿æ–‡ä»¶ç³»ç»Ÿä¸ä¼šé­å—æ•°æ®æŸåã€‚ æ–‡ä»¶ç³»ç»Ÿæ•°æ®é€šå¸¸ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚å› æ­¤ï¼Œä¸ºäº†é¿å…æŸåç£ç›˜ä¸Šçš„æ•°æ®ï¼ŒåŠ¡å¿…å…ˆå¸è½½å¯ç§»åŠ¨é©±åŠ¨å™¨ï¼Œç„¶åå†æ‹”ä¸‹å®ƒä»¬ã€‚å¸è½½è¿‡ç¨‹ä¼šåœ¨é‡Šæ”¾é©±åŠ¨å™¨ä¹‹å‰åŒæ­¥æ•°æ®ï¼Œä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚ â€‹ä½¿ç”¨ umount å‘½ä»¤æ¥å¸è½½è®¾å¤‡ï¼Œè¯¥å‘½ä»¤éœ€è¦æŒ‚è½½ç‚¹ä½œä¸ºå‚æ•°ã€‚ 1[root@localhost ~]\\# umount /mnt/data â€‹æ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿå°†æ— æ³•æˆåŠŸå¸è½½ï¼Œè‹¥è¦æˆåŠŸæ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œåˆ™æ‰€æœ‰è¿›ç¨‹éƒ½éœ€è¦åœæ­¢è®¿é—®å¸è½½ç‚¹ä¸‹çš„æ•°æ®ã€‚ â€‹ä½¿ç”¨ lsof å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€ç»™ç›®å½•ä¸­æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ä»¥åŠè®¿é—®å®ƒä»¬çš„è¿›ç¨‹ã€‚ 1234567[root@localhost ~]\\# lsof /rootCOMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEbash 3082 root cwd DIR 259,3 219 33575041 /rootsftp-serv 3123 root cwd DIR 259,3 219 33575041 /rootsftp-serv 3123 root 8r DIR 259,3 219 33575041 /rootlsof 3794 root cwd DIR 259,3 219 33575041 /rootlsof 3795 root cwd DIR 259,3 219 33575041 /root å¸¸è§çš„æ— æ³•å¸è½½çš„åŸå› æ˜¯å½“å‰å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•å¤„äºæŒ‚è½½ç‚¹æˆ–å…¶å­ç›®å½•ä¸­ï¼Œå°†å·¥ä½œç›®å½•åˆ‡æ¢åˆ°æŒ‚è½½ç‚¹ä¹‹å¤–å³å¯è§£å†³æ­¤é—®é¢˜ã€‚ æŸ¥æ‰¾ç³»ç»Ÿä¸­çš„æ–‡ä»¶ æœç´¢æ–‡ä»¶ â€‹ä½¿ç”¨ locate å’Œ find å‘½ä»¤è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ä¸­æœç´¢æ–‡ä»¶çš„æ“ä½œã€‚ locate å‘½ä»¤æœç´¢é¢„ç”Ÿæˆç´¢å¼•ä¸­çš„æ–‡ä»¶åæˆ–æ–‡ä»¶è·¯å¾„ï¼Œå¹¶å³ä½¿è¿”å›ç»“æœï¼› find å‘½ä»¤é€šè¿‡çˆ¬å–æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„æ¥å®æ—¶æœç´¢æ–‡ä»¶ã€‚ æ ¹æ®åç§°æŸ¥æ‰¾æ–‡ä»¶ â€‹ä½¿ç”¨ locate å‘½ä»¤æœç´¢æ–‡ä»¶ä¼šæ¯”è¾ƒå¿«é€Ÿï¼Œå› ä¸ºå®ƒæ˜¯ä» mlocate æ•°æ®åº“ä¸­æŸ¥æ‰¾çš„ä¿¡æ¯ï¼Œä½†æ˜¯è¯¥æ•°æ®åº“æ˜¯æ¯æ—¥è‡ªåŠ¨æ›´æ–°çš„è€Œä¸æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œroot ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤ updatedb æ¥å¼ºåˆ¶æ›´æ–°æ•°æ®åº“ã€‚ 1[root@localhost ~]\\# updatedb â€‹æ™®é€šç”¨æˆ·çš„æœç´¢ç»“æœä¼šæ ¹æ®ç”¨æˆ·çš„è®¿é—®æƒé™ä½œå‡ºé™åˆ¶ã€‚ 1234567[root@localhost ~]\\# locate Desktop # å­ä¸²åŒ¹é…/home/student/Desktop/usr/lib/python3.6/site-packages/xdg/DesktopEntry.py/usr/lib/python3.6/site-packages/xdg/__pycache__/DesktopEntry.cpython-36.opt-1.pyc/usr/lib/python3.6/site-packages/xdg/__pycache__/DesktopEntry.cpython-36.pyc/usr/lib64/girepository-1.0/GDesktopEnums-3.0.typelib...... â€‹ä½¿ç”¨ -i é€‰é¡¹æ¥å¿½ç•¥å¤§å°å†™é™åˆ¶ï¼Œ-n é€‰é¡¹æ¥é™åˆ¶å‘½ä»¤è¿”å›çš„æœç´¢ç»“æœæ•°é‡ï¼š 123456[root@localhost ~]\\# locate -i -n 5 messages /usr/lib/locale/C.utf8/LC_MESSAGES/usr/lib/locale/C.utf8/LC_MESSAGES/SYS_LC_MESSAGES/usr/lib/locale/en_AG/LC_MESSAGES/usr/lib/locale/en_AG/LC_MESSAGES/SYS_LC_MESSAGES/usr/lib/locale/en_AU/LC_MESSAGES å®æ—¶æœç´¢æ–‡ä»¶ â€‹ä½¿ç”¨ find å‘½ä»¤å®æ—¶éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ¥æŸ¥æ‰¾æ–‡ä»¶ã€‚å®ƒæ¯” locate æ›´æ…¢å¾—åˆ°æœç´¢ç»“æœä½†æ˜¯ä¼šæ›´å‡†ç¡®ï¼Œå®ƒä¸ä»…æ”¯æŒæœç´¢æ–‡ä»¶åï¼Œè¿˜æ”¯æŒæ ¹æ®æ–‡ä»¶çš„æƒé™ã€ç±»å‹ã€å¤§å°æˆ–ä¿®æ”¹æ—¶é—´æ¥æœç´¢æ–‡ä»¶ã€‚ â€‹find å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶åŠç›®å½•çš„æƒé™ä¸æ‰§è¡Œè¯¥å‘½ä»¤çš„ç”¨æˆ·ä¿æŒä¸€è‡´ã€‚ 12find [options] [path...] [expression] # find å‘½ä»¤æ ¼å¼# é»˜è®¤ path ä¸ºå½“å‰ç›®å½•ï¼Œé»˜è®¤ expression ä¸º -printï¼ˆå³æ‰“å°æœç´¢ç»“æœï¼‰ æŒ‰ç…§æ–‡ä»¶åæœç´¢æ–‡ä»¶ 123456789101112[root@localhost ~]\\# find / -name ssh_config/etc/ssh/ssh_config[root@localhost ~]\\# find /home/student -name &quot;*.txt&quot; | head -n 5 # ä½¿ç”¨é€šé…ç¬¦/home/student/.mozilla/firefox/uf3n2m6z.default-default/pkcs11.txt/home/student/.mozilla/firefox/uf3n2m6z.default-default/SiteSecurityServiceState.txt/home/student/.mozilla/firefox/uf3n2m6z.default-default/SecurityPreloadState.txt/home/student/.mozilla/firefox/uf3n2m6z.default-default/TRRBlacklist.txt/home/student/.mozilla/firefox/uf3n2m6z.default-default/AlternateServices.txt[root@localhost ~]\\# find /usr/share -iname &quot;*messages&quot; | head -n 3 # iname å¿½ç•¥ç”¨æˆ·åå¤§å°å†™/usr/share/locale/af/LC_MESSAGES/usr/share/locale/az/LC_MESSAGES/usr/share/locale/bg/LC_MESSAGES æ ¹æ®æ‰€æœ‰æƒæˆ–æƒé™æœç´¢æ–‡ä»¶ 1234567891011[root@localhost ~]\\# find /home/student/.pki -user student # æŒ‰ç”¨æˆ·æœç´¢/home/student/.pki/home/student/.pki/nssdb[root@localhost ~]\\# find / -group cdrom # æŒ‰ç”¨æˆ·ç»„æœç´¢/dev/sr0/dev/sg0......[root@localhost ~]\\# find /etc/ssh/ssh_config -uid 0 # æŒ‰ç”¨æˆ· id æœç´¢/etc/ssh/ssh_config[root@localhost ~]\\# find / -user root -gid 12 # ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼ˆmailï¼‰æ­é…ä½¿ç”¨/var/spool/mail â€‹ä½¿ç”¨ -perm æŒ‰ç…§ç‰¹å®šæƒé™è¿›è¡Œæœç´¢ï¼Œä½¿ç”¨æ•°å­—è¡¨ç¤ºæ³•ï¼Œè¯¦ç»†æƒ…å†µå¯ä»¥å‚è€ƒå‰é¢æœ‰å…³ç« èŠ‚çš„å†…å®¹ã€‚-perm é€‰é¡¹çš„å‚æ•°çš„å‰é¢å¯ä»¥åŠ ä¸Š / æˆ– - ç¬¦å·ã€‚å…¶ä¸­ / ä»£è¡¨åŒ¹é… u,g,o ä¸­çš„è‡³å°‘ä¸€ä¸ªå­˜åœ¨æ‰åŒ¹é…ï¼Œ- ä»£è¡¨ u,g,o éœ€è¦éƒ½å­˜åœ¨æ‰åŒ¹é…ã€‚ 1234[root@localhost ~]\\# find -perm 764 # åŒ¹é…ç”¨æˆ·å…·æœ‰ rwx æƒé™ï¼Œç»„æˆå‘˜å…·æœ‰ rw æƒé™ä»¥åŠå…¶ä»–äººåªæœ‰è¯»æƒé™çš„æ–‡ä»¶[root@localhost ~]\\# find -perm -324 # åŒ¹é…ç”¨æˆ·è‡³å°‘æ‹¥æœ‰ wx æƒé™ï¼Œç»„æˆå‘˜è‡³å°‘æ‹¥æœ‰ w æƒé™ï¼Œå…¶ä»–æˆå‘˜è‡³å°‘å…·æœ‰ r æƒé™çš„æ–‡ä»¶[root@localhost ~]\\# find -perm /442 # åŒ¹é…ç”¨æˆ·å…·æœ‰ r æƒé™æˆ–è€…ç»„æˆå‘˜å…·æœ‰ r æˆ–è€…å…¶ä»–äººå…·æœ‰ w æƒé™çš„æ–‡ä»¶[root@localhost ~]\\# find -perm -004 # åŒ¹é…å…¶ä»–äººè‡³å°‘æ‹¥æœ‰ r æƒé™çš„æ–‡ä»¶ æ ¹æ®å¤§å°æœç´¢æ–‡ä»¶ 12345678910111213141516# 1. æœç´¢å¤§å°ä¸º 10 å…†å­—èŠ‚ï¼ˆå‘ä¸Šå–æ•´ï¼‰çš„æ–‡ä»¶[root@localhost ~]\\# find /boot -size 10M/boot/vmlinuz-4.18.0-240.el8.x86_64 # å®é™… 9.1M/boot/vmlinuz-0-rescue-6651ee1da4824a37975cd5245c8cb076 # å®é™… 9.1M# 2. æœç´¢å¤§å°è¶…è¿‡ 10 å…†å­—èŠ‚çš„æ–‡ä»¶[root@localhost ~]\\# find /boot -size +10M/boot/initramfs-4.18.0-240.el8.x86_64.img/boot/initramfs-0-rescue-6651ee1da4824a37975cd5245c8cb076.img/boot/initramfs-4.18.0-240.el8.x86_64kdump.img# 3. æœç´¢å¤§å°ä¸è¶…è¿‡ 10 å…†å­—èŠ‚çš„æ–‡ä»¶[root@localhost ~]\\# find /boot -size -10M/boot/boot/efi/boot/efi/EFI/boot/efi/EFI/redhat...... æ ¹æ®ä¿®æ”¹æ—¶é—´æœç´¢æ–‡ä»¶ 123456# 1. æœç´¢ 120min å‰ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆå‘ä¸‹èˆå…¥ï¼‰ã€119min - 120minã€‘[root@localhost ~]\\# find / -mmin 120# 2. æœç´¢åœ¨ 200min+ å‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶[root@localhost ~]\\# find / -mmin +120# 3. æœç´¢è¿‡å» 150min å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶[root@localhost ~]\\# find / -mmin -150 æ ¹æ®æ–‡ä»¶ç±»å‹æœç´¢æ–‡ä»¶ â€‹ä¸åŒæ–‡ä»¶ç±»å‹çš„æ ‡å¿—å¦‚ä¸‹ï¼š fï¼Œæ™®é€šæ–‡ä»¶ dï¼Œç›®å½• lï¼Œè½¯é“¾æ¥ bï¼Œå—è®¾å¤‡ 123456[root@localhost ~]\\# find /dev -type b/dev/sr0/dev/nvme0n1p3/dev/nvme0n1p2/dev/nvme0n1p1/dev/nvme0n1","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"è½¯ä»¶ä»“åº“å’Œè½¯ä»¶åŒ…æ¨¡å—æµç®¡ç†","slug":"Linux | è½¯ä»¶ä»“åº“å’Œè½¯ä»¶åŒ…æ¨¡å—æµç®¡ç†","date":"2022-08-15T04:05:29.539Z","updated":"2022-08-15T04:08:34.227Z","comments":true,"path":"2022-08-15-Linux | è½¯ä»¶ä»“åº“å’Œè½¯ä»¶åŒ…æ¨¡å—æµç®¡ç†.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93%E5%92%8C%E8%BD%AF%E4%BB%B6%E5%8C%85%E6%A8%A1%E5%9D%97%E6%B5%81%E7%AE%A1%E7%90%86.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç®¡ç† DNF è½¯ä»¶ä»“åº“ â€‹å°†ç³»ç»Ÿæ³¨å†Œåˆ°è®¢é˜…ç®¡ç†æœåŠ¡å¯æ ¹æ®æ‰€é™„åŠ çš„è®¢é˜…è‡ªåŠ¨é…ç½®è½¯ä»¶å­˜å‚¨åº“çš„è®¿é—®ã€‚ â€‹ä½¿ç”¨ dnf repolist all æŸ¥çœ‹å¯ç”¨çš„å­˜å‚¨åº“ï¼š 12345678910111213141516171819202122[skinyi@skinyi ~]\\$ dnf repolist all # ä¸åŠ é€‰é¡¹ all ä»…åˆ—å‡ºå·²å¯ç”¨çš„ä»“åº“ä»“åº“ id ä»“åº“åç§° çŠ¶æ€fedora Fedora 33 - x86_64 å¯ç”¨fedora-cisco-openh264 Fedora 33 openh264 (From Cisco) - x86_64 å¯ç”¨fedora-cisco-openh264-debuginfo Fedora 33 openh264 (From Cisco) - x86_64 ç¦ç”¨fedora-debuginfo Fedora 33 - x86_64 - Debug ç¦ç”¨fedora-modular Fedora Modular 33 - x86_64 å¯ç”¨fedora-modular-debuginfo Fedora Modular 33 - x86_64 - Debug ç¦ç”¨fedora-modular-source Fedora Modular 33 - Source ç¦ç”¨fedora-source Fedora 33 - Source ç¦ç”¨updates Fedora 33 - x86_64 - Updates å¯ç”¨updates-debuginfo Fedora 33 - x86_64 - Updates - Debug ç¦ç”¨updates-modular Fedora Modular 33 - x86_64 - Updates å¯ç”¨updates-modular-debuginfo Fedora Modular 33 - x86_64 - Updates - De ç¦ç”¨updates-modular-source Fedora Modular 33 - Updates Source ç¦ç”¨updates-source Fedora 33 - Updates Source ç¦ç”¨updates-testing Fedora 33 - x86_64 - Test Updates ç¦ç”¨updates-testing-debuginfo Fedora 33 - x86_64 - Test Updates Debug ç¦ç”¨updates-testing-modular Fedora Modular 33 - x86_64 - Test Updates ç¦ç”¨updates-testing-modular-debuginfo Fedora Modular 33 - x86_64 - Test Updates ç¦ç”¨updates-testing-modular-source Fedora Modular 33 - Test Updates Source ç¦ç”¨updates-testing-source Fedora 33 - Test Updates Source â€‹ä½¿ç”¨ dnf config-manager æ¥å¯ç”¨æˆ–ç¦ç”¨å­˜å‚¨åº“ã€‚ 12345678[root@skinyi ~]\\# dnf config-manager --enable fedora-cisco-openh264-debuginfo[root@skinyi ~]\\# dnf repolist all | grep fedora-ciscofedora-cisco-openh264 Fedora 33 openh264 (From Cisco) - x86_64 å¯ç”¨fedora-cisco-openh264-debuginfo Fedora 33 openh264 (From Cisco) - x86_64 å¯ç”¨[root@skinyi ~]\\# dnf config-manager --disable fedora-cisco-openh264-debuginfo[root@skinyi ~]\\# dnf repolist all | grep fedora-ciscofedora-cisco-openh264 Fedora 33 openh264 (From Cisco) - x86_64 å¯ç”¨fedora-cisco-openh264-debuginfo Fedora 33 openh264 (From Cisco) - x86_64 ç¦ç”¨ æ·»åŠ è‡ªå®šä¹‰å­˜å‚¨åº“é…ç½® â€‹è¦å¯ç”¨å¯¹æ–°çš„ç¬¬ä¸‰æ–¹å­˜å‚¨åº“çš„æ”¯æŒï¼Œå¯åœ¨ /etc/yum.repos.d/ ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚å­˜å‚¨åº“é…ç½®æ–‡ä»¶å¿…é¡»ä»¥ .repo æ‰©å±•åç»“å°¾ã€‚å­˜å‚¨åº“å®šä¹‰åŒ…å«å­˜å‚¨åº“çš„ URL å’Œåç§°ï¼Œä¹Ÿå®šä¹‰æ˜¯å¦ä½¿ç”¨ GPG æ£€æŸ¥è½¯ä»¶åŒ…ç­¾åï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿˜æ£€æŸ¥ URL æ˜¯å¦æŒ‡å‘å—ä¿¡ä»»çš„ GPG å¯†é’¥ã€‚ DNF çš„è½¯ä»¶ä»“åº“é…ç½®ç›®å½•ä»æ˜¯ /etc/yum.repos.dã€‚ â€‹ä½¿ç”¨ dnf config-manager æ¥æ·»åŠ ä¸€ä¸ª dnf å­˜å‚¨åº“ã€‚ 1234567891011[root@skinyi dnf]\\# dnf config-manager \\--add-repo=&quot;http://dl.fedoraproject.org/pub/epel/8/x86_64/&quot;æ·»åŠ ä»“åº“è‡ªï¼šhttp://dl.fedoraproject.org/pub/epel/8/x86_64/[root@skinyi dnf]\\# ls /etc/yum.repos.d/dl.fedoraproject.org_pub_epel_8_x86_64_.repofedora-cisco-openh264.repo......[root@skinyi dnf]\\# dnf repolist all # æ·»åŠ åçš„ä»“åº“é»˜è®¤ä¸ºå¯ç”¨çŠ¶æ€ä»“åº“ id ä»“åº“åç§° çŠ¶æ€dl.fedoraproject.org_pub_epel_8_x86_64_ created by dnf config-manager from å¯ç”¨...... â€‹æŒ‰éœ€ä¿®æ”¹ä»“åº“æ–‡ä»¶ï¼Œå¹¶é…ç½® GPG å¯†é’¥ä»¥å¢å¼ºå®‰å…¨æ€§ã€‚å¯†é’¥å­˜å‚¨åœ¨è¿œç¨‹å­˜å‚¨åº“ç«™ç‚¹ä¸Šçš„ä¸åŒä½ç½®ï¼Œå¦‚ http://dl.fedoraproject.org/pub/epel/RPM_GPG_KEY_EPEL-8ã€‚ç³»ç»Ÿç®¡ç†å‘˜åº”è¯¥å°†æ­¤å¯†é’¥ä¸‹è½½åˆ°æœ¬åœ°å¹¶é…ç½® dnf ä»æœ¬åœ°æ£€ç´¢æ­¤å¯†é’¥ã€‚ä¾‹å¦‚ï¼š 12345678[root@skinyi dnf]\\# vi /etc/yum.repos.d/dl.fedoraproject.org_pub_epel_8_x86_64_.repo [EPEL-8] # id ä¸èƒ½å­˜åœ¨ç©ºæ ¼name=EPEL8 repositoriesbaseurl=http://dl.fedoraproject.org/pub/epel/8/x86_64/enabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-8:wq â€‹è¦åˆ é™¤æŸä¸ªè½¯ä»¶ä»“åº“ï¼Œå°†å…¶é…ç½®æ–‡ä»¶åˆ é™¤å³å¯ï¼š 123[root@skinyi ~]\\# rm -f /etc/yum.repos.d/dl.fedoraproject.org_pub_epel_8_x86_64_.repo [root@skinyi ~]\\# dnf repolist all | grep EPEL[root@skinyi ~]\\# å®‰è£…è½¯ä»¶ä»“åº“åŠå…¶é…ç½®æ–‡ä»¶ â€‹ä¸€äº›å­˜å‚¨åº“å°†ä¸€ä¸ªé…ç½®æ–‡ä»¶å’Œ GPG å…¬é’¥ä½œä¸º RPM è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†æä¾›ï¼Œè¯¥è½¯ä»¶åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨ dnf install å‘½ä»¤æ¥ä¸‹è½½å’Œå®‰è£…ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°†å®‰è£… RHEL8 EPEL è½¯ä»¶å­˜å‚¨åº“è½¯ä»¶åŒ…ã€‚ 12[root@skinyi ~]\\# rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8[root@skinyi ~]\\# dnf install http://dl.fedoraproject.org/pub/epel/8/x86_64/e/epel-release-8-2.noarch.rpm å…ˆå®‰è£… RPM GPG å¯†é’¥å†å®‰è£…ç­¾åçš„è½¯ä»¶åŒ…ï¼Œå®‰è£…è½¯ä»¶åŒ…æ—¶å¯ä»¥é€šè¿‡ --nogpgcheck é€‰é¡¹å¿½ç•¥æ£€æŸ¥ GPG keyï¼Œä½†æ­¤æ“ä½œå¹¶ä¸å®‰å…¨ã€‚ â€‹ä¸€ä¸ªè½¯ä»¶ä»“åº“é…ç½®æ–‡ä»¶å¯ä»¥é…ç½®å¤šä¸ªå­˜å‚¨åº“çš„å¼•ç”¨ï¼Œæ¯ä¸€å­˜å‚¨åº“çš„å¼€å¤´ä¸ºåŒ…å«åœ¨æ–¹æ‹¬å·é‡Œçš„å­˜å‚¨åº“çš„ idã€‚ 1234567891011121314151617181920212223242526272829303132333435363738[root@skinyi ~]\\# cat /etc/yum.repos.d/fedora.repo [fedora]name=Fedora $releasever - $basearch#baseurl=http://download.example/pub/fedora/linux/releases/$releasever/Everything/$basearch/os/metalink=https://mirrors.fedoraproject.org/metalink?repo=fedora-$releasever&amp;arch=$basearchenabled=1countme=1metadata_expire=7drepo_gpgcheck=0type=rpmgpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearchskip_if_unavailable=False[fedora-debuginfo]name=Fedora $releasever - $basearch - Debug#baseurl=http://download.example/pub/fedora/linux/releases/$releasever/Everything/$basearch/debug/tree/metalink=https://mirrors.fedoraproject.org/metalink?repo=fedora-debug-$releasever&amp;arch=$basearchenabled=0metadata_expire=7drepo_gpgcheck=0type=rpmgpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearchskip_if_unavailable=False[fedora-source]name=Fedora $releasever - Source#baseurl=http://download.example/pub/fedora/linux/releases/$releasever/Everything/source/tree/metalink=https://mirrors.fedoraproject.org/metalink?repo=fedora-source-$releasever&amp;arch=$basearchenabled=0metadata_expire=7drepo_gpgcheck=0type=rpmgpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-$releasever-$basearchskip_if_unavailable=False ç®¡ç†è½¯ä»¶åŒ…æ¨¡å—æµ â€‹æ¨¡å—åŒ– æ˜¯æ„å»ºã€ç»„ç»‡ã€åˆ†å‘è½¯ä»¶åŒ…çš„ä¸€ç§æ–°å‹æ–¹å¼ï¼Œå…·æœ‰é€æ˜æ„å»ºå’Œäº¤ä»˜ã€ç§¯æç»´æŠ¤å’Œæ˜“äºå®‰è£…çš„ç‰¹ç‚¹ã€‚ æ¨¡å—åŒ–çš„åŸºæœ¬æ¦‚å¿µ è½¯ä»¶åŒ…ï¼šæ™®é€šçš„ rpm è½¯ä»¶åŒ…ï¼› æ¨¡å—ï¼šå°†è½¯ä»¶åŒ…è¿›è¡Œåˆ†ç»„æ•´åˆæˆæ¨¡å— â€”â€” ç‰¹å®šçš„åº”ç”¨ç¨‹åºã€è¯­è¨€è¿è¡Œæ—¶æˆ–ä»»ä½•é€»è¾‘ç»„çš„è¡¨ç¤ºã€‚è¿™ä½¿å†…å®¹æ›´åŠ ç²¾ç»†ã€æ›´å®¹æ˜“æ‰¾åˆ°è‡ªå·±æ‰€éœ€ï¼› æ¨¡å—æµï¼šæ¨¡å—å¯ä»¥åœ¨å¤šä¸ªæµä¸­å¯ç”¨ï¼Œé€šå¸¸ä»£è¡¨å®ƒä»¬åŒ…å«çš„è½¯ä»¶çš„ä¸»è¦ç‰ˆæœ¬ï¼Œè‡ªåŠ¨é€‰æ‹©æ‰€éœ€è½¯ä»¶çš„æ­£ç¡®ç‰ˆæœ¬ã€‚ é…ç½®æ–‡ä»¶ï¼šä¸ºäº†ç®€åŒ–å®‰è£…è€Œå¼•å…¥äº†å®‰è£…é…ç½®æ–‡ä»¶ â€”â€” æ¨¡å—ç‰¹å®šç”¨ä¾‹çš„è½¯ä»¶åŒ…å­é›†ã€‚ ç®¡ç†è½¯ä»¶åŒ…æ¨¡å—æµ åˆ—å‡ºæ¨¡å— â€‹ä½¿ç”¨ dnf module list å‘½ä»¤åˆ—å‡ºå¯ç”¨çš„æ¨¡å—çš„åˆ—è¡¨ï¼š 1234567891011121314151617181920212223242526272829[root@skinyi ~]\\# dnf module list # åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ¨¡å—æµFedora 33 openh264 (From Cisco) - x86_64 576 B/s | 989 B 00:01 Fedora Modular 33 - x86_64Name Stream Profiles Summary ant 1.10 default Java build tool [d] avocado latest default Framework with tools and libraries [d], min for Automated Testing imal avocado-vt latest common Avocado Virt Test Plugin cobbler 3 default Versatile Linux deployment server cri-o nightly default Kubernetes Container Runtime Inter face for OCI-based containers ......[root@skinyi ~]\\# dnf module list perl # æœç´¢ç‰¹å®šçš„è½¯ä»¶æ¨¡å—ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:34:07 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚Fedora Modular 33 - x86_64Name Stream Profiles Summary perl 5.30 common, default [d], minima Practical Extraction and Report Language l perl 5.32 common [d], minimal Practical Extraction and Report LanguageFedora Modular 33 - x86_64 - UpdatesName Stream Profiles Summary perl 5.30 common, default [d], minima Practical Extraction and Report Language l perl 5.32 common [d], minimal Practical Extraction and Report Languageæç¤ºï¼š[d]é»˜è®¤ï¼Œ[e]å·²å¯ç”¨ï¼Œ[x]å·²ç¦ç”¨ï¼Œ[i]å·²å®‰è£… â€‹ä½¿ç”¨ dnf module info [MOD_NAME] æŸ¥çœ‹è½¯ä»¶æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ï¼š 1234567891011[root@skinyi ~]\\# dnf module info perl | head -n 10ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:36:27 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚Name : perlStream : 5.30Version : 3320200819225620Context : 394aad6bArchitecture : x86_64Profiles : common, default [d], minimalDefault profiles : defaultRepo : fedora-modularSummary : Practical Extraction and Report Language è‹¥ä¸æŒ‡å®šæ¨¡å—æµï¼Œdnf module info å°†æ˜¾ç¤ºä½¿ç”¨é»˜è®¤æµçš„æ¨¡å—çš„é…ç½®æ–‡ä»¶æ‰€å®‰è£…çš„è½¯ä»¶åŒ…åˆ—è¡¨ã€‚ä½¿ç”¨ module-name:stream çš„æ ¼å¼æ¥æŸ¥çœ‹ç‰¹å®šçš„æ¨¡å—æµã€‚æ·»åŠ  --profile é€‰é¡¹å¯æ˜¾ç¤ºæœ‰å…³å„ä¸ªæ¨¡å—çš„é…ç½®æ–‡ä»¶æ‰€å®‰è£…çš„è½¯ä»¶åŒ…çš„ä¿¡æ¯ã€‚å¦‚ï¼š 1234567891011[root@skinyi ~]\\# dnf module info --profile perl:5.30ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:43:18 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚Name : perl:5.30:3320200819225620:394aad6b:x86_64common : perldefault : perlminimal : perl-interpreterName : perl:5.30:3320210211084215:394aad6b:x86_64common : perldefault : perlminimal : perl-interpreter å¯ç”¨æ¨¡å—æµå’Œå®‰è£…æ¨¡å— å¿…é¡»å¯ç”¨æ¨¡å—æµæ‰èƒ½å®‰è£…å…¶æ¨¡å—ã€‚å¯ä»¥ä½¿ç”¨ yum module enable MOD_STRM æ¥æ‰‹åŠ¨å¯ç”¨æ¨¡å—æµã€‚ 123456[root@skinyi ~]\\# dnf module install perlä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:50:52 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚å‚æ•° &#x27;perl&#x27; å¯ä»¥åŒ¹é…æ¨¡å— &#x27;perl&#x27; çš„ 2 ä¸ªæµï¼ˆ&#x27;5.30&#x27;, &#x27;5.32&#x27;ï¼‰ï¼Œä½†æ˜¯è¿™äº›æµéƒ½æœªè¢«å¯ç”¨æˆ–éé»˜è®¤æ— æ³•è§£æå‚æ•° perlé”™è¯¯ï¼šè¯·æ±‚ä¸­å‡ºç°çš„é—®é¢˜ :æŸåçš„ç»„æˆ–æ¨¡å—ï¼š perl å¯¹äºç»™å®šçš„æ¨¡å—ï¼Œä»…å¯å¯ç”¨ä¸€ä¸ªæ¨¡å—æµï¼Œå¯ç”¨å…¶ä»–æ¨¡å—æµå°†ç¦ç”¨åŸå§‹çš„æ¨¡å—æµã€‚ â€‹ä½¿ç”¨æ¨¡å—æµå®‰è£…æ¨¡å—ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142# 1. é¦–å…ˆå¯ç”¨è¦å®‰è£…çš„æ¨¡å—[root@skinyi ~]\\# dnf module enable perl:5.32ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š3:46:24 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚================================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================================å¯ç”¨æ¨¡å—æµ: perl 5.32 äº‹åŠ¡æ¦‚è¦================================================================================ç¡®å®šå—ï¼Ÿ[y/N]ï¼š yå®Œæ¯•ï¼# 2. å®‰è£…éœ€è¦çš„æ¨¡å—[root@skinyi ~]\\# dnf module install perlä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š3:48:26 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚================================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================================å®‰è£…ç»„/æ¨¡å—åŒ…: perl x86_64 4:5.32.1-471.module_f33+12592+71aff0e2 updates-modular 27 kå®‰è£…ä¾èµ–å…³ç³»: annobin x86_64 9.68-2.fc33 updates 96 k binutils x86_64 2.35-18.fc33 updates 5.4 M binutils-gold x86_64 2.35-18.fc33 updates 774 k cpp x86_64 10.3.1-1.fc33 updates 9.4 M ......å®‰è£…æ¨¡å—é…ç½®æ¡£æ¡ˆ: perl/common äº‹åŠ¡æ¦‚è¦================================================================================å®‰è£… 258 è½¯ä»¶åŒ…æ€»ä¸‹è½½ï¼š92 Må®‰è£…å¤§å°ï¼š301 Mç¡®å®šå—ï¼Ÿ[y/N]ï¼š y...... å®‰è£…æ¨¡å—æ—¶å¯ä»¥çœç•¥é€‰é¡¹ module è€Œç”¨å‰ç¼€ @ ç¬¦å·ä»£è¡¨æ¨¡å—åï¼Œå¦‚ï¼šdnf install @perlã€‚ â€‹éªŒè¯å®‰è£…ç»“æœï¼ˆæˆ‘æ²¡æœ‰å®‰è£…ï¼‰ï¼š 1234567891011121314151617[root@skinyi ~]\\# dnf module list perlä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š3:52:55 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚Fedora Modular 33 - x86_64Name Stream Profiles Summary perl 5.30 [x] common, default [d], minim Practical Extraction and Report Languag al e perl 5.32 [x] common [d], minimal Practical Extraction and Report Languag e Fedora Modular 33 - x86_64 - UpdatesName Stream Profiles Summary perl 5.30 [x] common, default [d], minim Practical Extraction and Report Languag al e perl 5.32 [x] common [d], minimal Practical Extraction and Report Languag e æç¤ºï¼š[d]é»˜è®¤ï¼Œ[e]å·²å¯ç”¨ï¼Œ[x]å·²ç¦ç”¨ï¼Œ[i]å·²å®‰è£… åˆ é™¤æ¨¡å—å’Œç¦ç”¨æ¨¡å—æµ â€‹åˆ é™¤æ¨¡å—ä¼šåˆ é™¤å½“å‰å¯ç”¨çš„æ¨¡å—æµçš„é…ç½®é›†æ‰€å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…ï¼Œä»¥åŠä¾èµ–äºè¿™äº›è½¯ä»¶åŒ…çš„ä»»ä½•å…¶ä»–è½¯ä»¶åŒ…å’Œæ¨¡å—ã€‚ åˆ é™¤æ¨¡å—å’Œåˆ‡æ¢æ¨¡å—æµæœ‰äº›æ£˜æ‰‹ã€‚åˆ‡æ¢æµä¼šé‡ç½®å½“å‰æµå¹¶å¯ç”¨æ–°æµï¼Œä½†æœ¬åœ°å·²å®‰è£…çš„è½¯ä»¶åŒ…å¹¶ä¸ä¼šè¢«æ›´æ”¹ã€‚åˆ‡è®°åˆ é™¤æ—§æœ‰æ¨¡å—æµåå†å®‰è£…æ–°æµä»¥ä¿è¯æ•°æ®ä¸ä¼šä¸¢å¤±æˆ–é…ç½®é”™è¯¯ã€‚ â€‹ä½¿ç”¨ dnf module remove MOD_NAME æˆ– dnf remove @MOD_NAME åˆ é™¤æ¨¡å—æµï¼š 123456[root@skinyi ~]\\# dnf remove @perl:5.30ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š4:04:46 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚æ— æ³•åŒ¹é…å‚æ•° perl:5.30 ä¸­çš„é…ç½®æ¡£æ¡ˆä¾èµ–å…³ç³»è§£å†³ã€‚æ— éœ€ä»»ä½•å¤„ç†ã€‚å®Œæ¯•ï¼ â€‹ä½¿ç”¨ dnf module disable MOD_NAME ç¦ç”¨æ¨¡å—æµï¼š 12345[root@skinyi ~]\\# dnf module disable perl:5.30ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š4:06:34 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚æ— éœ€ä»»ä½•å¤„ç†ã€‚å®Œæ¯•ï¼ åˆ‡æ¢æ¨¡å—æµ â€‹åˆ‡æ¢æ¨¡å—æµéœ€è¦å…ˆåˆ é™¤å°±æœ‰å®‰è£…çš„æ¨¡å—ï¼Œåˆ é™¤æ¨¡å—å†…å®¹åŠé…ç½®æ–‡ä»¶åï¼Œä½¿ç”¨å‘½ä»¤ dnf module reset é‡ç½®æ¨¡å—æµï¼š 1234567891011121314[root@skinyi ~]\\# dnf module reset perlä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š4:12:14 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ07æ—¥ æ˜ŸæœŸäºŒ 10æ—¶56åˆ†52ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚================================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================================é‡ç½®æ¨¡å—: perl äº‹åŠ¡æ¦‚è¦================================================================================ç¡®å®šå—ï¼Ÿ[y/N]ï¼š yå®Œæ¯•ï¼ â€‹ç„¶åå¯ç”¨å¹¶å®‰è£…è¦ä½¿ç”¨çš„æ¨¡å—æµã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"æ›´æ–°å’Œå®‰è£…è½¯ä»¶åŒ…","slug":"Linux | æ›´æ–°å’Œå®‰è£…è½¯ä»¶åŒ…","date":"2022-08-15T03:59:45.671Z","updated":"2022-08-15T04:04:28.813Z","comments":true,"path":"2022-08-15-Linux | æ›´æ–°å’Œå®‰è£…è½¯ä»¶åŒ….html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E6%9B%B4%E6%96%B0%E5%92%8C%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ â€‹è¿™ä¸€ç« çš„æ‰€æœ‰å…³äºè½¯ä»¶æ“ä½œçš„æµ‹è¯•ç¯å¢ƒä¸ºï¼šFedora33ã€‚ æœ‰å…³å‘½ä»¤æ‘˜è¦ RPM å‘½ä»¤æ‘˜è¦ å‘½ä»¤ ä»»åŠ¡ rpm -qa åˆ—å‡ºå½“å‰å®‰è£…çš„æ‰€æœ‰ RPM è½¯ä»¶åŒ… rpm -q NAME æ˜¾ç¤ºç³»ç»Ÿä¸Šå®‰è£…çš„ NAME çš„ç‰ˆæœ¬ rpm -qi NAME æ˜¾ç¤ºæœ‰å…³è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ rpm -ql NAME åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„æ‰€æœ‰æ–‡ä»¶ rpm -qc NAME åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„é…ç½®æ–‡ä»¶ rpm -qd NAME åˆ—å‡ºè½¯ä»¶åŒ…ä¸­å«æœ‰çš„æ–‡æ¡£æ–‡ä»¶ rpm -q --changelog NAME æ˜¾ç¤ºè½¯ä»¶åŒ…çš„ç®€çŸ­æ›´æ–°æ—¥å¿—æ‘˜è¦ rpm -q --scripts NAME æ˜¾ç¤ºè½¯ä»¶åŒ…åœ¨å®‰è£…ã€å‡çº§æˆ–åˆ é™¤æ—¶è¿è¡Œçš„ shell è„šæœ¬ DNF å‘½ä»¤æ‘˜è¦ å‘½ä»¤ ä»»åŠ¡ dnf list [NAME-PATTERN] æŒ‰åç§°åˆ—å‡ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶åŒ… dnf group list åˆ—å‡ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶ç»„ dnf search KEYWORD æŒ‰å…³é”®å­—æœç´¢è½¯ä»¶åŒ… dnf info PKGNAME æ˜¾ç¤ºè½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ dnf install PKGNAME å®‰è£…è½¯ä»¶åŒ… dnf group install GRPNAME å®‰è£…è½¯ä»¶ç»„ dnf update [PKGNAME] æ›´æ–°æ‰€æœ‰ï¼ˆæˆ–æŒ‡å®šçš„ï¼‰è½¯ä»¶åŒ… dnf remove PKGNAME å¸è½½è½¯ä»¶åŒ… dnf history æŸ¥çœ‹ DNF å†å²äº‹åŠ¡ æ³¨å†Œç³»ç»Ÿè·å¾—çº¢å¸½æ”¯æŒ ä½¿ç”¨å›¾å½¢ç•Œé¢å·¥å…·è¿›è¡Œæ³¨å†Œ â€‹é€šè¿‡ Gnome å›¾å½¢ç•Œé¢æ‰“å¼€ Red Hat Subscription Managerï¼ˆçº¢å¸½è®¢é˜…ç®¡ç†å™¨ï¼‰ï¼Œè¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯åè¿›å…¥è®¢é˜…çª—å£ç‚¹å‡» Register æŒ‰é’®ï¼Œå¡«å†™å¹¶æäº¤ç›¸å…³ä¿¡æ¯ä¹‹åå³å¯è®¢é˜…æˆåŠŸã€‚å…³äºå…·ä½“æ“ä½œä¸å†èµ˜è¿°ã€‚ ä»å‘½ä»¤è¡Œæ³¨å†Œ 123456789101112# 1. æ³¨å†Œç³»ç»Ÿåˆ°çº¢å¸½è´¦æˆ·[user@host ~]\\$ subscrption-manager register --username=USERNAME --password=PASSWORD# 2. æŸ¥çœ‹å¯ç”¨çš„è®¢é˜…[user@host ~]\\$ subscription-manager list --available | less# 3. è‡ªåŠ¨é™„åŠ è®¢é˜…[user@host ~]\\$ subscription-manager attach --auto# æˆ–è€…ä»å¯ç”¨è®¢é˜…åˆ—è¡¨ä¸­çš„ç‰¹å®šæ± ä¸­é™„åŠ è®¢é˜…[user@host ~]\\$ subscription-manager attach --pool=poolID# 4. æŸ¥çœ‹å·²ç”¨çš„è®¢é˜…[user@host ~]\\$ subscription-manager list --consumed# 5. å–æ¶ˆæ³¨å†Œç³»ç»Ÿ[user@host ~]\\$ subscription-manager unregister subscription-manager ä¹Ÿå¯æ­é…æ¿€æ´»å¯†é’¥ä½¿ç”¨è€Œä¸å¿…ä½¿ç”¨ç”¨æˆ·åæˆ–å¯†ç ä»¥ä¸ºå®ç°è‡ªåŠ¨åŒ–å®‰è£…å’Œéƒ¨ç½²æä¾›ä¾¿åˆ©ã€‚ çº¢å¸½æˆæƒè¯ä¹¦ â€‹æ³¨å†Œçº¢å¸½åï¼Œç³»ç»Ÿçš„æˆæƒè¯ä¹¦å­˜å‚¨åœ¨ /etc/pki å’Œå…¶å­ç›®å½•ä¸­ã€‚ /etc/pki/product ä¸­çš„è¯ä¹¦çŸ¥åç³»ç»Ÿä¸Šå®‰è£…äº†å“ªäº›çº¢å¸½äº§å“ï¼› /etc/pki/consumer ä¸­çš„è¯ä¹¦æŒ‡æ˜ç³»ç»Ÿæ‰€æ³¨å†Œåˆ°çš„çº¢å¸½è´¦æˆ·ï¼› /etc/pki/entitlement ä¸­çš„è¯ä¹¦æŒ‡æ˜è¯¥ç³»ç»Ÿé™„åŠ æœ‰å“ªäº›è®¢é˜…ã€‚ RPM è½¯ä»¶åŒ… â€‹RPM è½¯ä»¶åŒ…ç®¡ç†å™¨æœ€åˆæ˜¯ç”±çº¢å¸½å¼€å‘çš„ï¼Œè¯¥ç¨‹åºæä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹å¼æ¥æ‰“åŒ…è½¯ä»¶è¿›è¡Œåˆ†å‘ã€‚ä¸ä½¿ç”¨ä»å­˜æ¡£æå–åˆ°æ–‡ä»¶ç³»ç»Ÿçš„è½¯ä»¶ç›¸æ¯”ï¼Œé‡‡ç”¨ RPM è½¯ä»¶åŒ…å½¢å¼ç®¡ç†è½¯ä»¶è¦ç®€å•å¾—å¤šã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡å®ƒè·Ÿè¸ªè½¯ä»¶åŒ…æ‰€å®‰è£çš„æ–‡ä»¶ï¼Œéœ€è¦åˆ é™¤å“ªäº›è½¯ä»¶ï¼ˆå¦‚æœå¸è½½ï¼‰å¹¶æ£€æŸ¥ç¡®ä¿æ˜¾ç¤ºæ”¯æŒè½¯ä»¶åŒ…ï¼ˆå¦‚æœå®‰è£…ï¼‰ã€‚æœ‰å…³å·²å®‰è£è½¯ä»¶åŒ…çš„ä¿¡æ¯å­˜å‚¨åœ¨å„ä¸ªç³»ç»Ÿçš„æœ¬åœ°RPMæ•°æ®åº“ä¸­ã€‚ â€‹çº¢å¸½ä¸ºçº¢å¸½ä¼ä¸š Linux æä¾›çš„æ‰€æœ‰è½¯ä»¶éƒ½ä»¥ RPM è½¯ä»¶åŒ…çš„å½¢å¼æä¾›ã€‚ RPM è½¯ä»¶åŒ…çš„æ–‡ä»¶åçº¦å®š â€‹RPM è½¯ä»¶åŒ…çš„æ–‡ä»¶åä¸€èˆ¬çš„æ ¼å¼ä¸ºï¼šname-version-release.architecture.rpmï¼Œå¦‚ï¼šcoreutils-8.30-4.el8.x86_64.rpmã€‚ name æ˜¯æè¿°è½¯ä»¶å†…å®¹çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¯è¯­ï¼› version æ˜¯åŸå§‹è½¯ä»¶çš„ç‰ˆæœ¬å·ï¼› release æ˜¯åŸºäºè¯¥ç‰ˆæœ¬çš„è½¯ä»¶åŒ…çš„å‘è¡Œç‰ˆå·ï¼Œç”±è½¯ä»¶æ‰“åŒ…å•†è®¾ç½®ï¼Œåè€…ä¸ä¸€å®šæ˜¯åŸå§‹è½¯ä»¶å¼€å‘å•†ï¼› architecture æ˜¯ç¼–è¯‘çš„è½¯ä»¶åŒ…è¿è¡Œçš„å¤„ç†å™¨æ¶æ„ã€‚noarch è¡¨ç¤ºè¯¥è½¯ä»¶åŒ…çš„å†…å®¹ä¸é™å®šæ¶æ„ã€‚ â€‹ä»è½¯ä»¶å­˜å‚¨åº“æœç´¢ã€ä¸‹è½½å’Œå®‰è£…è½¯ä»¶åŒ…æ—¶åªéœ€è¦è½¯ä»¶åŒ…çš„åç§°ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªç‰ˆæœ¬ï¼Œåˆ™ä¼šå®‰è£…æœ€é«˜ç‰ˆæœ¬ã€‚ â€‹æ¯ä¸ª RPM è½¯ä»¶åŒ…æ˜¯åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªç»„æˆéƒ¨åˆ†çš„ç‰¹æ®Šå­˜æ¡£ï¼š è½¯ä»¶åŒ…å®‰è£…çš„æ–‡ä»¶ï¼› å…ƒæ•°æ®-ä¸è½¯ä»¶åŒ…æœ‰å…³çš„ä¿¡æ¯ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬ã€å‘è¡Œç‰ˆå’Œæ¶æ„ï¼›è½¯ä»¶åŒ…çš„æ‘˜è¦å’Œæè¿°ï¼›æ˜¯å¦è¦æ±‚å®‰è£…å…¶ä»–è½¯ä»¶åŒ…ï¼›æˆæƒè®¸å¯ä¿¡æ¯ï¼›è½¯ä»¶åŒ…æ›´æ”¹æ—¥å¿—ä»¥åŠå…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼› åœ¨å®‰è£…ã€æ›´æ–°æˆ–åˆ é™¤æ­¤è½¯ä»¶åŒ…æ—¶å¯èƒ½è¿è¡Œçš„è„šæœ¬ï¼Œæˆ–è€…åœ¨å®‰è£…ã€æ›´æ–°æˆ–åˆ é™¤å…¶ä»–è½¯ä»¶åŒ…æ—¶è§¦å‘çš„è„šæœ¬ã€‚ â€‹é€šå¸¸ï¼Œè½¯ä»¶æä¾›å•†ä½¿ç”¨ GPG å¯†é’¥å¯¹ RPM è½¯ä»¶åŒ…è¿›è¡Œæ•°å­—ç­¾åï¼ŒRPM ä¼šé€šè¿‡ GPG å¯†é’¥ç­¾åæ¥éªŒè¯è½¯ä»¶åŒ…çš„å®Œæ•´æ€§ã€‚è‹¥ GPG ç­¾åä¸åŒ¹é…ï¼Œåˆ™ RPM ä¼šæ‹’ç»å®‰è£…è½¯ä»¶åŒ…ã€‚ â€‹RPM æ›´æ–°è½¯ä»¶ä¼šå…ˆåˆ é™¤æ—§æœ‰çš„è½¯ä»¶åŒ…ï¼ˆé€šå¸¸ä¼šä¿ç•™é…ç½®æ–‡ä»¶ï¼‰ç„¶åå®‰è£…æ–°ç‰ˆï¼Œé™¤äº†å†…æ ¸ã€‚ 2. ä½¿ç”¨ RPM å®ç”¨ç¨‹åºå¤„ç†æœ¬åœ°è½¯ä»¶åŒ… â€‹rpm å®ç”¨ç¨‹åºå¯è·å–è½¯ä»¶åŒ…æ–‡ä»¶å’Œå·²å®‰è£…è½¯ä»¶åŒ…çš„å†…å®¹çš„ç›¸å…³ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»å·²å®‰è£…è½¯ä»¶åŒ…çš„æœ¬åœ°æ•°æ®åº“ä¸­è·å–ä¿¡æ¯ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨ -p é€‰é¡¹æ¥æŒ‡å®šæƒ³è·å–æœ‰å…³å·²ä¸‹è½½è½¯ä»¶åŒ…æ–‡ä»¶çš„ä¿¡æ¯ä»¥å®ç°åœ¨å®‰è£…å‰çš„æ£€æŸ¥ã€‚ â€‹ä½¿ç”¨ rpm å‘½ä»¤æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“ä¿¡æ¯çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼š 1rpm -q [select-options] [query-options] # æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“ä¿¡æ¯ â€‹å…³äºå·²å®‰è£…çš„è½¯ä»¶åŒ…çš„ä¸€èˆ¬ä¿¡æ¯çš„æŸ¥è¯¢ï¼š 1234567891011[skinyi@skinyi ~]\\$ rpm -qa # åˆ—å‡ºå·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…libgcc-10.2.1-9.fc33.x86_64linux-firmware-whence-20210208-118.fc33.noarchtzdata-2021a-1.fc33.noarchlibreport-filesystem-2.14.0-15.fc33.noarchhwdata-0.345-1.fc33.noarch......# rpm -qf FILENAME æŸ¥è¯¢å“ªä¸ªè½¯ä»¶åŒ…æä¾›å®‰è£…çš„æ–‡ä»¶[skinyi@skinyi ~]\\$ rpm -qf /etc/yum.repos.dfedora-repos-33-3.noarchfedora-repos-33-5.noarch â€‹å…³äºç‰¹å®šè½¯ä»¶åŒ…çš„ä¿¡æ¯æŸ¥è¯¢ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657# 1. rpm -q PKG_NAME åˆ—å‡ºå½“å‰å®‰è£…çš„è½¯ä»¶åŒ…çš„ç‰ˆæœ¬[skinyi@skinyi ~]\\$ rpm -q dnfdnf-4.8.0-1.fc33.noarch# 2. rpm -qi PKG_NAME è·å–æœ‰å…³è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯[skinyi@skinyi ~]\\$ rpm -qi kernelName : kernelVersion : 5.10.23Release : 200.fc33Architecture: x86_64Install Date: 2021å¹´03æœˆ19æ—¥ æ˜ŸæœŸäº” 10æ—¶09åˆ†52ç§’Group : UnspecifiedSize : 0License : GPLv2 and Redistributable, no modification permitted......# 3. rpm -ql PKG_NAME åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„æ–‡ä»¶[skinyi@skinyi ~]\\$ rpm -ql openssh/etc/ssh/etc/ssh/moduli/usr/bin/ssh-keygen/usr/lib/.build-id/usr/lib/.build-id/4b......# 4. rpm -qc PKG_NAME ä»…åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„é…ç½®æ–‡ä»¶[skinyi@skinyi ~]\\$ rpm -qc openssh-clients/etc/ssh/ssh_config/etc/ssh/ssh_config.d/50-redhat.conf# 5. rpm -qd PKG_NAME ä»…åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„æ–‡æ¡£æ–‡ä»¶[skinyi@skinyi ~]\\$ rpm -qd net-tools/usr/share/man/de/man5/ethers.5.gz/usr/share/man/de/man8/arp.8.gz/usr/share/man/de/man8/ifconfig.8.gz......# 6. rpm -q --scripts PKG_NAME åˆ—å‡ºåœ¨å®‰è£…æˆ–åˆ é™¤è½¯ä»¶åŒ…ä¹‹å‰æˆ–ä¹‹åè¿è¡Œçš„ shell è„šæœ¬[skinyi@skinyi ~]$ rpm -q --scripts openssh-serverpreinstall scriptlet (using /bin/sh):getent group sshd &gt;/dev/null || groupadd -g 74 -r sshd || :getent passwd sshd &gt;/dev/null || \\ useradd -c &quot;Privilege-separated SSH&quot; -u 74 -g sshd \\ -s /sbin/nologin -r -d /var/empty/sshd sshd 2&gt; /dev/null || :postinstall scriptlet (using /bin/sh): if [ $1 -eq 1 ] &amp;&amp; [ -x /usr/bin/systemctl ]; then # Initial installation /usr/bin/systemctl --no-reload preset sshd.service sshd.socket || : fi ......# 7. rpm -q --changelog PKG_NAME åˆ—å‡ºè½¯ä»¶åŒ…çš„æ›´æ”¹ä¿¡æ¯[skinyi@skinyi ~]\\$ rpm -q --changelog audit* ä¸‰ 8æœˆ 11 2021 Steve Grubb &lt;sgrubb@redhat.com&gt; 3.0.5-1- New upstream bugfix release* æ—¥ 8æœˆ 08 2021 Steve Grubb &lt;sgrubb@redhat.com&gt; 3.0.4-1- New upstream feature release......# 8. rpm -pq[ilcd...] PKG_NAME æŸ¥è¯¢æœ¬åœ°è½¯ä»¶åŒ…ï¼ˆå·²ä¸‹è½½æœªå®‰è£…ï¼‰çš„ä¸Šè¿°ä¿¡æ¯ã€‚ â€‹å®‰è£…ç¦»çº¿ä¸‹è½½çš„è½¯ä»¶åŒ…ï¼š 12345# rpm -ivh name-version-release.arch.rpm # å®‰è£…è½¯ä»¶åŒ…# é€‰é¡¹æ„ä¹‰ï¼š-i, --install # å®‰è£…è½¯ä»¶åŒ…-v, --verbose # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯-h, --hash # å®‰è£…çš„æ—¶å€™åˆ—å‡ºå“ˆå¸Œæ ‡è®° å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶æ—¶è¦ç¡®ä¿å¯ä¿¡ï¼Œå› ä¸ºåœ¨å®‰è£…è¿‡ç¨‹ä¸­å…è®¸ä»¥ root ç”¨æˆ·æ‰§è¡Œä»»æ„è„šæœ¬ã€‚ æå– rpm è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶ â€‹ä½¿ç”¨ rpm2cpio å‘½ä»¤å¯ä»¥å°† rpm è½¯ä»¶åŒ…è½¬æˆæ ¼å¼ä¸º cpio çš„ç‰¹æ®Šå½’æ¡£æ–‡ä»¶ï¼Œä½¿ç”¨ cpio å‘½ä»¤åˆ™å¯ä»¥æå– cpio å½’æ¡£æ–‡ä»¶çš„å†…å®¹ã€‚å› æ­¤ï¼Œè¦å®ç°ä¸€æ¡å‘½ä»¤æå–ä¸€ä¸ªè½¯ä»¶åŒ…ä¸­çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ç®¡é“æ¥å®ç°ï¼š 1234[user@host ~]\\$ rpm2cpio name-version-release.arch.rpm | cpio -id [PATTERN] # æŒ‰ç…§ PATTERN æŒ‡å®šçš„æ¨¡å¼æå– rpm åŒ…ä¸­çš„æ–‡ä»¶# cpio çš„å‘½ä»¤é€‰é¡¹-i, --extract # ä»åŒ…ä¸­æå–æ–‡ä»¶-d, --make-directories # éœ€è¦æ—¶è‡ªåŠ¨åˆ›å»ºç›®å½• â€‹æå–çš„æ–‡ä»¶ä¼šå­˜æ”¾åœ¨å½“å‰ç›®å½•ï¼Œä¸”ä¼šè‡ªåŠ¨åˆ›å»ºå­ç›®å½•ã€‚ ä½¿ç”¨ DNF ç®¡ç†è½¯ä»¶åŒ… â€‹DNF ä¸º RPM çš„å‰ç«¯è½¯ä»¶ï¼Œé™¤äº†å¯ä»¥å®‰è£…è½¯ä»¶åŒ…ï¼Œå®ƒä¹Ÿå¯ä»¥å®ç°ä»è½¯ä»¶ä»“åº“æœç´¢ã€ä¸‹è½½ã€è§£å†³å®‰è£…ä¾èµ–çš„æ¯” RPM æ›´å®Œå–„çš„åŠŸèƒ½ã€‚ â€‹YUM ä½œä¸ºè½¯ä»¶åŒ…ç®¡ç†å™¨çš„è€å‰è¾ˆå°†è¦è¢« DNFæ‰€å–ä»£ï¼ˆç”±äºå…¶æ€§èƒ½å·®ã€å†…å­˜å ç”¨è¿‡å¤šã€ä¾èµ–è§£æé€Ÿåº¦å˜æ…¢ç­‰é•¿æœŸå­˜åœ¨çš„é—®é¢˜ï¼‰ï¼Œæ•…å°†åŸæ•™ç§‘ä¹¦ä¸­çš„å…³äº YUM ä»‹ç»çš„ä¸€ç« æ¢æˆå¯¹ DNF çš„ä»‹ç»ã€‚DNF ä½¿ç”¨ cã€c++ã€python è¯­è¨€ç¼–å†™ï¼Œå°†ä¾èµ–ç®¡ç†æ¨¡å—æŠ½è±¡ä¸º libsolv åº“æ¥ç®¡ç†è½¯ä»¶åŒ…çš„ä¾èµ–ï¼Œç›¸æ¯” YUM æé«˜äº†æ€§èƒ½ã€‚DNF å’Œ YUM çš„ç”¨æ³•å¤§ä½“ä¸Šæ˜¯ç›¸åŒçš„ã€‚ ä½¿ç”¨ DNF æŸ¥æ‰¾è½¯ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263# 1. dnf help æ˜¾ç¤ºç”¨æ³•ä¿¡æ¯[skinyi@skinyi ~]\\$ dnf helpusage: dnf [options] COMMANDä¸»è¦å‘½ä»¤åˆ—è¡¨ï¼šalias åˆ—å‡ºæˆ–åˆ›å»ºå‘½ä»¤åˆ«åautoremove åˆ é™¤æ‰€æœ‰åŸå…ˆå› ä¸ºä¾èµ–å…³ç³»å®‰è£…çš„ä¸éœ€è¦çš„è½¯ä»¶åŒ…check åœ¨åŒ…æ•°æ®åº“ä¸­å¯»æ‰¾é—®é¢˜check-update æ£€æŸ¥æ˜¯å¦æœ‰è½¯ä»¶åŒ…å‡çº§clean åˆ é™¤å·²ç¼“å­˜çš„æ•°æ®deplist [å·²å¼ƒç”¨ï¼Œè¯·ä½¿ç”¨ repoquery --deplist] åˆ—å‡ºè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»å’Œæä¾›è¿™äº›è½¯ä»¶åŒ…çš„æºdistro-sync åŒæ­¥å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…åˆ°æœ€æ–°å¯ç”¨ç‰ˆæœ¬downgrade é™çº§åŒ…......# 2. dnf list [KEYWORD] æ˜¾ç¤ºå·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶åŒ…[root@skinyi ~]\\# dnf list kernelä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:07:19 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚å·²å®‰è£…çš„è½¯ä»¶åŒ…kernel.x86_64 5.10.23-200.fc33 @updateskernel.x86_64 5.13.12-100.fc33 @updates# 3. dnf search KEYWORD ä½¿ç”¨å…³é”®å­—æœç´¢è½¯ä»¶åŒ…[skinyi@skinyi ~]\\$ dnf search remoteä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:02:41 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚============================ åç§° å’Œ æ¦‚å†µ åŒ¹é…ï¼šremote ==============================R-remotes.noarch : R Package Installation from Remote RepositoriesRemoteBox.noarch : Open Source VirtualBox Client with Remote Managementanyremote.x86_64 : Remote control through Wi-Fi or bluetooth connectionanyremote-data.x86_64 : Configuration files for anyRemoteanyremote-doc.x86_64 : Documentation for anyRemotechrome-remote-desktop.x86_64 : Remote desktop support for google-chrome &amp; chromium......# 4. dnf info PKG_NAME æŸ¥çœ‹è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®‰è£…æ‰€éœ€ç£ç›˜ç©ºé—´[skinyi@skinyi ~]\\$ dnf info httpdä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:05:28 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚å¯å®‰è£…çš„è½¯ä»¶åŒ…åç§° : httpdç‰ˆæœ¬ : 2.4.48å‘å¸ƒ : 1.fc33æ¶æ„ : x86_64å¤§å° : 1.4 Mæº : httpd-2.4.48-1.fc33.src.rpmä»“åº“ : updatesæ¦‚å†µ : Apache HTTP ServerURL : https://httpd.apache.org/åè®® : ASL 2.0æè¿° : The Apache HTTP Server is a powerful, efficient, : and extensible web server.# 5. dnf provides PATHNAME æ˜¾ç¤ºæä¾›ä¸æŒ‡å®šè·¯å¾„åæ–‡ä»¶æˆ–ç›®å½•ç›¸åŒ¹é…çš„è½¯ä»¶åŒ…[skinyi@skinyi ~]\\$ dnf provides /var/www/htmlä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:07:46 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶43åˆ†32ç§’ã€‚httpd-filesystem-2.4.46-1.fc33.noarch : The basic directory ...: layout for the Apache HTTP Serverä»“åº“ ï¼šfedoraåŒ¹é…æ¥æºï¼šæ–‡ä»¶å ï¼š/var/www/htmlhttpd-filesystem-2.4.48-1.fc33.noarch : The basic directory ...: layout for the Apache HTTP Serverä»“åº“ ï¼šupdatesåŒ¹é…æ¥æºï¼šæ–‡ä»¶å ï¼š/var/www/html ä½¿ç”¨ DNF å®‰è£…å’Œåˆ é™¤è½¯ä»¶ 123456789101112131415161718192021222324# 1. dnf install PKG_NAME # è·å–å¹¶å®‰è£…è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¾èµ–é¡¹[root@skinyi ~]\\# dnf install gitä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:04:10 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================å®‰è£…: git x86_64 2.31.1-3.fc33 updates 122 kå®‰è£…ä¾èµ–å…³ç³»: git-core x86_64 2.31.1-3.fc33 updates 3.6 M git-core-doc noarch 2.31.1-3.fc33 updates 2.3 M perl-AutoLoader noarch 5.74-471.fc33 updates 31 k perl-B x86_64 1.80-471.fc33 updates 189 k perl-Carp noarch 1.50-457.fc33 fedora 29 k perl-Class-Struct noarch 0.66-471.fc33 updates 32 k perl-Data-Dumper x86_64 2.174-459.fc33 fedora 56 k......# 2. dnf update [PKG_NAME] # æ›´æ–°æŒ‡å®šè½¯ä»¶æˆ–æ‰€æœ‰å·²å®‰è£…è½¯ä»¶[root@skinyi ~]\\# dnf update kernelä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:06:19 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚æ— éœ€ä»»ä½•å¤„ç†ã€‚å®Œæ¯•ï¼ è‹¥éœ€æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œä¸­çš„å†…æ ¸ï¼Œå¯ä»¥ä½¿ç”¨ uname å‘½ä»¤ã€‚ 1234[root@skinyi ~]\\# uname -r5.10.23-200.fc33.x86_64[root@skinyi ~]\\# uname -aLinux skinyi.fedora 5.10.23-200.fc33.x86_64 \\#1 SMP Thu Mar 11 22:18:30 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux 12345678910111213141516# 3. dnf remove PKG_NAME # åˆ é™¤å®‰è£…çš„è½¯ä»¶åŒ…åŠå…¶ä¾èµ–åŒ…[root@skinyi ~]\\# dnf remove opensshä¾èµ–å…³ç³»è§£å†³ã€‚================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================ç§»é™¤: openssh x86_64 8.4p1-7.fc33 @updates 1.8 Mç§»é™¤ä¾èµ–çš„è½¯ä»¶åŒ…: openssh-clients x86_64 8.4p1-7.fc33 @updates 1.8 M openssh-server x86_64 8.4p1-7.fc33 @updates 924 käº‹åŠ¡æ¦‚è¦================================================================ç§»é™¤ 3 è½¯ä»¶åŒ…...... ä½¿ç”¨ DNF å®‰è£…æˆ–åˆ é™¤è½¯ä»¶ç»„ DNF ä¹Ÿæœ‰è½¯ä»¶ç»„çš„æ¦‚å¿µï¼Œè½¯ä»¶ç»„æ˜¯å‡ºäºç‰¹å®šç›®çš„å½’ç±»åˆ°ä¸€èµ·å®‰è£…çš„ç›¸å…³è½¯ä»¶çš„é›†åˆã€‚ â€‹åœ¨ RHEL8 ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ç»„ï¼šå¸¸è§„ç»„å’Œç¯å¢ƒç»„ï¼Œå…¶ä¸­å¸¸è§„ç»„æ˜¯è½¯ä»¶åŒ…çš„é›†åˆï¼Œç¯å¢ƒç»„æ˜¯å¸¸è§„ç»„çš„é›†åˆã€‚ä¸€ä¸ªç»„æä¾›çš„è½¯ä»¶åŒ…æˆ–ç»„å¯èƒ½ä¸º mandatoryï¼ˆå®‰è£…è¯¥è½¯ä»¶ç»„æ—¶å¿…é¡»å®‰è£…ï¼‰ã€defaultï¼ˆå®‰è£…è¯¥ç»„æ—¶é€šå¸¸ä¼šå®‰è£…ï¼‰æˆ– optionalï¼ˆå®‰è£…è¯¥ç»„æ—¶ä¸äºˆä»¥å®‰è£…ï¼Œé™¤éç‰¹åˆ«è¦æ±‚ï¼‰ã€‚ æŸ¥çœ‹å·²å®‰è£…å’Œå¯ç”¨çš„è½¯ä»¶ç»„åç§° 123456789101112131415161718[root@skinyi ~]\\# dnf group listä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:17:43 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚å¯ç”¨ç¯å¢ƒç»„ï¼š Fedora å®šåˆ¶æ“ä½œç³»ç»Ÿ æœ€å°åŒ–å®‰è£… Fedora Workstation Fedora Cloud Server ......å·²å®‰è£…çš„ç¯å¢ƒç»„ï¼š Fedora Server ç‰ˆæœ¬å·²å®‰è£…ç»„ï¼š æ— å¤´è®¾å¤‡ï¼ˆHeadlessï¼‰ç®¡ç†å¯ç”¨ç»„ï¼š 3D æ‰“å° ç®¡ç†å·¥å…· éŸ³é¢‘åˆ¶ä½œ å†™ä½œå’Œå‡ºç‰ˆ ...... æœ‰äº›ç»„ä¸€èˆ¬é€šè¿‡ç¯å¢ƒç»„å®‰è£…ï¼Œé»˜è®¤ä¸ºéšè—ã€‚å¯ä»¥é€šè¿‡ dnf group list hidden å‘½ä»¤åˆ—å‡ºè¿™äº›éšè—ç»„ã€‚ æ˜¾ç¤ºè½¯ä»¶ç»„çš„ç›¸å…³ä¿¡æ¯ 1234567891011121314[root@skinyi ~]\\# dnf group info &quot;RPM Development Tools&quot;ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:31:05 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚ç»„ï¼šRPM å¼€å‘å·¥å…· æè¿°ï¼šè¿™äº›å·¥å…·ä¸­åŒ…æ‹¬äº†æ ¸å¿ƒå¼€å‘å·¥å…·ï¼Œå¦‚ rpmbuildã€‚ å¿…è¦çš„è½¯ä»¶åŒ…ï¼š redhat-rpm-config rpm-build é»˜è®¤çš„è½¯ä»¶åŒ…ï¼š koji mock rpmdevtools å¯é€‰çš„è½¯ä»¶åŒ…ï¼š pungi rpmlint å®‰è£…ä¸€ä¸ªè½¯ä»¶ç»„ 123456789101112131415161718[root@skinyi ~]\\# dnf group install &quot;Deepin Desktop Environment&quot; --with-optionalä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š2:35:01 å‰ï¼Œæ‰§è¡Œäº 2021å¹´09æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶52åˆ†31ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚================================================================ è½¯ä»¶åŒ… æ¶æ„ ç‰ˆæœ¬ ä»“åº“ å¤§å°================================================================å®‰è£…ç»„/æ¨¡å—åŒ…: chromium x86_64 91.0.4472.164-1.fc33 updates 99 M deepin-calculator x86_64 5.0.1-3.fc33 fedora 286 k deepin-calendar x86_64 5.0.1-4.fc33 fedora 111 k deepin-desktop x86_64 5.0.0-9.fc33.2 updates 1.9 M deepin-editor x86_64 1.2.9.1-8.fc33.1 updates 1.3 M deepin-icon-theme noarch 15.12.71-5.fc33 fedora 11 M deepin-image-viewer x86_64 5.0.0-5.fc33 fedora 3.7 M deepin-picker x86_64 5.0.1-3.fc33 fedora 83 k deepin-screenshot x86_64 5.0.0-4.fc33 fedora 347 k ...... --with-optional é€‰é¡¹æŒ‡å®šå®‰è£…å¯é€‰çš„è½¯ä»¶åŒ…ã€‚ æŸ¥çœ‹è½¯ä»¶åŒ…ç®¡ç†çš„å†å²äº‹åŠ¡ â€‹æ‰€æœ‰å®‰è£…å’Œåˆ é™¤è½¯ä»¶åŒ…çš„äº‹åŠ¡æ—¥å¿—è®°å½•åœ¨ /var/log/dnf.rpm.log ä¸­ã€‚ 123456[root@skinyi ~]\\# tail -n 5 /var/log/dnf.rpm.log2021-09-01T17:22:45+0800 INFO --- logging initialized ---2021-09-01T17:23:00+0800 INFO --- logging initialized ---2021-09-01T17:23:36+0800 INFO --- logging initialized ---2021-09-01T17:25:56+0800 INFO --- logging initialized ---2021-09-01T17:27:31+0800 INFO --- logging initialized --- â€‹ä½¿ç”¨ dnf history æ˜¾ç¤ºå®‰è£…å’Œåˆ é™¤äº‹åŠ¡çš„æ‘˜è¦ï¼š 123456[root@skinyi ~]\\# dnf historyID | å‘½ä»¤è¡Œ | æ—¥æœŸå’Œæ—¶é—´ | æ“ä½œ | æ›´æ”¹ -------------------------------------------------------------------------------- 3 | update | 2021-09-01 14:54 | I, U | 283 EE 2 | install nodejs | 2021-03-19 11:05 | Install | 6 1 | | 2021-03-19 10:07 | Install | 658 EE â€‹ä½¿ç”¨ dnf history undo ID é€‰é¡¹å¯ä»¥æ’¤é”€æŒ‡å®š ID çš„äº‹åŠ¡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"å½’æ¡£å’Œä¼ è¾“æ–‡ä»¶","slug":"Linux | å½’æ¡£å’Œä¼ è¾“æ–‡ä»¶","date":"2022-08-15T03:55:33.835Z","updated":"2022-08-15T03:58:55.061Z","comments":true,"path":"2022-08-15-Linux | å½’æ¡£å’Œä¼ è¾“æ–‡ä»¶.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E5%BD%92%E6%A1%A3%E5%92%8C%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ è¿›è¡Œæ–‡ä»¶çš„å½’æ¡£ç®¡ç† â€‹ä½¿ç”¨ tar å‘½ä»¤æ¥å°†æ–‡ä»¶å’Œç›®å½•å½’æ¡£åˆ°å‹ç¼©æ–‡ä»¶ä¸­ï¼Œè¿˜èƒ½æå–ç°æœ‰çš„ tar å­˜æ¡£å†…å®¹ã€‚tar å­˜æ¡£æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„æ–‡ä»¶æ•°æ®åºåˆ—ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³æ¯ä¸ªæ–‡ä»¶å’Œç´¢å¼•çš„å…ƒæ•°æ®ï¼Œä»¥ä¾¿å¯ä»¥æå–å•ä¸ªæ–‡ä»¶ã€‚è¯¥å­˜æ¡£å¯ä»¥ä½¿ç”¨ gzipã€bzip2 æˆ– xz å‹ç¼©æ–¹å¼è¿›è¡Œå‹ç¼©ã€‚tarå‘½ä»¤ä¹Ÿå¯ä»…åˆ—å‡ºå½’æ¡£æ–‡ä»¶çš„å†…å®¹è€Œä¸ç”¨è¿›è¡Œæå–ã€‚ 123456789101112131415tar [OPTION...] [FILE...] # ä½¿ç”¨ tar è¿›è¡Œæ–‡ä»¶å½’æ¡£å’Œå­˜æ¡£# å¸¸è§é€‰é¡¹## ä¸€èˆ¬æ“ä½œé€‰é¡¹ï¼ˆå¿…é€‰ï¼‰ï¼š-c, --create # åˆ›å»ºä¸€ä¸ªæ–°å­˜æ¡£-A, --catenate, --concatenate # è¿½åŠ æ–‡ä»¶åˆ° tar æ–‡ä»¶-x, --extract # ä»ç°æœ‰å­˜æ¡£æ–‡ä»¶è¿›è¡Œæå–-t, --list # åˆ—å‡ºå­˜æ¡£çš„ç›®å½•## ä¸€èˆ¬é€šç”¨é€‰é¡¹ï¼š-v, --verbose # è¯¦ç»†ä¿¡æ¯ã€‚æ˜¾ç¤ºå­˜æ¡£æˆ–æå–çš„æ–‡ä»¶æœ‰å“ªäº›-f, --file= # æ–‡ä»¶åã€‚æ­¤é€‰é¡¹å¿…é¡»åæ¥è¦ä½¿ç”¨æˆ–åˆ›å»ºçš„å­˜æ¡£çš„æ–‡ä»¶å-p, --preserve-permissions # åœ¨æå–å­˜æ¡£æ—¶ä¿ç•™æ–‡ä»¶å’Œç›®å½•çš„æƒé™ï¼Œè€Œä¸å»é™¤ umask## å‹ç¼©é€‰é¡¹ï¼š-z, --gzip # ä½¿ç”¨ gzip å‹ç¼©æ–¹å¼ï¼ˆ.tar.gzï¼‰-j, --bzip2 # ä½¿ç”¨ bzip2 å‹ç¼©æ–¹å¼ï¼ˆ.tar.bz2ï¼‰ï¼Œbzip2 çš„å‹ç¼©ç‡é€šå¸¸æ¯” gzip é«˜-J, --xz # ä½¿ç”¨ xz å‹ç¼©æ–¹å¼ï¼ˆ.tar.xzï¼‰ï¼Œxz çš„å‹ç¼©ç‡é€šå¸¸æ¯” bzip2 æ›´é«˜ ä¸€èˆ¬ä½¿ç”¨æ—¶çš„å¸¸ç”¨ç”¨æ³•ï¼štar [c|x|t][z|j|J]vf ç›®æ ‡æ–‡ä»¶ [è¦å½’æ¡£çš„æ–‡ä»¶...] å½’æ¡£æ–‡ä»¶å’Œç›®å½• â€‹ä»¥ä¸‹å‘½ä»¤åˆ›å»ºåä¸º archive.tar çš„å­˜æ¡£ï¼Œå…¶å†…å®¹ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¸­çš„ file1ã€file2 å’Œ file3ï¼š 12345[root@vmrhelskinyi ~]\\# tar -cf archive.tar file1 file2 file3 [root@vmrhelskinyi ~]\\# tar -tf archive.tarfile1file2file3 åˆ—å‡ºå­˜æ¡£çš„å†…å®¹ 1234[root@vmrhelskinyi ~]\\# tar -tvf archive.tar # æŸ¥çœ‹å½’æ¡£æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ -rw-r--r-- root/root 0 2021-09-01 09:18 file1-rw-r--r-- root/root 0 2021-09-01 09:18 file2-rw-r--r-- root/root 0 2021-09-01 09:18 file3 ä»å­˜æ¡£ä¸­æå–æ–‡ä»¶ â€‹ tar å­˜æ¡£é€šå¸¸åº”å½“æå–åˆ°ç©ºç›®å½•ä¸­ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šè¦†ç›–ä»»ä½•ç°æœ‰æ–‡ä»¶ã€‚ä½¿ç”¨ root ç”¨æˆ·æå–å­˜æ¡£æ—¶ï¼Œtar å‘½ä»¤ä¼šä¿ç•™æ–‡ä»¶çš„åŸå§‹ç”¨æˆ·å’Œç»„æ‰€æœ‰æƒã€‚å¦‚æœæ™®é€šç”¨æˆ·ä½¿ç”¨ tar æå–æ–‡ä»¶ï¼Œæ–‡ä»¶æ‰€æœ‰æƒå°†å±äºä»å­˜æ¡£ä¸­æå–æ–‡ä»¶çš„ç”¨æˆ·ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°†æŠŠ archive.tar å½’æ¡£ä¸­çš„æ–‡ä»¶æå–åˆ° /root/filebackup ç›®å½•ä¸­ï¼š 123456[root@vmrhelskinyi ~]\\# mkdir /root/filebackup[root@vmrhelskinyi ~]\\# cd /root/filebackup/[root@vmrhelskinyi filebackup]\\# tar -xvf /root/archive.tar file1file2file3 â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œä»æ–‡æ¡£ä¸­æå–æ–‡ä»¶æ—¶ï¼Œå°†ä»å­˜æ¡£å†…å®¹çš„æƒé™ä¸­å»é™¤ umaskã€‚è¦ä¿ç•™å­˜æ¡£æ–‡ä»¶çš„æƒé™ï¼Œå¯åœ¨æå–å­˜æ¡£æ—¶ä½¿ç”¨ -p é€‰é¡¹ã€‚ åˆ›å»ºå‹ç¼©äº†çš„å½’æ¡£æ–‡ä»¶ â€‹æœ€å¥½æ˜¯ä½¿ç”¨å•ä¸ªé¡¶çº§ç›®å½•ï¼Œå…¶ä¸­å¯åŒ…å«å…¶ä»–çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œä»¥é€šè¿‡æœ‰åºçš„æ–¹å¼æ¥ç®€åŒ–æ–‡ä»¶çš„æå–ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤åˆ›å»ºäº† /var/log ç›®å½•ä¸‹çš„æ–‡ä»¶çš„å½’æ¡£ï¼Œå¹¶ä½¿ç”¨ xz çš„æ–¹å¼è¿›è¡Œå‹ç¼©ï¼š 123456[root@vmrhelskinyi ~]\\# tar cJvf log_backup.tar.xz /var/log # tar å‘½ä»¤é€‰é¡¹ä¸­çš„çŸ­çº¿å¯çœç•¥tar: Removing leading `/&#x27; from member names/var/log//var/log/lastlog/var/log/private/...... â€‹æŸ¥çœ‹å‹ç¼©äº†çš„å½’æ¡£åŒ…çš„å†…å®¹ï¼ˆä¸å¼ºåˆ¶ä½¿ç”¨å‹ç¼©é€‰é¡¹ï¼‰ï¼š 12345[root@vmrhelskinyi ~]\\# tar tvf /root/log_backup.tar.xzdrwxr-xr-x root/root 0 2021-09-01 09:13 var/log/-rw-rw-r-- root/utmp 292292 2021-09-01 09:18 var/log/lastlogdrwx------ root/root 0 2021-06-03 07:05 var/log/private/...... è§£å‹å‹ç¼©äº†çš„å½’æ¡£æ–‡ä»¶ â€‹ä»¥ä¸‹å‘½ä»¤å°†åˆ›å»º /root/logbackup ç›®å½•å¹¶å°† log_back.tar.xz ä¸­çš„å†…å®¹è§£å‹åˆ°è¯¥ç›®å½•ä¸‹ï¼š 123456789101112131415[root@vmrhelskinyi ~]\\# mkdir logbackup &amp;&amp; cd logbackup[root@vmrhelskinyi logbackup]\\# tar xvf ../log_backup.tar.xz var/log/var/log/lastlogvar/log/private/......var/log/vmware-network.3.log[root@vmrhelskinyi logbackup]\\# tree -L 3.â””â”€â”€ var â””â”€â”€ log â”œâ”€â”€ anaconda â”œâ”€â”€ audit â”œâ”€â”€ boot.log ...... gzipã€bzip2 å’Œ xz ä¹Ÿå¯å•ç‹¬ç”¨äºå‹ç¼©å•ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬å¯¹åº”çš„è§£å‹ç¼©å‘½ä»¤åˆ†åˆ«ä¸º gunzipã€bunzip2ã€unxzã€‚ åœ¨ç³»ç»Ÿä¹‹é—´å®‰å…¨çš„ä¼ è¾“æ–‡ä»¶ ä½¿ç”¨ SECURE COPY ä¼ è¾“æ–‡ä»¶ â€‹scp å‘½ä»¤æ˜¯ OpenSSH å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯å°†æ–‡ä»¶ä»è¿œç¨‹ç³»ç»Ÿå¤åˆ¶åˆ°æœ¬åœ°ç³»ç»Ÿæˆ–ä»æœ¬åœ°ç³»ç»Ÿå¤åˆ¶åˆ°è¿œç¨‹ç³»ç»Ÿã€‚æ­¤è¿‡ç¨‹éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶åœ¨æ•°æ®ä¼ è¾“ä¹‹å‰å¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚ â€‹è¿œç¨‹ä¸»æœºçš„ç›®æ ‡æ–‡ä»¶ä½ç½®çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼š[user@]host:/pathã€‚å…¶ä¸­ user ä¸ºå¯é€‰é¡¹ï¼Œè‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨å½“å‰çš„æœ¬åœ°ç”¨æˆ·åã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°† host ä¸Šçš„æœ¬åœ°æ–‡ä»¶ /etc/yum.conf å’Œ /etc/hosts æ–‡ä»¶å¤åˆ¶åˆ°äº†è¿œç¨‹ä¸»æœº remotehost ä¸Š remoteuser ç”¨æˆ·çš„ä¸»ç›®å½•ï¼š 1234[user@host ~]\\$ scp /etc/yum.conf /etc/hosts remoteuser@remotehost:/home/remoteuserremoteuser@remotehost\\`s password: yum.conf 100% 813 0.8KB/s 00:00hosts 100% 227 0.2KB/s 00:00 â€‹ä»¥ä¸‹å‘½ä»¤å°† remotehost ä¸Šçš„è¿œç¨‹ç›®å½• /var/log å¤åˆ¶åˆ°äº†æœ¬åœ°ä¸»æœº host ä¸Šçš„ user ç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹çš„ tmp æ–‡ä»¶å¤¹ä¸­ï¼š 123[user@host ~]\\$ scp -r root@remotehost:/var/log /home/user/tmp # -r é€‰é¡¹ä»£è¡¨é€’å½’å¤åˆ¶ç›®å½•root@remotehost\\`s password: ...... ä½¿ç”¨å®‰å…¨æ–‡ä»¶ä¼ è¾“ç¨‹åºä¼ è¾“æ–‡ä»¶ â€‹è¦ä»¥äº¤äº’å¼æ–¹å¼ä» SSH æœåŠ¡å™¨ä¸Šä¸Šä¼ æˆ–ä¸‹è½½æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å®‰å…¨æ–‡ä»¶ä¼ è¾“ç¨‹åº sftpã€‚sftp å‘½ä»¤çš„ä¼šè¯ä½¿ç”¨å®‰å…¨èº«ä»½éªŒè¯æœºåˆ¶ï¼Œå¹¶å°†æ•°æ®åŠ å¯†åå†ä¸ SSH æœåŠ¡å™¨æ¥å›ä¼ è¾“ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤ä»¥ remoteuser çš„èº«ä»½è¿æ¥åˆ°è¿œç¨‹ä¸»æœºï¼š 1234[user@host ~]\\$ sftp remoteuser@remotehostremoteuser@remotehost\\`s password: connected to remotehost.sftp&gt; â€‹ sftp äº¤äº’ä¼šè¯æ¥å—é€šç”¨çš„ä¸ Shell å‘½ä»¤ç›¸åŒçš„å‘½ä»¤å¦‚ï¼šlsã€cdã€mkdirã€pwdã€‚ä½¿ç”¨ put å‘½ä»¤å°†æ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹ä¸»æœºï¼Œä½¿ç”¨ get å‘½ä»¤ä»è¿œç¨‹ä¸»æœºä¸Šä¸‹è½½æ–‡ä»¶ã€‚ä½¿ç”¨ exit å‘½ä»¤å¯é€€å‡º sftp ä¼šè¯ã€‚ â€‹ sftp ä¼šè¯è¿æ¥æˆåŠŸåä¼šè‡ªåŠ¨è¿›å…¥è¿œç¨‹ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œä¸”é»˜è®¤å‡è®¾ä½¿ç”¨ put å‘½ä»¤åè·Ÿçš„æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°†æœ¬åœ°ç³»ç»Ÿçš„ /etc/hosts æ–‡ä»¶ä¸Šä¼ åˆ° remotehost æ–°å»ºçš„ç›®å½• /home/remoteuser/hostbackupä¸­ï¼š 123456sftp&gt; mkdir hostbackupsftp&gt; cd hostbackupsftp&gt; put /etc/hostsUploading /etc/hosts to /home/remoteuser/hostbackup/hosts/etc/hosts 100% 227 0.2KB/s 00:00sftp&gt; â€‹ä»¥ä¸‹å‘½ä»¤å°† remotehost ä¸Šçš„ /etc/yum.conf ä¸‹è½½åˆ°æœ¬åœ°ç³»ç»Ÿä¸Šçš„å½“å‰ç›®å½•å¹¶é€€å‡ºï¼š 12345sftp &gt; get /etc/yum.confFetching /etc/yum.conf to yum.conf/etc/yum.conf 100% 813 0.8KB/s 00:00sftp &gt; exit[user@host ~]\\$ ä½¿ç”¨ LRZSZ è¿›è¡Œæ–‡ä»¶ä¼ è¾“ â€‹è¿™ä¸ªä¼ è¾“å·¥å…·éœ€è¦æ”¯æŒ XMODEMã€YMODEM æˆ– ZMODEM åè®®çš„è¿œç¨‹è¿æ¥å®¢æˆ·ç«¯å¦‚ XShell æ‰èƒ½ä½¿ç”¨ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯è§å…¶å®˜ç½‘ï¼šhttps://ohse.de/uwe/software/lrzsz.htmlã€‚ â€‹è¿œç¨‹è¿æ¥åˆ°è¿œç¨‹ä¸»æœºåï¼Œä½¿ç”¨ rz å‘½ä»¤æ¥æ”¶ä»æœ¬åœ°ä¸»æœºå‘é€çš„æ–‡ä»¶ï¼Œä½¿ç”¨ sz FILE å°†æ–‡ä»¶å‘é€åˆ°æœ¬åœ°ä¸»æœºã€‚ åœ¨ç³»ç»Ÿé—´å®‰å…¨åœ°åŒæ­¥æ–‡ä»¶ â€‹ rsync æ˜¯ä¸€ä¸ªå®ç°æœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶æˆ–ç›®å½•åŒæ­¥æ›´æ–°çš„ç¨‹åºï¼Œå…¶é€šè¿‡æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„å·®å¼‚è¿›è¡Œæœ€å°åŒ–æ›´æ”¹ã€ä¼ è¾“ã€‚å®ƒä¹Ÿå¯ä»¥æ”¯æŒä¸¤ä¸ªæœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•çš„åŒæ­¥ã€‚ 123456789101112131415161718192021# rsync å‘½ä»¤çš„å¸¸è§å½¢å¼ï¼šrsync [OPTION...] SRC DEST # ç”¨äºæœ¬åœ°åŒæ­¥rsync [OPTION...] SRC [USER@]HOST:DEST # ç”¨äºå°†æœ¬åœ°æ•°æ®å¤‡ä»½åˆ°è¿œç¨‹ä¸»æœºï¼ˆssh åè®®è®¤è¯ï¼‰rsync [OPTION...] SRC [USER@]HOST::DST # ç”¨äºå°†æœ¬åœ°æ•°æ®å¤‡ä»½åˆ°è¿œç¨‹ä¸»æœºï¼ˆrsync åè®®è®¤è¯ï¼‰rsync [OPTION...] [USER@]HOST:SRC DEST # ç”¨äºå°†è¿œç¨‹æœºå™¨ä¸Šçš„æ•°æ®å¤‡ä»½åˆ°æœ¬åœ°ä¸»æœºï¼ˆssh åè®®è®¤è¯ï¼‰rsync [OPTION...] [USER@]HOST::SRC DEST # ç”¨äºå°†è¿œç¨‹æœºå™¨ä¸Šçš„æ•°æ®å¤‡ä»½åˆ°æœ¬åœ°ä¸»æœºï¼ˆrsyncåè®®è®¤è¯ï¼‰# å¸¸è§é€‰é¡¹ï¼š-v, --verbose # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯-r, --recursive # é€’å½’å¤åˆ¶ç›®å½•ï¼ŒåŒæ­¥ç›®å½•æ—¶å¿…é¡»ä½¿ç”¨-n, --dry-run # ç©ºè¿è¡Œï¼Œæ˜¾ç¤ºæ­£å¸¸è¿è¡Œæ—¶çš„æ›´æ”¹ä½†ä¸å®é™…è¿è¡Œ-a, --archive # ä½¿ç”¨å­˜æ¡£æ¨¡å¼ï¼Œç›¸å½“äº -rlptgoDï¼ˆä¿ç•™è½¯é“¾æ¥æ¥ä½†ä¸ä¿ç•™ç¡¬é“¾æ¥ï¼‰-l, --links # åŒæ­¥è½¯è¿æ¥-p, --perms # ä¿ç•™æƒé™-t, --times # ä¿ç•™æ—¶é—´æˆ³-g, --group # ä¿ç•™ç»„æ‰€æœ‰æƒ-o, --owner # ä¿ç•™æ–‡ä»¶æ‰€æœ‰è€…-D, --devices # åŒæ­¥è®¾å¤‡æ–‡ä»¶-H, --hard-links # ä¿ç•™ç¡¬é“¾æ¥-z, --compress # ä¼ è¾“è¿‡ç¨‹ä¸­è¿›è¡Œå‹ç¼© --delete # åˆ é™¤ç›®æ ‡è·¯å¾„ä¸­æºè·¯å¾„æ²¡æœ‰çš„æ–‡ä»¶ --exclude=PATTERN # æ’é™¤åŒ¹é… PATTERN çš„æ–‡ä»¶ æœ¬åœ°æ•°æ®çš„åŒæ­¥ â€‹ä»¥ä¸‹å‘½ä»¤ä¿æŒäº† /var/log ç›®å½•çš„å†…å®¹ä¸ /tmp ç›®å½•çš„åŒæ­¥ï¼š 1234567891011[root@host ~]\\# rsync -av /var/log /tmprecieving incremental file listlog/log/README......log/tuned/tuned.logsent 11,592,423 bytes received 779 bytes 23,186,404.00 bytes/sectotal size is 11,586,755 speedup is 1.00[root@host ~]\\# ls /tmplog ssh-RLjDdarkKiw1 â€‹æºç›®å½•çš„è·¯å¾„åé¢åŠ ä¸Š / å³å¯å®ç°åŒæ­¥æºç›®å½•çš„å†…å®¹è€Œä¸åœ¨ç›®æ ‡è·¯å¾„ä¸‹åˆ›å»ºåŒåå­ç›®å½•ã€‚ ä¸è¿œç¨‹æ•°æ®çš„åŒæ­¥ â€‹è¦ä¿ç•™æ–‡ä»¶çš„æ‰€æœ‰æƒï¼Œéœ€ä½¿ç”¨ç›®æ ‡ç³»ç»Ÿä¸Šçš„ root ç”¨æˆ·ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°†æœ¬åœ°çš„ /var/log ç›®å½•åŒæ­¥åˆ° remotehost ç³»ç»Ÿä¸Šçš„ /tmp ç›®å½•ä¸­ï¼š 12345678910[root@host ~]\\# rsync -av /var/log remotehost:/tmp # çœç•¥ç”¨æˆ·é»˜è®¤ä¸º rootroot@remotehost\\`s password: receiving incremental file listlog/log/README......log/tuned/tuned.logsent 9783 bytes received 290,576 bytes 85,816.86 bytes/sectotal size is 11,585,690 speedup is 38.57 â€‹åŒæ ·ï¼Œremotehost ä¸Šçš„ /var/log è¿œç¨‹ç›®å½•ä¹Ÿå¯åŒæ­¥åˆ° host ä¸Šçš„ /tmp æœ¬åœ°ç›®å½•ï¼š 12345678910[root@host ~]\\# rsync -av remotehost:/var/log /tmproot@remotehost\\`s password: receiving incremental file listlog/boot.loglog/dnf.librepo.log......log/dnf.logsent 9783 bytes received 290,576 bytes 85816.86 bytes/sectotal size is 11,585,690 speedup is 38.57","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux é…ç½®ç½‘ç»œè®¾ç½®","slug":"Linux | Linux é…ç½®ç½‘ç»œè®¾ç½®","date":"2022-08-15T03:49:54.974Z","updated":"2022-08-15T03:52:53.487Z","comments":true,"path":"2022-08-15-Linux | Linux é…ç½®ç½‘ç»œè®¾ç½®.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ NMCLI å‘½ä»¤æ‘˜è¦ å‘½ä»¤ ç”¨é€” nmcli dev status æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œæ¥å£çš„ NetworkManager çŠ¶æ€ã€‚ nmcli con show åˆ—å‡ºæ‰€æœ‰è¿æ¥ã€‚ nmcli con show con-name åˆ—å‡º con-name è¿æ¥çš„å½“å‰è®¾ç½®ã€‚ nmcli con add con-name name æ·»åŠ ä¸€ä¸ªåä¸º name çš„æ–°è¿æ¥ã€‚ nmcli con mod con-name ä¿®æ”¹ con-name è¿æ¥ã€‚ nmcli con reload é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå†æ‰‹åŠ¨é…ç½®ç¼–è¾‘æ–‡ä»¶ä¹‹åä½¿ç”¨ï¼‰ã€‚ nmcli con up con-name æ¿€æ´» con-name è¿æ¥ã€‚ nmcli dev dis device åœ¨ç½‘ç»œæ¥å£ä¸Šåœç”¨å¹¶æ–­å¼€å½“å‰è¿æ¥ã€‚ nmcli con del con-name åˆ é™¤ con-name è¿æ¥åŠå…¶é…ç½®æ–‡ä»¶ã€‚ nmcli gen permissions æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„ç½‘ç»œä¿®æ”¹æƒé™ã€‚ ä»å‘½ä»¤è¡Œé…ç½®ç½‘ç»œ äº†è§£ NETWORKMANAGER å®ˆæŠ¤è¿›ç¨‹ â€‹NetworkManager æ˜¯ç›‘æ§å’Œç®¡ç†ç½‘ç»œè®¾ç½®çš„å®ˆæŠ¤è¿›ç¨‹ã€‚é™¤äº†è¯¥å®ˆæŠ¤è¿›ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæä¾›ç½‘ç»œçŠ¶æ€ä¿¡æ¯çš„ GNOME é€šçŸ¥åŒºåŸŸå°ç¨‹åºã€‚å‘½ä»¤è¡Œå’Œå›¾å½¢å·¥å…·ä¸ NetworkManager é€šä¿¡ï¼Œå¹¶å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨ /etc/sysconfig/network-scripts ç›®å½•ä¸­ã€‚NetworkManger çš„åŸºæœ¬æ¦‚å¿µï¼š è®¾å¤‡æ˜¯ç½‘ç»œæ¥å£ï¼› è¿æ¥æ˜¯å¯ä»¥ä¸ºè®¾å¤‡é…ç½®çš„è®¾ç½®çš„é›†åˆï¼› å¯¹äºä»»ä½•ä¸€ä¸ªè®¾å¤‡ï¼Œåœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªè¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚å¯èƒ½å­˜åœ¨å¤šä¸ªè¿æ¥ï¼Œä»¥ä¾›ä¸åŒè®¾å¤‡ä½¿ç”¨æˆ–è€…ä»¥ä¾¿ä¸ºåŒä¸€è®¾å¤‡æ›´æ”¹é…ç½®ã€‚å¦‚æœéœ€è¦ä¸´æ—¶æ›´æ”¹ç½‘ç»œè®¾ç½®ï¼Œè€Œä¸æ˜¯æ›´æ”¹è¿æ¥çš„é…ç½®ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹è®¾å¤‡çš„å“ªä¸ªè¿æ¥å¤„äºæ´»åŠ¨çŠ¶æ€ï¼› æ¯ä¸ªè¿æ¥å…·æœ‰ä¸€ä¸ªç”¨äºæ ‡è¯†è‡ªèº«çš„åç§°æˆ– IDï¼› nmcli ä½¿ç”¨ç¨‹åºå¯ç”¨äºä»å‘½ä»¤è¡Œåˆ›å»ºå’Œç¼–è¾‘è¿æ¥æ–‡ä»¶ã€‚ æŸ¥çœ‹è”ç½‘ä¿¡æ¯ â€‹ä½¿ç”¨nmcli dev[ice] status å‘½ä»¤å¯æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè®¾å¤‡çš„çŠ¶æ€ï¼š 123456[root@localhost ~]\\# nmcli dev statusDEVICE TYPE STATE CONNECTION ens160 ethernet connected ens160 virbr0 bridge connected (externally) virbr0 lo loopback unmanaged -- virbr0-nic tun unmanaged -- â€‹ä½¿ç”¨ nmcli con[nect] show å‘½ä»¤å¯æ˜¾ç¤ºæ‰€æœ‰è¿æ¥çš„åˆ—è¡¨ã€‚è¦ä»…åˆ—å‡ºæ´»åŠ¨çš„è¿æ¥ï¼Œå¯ä½¿ç”¨ --active é€‰é¡¹ã€‚ 1234[root@localhost ~]\\# nmcli con show --activeNAME UUID TYPE DEVICE ens160 8fc2fbfe-e119-43be-87dd-c45071c07bf7 ethernet ens160 virbr0 139c458e-0cff-4615-974c-aa119ddf87c2 bridge virbr0 æ·»åŠ ç½‘ç»œè¿æ¥ â€‹ä½¿ç”¨ nmcli con[nect] add å‘½ä»¤æ·»åŠ æ–°çš„ç½‘ç»œè¿æ¥ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤å°†ä¸ºæ¥å£ eno2 æ·»åŠ ä¸€ä¸ªæ–°é“¾æ¥ eno2ï¼Œæ­¤è¿æ¥å°†ä½¿ç”¨ DHCP è·å– IPv4 è”ç½‘ä¿¡æ¯å¹¶åœ¨ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨è¿æ¥ã€‚æ­¤å‘½ä»¤è¿˜å°†é€šè¿‡ä¾¦å¬æœ¬åœ°é“¾è·¯ä¸Šçš„è·¯ç”±å™¨æ’­å‘æ¥è·å– IPv6 è”ç½‘è®¾ç½®ã€‚é…ç½®æ–‡ä»¶çš„åç§°åŸºäºçš„ con-name é€‰é¡¹çš„å€¼ eno2ï¼Œå¹¶ä¿å­˜åˆ° /etc/sysconfig/network-scripts/ifcfg-eno2 æ–‡ä»¶ä¸­ã€‚ 12# nmcli connection add COMMON_OPTIONS TYPE_SPECIFIC_OPTIONS SLAVE_OPTIONS IP_OPTIONS [-- ([+|-]&lt;setting&gt;.&lt;property&gt; &lt;value&gt;)+][root@localhost ~]\\# nmcli con add con-name eno2 type ethernet ifname eno2 â€‹ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é™æ€ IPv4 åœ°å€ä¸º eno2 è®¾å¤‡æ¥åˆ›å»º eno2 è¿æ¥ï¼Œä¸”ä½¿ç”¨ IPv4 åœ°å€å’Œç½‘ç»œå‰ç¼€ 192.168.0.5/24 åŠé»˜è®¤ç½‘å…³ 192.168.0.254ï¼Œä½†æ˜¯ä»åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥å¹¶å°†å…¶é…ç½®ä¿å­˜åˆ°ç›¸åŒæ–‡ä»¶ä¸­ã€‚ 12[root@localhost ~]\\# nmcli con add con-name eno2 type ethernet ifname eno2 \\ipv4.address 192.168.0.5/24 ipv4.gateway 192.168.0.254 ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é™æ€ IPv6 å’Œ IPv4 åœ°å€ä¸º eno2 è®¾å¤‡åˆ›å»º eno2 è¿æ¥ï¼Œä¸”ä½¿ç”¨ IPv6 åœ°å€å’Œç½‘ç»œå‰ç¼€ 2001:db8:0:1::c000:207/64 åŠé»˜è®¤ IPv6 ç½‘å…³ 2001:db8:0:1::1ï¼Œä»¥åŠ IPv4 åœ°å€å’Œç½‘ç»œå‰ç¼€ 192.0.2.7/24 åŠé»˜è®¤ IPv4 ç½‘å…³ 192.0.2.1ï¼Œä½†æ˜¯ä»åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥ï¼Œå¹¶å°†å…¶é…ç½®ä¿å­˜åˆ° /etc/sysconfig/network-scripts/ifcfg-eno2ã€‚ 123[root@localhost ~]\\# nmcli con add con-name eno2 type ethernet ifname eno2 \\ipv6.address 2001:db8:0:1::c000:207/64 ipv6.gateway 2001:db8:0:1::1 \\ipv4.address 192.0.2.7/24 ipv4.gateway 192.0.2.1 æ§åˆ¶ç½‘ç»œè¿æ¥ â€‹ä½¿ç”¨ nmcli con[nect] up con-name å‘½ä»¤å°†å…¶ç»‘å®šåˆ°çš„ç½‘ç»œæ¥å£ä¸Šçš„è¿æ¥ con-name æ¿€æ´»ã€‚ä½¿ç”¨ nmcli con show å‘½ä»¤æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨è¿æ¥çš„åç§°ã€‚ 123456[root@localhost ~]\\# nmcli con showNAME UUID TYPE DEVICE ens160 8fc2fbfe-e119-43be-87dd-c45071c07bf7 ethernet ens160 virbr0 139c458e-0cff-4615-974c-aa119ddf87c2 bridge virbr0 [root@localhost ~]\\# nmcli con up ens160Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4) â€‹ä½¿ç”¨ nmcli dev dis[connect] device å‘½ä»¤å°†æ–­å¼€ä¸ç½‘ç»œæ¥å£ device çš„è¿æ¥å¹¶å°†å…¶å…³é—­ã€‚ 12[root@localhost ~]\\# nmcli dev dis virbr0Device &#x27;virbr0&#x27; successfully disconnected. ä½¿ç”¨ nmcli con[nection] down con-name è™½ç„¶å¯ä»¥åœç”¨ç½‘ç»œæ¥å£ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æœ‰çº¿è¿æ¥åœ¨é»˜è®¤æƒ…å†µä¸‹é…ç½®äº† autoconnectï¼Œä½¿ç”¨è¯¥å‘½ä»¤åœç”¨ç½‘ç»œæ¥å£å NetworkManager ä¼šç«‹å³å°†å…¶é‡æ–°å¼€å¯ã€‚ä½¿ç”¨ nmcli dev dis[connect] device å‘½ä»¤å°†è¿æ¥ä¸æ¥å£å®Œå…¨æ–­å¼€ä¼šé¿å…è¿™ä¸ªé—®é¢˜ã€‚ ä¿®æ”¹ç½‘ç»œè¿æ¥è®¾ç½® â€‹ NetworkManager è¿æ¥å…·æœ‰ä¸¤ç§ç±»å‹çš„è®¾ç½®ã€‚æœ‰é™æ€è¿æ¥å±æ€§ï¼Œå®ƒä»¬æ˜¯ç”±ç®¡ç†å‘˜é…ç½®å¹¶å­˜å‚¨åœ¨ */etc/sysconfig/network-scripts/ifcfg-**ä¸­çš„é…ç½®æ–‡ä»¶ä¸­ã€‚è¿˜å¯èƒ½æœ‰æ´»åŠ¨è¿æ¥æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯è¿æ¥ä» DHCP æœåŠ¡å™¨è·å–çš„ï¼Œä¸ä¼šæŒä¹…å­˜å‚¨ã€‚ â€‹ä½¿ç”¨ nmcli con[nect] show con-name å‘½ä»¤æ¥æŸ¥çœ‹æŸä¸ªè¿æ¥çš„å½“å‰è®¾ç½®ï¼Œå…¶ä¸­ con-name æ˜¯è¿æ¥çš„åç§°ã€‚å°å†™çš„è®¾ç½®æ˜¯é™æ€å±æ€§ï¼Œç®¡ç†å‘˜å¯ä»¥æ›´æ”¹å…¨å¤§å†™çš„è®¾ç½®æ˜¯æ´»åŠ¨è®¾ç½®ï¼Œä¸´æ—¶ç”¨äºæ­¤è¿æ¥å®ä¾‹ã€‚ 1234567891011121314[root@localhost ~]\\# nmcli con show ens160connection.id: ens160connection.uuid: 8fc2fbfe-e119-43be-87dd-c45071c07bf7connection.stable-id: --connection.type: 802-3-ethernetconnection.interface-name: ens160connection.autoconnect: yesconnection.autoconnect-priority: 0connection.autoconnect-retries: -1 (default)connection.multi-connect: 0 (default)connection.auth-retries: -1connection.timestamp: 1630289327connection.read-only: no...... â€‹ä½¿ç”¨ nmcli con[nect] mod con-name å‘½ä»¤æ›´æ”¹è¿æ¥çš„è®¾ç½®ã€‚è¿™äº›æ›´æ”¹å°†ä¿å­˜åœ¨è¿æ¥çš„ /etc/sysconfig/netwrok-scripts/ifcfg-* æ–‡ä»¶ä¸­ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤é’ˆå¯¹ static-ens3 è¿æ¥å°† IPv4 åœ°å€è®¾ç½®ä¸º 192.0.2.154 å¹¶å°†é»˜è®¤ç½‘å…³è®¾ç½®ä¸º 192.0.2.254ï¼š 12[root@localhost ~]\\# nmcli con mod static-ens3 ipv4.address 192.0.2.154 \\ipv4.gateway 192.0.2.254 â€‹ä»¥ä¸‹å‘½ä»¤é’ˆå¯¹ static-ens3 è¿æ¥å°† IPv6 åœ°å€è®¾ç½®ä¸º 2001:db8:0:1::a00:1/64 å¹¶å°†é»˜è®¤ç½‘å…³è®¾ç½®ä¸º 2001:db8:0:1::1ã€‚ 12[root@localhost ~]\\# nmcli con mod static-ens3 ipv6.address 2001:db8:0:1::a00:1/64 \\ipv6.gateway 2001:db8:0:1::1 ä¹‹å‰é‡‡ç”¨ DHCPv4 æœåŠ¡è·å– IPv4 ä¿¡æ¯çš„è¿æ¥æ”¹ä¸ºé€šè¿‡é™æ€æ–‡ä»¶æ¥è·å–çš„è¯éœ€è¦å°† ipv4.method å­—æ®µä» auto æ›´æ”¹ä¸º manualã€‚ ä¹‹å‰é‡‡ç”¨ SLAAC æˆ– DHCPv6 æœåŠ¡è·å– IPv6 ä¿¡æ¯çš„è¿æ¥æ”¹ä¸ºé€šè¿‡é™æ€æ–‡ä»¶æ¥è·å–çš„è¯éœ€è¦å°† ipv6.method å­—æ®µä» auto æˆ– dhcp æ›´æ”¹ä¸º manualã€‚ åˆ é™¤ç½‘ç»œè¿æ¥ â€‹ä½¿ç”¨ nmcli con[nect] del con-name åˆ é™¤åä¸º con-name çš„è¿æ¥ï¼ŒåŒæ—¶æ–­å¼€å®ƒä¸è®¾å¤‡çš„è¿æ¥å¹¶åˆ é™¤æ–‡ä»¶ /etc/sysconfig/network-scripts/ifcfg-con-nameã€‚ 1[root@localhost ~]\\# nmcli con del static-ens3 ç½‘ç»œè®¾ç½®ä¿®æ”¹æƒé™è¯´æ˜ â€‹root ç”¨æˆ·å¯ä»¥ä½¿ç”¨ nmcli å¯¹ç½‘ç»œé…ç½®è¿›è¡Œä»»ä½•å¿…è¦çš„æ›´æ”¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ™®é€šç”¨æˆ·ï¼š åœ¨æœ¬åœ°æ§åˆ¶å°ä¸Šç™»é™†çš„æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥å¯¹ç³»ç»Ÿè¿›è¡Œå¤šé¡¹ç½‘ç»œé…ç½®æ›´æ”¹ï¼ˆå¿…éœ€æœ¬åœ°ç™»å½•ï¼‰ï¼› ä½¿ç”¨ ssh ç™»é™†æ— æƒæ›´æ”¹ç½‘ç»œæƒé™ï¼ˆé™¤éç™»é™† rootï¼‰ã€‚ ä½¿ç”¨ nmcli gen[eral] permissions å‘½ä»¤æ¥æŸ¥çœ‹è‡ªå·±çš„å½“å‰æƒé™ã€‚ 12345678910111213141516171819[student@localhost ~]\\$ nmcli gen permissions # æ™®é€šç”¨æˆ· ssh ç™»é™†PERMISSION VALUE org.freedesktop.NetworkManager.checkpoint-rollback auth org.freedesktop.NetworkManager.enable-disable-connectivity-check no org.freedesktop.NetworkManager.enable-disable-network no org.freedesktop.NetworkManager.enable-disable-statistics no org.freedesktop.NetworkManager.enable-disable-wifi no org.freedesktop.NetworkManager.enable-disable-wimax no org.freedesktop.NetworkManager.enable-disable-wwan no org.freedesktop.NetworkManager.network-control auth org.freedesktop.NetworkManager.reload auth org.freedesktop.NetworkManager.settings.modify.global-dns auth org.freedesktop.NetworkManager.settings.modify.hostname auth org.freedesktop.NetworkManager.settings.modify.own auth org.freedesktop.NetworkManager.settings.modify.system auth org.freedesktop.NetworkManager.sleep-wake no org.freedesktop.NetworkManager.wifi.scan auth org.freedesktop.NetworkManager.wifi.share.open no org.freedesktop.NetworkManager.wifi.share.protected no ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶ â€‹é™¤äº†é€šè¿‡ nmcli con mod con-name å‘½ä»¤æ›´æ”¹ç½‘ç»œé…ç½® /etc/sysconfig/network-scripts/ifcfg-con-nameæ¥å®ç°å¯¹ç½‘ç»œé…ç½®çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ¥æ‰‹åŠ¨ç¼–è¾‘æ­¤æ–‡ä»¶ã€‚æ‰‹åŠ¨æ›´æ”¹è¯¥æ–‡ä»¶åï¼Œæ‰§è¡Œ nmcli con reload å‘½ä»¤æ¥ä½¿ NetworkManager è¿›ç¨‹é‡æ–°è¯»å–è¯¥é…ç½®æ–‡ä»¶ã€‚ â€‹nmcli è®¾ç½®å’Œ ifcfg æ–‡ä»¶ä¸­çš„åç§°å’Œè¯­æ³•ä¸åŒï¼Œä¸‹è¡¨æ•´ç†äº†éƒ¨åˆ†å¸¸è§é…ç½®çš„åŒºåˆ«ã€‚ NMCLI CON MOD IFCFG-* æ–‡ä»¶ ä½œç”¨ ipv4.method manual BOOTPROTO=none IPv4 é™æ€é…ç½® ipv4.method auto BOOTPROTO=dhcp IPv4 åŠ¨æ€è·å–åœ°å€ï¼Œè‹¥é…ç½®äº†é™æ€è®¾ç½®ï¼Œåˆ™ DHCPv4 è·å–æˆåŠŸä¹‹å‰ä¸ä¼šæ¿€æ´»è¿™äº›é™æ€è®¾ç½®ã€‚ ipv4.address &quot;192.168.2.1/24 192.0.2.254&quot; IPADDR0=192.0.2.1 PREFIX0=24 GATEWAY=192.0.2.254 è®¾ç½®é™æ€ IPv4 åœ°å€ã€ç½‘ç»œå‰ç¼€å’Œé»˜è®¤ç½‘å…³ã€‚å¦‚æœä¸ºè¿æ¥è®¾ç½®äº†å¤šä¸ªï¼Œåˆ™ ifcog-* æŒ‡ä»¤å°†ä»¥ 1ã€2ã€3 ç­‰ç»“å°¾ï¼Œè€Œä¸æ˜¯ä»¥ 0 ç»“å°¾ã€‚ ipv4.dns 8.8.8.8 DNS0=8.8.8.8 ä¿®æ”¹ /etc/resolve.conf ä»¥ä½¿ç”¨æ­¤åŸŸåæœåŠ¡å™¨ã€‚ ipv4.dns-search example.com DOMAIN=example.com ä¿®æ”¹ /etc/resolv.confï¼Œä»¥åœ¨ search æŒ‡ä»¤ä¸­ä½¿ç”¨è¿™ä¸ªåŸŸã€‚ ipv4.ignore-auto-dns true PEERDNS=no å¿½ç•¥æ¥è‡ª DHCP æœåŠ¡å™¨çš„ DNS æœåŠ¡å™¨ä¿¡æ¯ã€‚ ipv6.method manual IPV6_AUTOCONF=no IPv6 é™æ€é…ç½®ã€‚ ipv6.method auto IPV6_AUTOCONF=yes ä½¿ç”¨è·¯ç”±å™¨æ’­å‘ä¸­çš„ SLAAC æ¥é…ç½®ç½‘ç»œè®¾ç½®ã€‚ ipv6.method dhcp IPV6_AUTOCONF=no DHCPV6C=yes ä½¿ç”¨ DHCPv6 ï¼ˆè€Œä¸ä½¿ç”¨ SLAACï¼‰æ¥é…ç½®ç½‘ç»œè®¾ç½®ã€‚ ipv6.addresses &quot;2001:db8::a/64 2001:db8::1&quot; IPV6ADDR=2001:db8::a/64 IPV6_DEFAULTGW=2001:db8::1 è®¾ç½®é™æ€ IPv6 åœ°å€ã€ç½‘ç»œå‰ç¼€é»˜è®¤ç½‘å…³ã€‚å¦‚æœä¸ºè¿æ¥è®¾ç½®äº†å¤šä¸ªåœ°å€ï¼ŒIPV6_SECONDARIES å°†é‡‡ç”¨ç©ºæ ¼åˆ†å‰²çš„åœ°å€/å‰ç¼€å®šä¹‰çš„åŒå¼•å·åˆ—è¡¨ã€‚ ipv6.dns 2400:3200::1 DNS0=2400:3200::1 ä¿®æ”¹ /etc/resolv.conf ä»¥ä½¿ç”¨æ­¤åŸŸåæœåŠ¡å™¨ã€‚ä¸ IPv4 å®Œå…¨ç›¸åŒã€‚ ipv6.dns-search example.com DOMAIN=example.com ä¿®æ”¹ /etc/resolv.confï¼Œä»¥åœ¨ search æŒ‡ä»¤ä¸­ä½¿ç”¨è¿™ä¸ªåŸŸã€‚ä¸ IPv4 å®Œå…¨ç›¸åŒã€‚ ipv6.ignore-auto-dns true IPV6_PEERDNS=no å¿½ç•¥æ¥è‡ª DHCP æœåŠ¡å™¨çš„ DNS æœåŠ¡å™¨æ¶ˆæ¯ã€‚ connection.autoconnection yes ONBOOT=yes åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨æ¿€æ´»æ­¤è¿æ¥ã€‚ connection.id ens3 NAME=ens3 æ­¤è¿æ¥çš„åç§°ã€‚ connection.interface-name ens3 DEVICE=ens3 è¿æ¥ä¸å…·æœ‰æ­¤åç§°çš„ç½‘ç»œæ¥å£ç»‘å®šã€‚ 802-3-ethernet.mac-address ... HWADDR=... è¿æ¥ä¸å…·æœ‰æ­¤ MAC åœ°å€çš„ç½‘ç»œæ¥å£ç»‘å®šã€‚ â€‹ä»¥ä¸‹æ˜¯æˆ‘çš„è™šæ‹Ÿæœºçš„ç½‘ç»œé…ç½®æ–‡ä»¶å†…å®¹ï¼š 123456789101112131415TYPE=EthernetPROXY_METHOD=noneBROWSER_ONLY=noBOOTPROTO=dhcpDEFROUTE=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens160UUID=8fc2fbfe-e119-43be-87dd-c45071c07bf7DEVICE=ens160ONBOOT=yes â€‹ä¿®æ”¹äº†é…ç½®æ–‡ä»¶åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚ 123[root@localhost ~]\\# nmcli con reload[root@localhost ~]\\# nmcli con down &quot;con-name&quot;[root@localhost ~]\\# nmcli con up &quot;con-name&quot; é…ç½®ä¸»æœºåå’ŒåŸŸåè§£æ æ›´æ”¹ç³»ç»Ÿä¸»æœºå â€‹ä½¿ç”¨ hostname å‘½ä»¤æ˜¾ç¤ºæˆ–ä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿçš„å®Œå…¨é™å®šä¸»æœºåã€‚ 12345[root@localhost ~]\\# hostname # ä¸è·Ÿé€‰é¡¹æˆ–å‚æ•°ä¸ºæ˜¾ç¤ºä¸»æœºålocalhost.localdomain[root@localhost ~]\\# hostname skinyi.mydomain # åè·Ÿå†…å®¹åˆ™ä¸´æ—¶ä¿®æ”¹ä¸»æœºå[root@localhost ~]\\# hostname skinyi.mydomain â€‹ä½¿ç”¨ hostnamectl å‘½ä»¤ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/hostname æ¥å®ç°æ°¸ä¹…æ›´æ”¹ä¸»æœºåï¼Œè¯¥å‘½ä»¤ä¹Ÿå¯ç”¨äºæŸ¥çœ‹ç³»ç»Ÿçš„å®Œå…¨é™å®šä¸»æœºåçš„çŠ¶æ€ã€‚ 123456789101112131415[root@localhost ~]\\# hostnamectl set-hostname vmrhel@skinyi.me[root@localhost ~]\\# hostnamectl status Static hostname: vmrhelskinyi.me Pretty hostname: vmrhel@skinyi.me Icon name: computer-vm Chassis: vm Machine ID: 6651ee1da4824a37975cd5245c8cb076 Boot ID: 95270889df844cc2911c26503ef2b0df Virtualization: vmware Operating System: Red Hat Enterprise Linux 8.3 (Ootpa) CPE OS Name: cpe:/o:redhat:enterprise_linux:8.3:GA Kernel: Linux 4.18.0-240.el8.x86_64 Architecture: x86-64[root@localhost ~]\\# cat /etc/hostnamevmrhelskinyi.me é…ç½®åŸŸåè§£æ â€‹æ ¹è§£æå™¨ç”¨äºå°†åŸŸåè½¬æ¢ä¸º IP åœ°å€ï¼Œåä¹‹äº¦å¯ã€‚ä»–å°†æ ¹æ® /etc/nsswitch.conf æ–‡ä»¶çš„é…ç½®æ¥ç¡®å®šæŸ¥æ‰¾ä½ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆæ£€æŸ¥ /etc/hosts æ–‡ä»¶çš„å†…å®¹ã€‚ â€‹ä½¿ç”¨ getent hosts hostname å‘½ä»¤å¯ä»¥æ¨¡æ‹Ÿåœ¨ /etc/hosts æ–‡ä»¶ä¸­æŸ¥æ‰¾åŸŸåè®°å½•çš„è¿‡ç¨‹ï¼ˆå…³äº getent å‘½ä»¤çš„è¯¦ç»†ä»‹ç»è§ 09. ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ ä¸€ç« ï¼‰ï¼š 12[root@localhost ~]\\# getent hosts localhost # DNS åæŸ¥::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 â€‹è‹¥åœ¨æœ¬åœ° hosts æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°ç›¸å…³è®°å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¹è§£æå™¨ä¼šå°è¯•ä½¿ç”¨ DNS æœåŠ¡æ¥æŸ¥è¯¢ä¸»æœºåã€‚/etc/resolv.conf é…ç½®æ–‡ä»¶æ§åˆ¶å¦‚ä½•è¿›è¡ŒæŸ¥è¯¢ï¼š searchï¼šå¯¹äºè¾ƒçŸ­çš„ä¸»æœºåå°è¯•æœç´¢çš„åŸŸååˆ—è¡¨ã€‚ä¸åº”è¯¥åœ¨åŒä¸€æ–‡ä»¶ä¸­è®¾ç½®æ­¤å‚æ•°å’Œ domainï¼Œå¦‚æœåœ¨åŒä¸€æ–‡ä»¶ä¸­è®¾ç½®å®ƒä»¬ï¼Œæœ€åä¸€é¡¹è®¾ç½®å°†è¦†ç›–å¦å¤–ä¸€é¡¹ï¼› nameserverï¼šè¦æŸ¥è¯¢çš„åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€ã€‚å¯ä»¥æŒ‡å®šæœ€å¤šä¸‰ä¸ªåŸŸåæœåŠ¡å™¨æŒ‡ä»¤ï¼Œä»¥åœ¨å…¶ä¸­ä¸€ä¸ªåŸŸåæœåŠ¡å™¨åœæœºæ—¶æä¾›å¤‡ç”¨åŸŸåæœåŠ¡å™¨ã€‚ 123456[root@vmrhelskinyi ~]\\# cat /etc/resolv.conf# Generated by NetworkManagersearch menameserver 192.168.251.86nameserver 240e:41d:8010:c75::6fnameserver 240e:41d:8010:c75::b8 â€‹å‘è¿æ¥æ·»åŠ  DNS æœåŠ¡å™¨åœ°å€é…ç½®ï¼š 1[root@vmrhelskinyi ~]\\# nmcli con mod CON-NAME +ipv4.dns IP # å‘ CON-NAME è¿æ¥å¢åŠ ä¸€æ¡ DNS é…ç½®è®°å½• â€‹NetworkManager ä¼šæ ¹æ®è¿æ¥é…ç½®æ–‡ä»¶æ›´æ–° /etc/resolv.conf æ–‡ä»¶ã€‚ â€‹ä½¿ç”¨ host å‘½ä»¤æµ‹è¯•åŸŸåè§£æï¼š 12345[root@vmrhelskinyi ~]\\# host kernel.org # æµ‹è¯•åŸŸåè§£ækernel.org has address 198.145.29.83kernel.org mail is handled by 10 mail.kernel.org.[root@vmrhelskinyi ~]\\# host 198.145.29.83 # æµ‹è¯•åŸŸååæŸ¥83.29.145.198.in-addr.arpa domain name pointer kernel.org. DHCP è®¾ç½®ä¼šåœ¨æ¥å£å¯åŠ¨æ—¶è‡ªåŠ¨æ ¹æ®è·å–çš„ä¿¡æ¯é‡å†™ /etc/resolv.conf æ–‡ä»¶ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨ DHCP æ›´æ–° DNS æœåŠ¡å™¨è®¾ç½®ï¼Œå¯ä»¥åœ¨æ¥å£é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼šPEERDNS=noã€‚ä½¿ç”¨ nmcli å‘½ä»¤è®¾ç½®å¦‚ä¸‹ï¼š 1[root@vmrhelskinyi ~]\\# nmcli con mod CON_NAME ipv4.ignore-auto-dns yes","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux æ”¶é›†ç½‘ç»œä¿¡æ¯","slug":"Linux | Linux æ”¶é›†ç½‘ç»œä¿¡æ¯","date":"2022-08-15T03:46:45.330Z","updated":"2022-08-15T03:48:54.392Z","comments":true,"path":"2022-08-15-Linux | Linux æ”¶é›†ç½‘ç»œä¿¡æ¯.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E6%94%B6%E9%9B%86%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ”¶é›†ç½‘ç»œæ¥å£ä¿¡æ¯ â€‹ip å‘½ä»¤çš„å„ç§å½¢å¼åé¢æŒ‡å®šå…·ä½“å¯¹è±¡åˆ™æŸ¥è¯¢å…·ä½“å¯¹è±¡çš„ä¿¡æ¯ï¼Œä¸æŒ‡å®šåˆ™æŸ¥è¯¢æ‰€æœ‰å¯¹è±¡çš„ä¿¡æ¯ã€‚ è¯†åˆ«ç½‘ç»œæ¥å£ â€‹ä½¿ç”¨ ip link å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸Šæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ï¼š 123456789[root@localhost ~]\\# ip link show # è¯¥å‘½ä»¤äº¦å¯ç®€å†™ä¸º `ip l`1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:002: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000 link/ether 00:0c:29:02:75:df brd ff:ff:ff:ff:ff:ff3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default qlen 1000 link/ether 52:54:00:53:ea:42 brd ff:ff:ff:ff:ff:ff4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc fq_codel master virbr0 state DOWN mode DEFAULT group default qlen 1000 link/ether 52:54:00:53:ea:42 brd ff:ff:ff:ff:ff:ff â€‹ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼ŒæœåŠ¡å™¨åŒ…å«ä¸¤ä¸ªç‰©ç†ç½‘ç»œæ¥å£å’Œä¸€ä¸ªè™šæ‹Ÿç½‘ç»œæ¥å£ï¼ˆè¯¥æ¥å£æ‹¥æœ‰ç›¸åŒçš„ MAC åœ°å€ä½†æœ‰ä¸¤ä¸ªä¸åŒçš„åå­—ï¼‰ï¼Œå…¶ä¸­ lo æ¥å£ä¸ºå›ç¯è®¾å¤‡ï¼Œens160 ä¸ºè™šæ‹Ÿæœºæ¨¡æ‹Ÿçš„ç‰©ç†ç½‘å¡ï¼Œvirbr0 å’Œ virbr0-nic ä¸ºå®‰è£…äº† libvirt æœåŠ¡è‡ªåŠ¨åˆ›å»ºçš„ä¾›è™šæ‹Ÿæœºè¿æ¥çš„è™šæ‹Ÿç½‘å¡ï¼Œvirbr0 ç»‘å®šä¸€ä¸ªå›ºå®šçš„ ip åœ°å€ï¼š192.168.122.1/24ã€‚ç”±æ¯ä¸ªæ¥å£çš„ MAC åœ°å€å’Œç»‘å®šçš„ ip åœ°å€æˆ‘ä»¬å°±çŸ¥é“äº†æ¯ä¸ªæ¥å£è¿æ¥ç½‘ç»œçš„çŠ¶æ€ã€‚ æŸ¥è¯¢ IP åœ°å€ â€‹ä½¿ç”¨ ip addr å‘½ä»¤æ¥æŸ¥çœ‹ç½‘ç»œæ¥å£çš„ IPv4 æˆ– IPv6 åœ°å€ã€‚ 123456789[root@localhost ~]\\# ip addr show ens160 # å¯ç®€å†™ä¸º ip a s ens1602: ens160: &lt;BROADCAST,MULTICAST,â‘ UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000 â‘¡link/ether 00:0c:29:02:75:df brd ff:ff:ff:ff:ff:ff â‘¢inet 192.168.224.139/24 brd 192.168.224.255 scope global dynamic noprefixroute ens160 valid_lft 1962sec preferred_lft 1962sec â‘£inet6 240e:41d:8010:c75:683c:cc7:17fe:4c47/64 scope global dynamic noprefixroute valid_lft 3282sec preferred_lft 3282sec â‘¤inet6 fe80::8af6:d265:9b34:f1d6/64 scope link noprefixroute valid_lft forever preferred_lft forever â€‹å…¶ä¸­ï¼Œæ ‡æ³¨å„é¡¹çš„æ„ä¹‰å¦‚ä¸‹ï¼š â‘  UP ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªæ´»åŠ¨æ¥å£ï¼Œå³å·²å¯ç”¨ã€‚ â‘¡ link/ether è¡ŒæŒ‡å®šè®¾å¤‡çš„ç¡¬ä»¶ï¼ˆMACï¼‰åœ°å€ã€‚ â‘¢ inet è¡Œæ˜¾ç¤º IPv4 åœ°å€ã€å…¶ç½‘ç»œå‰ç¼€é•¿åº¦å’Œä½œç”¨åŸŸã€‚ â‘£ inet6 è¡Œæ˜¾ç¤º IPv6 åœ°å€ã€å…¶ç½‘ç»œå‰ç¼€é•¿åº¦å’Œä½œç”¨åŸŸã€‚æ­¤åœ°å€å±äºå…¨å±€ä½œç”¨åŸŸï¼Œé€šå¸¸ä½¿ç”¨æ­¤åœ°å€ã€‚ â‘¤ è¯¥ inet6 è¡Œæ˜¾ç¤ºæ¥å£å…·æœ‰é“¾è·¯ä½œç”¨åŸŸçš„ IPv6 åœ°å€ï¼Œå¹¶ä¸”åªèƒ½ç”¨äºæœ¬åœ°ä»¥å¤ªç½‘é“¾è·¯ä¸Šçš„é€šä¿¡ã€‚ æ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡ä¿¡æ¯ â€‹ä½¿ç”¨ ip -s link å‘½ä»¤ç»Ÿè®¡æ¥å£çš„æ€§èƒ½å‚æ•°ã€‚æ¯ä¸ªç½‘ç»œæ¥å£çš„è®¡æ•°å™¨ã€åŒ…æ‹¬æ”¶åˆ°ï¼ˆRXï¼‰å’Œä¼ å‡ºï¼ˆTXï¼‰çš„æ•°æ®åŒ…æ•°ã€æ•°æ®åŒ…é”™è¯¯æ•°ã€ä¸¢å¼ƒçš„æ•°æ®åŒ…æ•°ã€‘å¯ç”¨äºæ£€æµ‹ç½‘ç»œé—®é¢˜çš„å­˜åœ¨ã€‚ 1234567[root@localhost ~]\\# ip -s link show ens160 # æ— æ³•ç®€å†™2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000 link/ether 00:0c:29:02:75:df brd ff:ff:ff:ff:ff:ff RX: bytes packets errors dropped overrun mcast 2159684 2512 0 0 0 146 TX: bytes packets errors dropped carrier collsns 157533 1630 0 0 0 0 æ£€æŸ¥ç½‘ç»œè¿é€šæ€§ â€‹pingï¼ˆIPv4ï¼‰æˆ– ping6ï¼ˆIPv6ï¼‰å‘½ä»¤å¯ç”¨äºæµ‹è¯•å½“å‰ä¸»æœºåˆ°ç½‘ç»œä¸Šçš„ä»»æ„ä¸»æœºçš„è¿é€šæ€§ï¼ˆå‰ææ˜¯è¢«æµ‹è¯•çš„ä¸»æœºå¼€å¯ ICMP å›æ˜¾åŠŸèƒ½ï¼‰ã€‚ä¸åŒäº windowsï¼Œlinux ç¯å¢ƒä¸‹è¯¥å‘½ä»¤å°†æŒç»­è¿è¡Œï¼Œç›´åˆ°æŒ‰ä¸‹ ctrl + c ç»„åˆé”®ç»“æŸè¯¥å‘½ä»¤çš„è¿›ç¨‹ï¼ˆé™¤éæŒ‡å®šäº†é™åˆ¶å‘é€è½¯ä»¶åŒ…æ•°çš„é€‰é¡¹ï¼‰ã€‚ 12345678910111213141516[root@localhost ~]\\# ping -c 2 baidu.com # è¢«æµ‹è¯•ä¸»æœºå¯ä»¥ä½¿ç”¨å…¶åŸŸåã€IP åœ°å€PING baidu.com (220.181.38.148) 56(84) bytes of data.64 bytes from 220.181.38.148 (220.181.38.148): icmp_seq=1 ttl=51 time=66.2 ms64 bytes from 220.181.38.148 (220.181.38.148): icmp_seq=2 ttl=51 time=56.4 ms--- baidu.com ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 2msrtt min/avg/max/mdev = 56.371/61.274/66.177/4.903 ms[root@localhost ~]\\# ping6 ff02::1 # ping å‘½ä»¤å…¶å®ä¹Ÿå¯ä»¥å…¼å®¹ IPv6 åœ°å€PING ff02::1(ff02::1) 56 data bytes64 bytes from fe80::8af6:d265:9b34:f1d6%ens160: icmp_seq=1 ttl=64 time=0.423 ms64 bytes from fe80::f4ac:5eff:fe0b:c1d2%ens160: icmp_seq=1 ttl=64 time=2.91 ms (DUP!)^C--- ff02::1 ping statistics ---1 packets transmitted, 1 received, +1 duplicates, 0% packet loss, time 0msrtt min/avg/max/mdev = 0.423/1.668/2.913/1.245 ms â€‹å½“ç½‘ç»œä¸­å­˜åœ¨ä¸æ­¢ä¸€å—ç½‘å¡ä¸”è¿æ¥ä¸æ­¢ä¸€ä¸ªç½‘ç»œæ—¶ï¼Œä½¿ç”¨ ping å‘½ä»¤æµ‹è¯•æœ¬åœ°é“¾è·¯åœ°å€å’Œæœ¬åœ°é“¾è·¯å…¨èŠ‚ç‚¹å¤šæ’­ç»„ï¼ˆff02::1ï¼‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ä½œç”¨åŸŸæ ‡è¯†ç¬¦æ¥æ˜¾ç¤ºæŒ‡å®šè¦ä½¿ç”¨çš„ç½‘ç»œæ¥å£ã€‚è‹¥é—æ¼ï¼Œåˆ™å°†æ˜¾ç¤ºé”™è¯¯ connect: Invalid argumentã€‚ â€‹å¯¹ ff02::1 æ‰§è¡Œ ping å¯èƒ½æœ‰åŠ©äºæ‰¾åˆ°æœ¬åœ°ç½‘ç»œä¸Šçš„å…¶ä»– IPv6 èŠ‚ç‚¹ã€‚å¦‚ä¸Šä¾‹ä¸­æ‰¾æ‰“äº†å…·æœ‰ IPv6 æœ¬åœ°é“¾è·¯åœ°å€ fe80::f4ac:5eff:fe0b:c1d2 çš„å…¶ä»–ä¸»æœºã€‚ 123456789[root@localhost ~]\\# ping fe80::f4ac:5eff:fe0b:c1d2%ens160PING fe80::f4ac:5eff:fe0b:c1d2%ens160(fe80::f4ac:5eff:fe0b:c1d2%ens160) 56 data bytes64 bytes from fe80::f4ac:5eff:fe0b:c1d2%ens160: icmp_seq=1 ttl=64 time=3.19 ms64 bytes from fe80::f4ac:5eff:fe0b:c1d2%ens160: icmp_seq=2 ttl=64 time=4.11 ms^C--- fe80::f4ac:5eff:fe0b:c1d2%ens160 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 3msrtt min/avg/max/mdev = 3.186/3.645/4.105/0.463 ms â€‹IPv6 æœ¬åœ°é“¾è·¯åœ°å€å¯ä»¥ç”±åŒä¸€é“¾è·¯ä¸Šçš„å…¶ä»–ä¸»æœºä½¿ç”¨ã€‚å¯ä»¥å°è¯•ä½¿ç”¨ IPv6 æœ¬åœ°é“¾è·¯åœ°å€ ssh è¿æ¥åˆ°ä½ çš„è™šæ‹Ÿæœºæˆ–åŒä¸€ç½‘ç»œä¸‹çš„å…¶ä»–ä¸»æœºã€‚ è·¯ç”±æ•…éšœæ’æŸ¥ æ˜¾ç¤ºè·¯ç”±è¡¨ â€‹ä½¿ç”¨ ip route å‘½ä»¤é€‰é¡¹æ¥æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ã€‚ 1234[root@localhost ~]\\# ip routedefault via 192.168.224.44 dev ens160 proto dhcp metric 100 192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 linkdown 192.168.224.0/24 dev ens160 proto kernel scope link src 192.168.224.139 metric 100 â€‹ä»¥ä¸Šå‘½ä»¤ä»…æ˜¾ç¤ºäº† IPv4 è·¯ç”±è¡¨ã€‚ä½¿ç”¨ ip -6 route å‘½ä»¤å³å¯æ˜¾ç¤º IPv6 è·¯ç”±è¡¨ã€‚ 12345[root@localhost ~]\\# ip -6 route::1 dev lo proto kernel metric 256 pref medium240e:41d:8010:c75::/64 dev ens160 proto ra metric 100 pref mediumfe80::/64 dev ens160 proto kernel metric 100 pref mediumdefault via fe80::f4ac:5eff:fe0b:c1d2 dev ens160 proto ra metric 100 pref high â€‹ä¸€ä¸ªç½‘ç»œæ¥å£åŒæ—¶å…·æœ‰ä¸¤ä¸ª IPv6 åœ°å€ï¼Œå³ä¸€ä¸ªå¯¹å¤–ç½‘ç»œå…¨å±€åœ°å€å’Œä¸€ä¸ªæœ¬åœ°é“¾è·¯åœ°å€ã€‚ è¿½è¸ªæµé‡é‡‡ç”¨çš„è·¯ç”± â€‹ä½¿ç”¨ traceroute æˆ– tracepath å‘½ä»¤æ¥è¿½è¸ªç½‘ç»œæµé‡é€šè¿‡å¤šå°‘ä¸ªè·¯ç”±å™¨æ¥åˆ°è¾¾è¿œç¨‹ä¸»æœºä»¥åŠå…¶é‡‡ç”¨çš„è·¯å¾„ã€‚å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå‘½ä»¤æ£€æŸ¥ç½‘ç»œä¸­çš„è·¯ç”±å™¨é…ç½®æ˜¯å¦å­˜åœ¨é—®é¢˜ã€‚ â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªå‘½ä»¤éƒ½ä½¿ç”¨ UDP æ•°æ®åŒ…æ¥è¿½è¸ªæ•°æ®è·¯å¾„ï¼Œä½†æ˜¯è®¸å¤šç½‘ç»œé˜»æ­¢ UDP å’Œ ICMP æµé‡ã€‚traceroute å‘½ä»¤æ‹¥æœ‰å¯ä»¥è¿½è¸ª UDPï¼ˆé»˜è®¤ï¼‰ã€ICMPï¼ˆ-Iï¼‰æˆ– TCPï¼ˆ-Tï¼‰æ•°æ®åŒ…è·¯å¾„çš„é€‰é¡¹ã€‚ä¸è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹é€šå¸¸ä¸å®‰è£… traceroute å‘½ä»¤ã€‚ 12345678910[root@localhost ~]\\# tracepath bilibili.com 1?: [LOCALHOST] pmtu 1500 1: _gateway 2.647ms 1: _gateway 2.826ms 2: _gateway 3.126ms pmtu 1410 2: no reply 3: 183.29.251.1 67.107ms 4: no reply 5: 183.29.0.5 51.596ms ...... â€‹traceroute è¾“å‡ºä¸­çš„æ¯ä¸€è¡Œè¡¨ç¤ºæ•°æ®åŒ…åœ¨æ¥æºå’Œæœ€ç»ˆç›®æ ‡ä¹‹é—´æ‰€ç»è¿‡çš„è·¯ç”±å™¨æˆ–è·ƒç‚¹ï¼Œä¹Ÿæä¾›äº†å…¶ä»–ä¿¡æ¯ï¼Œå¦‚å¾€è¿”ç”¨æ—¶ï¼ˆRTTï¼‰å’Œæœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMTUï¼‰å¤§å°ä¸­çš„ä»»ä½•å˜åŒ–ç­‰ã€‚asymm è¡¨ç¤ºæµé‡ä½¿ç”¨äº†ä¸åŒçš„ï¼ˆéå¯¹ç§°ï¼‰è·¯ç”±åˆ°è¾¾è¯¥è·¯ç”±å™¨çš„æµé‡å’Œä»è¯¥è·¯ç”±å™¨è¿”å›ã€‚æ˜¾ç¤ºçš„è·¯ç”±å™¨æ˜¯ç”¨äºå‡ºç«™æµé‡çš„è·¯ç”±å™¨ï¼Œè€Œä¸æ˜¯è¿”å›æµé‡ã€‚ â€‹tracepath6 å’Œ tracepath -6 å‘½ä»¤ç­‰æ•ˆäº IPv6 ç‰ˆæœ¬çš„ tracepath å’Œ traceroute å‘½ä»¤ã€‚ 12345[root@localhost ~]\\# tracepath6 fe80::70b8:51ff:fe39:4e7f # tracepath å‘½ä»¤ä¹Ÿå…¼å®¹ IPv6 1?: [LOCALHOST] 0.027ms pmtu 1410 1: fe80::%ens160 2.619ms rea 1: fe80::%ens160 5.508ms rea Resume: pmtu 1410 hops 1 back 1 ç«¯å£å’ŒæœåŠ¡æ•…éšœæ’é™¤ â€‹TCP æœåŠ¡ä½¿ç”¨å¥—æ¥å­—ä½œä¸ºé€šä¿¡çš„ç«¯ç‚¹ï¼Œå…¶ç”± IP åœ°å€ã€åè®®å’Œç«¯å£å·ç»„æˆã€‚æœåŠ¡é€šå¸¸ä¾¦å¬æ ‡å‡†ç«¯å£ï¼Œè€Œå®¢æˆ·ç«¯åˆ™ä½¿ç”¨éšæœºçš„å¯ç”¨ç«¯å£ã€‚/etc/services æ–‡ä»¶ä¸­åˆ—å‡ºäº†æ ‡å‡†ç«¯å£çš„å¸¸ç”¨åç§°ã€‚ â€‹ss å‘½ä»¤å¯ç”¨äºæ˜¾ç¤ºå¥—æ¥å­—ç»Ÿè®¡ä¿¡æ¯ã€‚ss å‘½ä»¤æ—¨åœ¨æ›¿æ¢ net-tools è½¯ä»¶åŒ…ä¸­æ‰€åŒ…å«çš„è¾ƒæ—§å·¥å…· netstatã€‚ 12345678910111213[root@localhost ~]\\# ss -ta # -t åªæ˜¾ç¤º TCP è¿æ¥ï¼Œ-a æ˜¾ç¤ºæ‰€æœ‰ï¼ˆç›‘å¬ä¸­å’Œå·²å»ºç«‹çš„ï¼‰å¥—æ¥å­— State Recv-Q Send-Q Local Address:Port Peer Address:PortLISTEN 0 128 0.0.0.0:sunrpc 0.0.0.0:* LISTEN 0 32 192.168.122.1:domain 0.0.0.0:* LISTEN 0 128 0.0.0.0:ssh 0.0.0.0:*LISTEN 0 5 127.0.0.1:ipp 0.0.0.0:*LISTEN 0 128 127.0.0.1:x11-ssh-offset 0.0.0.0:* LISTEN 0 128 [::]:sunrpc [::]:*LISTEN 0 128 [::]:ssh [::]:* LISTEN 0 5 [::1]:ipp [::]:*LISTEN 0 128 [::1]:x11-ssh-offset [::]:* ESTAB 0 0 [fe80::8af6:d265:9b34:f1d6]%ens160:ssh [fe80::cdbe:da6f:b9b7:a07d]:4499 ESTAB 0 52 [fe80::8af6:d265:9b34:f1d6]%ens160:ssh [fe80::cdbe:da6f:b9b7:a07d]:14318 â€‹ss å‘½ä»¤å’Œ netstat å‘½ä»¤çš„å¸¸ç”¨é€‰é¡¹ï¼š é€‰é¡¹ æè¿° -n æ˜¾ç¤ºæ¥å£å’Œç«¯å£çš„ç¼–å·ï¼Œè€Œä¸æ˜¾ç¤ºåç§°ã€‚ -t æ˜¾ç¤º TCP å¥—æ¥å­—ã€‚ -u æ˜¾ç¤º UDP å¥—æ¥å­—ã€‚ -l ä»…æ˜¾ç¤ºä¾¦å¬ä¸­çš„å¥—æ¥å­—ã€‚ -a æ˜¾ç¤ºæ‰€æœ‰ï¼ˆä¾¦å¬ä¸­å’Œå·²å»ºç«‹çš„ï¼‰å¥—æ¥å­—ã€‚ -p æ˜¾ç¤ºä½¿ç”¨å¥—æ¥å­—çš„è¿›ç¨‹ã€‚ -A inet å¯¹äº inet åœ°å€ï¼Œæ˜¾ç¤ºæ´»åŠ¨çš„è¿æ¥ï¼ˆä½†ä¸æ˜¾ç¤ºä¾¦å¬å¥—æ¥å­—ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¿½ç•¥æœ¬åœ° UNIX åŸŸå¥—æ¥å­—ã€‚å¯¹äº ssï¼ŒåŒæ—¶æ˜¾ç¤º IPv4 å’Œ IPv6è¿æ¥ã€‚å¯¹äº netstatï¼Œä»…æ˜¾ç¤º IPv4 è¿æ¥ï¼ˆnetstat -A inet6 æ˜¾ç¤ºIPv6ï¼Œnetstat -46 åˆ™åŒæ—¶æ˜¾ç¤º IPv4 å’Œ IPv6ï¼‰ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux ç½‘è·¯ç®¡ç†åŸºç¡€","slug":"Linux | Linux ç½‘ç»œç®¡ç†åŸºç¡€","date":"2022-08-15T03:43:49.155Z","updated":"2022-08-15T03:45:32.159Z","comments":true,"path":"2022-08-15-Linux | Linux ç½‘ç»œç®¡ç†åŸºç¡€.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç½‘ç»œæ¥å£ å¯ä»¥ä½¿ç”¨ç½‘ç»œç«¯å£çš„åç§°æ¥è¯†åˆ«å’Œé…ç½®å…¶è¿æ¥ç½‘ç»œçš„æ–¹å¼ã€‚æ—§ç‰ˆçš„ RHEL ä»¥ eth0ã€eth1ã€eth2...ç­‰åç§°å‘½åå„ä¸ªç½‘ç»œæ¥å£ï¼Œè¿™ç§æ–¹å¼å­˜åœ¨ä¸€å®šç¼ºé™·æ•…å·²è¢«æ·˜æ±°ã€‚æ–°ç‰ˆ RHEL é‡‡ç”¨å¦ä¸€ç§å‘½åä½“ç³»ã€‚ç³»ç»Ÿå°†åŸºäºå›ºä»¶ä¿¡æ¯ã€PCIæ€»çº¿æ‹“æ‰‘åŠç½‘ç»œè®¾å¤‡çš„ç±»å‹æ¥åˆ†é…ç½‘ç»œæ¥å£åç§°ï¼Œä¸å†åŸºäºæ£€æµ‹é¡ºåºï¼š â€‹ç½‘ç»œæ¥å£çš„åç§°ä»¥æ¥å£ç±»å‹å¼€å¤´ï¼š ä»¥å¤ªç½‘æ¥å£ä»¥ en å¼€å¤´ï¼› WLAN æ¥å£ä»¥ wl å¼€å¤´ï¼› WWAN æ¥å£ä»¥ ww å¼€å¤´ã€‚ åœ¨ç±»å‹ä¹‹åï¼Œæ¥å£åç§°çš„å…¶ä½™éƒ¨åˆ†å°†åŸºäºæœåŠ¡å™¨å›ºä»¶æ‰€æä¾›çš„ä¿¡æ¯ï¼Œæˆ–ç”± PCI æ‹“æ‰‘ä¸­è®¾å¤‡çš„ä½ç½®ç¡®å®šã€‚ oN ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªæ¿è½½è®¾å¤‡ï¼Œä¸”æœåŠ¡å™¨çš„å›ºä»¶æä¾›è®¾å¤‡çš„ç´¢å¼•ç¼–å· Nã€‚å¦‚ï¼šeno1 ä»£è¡¨æ¿è½½ä»¥å¤ªç½‘è®¾å¤‡ 1ã€‚è®¸å¤šæœåŠ¡å™¨ä¸æä¾›æ­¤ä¿¡æ¯ï¼› sN è¡¨ç¤ºè¯¥è®¾å¤‡ä½äº PCI çƒ­æ’æ‹”æ’æ§½ N ä¸­ï¼› pMsN è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä½äºæ’æ§½ N ä¸­æ€»çº¿ M ä¸Šçš„ PCI è®¾å¤‡ã€‚å¦‚ï¼šwlp4s0 ä»£è¡¨ä½äºæ’æ§½ 0 ä¸­ PCI æ€»çº¿ 4 ä¸Šçš„ WLAN å¡ã€‚è‹¥è¯¥å¡æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½è®¾å¤‡ï¼Œè®¾å¤‡åç§°ä¸­è¿˜ä¼šæ·»åŠ  fP,å¦‚ enp0s1f1ã€‚ æ­¤ç§å‘½åæ–¹æ³•å‘½åçš„è®¾å¤‡çš„åç§°ä¹‹åä¸ä¼šè‡ªåŠ¨å‘ç”Ÿå˜åŒ–ã€‚ IPV6 åœ°å€ IPv6 åœ°å€çš„ç®€å†™ â€‹IPv6 åœ°å€æ˜¯ä¸€ä¸ª 128 ä½æ•°å­—ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºå…«ç»„ä»¥åˆ†å·åˆ†éš”çš„å››ä¸ªåå…­è¿›åˆ¶åŠå­—èŠ‚ã€‚æ¯ä¸ªåŠå­—èŠ‚å‡è¡¨ç¤º 4 ä½çš„ IPv6 åœ°å€ï¼Œå› æ­¤æ¯ä¸ªç»„è¡¨ç¤º 16 ä½çš„ IPv6 åœ°å€ã€‚å¦‚ï¼š â€‹ 2001:0db8:0000:0010:0000:0000:0000:0001 â€‹å…¶ä¸­ï¼Œå†’å·åˆ†å¼€çš„æ¯ç»„ä¸­çš„å‰å¯¼é›¶å¯ä»¥çœç•¥ï¼Œè‹¥ä¸º 0000 ä»éœ€ä¿ç•™ä¸€ä¸ªé›¶ï¼š â€‹ 2001:db8:0:10:0:0:0:1 â€‹å…¶ä¸­ï¼Œä¸€ç»„æˆ–å¤šç»„è¿ç»­é›¶åˆå¯ä»¥é€šè¿‡ä¸€ä¸ª :: å—æ¥åˆå¹¶ï¼š â€‹ 2001:db8:0:10::1 IPv6 åœ°å€ç®€å†™è¯·æ³¨æ„ä»¥ä¸‹åŸåˆ™ï¼š æŠ‘åˆ¶ç»„ä¸­çš„å‰å¯¼é›¶ï¼› ä½¿ç”¨ :: æ¥å°½å¯èƒ½åœ°ç¼©çŸ­ï¼› è‹¥åœ°å€åŒ…å«ä¸¤ä¸ªè¿ç»­çš„é›¶ç»„ï¼Œä¸”é•¿åº¦ç›¸åŒï¼Œåˆ™æœ€å¥½å°†æ¯ä¸ªç»„æœ€å·¦è¾¹çš„é›¶ç»„ç¼©çŸ­ä¸º :: ï¼Œæœ€å³è¾¹çš„ç»„ç¼©çŸ­ä¸º :0:ï¼Œé•¿åº¦ä¸åŒçš„è¯ä½¿ç”¨ :: ç¼©çŸ­æœ€é•¿çš„é›¶ç»„ï¼ŒçŸ­çš„ä½¿ç”¨ :0:ï¼› åå…­è¿›åˆ¶æ•°å­—ä½¿ç”¨å°å†™å­—æ¯è¡¨ç¤ºï¼› åé¢è¦è·Ÿä¸Šç½‘ç»œç«¯å£æ—¶ä½¿ç”¨æ–¹æ‹¬å·å°† IPv6 åœ°å€æ‹¬ä½ï¼Œå¦‚ï¼š[2001:db8:0:10::1]:80ã€‚ IPv6 å­ç½‘åˆ’åˆ† â€‹æ™®é€š IPv6 å•è–„åœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç½‘ç»œå‰ç¼€å’Œæ¥å£ IDã€‚ç½‘ç»œå‰ç¼€æ ‡è¯†å­ç½‘ï¼Œæ¥å£ ID æ ‡è¯†å­ç½‘ä¸­çš„ä»»ä¸€å­ç½‘æ¥å£ï¼›ä¸ IPv4 ä¸åŒï¼ŒIPv6 å…·æœ‰ä¸€ä¸ªæ ‡å‡†çš„å­ç½‘æ©ç  /64ï¼Œç”¨äºå‡ ä¹æ‰€æœ‰æ™®é€šåœ°å€ï¼Œå› æ­¤ä¸€ä¸ª IPv6 åœ°å€å› æ­¤å°±è¢«åˆ†ä¸ºä¸¤åŠï¼Œå…¶ä¸­ä¸€åŠæ˜¯ç½‘ç»œå‰ç¼€ã€ä¸€åŠæ˜¯æ¥å£ IDã€‚ â€‹é€šå¸¸ï¼Œç½‘ç»œæä¾›å•†å°†ä¸ºç»„ç»‡åˆ†é…ä¸€ä¸ªè¾ƒçŸ­çš„å­ç½‘æ©ç ï¼Œå¦‚ /48ã€‚è¿™ä¼šä¿ç•™å…¶ä½™ç½‘ç»œéƒ¨åˆ†ä»¥ç”¨äºé€šè¿‡è¿™ä¸€åˆ†é…çš„å‰ç¼€æ¥æŒ‡å®šå­ç½‘ï¼ˆé•¿åº¦å§‹ç»ˆä¸º /64ï¼‰ã€‚å¯¹äº /48 åˆ†é…ï¼Œå°†ä¿ç•™16ä½ä»¥ç”¨äºå­ç½‘ï¼ˆæœ€å¤š65536ï¼‰ä¸ªå­ç½‘ã€‚ â€‹ä»¥ä¸‹åˆ—ä¸¾éƒ¨åˆ†å¸¸ç”¨ IPv6 åœ°å€å’Œç½‘ç»œï¼š IPv6åœ°å€æˆ–ç½‘ç»œ ç”¨é€” æè¿° ::1/128 æœ¬åœ°ä¸»æœº ç­‰æ•ˆäº IPv4 127.0.0.1/8ï¼Œåœ¨å›ç¯æ¥å£ä¸Šè®¾ç½®ã€‚ :: æœªæŒ‡å®šçš„åœ°å€ ç­‰æ•ˆäº IPv4 0.0.0.0ã€‚å¯¹äºç½‘ç»œæœåŠ¡ï¼Œè¿™å¯èƒ½æ ‡è¯†å…¶æ­£åœ¨ä¾¦å¬æ‰€æœ‰å·²é…ç½®çš„ IP åœ°å€ã€‚ ::/0 é»˜è®¤è·¯ç”±ï¼ˆIPv6äº’è”ç½‘ï¼‰ ç­‰æ•ˆäº IPv4 0.0.0.0/0ã€‚è·¯ç”±è¡¨ä¸­çš„é»˜è®¤è·¯ç”±ä¸æ­¤ç½‘ç»œåŒ¹é…ï¼›æ­¤ç½‘ç»œçš„è·¯ç”±å™¨æ˜¯åœ¨æ²¡æœ‰æ›´å¥½è·¯ç”±çš„æƒ…å†µä¸‹å‘é€æ‰€æœ‰æµé‡çš„ä½ç½®ã€‚ 2000::/3 å…¨å±€å•æ’­åœ°å€ â€æ™®é€šâ€œçš„ IPv6 åœ°å€ï¼Œç›®å‰ç”± IANA ä»è¯¥ç©ºé—´è¿›è¡Œåˆ†é…ã€‚è¿™ç­‰åŒäºèŒƒå›´ä» 2000::/16 åˆ° 3fff::/16 çš„æ‰€æœ‰ç½‘ç»œã€‚ fd00::/8 å”¯ä¸€æœ¬åœ°åœ°å€ï¼ˆRFC 4193ï¼‰ æŒ‡åœ¨ä¸€ä¸ªç»„ç»‡å†…éƒ¨å¯è¾¾çš„ipv6åœ°å€ï¼Œè¿™ç±»åœ°å€ä¸èƒ½å‡ºç°åœ¨internetä¸Šã€‚å…·æœ‰å…¨çƒå”¯ä¸€çš„å‰ç¼€ï¼Œå¯ä»¥è¿›è¡Œç½‘ç»œä¹‹é—´çš„ç§æœ‰è¿æ¥ï¼Œè€Œä¸å¿…æ‹…å¿ƒåœ°å€å†²çªç­‰é—®é¢˜ã€‚å¦‚æœå‡ºç°è·¯ç”±æ³„æ¼ï¼Œä¸ä¼šé€ æˆInternetè·¯ç”±å†²çªã€‚åœ¨åº”ç”¨ä¸­ï¼Œä¸Šå±‚åº”ç”¨ç¨‹åºå°†è¿™äº›åœ°å€çœ‹ä½œå…¨çƒå•æ’­åœ°å€ã€‚ fe80::/10 æœ¬åœ°é“¾è·¯åœ°å€ ç”¨äºé‚»å±…å‘ç°åè®®å’Œæ— çŠ¶æ€è‡ªåŠ¨é…ç½®è¿›ç¨‹ä¸­é“¾è·¯æœ¬åœ°ä¸ŠèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚ä½¿ç”¨é“¾è·¯æœ¬åœ°åœ°å€ä½œä¸ºæºæˆ–ç›®çš„åœ°å€çš„æ•°æ®åŒ…ä¸ä¼šè¢«è½¬å‘åˆ°å…¶ä»–é“¾è·¯ä¸Šã€‚ ff00::/8 å¤šæ’­ ç­‰æ•ˆäº IPv4 224.0.0.0/4ã€‚å¤šæ’­ç”¨äºåŒæ—¶ä¼ è¾“åˆ°å¤šä¸ªä¸»æœºï¼Œå¹¶ä¸”åœ¨ IPv6 ä¸­ç‰¹åˆ«é‡è¦ï¼Œå› ä¸º IPv6 æ²¡æœ‰å¹¿æ’­åœ°å€ã€‚ â€‹IPv6 ä¸­çš„æœ¬åœ°é“¾è·¯åœ°å€æ˜¯ä¸€ä¸ªæ— æ³•è·¯ç”±çš„åœ°å€ã€‚ä»…ç”¨äºä¸ç‰¹å®šç½‘ç»œé“¾è·¯ä¸Šçš„ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚ç³»ç»Ÿä¸Šçš„æ¯ä¸ªç½‘ç»œæ¥å£éƒ½é€šè¿‡ fe80::/64 ç½‘ç»œä¸Šçš„æœ¬åœ°é“¾è·¯åœ°å€æ¥è‡ªåŠ¨é…ç½®ã€‚ä¸ºç¡®ä¿å…¶å”¯ä¸€æ€§ï¼Œæœ¬åœ°é“¾è·¯åœ°å€çš„æ¥å£ ID æ˜¯é€šè¿‡ç½‘ç»œæ¥å£çš„ä»¥å¤ªç½‘ç¡¬ä»¶åœ°å€æ¥æ„å»ºçš„ã€‚ â€‹å°† 48 ä½ MAC åœ°å€è½¬æ¢ä¸º 64 ä½æ¥å£ ID çš„ä¸€èˆ¬æ–¹æ³•æ˜¯åè½¬ 7 ä½çš„ MAC åœ°å€ï¼Œç„¶ååœ¨å…¶ä¸¤ä¸ªä¸­é—´å­—èŠ‚ä¹‹é—´æ’å…¥ ff:feã€‚å¦‚ï¼š ç½‘ç»œå‰ç¼€ï¼šfe80::/64ï¼› MAC åœ°å€ï¼š00:11:22:aa:bb:ccï¼› æœ¬åœ°é“¾è·¯åœ°å€ï¼šfe80::211:22ff:feaa:bbcc/64ã€‚ â€‹å…¶ä»–è®¡ç®—æœºçš„æœ¬åœ°é“¾è·¯åœ°å€å¯ä»¥ç”±ç›¸åŒé“¾è·¯ä¸Šçš„å…¶ä»–ä¸»æœºåƒæ™®é€šåœ°å€é‚£æ ·ä½¿ç”¨ã€‚ç”±äºæ¯ä¸ªé“¾è·¯å…·æœ‰ fe80::/64 ç½‘ç»œï¼Œä¸èƒ½ä½¿ç”¨è·¯ç”±è¡¨æ¥æ­£ç¡®åœ°é€‰æ‹©å‡ºç«™æ¥å£ã€‚åœ¨åœ°å€çš„ç»“å°¾å¿…é¡»ä½¿ç”¨ä½œç”¨åŸŸæ ‡è¯†ç¬¦æ¥æŒ‡å®šä¸æœ¬åœ°é“¾è·¯åœ°å€è¿›è¡Œé€šä¿¡æ—¶ä½¿ç”¨çš„é“¾è·¯ã€‚ä½œç”¨åŸŸæ ‡è¯†ç¬¦ç”± % ä»¥åŠåè·Ÿçš„ç½‘ç»œæ¥å£åç§°ç»„æˆã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ ping6 å¯¹æœ¬åœ°é“¾è·¯åœ°å€ fe80::211:22ff:feaa:bbcc è¿›è¡Œ ping æ“ä½œï¼ˆä½¿ç”¨è¿æ¥åˆ° ens160 ç½‘ç»œæ¥å£çš„é“¾è·¯ï¼‰ï¼Œæ­£ç¡®çš„å‘½ä»¤è¯­æ³•å¦‚ä¸‹ï¼š 1[root@localhost ~]\\# ping6 fe80::211:22ff:feaa:bbcc%ens160 â€‹IPv6 ä¸­çš„ä¸€ä¸ªé‡è¦å¤šæ’­åœ°å€æ˜¯ ff02::1ï¼ˆå…¨èŠ‚ç‚¹æœ¬åœ°é“¾è·¯åœ°å€ï¼‰ï¼Œå¯¹æ­¤åœ°å€è¿›è¡Œ ping æ“ä½œä¼šå°†æµé‡éƒ½å‘é€åˆ°é“¾è·¯ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ 1234[root@localhost ~]\\# ping6 ff02::1%ens160PING ff02::1%ens160(ff02::1%ens160) 56 data bytes64 bytes from fe80::8af6:d265:9b34:f1d6%ens160: icmp_seq=1 ttl=64 time=0.888 ms...... IPv6 åœ°å€é…ç½® â€‹IPv6 ä¹Ÿæ”¯æŒæ‰‹åŠ¨é…ç½®ä»¥åŠä¸¤ç§åŠ¨æ€é…ç½® IPv6 åœ°å€çš„æ–¹æ³•ï¼ŒåŠ¨æ€åˆ†é…æ–¹å¼å…¶ä¸­çš„ä¸€ç§æ˜¯ä½¿ç”¨ DHCPv6 åè®®ã€‚ â€‹åœ¨ IPv6 ä¸­ï¼Œä»¥ä¸‹æ¥å£ ID æ˜¯ä¿ç•™çš„ï¼Œæ— æ³•ç”¨äºä¸»æœºä¸Šçš„æ™®é€šç½‘ç»œåœ°å€ï¼š ç”±é“¾è·¯ä¸Šçš„æ‰€æœ‰è·¯ç”±å™¨ä½¿ç”¨çš„å…¨é›¶æ ‡è¯†ç¬¦ 0000:0000:0000:0000ï¼ˆå­ç½‘è·¯ç”±å™¨ä»»æ„å¹¿æ’­ï¼‰ã€‚ æ ‡è¯†ç¬¦ fdff:ffff:ffff:ff80 åˆ° fdff:ffff:ffff:ffffã€‚ â€‹ç”±äºæ²¡æœ‰å¹¿æ’­åœ°å€ï¼ŒDHCPv6 çš„å·¥ä½œåŸç†ä¸é€‚ç”¨äº IPv4 çš„ DHCP æœ‰æ‰€ä¸åŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸»æœºå°† DHCPv6è¯·æ±‚ä»å…¶æœ¬åœ°é“¾è·¯åœ°å€å‘é€åˆ° ff02::1:2 ä¸Šçš„ç«¯å£ 547/UDPï¼Œå³å…¨ dhcp æœåŠ¡å™¨æœ¬åœ°é“¾è·¯å¤šæ’­ç»„ã€‚ç„¶å DHCPv6 æœåŠ¡å™¨é€šå¸¸å‘å®¢æˆ·ç«¯çš„æœ¬åœ°é“¾è·¯åœ°å€ä¸Šçš„ç«¯å£ 546/UDP å‘é€ä¸€ä¸ªåŒ…å«ç›¸åº”ä¿¡æ¯çš„å›å¤ã€‚æ¶‰åŠè½¯ä»¶åŒ…ï¼šdhcpã€‚ â€‹é™¤äº† DHCPv6 ä¹‹å¤–ï¼ŒIPv6 ä¹Ÿæ”¯æŒå¦å¤–ä¸€ä¸ªåŠ¨æ€é…ç½®æ–¹æ³•ï¼šSLAACï¼ˆæ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®ï¼‰ã€‚ä½¿ç”¨ SLAAC æ—¶ï¼Œä¸»æœºé€šå¸¸ä½¿ç”¨æœ¬åœ°é“¾è·¯ fe80::/64 åœ°å€æ¥è°ƒå‡ºå…¶æ¥å£ã€‚ä¸»æœºéšåå‘ ff02::2ï¼ˆå³ï¼Œå…¨è·¯ç”±å™¨æœ¬åœ°é“¾è·¯å¤šæ’­ç»„ï¼‰å‘é€ä¸€ä¸ªâ€è·¯ç”±å™¨è¯·æ±‚â€œã€‚æœ¬åœ°é“¾è·¯ä¸Šçš„ IPv6 è·¯ç”±å™¨ä»¥ç½‘ç»œå‰ç¼€ä»¥åŠå…¶ä»–å¯èƒ½çš„ä¿¡æ¯æ¥å“åº”ä¸»æœºçš„æœ¬åœ°é“¾è·¯åœ°å€ã€‚ä¸»æœºéšåå°†è¯¥ç½‘ç»œå‰ç¼€ä¸å…¶é€šå¸¸æ„å»ºçš„æ¥å£ IDï¼ˆæ„å»ºæ–¹å¼ä¸æœ¬åœ°é“¾è·¯åœ°å€ç›¸åŒï¼‰é…åˆä½¿ç”¨ã€‚è·¯ç”±å™¨å®šæœŸå‘é€å¤šæ’­æ›´æ–°ï¼ˆè·¯ç”±å™¨æ’­å‘ï¼‰ä»¥ç¡®è®¤æˆ–æ›´æ–°å…¶æä¾›çš„ä¿¡æ¯ã€‚æ¶‰åŠè½¯ä»¶åŒ…ï¼šradvdã€‚ åŸŸåè§£æ â€‹ä½¿ç”¨ ip åœ°å€è¿æ¥æœåŠ¡å™¨ä¼šå¾ˆä¸ä¾¿ï¼Œä½¿ç”¨å…·æœ‰ä¸€å®šä»£è¡¨æ„ä¹‰çš„åç§°æ¥æ ‡è¯†æŸä¸ªä¸»æœºä¼šæ›´åŠ æ–¹ä¾¿ã€‚Linux æœ‰å¤šç§æœºåˆ¶å¯ä»¥å°†ä¸»æœºåæ˜ å°„åˆ° ip åœ°å€ï¼Œç§°ä¸º åŸŸåè§£æã€‚ â€‹ä¸€ç§æ–¹æ³•æ˜¯åœ¨å„ä¸ªç³»ç»Ÿä¸Šçš„ /etc/hosts æ–‡ä»¶ä¸­ä¸ºæ¯ä¸ªåç§°è®¾ç½®ä¸€ä¸ªé™æ€æ¡ç›®ã€‚å¤šå°æœåŠ¡å™¨çš„è¯éœ€è¦æ‰‹åŠ¨æ›´è¡Œæ¯å°æœåŠ¡å™¨çš„æ–‡ä»¶å‰¯æœ¬ï¼Œæ¯”è¾ƒç¹çã€‚ â€‹å¯¹äºå¤§å¤šæ•°ä¸»æœºï¼Œå¯ä»¥ä½¿ç”¨åŸŸåè§£æç½‘ç»œæœåŠ¡ï¼Œä»ä¸»æœºåæŸ¥æ‰¾å…¶åœ°å€ï¼ˆæˆ–è¿›è¡ŒåæŸ¥ï¼‰ã€‚DNSï¼ˆåŸŸåæœåŠ¡å™¨ï¼‰æ˜¯æä¾›ä¸»æœºååˆ° ip åœ°å€æ˜ å°„çš„åˆ†å¸ƒå¼æœåŠ¡å™¨ã€‚åŸŸåæœåŠ¡å™¨æ— éœ€ä¸ä¸»æœºä½äºåŒä¸€å­ç½‘ï¼Œä»…ä»…å¯ä¾›ä¸»æœºè®¿é—®å³å¯ã€‚Linux ä¸­é€šå¸¸é€šè¿‡ /etc/resolv.conf æ–‡ä»¶ä¸­çš„é™æ€è®¾ç½®æ¥é…ç½®å¦‚ä½•æä¾›åŸŸåè§£ææœåŠ¡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç³»ç»Ÿæ—¶é—´ç»´æŠ¤","slug":"Linux | ç³»ç»Ÿæ—¶é—´ç»´æŠ¤","date":"2022-08-15T03:38:56.736Z","updated":"2022-08-15T03:42:21.132Z","comments":true,"path":"2022-08-15-Linux | ç³»ç»Ÿæ—¶é—´ç»´æŠ¤.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E7%BB%B4%E6%8A%A4.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ â€‹ä¸ºäº†ç¡®ä¿ç³»ç»Ÿæ—¥å¿—å’Œæ—¥å¿—è®°å½•çš„äº‹ä»¶æœ‰æ­£ç¡®çš„æ—¶é—´æˆ³ä»¥åŠè®¡ç®—æœºçš„æ­£å¸¸ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ NTP æœåŠ¡ç¡®ä¿ç³»ç»Ÿæ—¶é—´ä¸äº’è”ç½‘æ—¶é—´åŒæ­¥ã€‚ è®¾ç½®æœ¬åœ°æ—¶é’Ÿå’Œæ—¶åŒº â€‹é€šè¿‡ç½‘ç»œæ—¶é—´åè®®ï¼ˆNTPï¼‰ä»äº’è”ç½‘ä¸Šçš„å…¬å…± NTP æœåŠ¡å™¨ä¸Šè·å–æ­£ç¡®çš„æ—¶é—´ä¿¡æ¯æ˜¯ç¡®ä¿æœ¬åœ°ç³»ç»Ÿæ—¶é—´æ­£ç¡®çš„ä¸€ç§æ ‡å‡†æ–¹æ³•ã€‚ â€‹ä½¿ç”¨ timedatectl å‘½ä»¤å¯ä»¥ç®€è¦çš„æ˜¾ç¤ºå‡ºå½“å‰çš„æ—¶é—´ç›¸å…³çš„ç³»ç»Ÿè®¾ç½®ï¼Œå¦‚ç³»ç»Ÿçš„å½“å‰æ—¶é—´ã€æ—¶åŒºå’Œ NTP åŒæ­¥è®¾ç½®ã€‚ 12345678[root@localhost ~]\\# timedatectl Local time: Tue 2021-08-24 18:30:15 PDT Universal time: Wed 2021-08-25 01:30:15 UTC RTC time: Wed 2021-08-25 01:30:15 Time zone: America/Los_Angeles (PDT, -0700)System clock synchronized: yes NTP service: active RTC in local TZ: no â€‹æŸ¥çœ‹ç³»ç»Ÿæ—¶åŒºæ•°æ®åº“çš„å†…å®¹ï¼š 12345[root@localhost ~]\\# timedatectl list-timezonesAfrica/AbidjanAfrica/AccraAfrica/Addis_Ababa...... â€‹è‹¥ä¸çŸ¥é“è‡ªå·±è¯¥ä½¿ç”¨çš„æ—¶åŒºé…ç½®ä¿¡æ¯ï¼Œåˆ™å¯ä»¥é€šè¿‡ tzselect å‘½ä»¤æ¥äº¤äº’å¼çš„æ¨æ–­å‡ºé€‚åˆè‡ªå·±çš„æ—¶åŒºé…ç½®ä¿¡æ¯ã€‚è¯¥å‘½ä»¤å¹¶ä¸ä¼šå¯¹ç³»ç»Ÿçš„æ—¶åŒºè®¾ç½®è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ â€‹æ›´æ”¹å½“å‰æ—¶åŒºéœ€è¦ root æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ timedatectl set-timezone å‘½ä»¤æ›´æ”¹ç³»ç»Ÿè®¾ç½®æ›´æ–°å½“å‰æ—¶åŒºã€‚ 123456789[root@localhost ~]\\# timedatectl set-timezone Asia/Shanghai[root@localhost ~]\\# timedatectl Local time: Wed 2021-08-25 09:47:26 CST Universal time: Wed 2021-08-25 01:47:26 UTC RTC time: Wed 2021-08-25 01:47:25 Time zone: Asia/Shanghai (CST, +0800)System clock synchronized: yes NTP service: active RTC in local TZ: no ğŸŸ¢ è‹¥è¦ä½¿ç”¨ UTC å¯ä»¥ä½¿ç”¨ timedatectl set-timezone UTC å‘½ä»¤å°†ç³»ç»Ÿå½“å‰æ—¶åŒºè®¾ç½®ä¸º UTCã€‚ â€‹å¼€å¯æˆ–ç¦ç”¨ NTP æœåŠ¡ï¼š 1[root@localhost ~]\\# timedatectl set-ntp false # å…³é—­ NTPï¼Œtrue ä¸ºå¼€å¯ é…ç½®å’Œç›‘æ§ CHRONYD æœ¬åœ° linux ç³»ç»Ÿé€šè¿‡ chronyd æœåŠ¡ä¸é…ç½®çš„ NTP æœåŠ¡å™¨åŒæ­¥æ¥ä¿è¯ä¸å‡†ç¡®çš„æœ¬åœ°ç¡¬ä»¶æ—¶é’Ÿï¼ˆRTCï¼‰ä¿æŒæ­£ç¡®è¿è¡Œã€‚è‹¥æ²¡æœ‰å¯ç”¨çš„ç½‘ç»œè¿æ¥ï¼Œchronyd å°†è®¡ç®— RTC æ—¶é’Ÿæ¼‚ç§»ï¼Œè®°å½•åœ¨ /etc/chrony.conf é…ç½®æ–‡ä»¶æŒ‡å®šçš„ driftfile å˜é‡ä¸­ã€‚ â€‹é»˜è®¤æƒ…å†µä¸‹ä¸éœ€è¦é…ç½® chronyd æœåŠ¡ä½¿ç”¨çš„æˆæ—¶æœåŠ¡å™¨é…ç½®ï¼Œä½†å½“æœ¬åœ°ç³»ç»Ÿå¤„äºå­¤ç«‹ç½‘ç»œä¸­æ—¶ï¼Œå°±å¯èƒ½éœ€è¦æ›´æ”¹ NTP æœåŠ¡å™¨ã€‚ â€‹NTP æ—¶é—´æºçš„ stratum å†³å®šå…¶è´¨é‡ã€‚stratum ç¡®å®šè®¡ç®—æœºä¸é«˜æ€§èƒ½å‚è€ƒæ—¶é’Ÿåç¦»çš„è·ƒç‚¹æ•°ã€‚å‚è€ƒæ—¶é’Ÿæ˜¯ stratum 0 çš„æ—¶é—´æºã€‚ä¸ä¹‹ç›´æ¥å…³è”çš„ NTP æœåŠ¡å™¨æ˜¯ stratum 1ï¼Œè€Œä¸è¯¥ NTP æœåŠ¡å™¨åŒæ­¥æ—¶é—´çš„è®¡ç®—æœºåˆ™æ˜¯ stratum 2 æ—¶é—´æºã€‚ â€‹åœ¨ /etc/chrony.conf é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬å¯ä»¥é…ç½®ä»ä¸¤ç§æ—¶é—´æºç±»åˆ«è¿›è¡ŒåŒæ­¥ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ server å’Œ peerã€‚Server æ¯”æœ¬åœ° NTP æœåŠ¡å™¨é«˜ä¸€ä¸ªçº§åˆ«ï¼Œè€Œ peer åˆ™å±äºåŒä¸€çº§åˆ«ã€‚å¯ä»¥æŒ‡å®šå¤šä¸ª server å’Œå¤šä¸ª peerï¼Œæ¯è¡ŒæŒ‡å®šä¸€ä¸ªã€‚ â€‹æ·»åŠ ä¸€ä¸ªæˆæ—¶æœåŠ¡å™¨çš„å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š 1234# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).# ......server ipæˆ–è€…åŸŸå é€‰é¡¹[å¸¸ç”¨ iburst] ğŸŸ¢ ä¿®æ”¹ chronyd é…ç½®æ–‡ä»¶ååº”è¯¥é‡æ–°å¯åŠ¨è¯¥æœåŠ¡ï¼Œè¯¥æœåŠ¡ä¸æ”¯æŒ reloadã€‚ â€‹chronyc å‘½ä»¤å……å½“ chronyd æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚è®¾ç½®å¥½ NTP åŒæ­¥åï¼Œåº”è¯¥ä½¿ç”¨ chronyc sources å‘½ä»¤æ¥éªŒè¯æœ¬åœ°ç³»ç»Ÿæ˜¯å¦ä½¿ç”¨ NTP æœåŠ¡å™¨æ— ç¼åŒæ­¥ç³»ç»Ÿæ—¶é’Ÿï¼Œä½¿ç”¨ -v é€‰é¡¹å¯ä»¥è·å¾—æ›´åŠ è¯¦ç»†çš„è¾“å‡ºã€‚ [root@localhost ~]\\# chronyc sources -v 210 Number of sources = 4 .-- Source mode '^' = server, '=' = peer, '#' = local clock. / .- Source state '*' = current synced, '+' = combined , '-' = not combined, | / '?' = unreachable, 'x' = time may be in error, '~' = time too variable. || .- xxxx [ yyyy ] +/- zzzz || Reachability register (octal) -. | xxxx = adjusted offset, || Log2(Polling interval) --. | | yyyy = measured offset, || \\ | | zzzz = estimated error. || | | \\ MS Name/IP address Stratum Poll Reach LastRx Last sample =============================================================================== ^+ time.cloudflare.com 3 6 377 35 -8470us[ -12ms] +/- 139ms ^- time.cloudflare.com 3 6 37 34 -6035us[-9624us] +/- 128ms ^* 139.199.215.251 2 6 173 32 -16ms[ -20ms] +/- 78ms ^- ntp7.flashdance.cx 2 6 162 162 -7138us[ -13ms] +/- 163ms ``","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"åˆ†æå’Œå­˜å‚¨ç³»ç»Ÿæ—¥å¿—","slug":"Linux | åˆ†æå’Œå­˜å‚¨ç³»ç»Ÿæ—¥å¿—","date":"2022-08-15T03:29:18.977Z","updated":"2022-08-15T03:38:21.121Z","comments":true,"path":"2022-08-15-Linux | åˆ†æå’Œå­˜å‚¨ç³»ç»Ÿæ—¥å¿—.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E5%88%86%E6%9E%90%E5%92%8C%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç³»ç»Ÿæ—¥å¿—æ¦‚è¿° â€‹è¿›ç¨‹å’Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šä»¥å‘ç”Ÿçš„å…·ä½“äº‹ä»¶è®°å½•æ—¥å¿—ï¼Œè¿™äº›æ—¥å¿—å¯ç”¨äºç³»ç»Ÿå®¡æ ¸å’Œé—®é¢˜çš„æ•…éšœæ’é™¤ã€‚ â€‹è®¸å¤šç³»ç»Ÿä»¥æ–‡æœ¬æ–‡ä»¶çš„å½¢å¼å­˜å‚¨æ—¥å¿—ï¼Œå®ƒä»¬ä¸€èˆ¬éƒ½è¢«ä¿å­˜åœ¨ /var/log ç›®å½•ä¸‹ã€‚RHEL å†…å»ºäº†ä¸€ä¸ªåŸºäº Syslog åè®®çš„æ ‡å‡†æ—¥å¿—è®°å½•ç³»ç»Ÿã€‚systemd-journald å’Œ rsyslog æœåŠ¡å¤„ç†çº¢å¸½ä¼ä¸š linux 8 ä¸­çš„ syslog æ¶ˆæ¯ã€‚ Systemd-journald æœåŠ¡æ˜¯æ“ä½œç³»ç»Ÿäº‹ä»¶æ—¥å¿—æ¶æ„çš„æ ¸å¿ƒã€‚å®ƒæ”¶é›†è®¸å¤šæ¥æºçš„äº‹ä»¶æ¶ˆæ¯ï¼ŒåŒ…æ‹¬å†…æ ¸ã€å¼•å¯¼è¿‡ç¨‹æ—©æœŸé˜¶æ®µçš„è¾“å‡ºã€å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨å’Œè¿è¡Œæ—¶çš„æ ‡å‡†è¾“å‡ºåŠæ ‡å‡†é”™è¯¯ï¼Œä»¥åŠ syslog äº‹ä»¶ã€‚ç„¶åï¼Œä»–ä¼šå°†å®ƒä»¬é‡æ„ä¸ºä¸€ç§æ ‡å‡†æ ¼å¼ï¼Œå¹¶å†™è¿›å¸¦æœ‰ç´¢å¼•çš„ç»“æ„åŒ–ç³»ç»Ÿæ—¥ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ—¥å¿—å­˜å‚¨åœ¨ç³»ç»Ÿé‡å¯åä¸ä¿ç•™çš„æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚ Rsyslog æœåŠ¡å¯¹ syslog æ¶ˆæ¯è¿›è¡Œæ’åºï¼Œå¹¶å°†å®ƒä»¬å†™å…¥åˆ°åœ¨ç³»ç»Ÿé‡å¯åä¸ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶ä¸­(/var/log)ã€‚rsyslog æœåŠ¡ä¼šæ ¹æ®å‘é€æ¯æ¡æ¶ˆæ¯çš„ç¨‹åºç±»å‹æˆ–è®¾å¤‡ä»¥åŠæ¯æ¡ syslog æ¶ˆæ¯çš„ä¼˜å…ˆçº§ï¼Œå°†æ—¥å¿—æ¶ˆæ¯æ’åºåˆ°ç‰¹å®šçš„æ—¥å¿—æ–‡ä»¶ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›é‡è¦çš„æ—¥å¿—æ–‡ä»¶ï¼š æ—¥å¿—æ–‡ä»¶ æè¿° /var/log/messages åŒ…å«å…¨å±€ç³»ç»Ÿæ¶ˆæ¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå¯åŠ¨æœŸé—´è®°å½•çš„æ¶ˆæ¯ã€‚è¯¥æ–‡ä»¶å­˜å‚¨é‚®ä»¶ã€ä½œä¸šè°ƒåº¦ã€ä»»åŠ¡è®¡åˆ’ã€å®ˆæŠ¤ç¨‹åºã€å†…æ ¸ã€æˆæƒã€è°ƒè¯•ç­‰æ¨¡å—çš„ä¿¡æ¯ã€‚ /var/log/boot.log åŒ…å«ä¸ç³»ç»Ÿå¯åŠ¨ç›¸å…³çš„é syslog æ§åˆ¶å°æ¶ˆæ¯ã€‚ /var/log/lastlog æ˜¾ç¤ºæœ€è¿‘æ‰€æœ‰ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€‚åªèƒ½é€šè¿‡ lastlog å‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ /var/log/maillog åŒ…å«ç³»ç»Ÿä¸­è¿è¡Œçš„é‚®ä»¶æœåŠ¡å™¨çš„æ—¥å¿—ä¿¡æ¯ã€‚å¦‚ sendmail æ—¥å¿—åŒ…å«æ‰€æœ‰å·²å‘é€çš„é‚®ä»¶çš„ä¿¡æ¯ã€‚ /var/log/btmp åŒ…å«å¤±è´¥çš„å°è¯•ç™»é™†çš„ä¿¡æ¯ã€‚ä½¿ç”¨ last å‘½ä»¤æ¥é¢„è§ˆè¿™ä¸ªæ–‡ä»¶ã€‚å¦‚ï¼š`last -f /var/log/btmp /var/log/cups æ‰€æœ‰å’Œæ‰“å°æˆ–æ‰“å°ç›¸å…³çš„æ—¥å¿—æ¶ˆæ¯ã€‚ /var/log/dnf.rpm.log è®°å½•å’Œè½¯ä»¶åŒ…å®‰è£…çš„ç›¸å…³æ—¥å¿—ã€‚ /var/log/secure åŒ…å«è®¤è¯ä¸æˆæƒç›¸å…³çš„ä¿¡æ¯ã€‚sshd åœ¨æ­¤è®°å½•æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…å«å¤±è´¥çš„ç™»é™†ã€‚ /var/log/wtmp æ‰€æœ‰ç™»é™†è®°å½•ã€‚ä½¿ç”¨ wtmp å¯ä»¥æŒ‡å‡ºè°ç™»é™†äº†ç³»ç»Ÿï¼Œä»¥åŠè°çœ‹äº†è¿™ä¸ªä¿¡æ¯ã€‚ /var/log/audit åŒ…å« Linux æˆæƒå®ˆæŠ¤è¿›ç¨‹ï¼ˆauditdï¼‰å­˜å‚¨çš„ä¿¡æ¯ã€‚ /var/log/samba åŒ…å« samba æœåŠ¡çš„ä¿¡æ¯ã€‚ /var/log/sssd ç³»ç»Ÿå®‰å…¨æœåŠ¡å®ˆæŠ¤ç¨‹åºç”¨äºç®¡ç†è¿œç¨‹ç›®å½•å’Œèº«ä»½éªŒè¯æœºåˆ¶çš„è®¿é—®ã€‚ /var/log/cron ä¸è°ƒåº¦ä½œä¸šæ‰§è¡Œç›¸å…³çš„æ¶ˆæ¯ã€‚ ğŸŸ¢ æœ‰äº›åº”ç”¨ä¸ä½¿ç”¨ syslog ç®¡ç†ä»–ä»¬çš„æ—¥å¿—æ¶ˆæ¯ï¼Œä½†å®ƒä»¬ä»å°†å…¶æ—¥å¿—æ–‡ä»¶æ”¾åœ¨ /var/log çš„æŸä¸€å­ç›®å½•ä¸­ã€‚ æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ â€‹Syslogï¼Œå…¶è¿›ç¨‹åä¸º rsyslogï¼Œæ ¹æ®è®¾å¤‡æ—¥å¿—æ¶ˆæ¯çš„ä¸¥é‡ç¨‹åº¦å°†æ—¥å¿—åˆ†äº†å…«ä¸ªä¼˜å…ˆçº§ã€‚ ä»£ç  ä¼˜å…ˆçº§ ä¸¥é‡æ€§ 0 emerg ç³»ç»Ÿä¸å¯ç”¨ 1 alert å¿…é¡»ç«‹å³é‡‡å–æªæ–½ 2 crit ä¸´ç•Œæƒ…å†µ 3 err éä¸¥é‡é”™è¯¯çŠ¶å†µ 4 warning è­¦å‘Šæƒ…å†µ 5 notice æ­£å¸¸ä½†é‡è¦çš„äº‹ä»¶ 6 info ä¿¡æ¯æ€§äº‹ä»¶ 7 debug è°ƒè¯•çº§åˆ«æ¶ˆæ¯ â€‹Rsyslog æœåŠ¡ä½¿ç”¨æ—¥å¿—æ¶ˆæ¯çš„è®¾å¤‡å’Œä¼˜å…ˆçº§æ¥ç¡®å®šå¦‚ä½•è¿›è¡Œå¤„ç†ã€‚å…¶é…ç½®è§„åˆ™ä½äº /etc/rsyslog.conf æ–‡ä»¶å’Œ /etc/rsyslog.d ç›®å½•ä¸­æ‹“å±•åä¸º .conf çš„ä»»ä½•æ–‡ä»¶ã€‚é€šè¿‡åœ¨ /etc/rsyslog.d ç›®å½•ä¸­æ·»åŠ é€‚å½“çš„æ–‡ä»¶ï¼ŒæŸåº”ç”¨çš„è½¯ä»¶åŒ…å¯ä»¥è½»æ¾çš„æ·»åŠ å±äºè‡ªå·±çš„æ—¥å¿—è¾“å‡ºè§„åˆ™ã€‚ â€‹æ¯ä¸ªæ§åˆ¶ç€ syslog æ¶ˆæ¯æ’åºæ–¹å¼çš„è§„åˆ™éƒ½å¯¹åº”äº†å…¶ä¸­ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„ä¸€è¡Œã€‚å¦‚ï¼š 123# Log anything (except mail) of level info or higher.# Don&#x27;t log private authentication messages!*.info;mail.none;authpriv.none;cron.none /var/log/messages â€‹å…¶ä¸­ï¼Œæ¯è¡Œå·¦ä¾§è¡¨ç¤ºä¸è§„åˆ™åŒ¹é…çš„ syslog æ¶ˆæ¯çš„è®¾å¤‡å’Œä¸¥é‡æ€§ã€‚æ¯è¡Œå³ä¾§è¡¨ç¤ºè¦å°†æ—¥å¿—æ¶ˆæ¯ä¿å­˜åˆ°çš„æ–‡ä»¶ï¼ˆæˆ–æ¶ˆæ¯æ‰€è¦å‘é€åˆ°çš„å…¶ä»–ä½ç½®ï¼‰ã€‚æ˜Ÿå·(*)æ˜¯ä¸€ä¸ªåŒ¹é…æ‰€æœ‰å€¼çš„é€šé…ç¬¦ã€‚ ğŸŸ¢ ä½¿ç”¨ logger å‘½ä»¤å¯ä»¥æ‰‹åŠ¨å¾€ç³»ç»Ÿæ—¥å¿—ä¸­æ·»åŠ ä¿¡æ¯ï¼Œä½¿ç”¨æ–¹æ³•è¯¦è§ man page: logger(1)ã€‚ 123[root@localhost ~]\\# logger -p user.info &quot;Test User Log&quot; # -p é€‰é¡¹æŒ‡å®šä¼˜å…ˆçº§[root@localhost ~]\\# tail -n 1 -f /var/log/messagesAug 23 21:22:22 localhost root[3276]: Test User Log æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ¡ç›® â€‹Systemd-journal æœåŠ¡å°†æ—¥å¿—æ•°æ®å­˜å‚¨åœ¨å¸¦æœ‰ç´¢å¼•çš„ç»“æ„åŒ–äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶ç§°ä¸ºæ—¥å¿—ã€‚æ­¤æ•°æ®åŒ…å«ä¸æ—¥å¿—äº‹ä»¶ç›¸å…³çš„é¢å¤–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¯¹äº syslog äº‹ä»¶ï¼Œè¿™å¯åŒ…å«åŸå§‹æ¶ˆæ¯çš„è®¾å¤‡å’Œä¼˜å…ˆçº§ã€‚ ğŸŸ¢ ç³»ç»Ÿè¿è¡Œæ—¥å¿—é»˜è®¤å­˜å‚¨åœ¨ /run/log ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•ä¸‹çš„å†…å®¹ä¼šåœ¨ç³»ç»Ÿé‡å¯åæ¸…é™¤ã€‚ â€‹è‹¥è¦ä»ç³»ç»Ÿè¿è¡Œæ—¥å¿—ä¸­æ£€ç´¢æ—¥å¿—æ¶ˆæ¯ï¼Œå¯ä½¿ç”¨ journalctl å‘½ä»¤ã€‚å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æ¥æŸ¥çœ‹æ—¥å¿—ä¸­çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œæˆ–æ ¹æ®å„ç§é€‰é¡¹å’Œæ ‡å‡†æ¥æœç´¢ç‰¹å®šäº‹ä»¶ã€‚å¦‚æœä»¥ root èº«ä»½è¿è¡Œè¯¥å‘½ä»¤ï¼Œåˆ™å¯¹æ—¥å¿—å…·æœ‰å®Œå…¨è®¿é—®æƒé™ã€‚æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œä½†å¯èƒ½ä¼šè¢«é™åˆ¶æŸ¥çœ‹æŸäº›æ¶ˆæ¯ã€‚ 12345678journalctl [OPTIONS...] [MATCHES] # æŸ¥è¯¢ systemd æ—¥å¿—# ä¾‹å­root@localhost ~]\\# journalctl # ä¸å¸¦å‚æ•°é»˜è®¤è¾“å‡º system.journal çš„æ‰€æœ‰å†…å®¹-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Mon 2021-08-23 21:38:22 PDT. --Aug 23 21:08:56 localhost.localdomain kernel: Linux version 4.18.0-240.el8.x86_64 (mockbuild@x86-vm-09.build.eng.bos.redhat.com) (gcc version 8.3.1 20191121&gt;Aug 23 21:08:56 localhost.localdomain kernel: Command line: BOOT_IMAGE=(hd0,msdos1)/vmlinuz-4.18.0-240.el8.x86_64 root=UUID=360e2f42-d6de-4209-8487-f36b7cc6&gt;Aug 23 21:08:56 localhost.localdomain kernel: Disabled fast string operations...... â€‹journalctl å‘½ä»¤çªå‡ºæ˜¾ç¤ºé‡è¦çš„æ—¥å¿—æ¶ˆæ¯ï¼šä¼˜å…ˆçº§ä¸º notice æˆ– warning çš„æ¶ˆæ¯æ˜¾ç¤ºä¸ºç²—ä½“æ–‡æœ¬ï¼Œè€Œä¼˜å…ˆçº§ä¸º error æˆ–ä»¥ä¸Šçš„æ¶ˆæ¯åˆ™æ˜¾ç¤ºä¸ºçº¢è‰²æ–‡æœ¬ã€‚ â€‹æˆåŠŸåˆ©ç”¨æ—¥å¿—è¿›è¡Œæ•…éšœæ’é™¤å’Œå®¡æ ¸çš„å…³é”®åœ¨äºï¼Œå°†æ—¥å¿—æœç´¢é™åˆ¶ä¸ºä»…æ˜¾ç¤ºç›¸å…³çš„è¾“å‡ºã€‚ â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œjournalctl -n æ˜¾ç¤ºæœ€å 10 ä¸ªæ¡ç›®ï¼Œå¯åœ¨å‚æ•°åé¢æŒ‡å®šå…·ä½“æ˜¾ç¤ºçš„æ¡æ•°ã€‚ 12345[root@localhost ~]\\# journalctl -n 3-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Mon 2021-08-23 21:40:06 PDT. --Aug 23 21:38:22 localhost.localdomain systemd-logind[1137]: New session 8 of user root.Aug 23 21:38:22 localhost.localdomain sshd[3450]: pam_unix(sshd:session): session opened for user root by (uid=0)Aug 23 21:40:06 localhost.localdomain chronyd[1070]: Source 2602:fcad:1::10 replaced with 124.108.20.1 â€‹ç±»ä¼¼ tail -fï¼Œjournalctl -f ä¹Ÿå¯ä»¥å®ç°æ—¥å¿—å†…å®¹çš„å®æ—¶æ›´æ–°ï¼š 123456789101112[root@localhost ~]\\# journalctl -f-- Logs begin at Mon 2021-08-23 21:08:56 PDT. --Aug 23 21:38:22 localhost.localdomain sshd[3441]: Accepted password for root from 172.16.1.195 port 6922 ssh2Aug 23 21:38:22 localhost.localdomain systemd-logind[1137]: New session 7 of user root.Aug 23 21:38:22 localhost.localdomain systemd[1]: Started Session 7 of user root.Aug 23 21:38:22 localhost.localdomain sshd[3441]: pam_unix(sshd:session): session opened for user root by (uid=0)Aug 23 21:38:22 localhost.localdomain sshd[3450]: Accepted password for root from 172.16.1.195 port 6925 ssh2Aug 23 21:38:22 localhost.localdomain systemd[1]: Started Session 8 of user root.Aug 23 21:38:22 localhost.localdomain systemd-logind[1137]: New session 8 of user root.Aug 23 21:38:22 localhost.localdomain sshd[3450]: pam_unix(sshd:session): session opened for user root by (uid=0)Aug 23 21:40:06 localhost.localdomain chronyd[1070]: Source 2602:fcad:1::10 replaced with 124.108.20.1Aug 23 21:48:56 localhost.localdomain PackageKit[2105]: search-file transaction /131_bcadadca from uid 0 finished with success after 27ms â€‹ä½¿ç”¨ -p é€‰é¡¹å¯ä»¥æ ¹æ®æ—¥å¿—çš„ä¼˜å…ˆçº§è¿‡æ»¤æ—¥å¿—è¾“å‡ºï¼Œå…¶ä¸­å‚æ•°å¯æŒ‡å®šä¼˜å…ˆçº§çš„åç§°æˆ–ç¼–å·ï¼Œjournalctl -p å‘½ä»¤ä¼šæ˜¾ç¤ºè¯¥ä¼˜å…ˆçº§åŠä»¥ä¸Šçš„æ—¥å¿—è¾“å‡ºã€‚ 123[root@localhost ~]\\# journalctl -p err-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Mon 2021-08-23 21:48:56 PDT. --Aug 23 21:09:14 localhost.localdomain kernel: piix4_smbus 0000:00:07.3: SMBus Host Controller not enabled! â€‹åœ¨æŸ¥æ‰¾å…·ä½“äº‹ä»¶æ—¶ï¼Œå¯ä»¥å°†è¾“å‡ºé™åˆ¶ä¸ºæŸä¸€ç‰¹å®šçš„æ—¶é—´æ®µã€‚--since å’Œ --until é€‰é¡¹ï¼Œå®ƒä»¬å¯ä»¥å°†è¾“å‡ºé™åˆ¶ä¸ºç‰¹å®šçš„æ—¶é—´èŒƒå›´ã€‚å…¶å‚æ•°çš„å…·ä½“æ ¼å¼é™åˆ¶ä¸º YYYY-MM-DDhh:mm:ssï¼Œé™¤äº†è¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œå…¶è¿˜æ¥å— yesterdayã€today å’Œ tomorrow ä½œä¸ºæœ‰æ•ˆå‚æ•°ã€‚ 1234567[root@localhost ~]\\# journalctl --since &quot;2021-08-23 22:00:00&quot; --until &quot;2021-08-23 22:05:00&quot;-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Tue 2021-08-24 01:22:49 PDT. --Aug 23 22:01:01 localhost.localdomain CROND[3760]: (root) CMD (run-parts /etc/cron.hourly)Aug 23 22:01:01 localhost.localdomain run-parts[3763]: (/etc/cron.hourly) starting 0anacronAug 23 22:01:01 localhost.localdomain anacron[3769]: Anacron started on 2021-08-23Aug 23 22:01:01 localhost.localdomain run-parts[3771]: (/etc/cron.hourly) finished 0anacronAug 23 22:01:01 localhost.localdomain anacron[3769]: Normal exit (0 jobs run) â€‹ä¹Ÿå¯ä»¥æŒ‡å®šç›¸å¯¹äºå½“å‰çš„æŸä¸ªæ—¶é—´ä»¥åçš„æ‰€æœ‰æ¡ç›®ã€‚ 1234567[root@localhost ~]# journalctl --since &quot;-1.1 hour&quot;-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Tue 2021-08-24 01:22:49 PDT. --Aug 24 01:01:01 localhost.localdomain CROND[5331]: (root) CMD (run-parts /etc/cron.hourly)Aug 24 01:01:01 localhost.localdomain run-parts[5334]: (/etc/cron.hourly) starting 0anacronAug 24 01:01:01 localhost.localdomain run-parts[5342]: (/etc/cron.hourly) finished 0anacronAug 24 01:01:01 localhost.localdomain anacron[5340]: Anacron started on 2021-08-24Aug 24 01:01:01 localhost.localdomain anacron[5340]: Normal exit (0 jobs run) ğŸŸ¢ --since å’Œ --until æ”¯æŒçš„æ›´å¤æ‚çš„æ—¶é—´æ ¼å¼å¯å‚è§ systemd.time(7) man pageã€‚ â€‹å¯ä»¥ä½¿ç”¨ journalctl -o å‘½ä»¤ä»¥ç‰¹å®šçš„æ¨¡å¼ï¼ˆverbose/export/json ç­‰ï¼‰è¾“å‡ºã€‚ 123456[root@localhost ~]\\# journalctl -o verbose-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Tue 2021-08-24 &gt;Mon 2021-08-23 21:08:56.476108 PDT [s=ac8c7a315ec04e1c98b39f3eba4fe1&gt; _SOURCE_MONOTONIC_TIMESTAMP=0 _TRANSPORT=kernel PRIORITY=5 â€‹ä¸€äº›ç‰¹å®šçš„ç³»ç»Ÿæ—¥å¿—ç­›é€‰å¸¸ç”¨å­—æ®µï¼Œå¯ç”¨äºæœç´¢ä¸ç‰¹å®šè¿›ç¨‹æˆ–äº‹ä»¶ç›¸å…³çš„è¡Œã€‚ ç­›é€‰é€‰é¡¹ ä½œç”¨ _COMM æŒ‡å®šå‘½ä»¤çš„åç§° _EXE æŒ‡å®šè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ _PID æŒ‡å®šè¿›ç¨‹çš„ PID _UID æŒ‡å®šè¿è¡Œè¯¥è¿›ç¨‹çš„ç”¨æˆ·çš„ UID _SYSTEMD_UNIT æŒ‡å®šå¯åŠ¨è¯¥è¿›ç¨‹çš„ systemd å•å…ƒ â€‹ä¹Ÿå¯ä»¥ç»„åˆå¤šä¸ªç³»ç»Ÿæ—¥å¿—å­—æ®µä»¥å®ç°æ›´åŠ ç²¾ç»†çš„æœç´¢æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š 12345678910[root@localhost ~]\\# journalctl -n 3 _SYSTEMD_UNIT=sshd.service _UID=0 # ä¸æ“ä½œ-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Tue 2021-08-24 02:03:19 PDT. --Aug 23 21:38:22 localhost.localdomain sshd[3441]: pam_unix(sshd:session): session opened for user root by (uid=0)Aug 23 21:38:22 localhost.localdomain sshd[3450]: Accepted password for root from 172.16.1.195 port 6925 ssh2Aug 23 21:38:22 localhost.localdomain sshd[3450]: pam_unix(sshd:session): session opened for user root by (uid=0)[root@localhost ~]\\# journalctl _COMM=sshd + _PID=1247 # æˆ–æ“ä½œ-- Logs begin at Mon 2021-08-23 21:08:56 PDT, end at Tue 2021-08-24 02:03:19 PDT. --Aug 23 21:09:31 localhost.localdomain sshd[1251]: Server listening on 0.0.0.0 port 22.Aug 23 21:09:31 localhost.localdomain sshd[1251]: Server listening on :: port 22.Aug 23 21:11:38 localhost.localdomain cupsd[1247]: REQUEST localhost - - &quot;POST / HTTP/1.1&quot; 200 363 Create-Printer-Subscriptions successful-ok ä¿ç•™ç³»ç»Ÿæ—¥å¿— â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ—¥å¿—ä¿å­˜åœ¨ /run/log/journal ç›®å½•ä¸­ï¼Œè¿™æ„å‘³ç€ç³»ç»Ÿé‡å¯æ—¶è¿™äº›æ—¥å¿—ä¼šè¢«æ¸…é™¤ã€‚å¯ä»¥åœ¨ /etc/systemd/journald.conf æ–‡ä»¶ä¸­æ›´æ”¹ systemd-journald æœåŠ¡çš„é…ç½®è®¾ç½®ï¼Œä½¿æ—¥å¿—åœ¨ç³»ç»Ÿé‡å¯åä¿ç•™ä¸‹æ¥ã€‚ â€‹/etc/systemd/journald.conf æ–‡ä»¶ä¸­çš„ Storage å‚æ•°å†³å®šç³»ç»Ÿæ—¥å¿—ä»¥æ˜“å¤±æ€§æ–¹å¼å­˜å‚¨ï¼Œè¿˜æ˜¯åœ¨ç³»ç»Ÿé‡å¯åæŒä¹…ä¿ç•™ï¼Œè¯¥å‚æ•°çš„å¯é€‰å€¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š å€¼ æ—¥å¿—å­˜å‚¨ä½ç½® è¯´æ˜ persistent /var/log/journal æŒä¹…ä¿ç•™ï¼Œè‹¥è¯¥ç›®å½•ä¸å­˜åœ¨ï¼Œsystemd-journald æœåŠ¡ä¼šè‡ªåŠ¨åˆ›å»ºã€‚ volatile /run/log/journal å­˜æ”¾åœ¨å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼Œ/run ç›®å½•ä¸‹çš„å†…å®¹é‡å¯åä¸¢å¤±ã€‚ autoï¼ˆé»˜è®¤ï¼‰ ä»¥ä¸Šä¸¤è€…ä»»ä¸€ é»˜è®¤ /run/log/journalï¼Œä½†è‹¥ /var/log/journal ç›®å½•å­˜åœ¨ï¼Œåˆ™å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚ æŒä¹…ç³»ç»Ÿæ—¥å¿—çš„ä¼˜ç‚¹æ˜¯ç³»ç»Ÿå¯åŠ¨åå°±å¯ç«‹å³åˆ©ç”¨å†å²æ•°æ®ã€‚ å³ä¾¿æ˜¯æŒä¹…æ—¥å¿—ï¼Œå¹¶éæ‰€æœ‰æ•°æ®éƒ½å°†æ°¸ä¹…ä¿ç•™ï¼Œæ­¤æ—¥å¿—é¡¹å…·æœ‰ä¸€ä¸ªå†…ç½®çš„æ—¥å¿—è½®è½¬æœºåˆ¶ä¼šæ¯æœˆè§¦å‘ã€‚ ä¿®æ”¹æ—¥å¿—å­˜å‚¨é…ç½®æ–‡ä»¶éœ€è¦é‡æ–°è½½å…¥è¯¥æœåŠ¡ï¼Œç›¸å…³å†…å®¹å¯å‚è§ 13. æ§åˆ¶æœåŠ¡å’Œå®ˆæŠ¤è¿›ç¨‹ ç« èŠ‚ã€‚ â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œæ—¥å¿—çš„å¤§å°ä¸èƒ½è¶…è¿‡æ‰€å¤„æ–‡ä»¶ç³»ç»Ÿçš„ 10%ï¼Œä¹Ÿä¸èƒ½é€ æˆæ–‡ä»¶ç³»ç»Ÿçš„å¯ç”¨ç©ºé—´ä½äº 15%ï¼Œå¯ä»¥åœ¨ /etc/systemd/journald.conf ä¸­ä¸ºè¿è¡Œæ—¶å’ŒæŒä¹…æ—¥å¿—è°ƒæ•´è¿™äº›å€¼ã€‚å½“ systemd-journald è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šè®°å½•å½“å‰çš„æ—¥å¿—å¤§å°é™é¢ã€‚ â€‹ä»¥ä¸‹å‘½ä»¤è¾“å‡ºæ˜¾ç¤ºäº†åæ˜ å½“å‰å¤§å°é™é¢çš„æ—¥å¿—æ¡ç›®ï¼š 123456[root@localhost ~]\\# journalctl | grep -E &#x27;Runtime|System journal&#x27;Aug 24 17:47:16 localhost.localdomain systemd-journald[304]: Runtime journal (/run/log/journal/6651ee1da4824a37975cd5245c8cb076) is 8.0M, max 185.4M, 177.4M free.Aug 24 17:47:29 localhost.localdomain systemd-journald[694]: Runtime journal (/run/log/journal/6651ee1da4824a37975cd5245c8cb076) is 8.0M, max 185.4M, 177.4M free.Aug 24 17:47:29 localhost.localdomain systemd-journald[694]: Runtime journal (/run/log/journal/6651ee1da4824a37975cd5245c8cb076) is 8.0M, max 185.4M, 177.4M free.Aug 24 17:47:36 localhost.localdomain systemd[1]: Starting Tell Plymouth To Write Out Runtime Data...Aug 24 17:47:36 localhost.localdomain systemd[1]: Started Tell Plymouth To Write Out Runtime Data. â€‹ä½¿ç”¨æŒä¹…å­˜å‚¨çš„ systemd-journald æœåŠ¡ä¼šå­˜å‚¨ç³»ç»Ÿä¸€æ¬¡æˆ–å¤šæ¬¡å¯åŠ¨åçš„æ—¥å¿—ï¼Œè‹¥è¦æ ¹æ®ç³»ç»Ÿçš„æ¯æ¬¡å¯åŠ¨ç­›é€‰æ—¥å¿—åˆ™å¯ä»¥ä½¿ç”¨é€‰é¡¹ -bï¼š 123[root@localhost ~]\\# journalctl -b 1 # æ£€ç´¢æ—¥å¿—å­˜å‚¨çš„ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ¡ç›®[root@localhost ~]\\# journalctl -b # æ£€ç´¢å½“å‰ç³»ç»Ÿå¯åŠ¨å¯åŠ¨åçš„æ¡ç›®[root@localhost ~]\\# journalctl -b -1 # è¿‡å»ä¸€æ¬¡çš„ç³»ç»Ÿå¯åŠ¨æ—¶çš„tiao","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"é…ç½®å’Œä¿æŠ¤ SSH","slug":"Linux | é…ç½®å’Œä¿æŠ¤ SSH","date":"2022-08-15T03:23:44.407Z","updated":"2022-08-15T03:27:26.903Z","comments":true,"path":"2022-08-15-Linux | é…ç½®å’Œä¿æŠ¤ SSH.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BF%9D%E6%8A%A4%20SSH.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ è¯†åˆ«è¿œç¨‹ç”¨æˆ· â€‹é€šè¿‡ w å‘½ä»¤æŸ¥çœ‹å½“å‰ç™»é™†çš„ç”¨æˆ· 12345[root@localhost ~]\\# w 20:39:40 up 30 min, 2 users, load average: 0.03, 0.02, 0.04USER TTY FROM LOGIN@ IDLE JCPU PCPU WHATstudent tty2 tty2 20:10 30:20 27.28s 0.29s /usr/liroot pts/1 172.16.1.195 20:37 0.00s 0.09s 0.02s w ä½¿ç”¨å…å¯†ç™»é™†ï¼ˆå…¬ç§é’¥å¯¹ï¼‰ â€‹SSH å¯é€šè¿‡å…¬é’¥åŠ å¯†çš„æ–¹å¼ä¿æŒé€šä¿¡å®‰å…¨ã€‚å½“æŸä¸€ SSH å®¢æˆ·ç«¯è¿æ¥åˆ° SSH æœåŠ¡å™¨æ—¶ï¼Œåœ¨è¯¥å®¢æˆ·ç«¯ç™»é™†ä¹‹å‰ï¼ŒæœåŠ¡å™¨ä¼šå‘å…¶å‘é€å…¬é’¥å‰¯æœ¬ã€‚è¿™é¢—ç”¨äºè®¾ç½®é€šä¿¡æ¸ é“çš„å®‰å…¨åŠ å¯†ï¼Œå¹¶å¯éªŒè¯å®¢æˆ·ç«¯çš„æœåŠ¡å™¨ã€‚ ğŸŸ¢ è®¾ç½®ä½äº ~/.ssh/config æ–‡ä»¶æˆ– /etc/ssh/ssh_config ä¸­çš„ StrictHostKeyChecking å‚æ•°ä¸º yes å¯ä½¿ ssh å‘½ä»¤åœ¨å…¬é’¥ä¸åŒ¹é…æ—¶å§‹ç»ˆä¸­æ–­ SSH è¿æ¥ã€‚ é…ç½®æ­¥éª¤ æœ¬åœ°ä¸»æœºæ‰§è¡Œ ssh-keygen -t rsa å‘½ä»¤ç”Ÿæˆå…¬ç§é’¥å¯¹ï¼› 1234567891011121314151617181920212223242526[root@localhost ~]\\# ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): # ä¿å­˜ key çš„æ–‡ä»¶ç»å¯¹è·¯å¾„Created directory &#x27;/root/.ssh&#x27;.Enter passphrase (empty for no passphrase): # å£ä»¤Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. # ç§é’¥æ–‡ä»¶ç»å¯¹è·¯å¾„Your public key has been saved in /root/.ssh/id_rsa.pub. # å…¬é’¥æ–‡ä»¶ç»å¯¹è·¯å¾„The key fingerprint is:SHA256:+wQfHxm3T7+yJSobz6QXWeh2JU3WqQgfpYuxjWzlX90 root@localhost.localdomainThe key\\&#x27;s randomart image is:+---[RSA 3072]----+| .. o|| . .. +.|| .oo= * || . O+.B +o|| S*o+= +.E|| .+ B.o.o.|| ..+.+o .o|| +*...o .|| o=+ .o. |+----[SHA256]-----+[root@localhost ~]\\# ll /root/.sshtotal 8-rw-------. 1 root root 2610 Aug 19 22:42 id_rsa # å¯†é’¥æ–‡ä»¶-rw-r--r--. 1 root root 580 Aug 19 22:42 id_rsa.pub # å…¬é’¥æ–‡ä»¶ æœ¬åœ°ä¸»æœºæ‰§è¡Œ ssh-copy-id -i ~/.ssh/id_rsa.pub user@host_name_or_ip å‘½ä»¤å°†å…¬é’¥æ–‡ä»¶å‘é€åˆ°éœ€è¦å…å¯†ç™»é™†çš„æœåŠ¡å™¨ï¼› 123456789101112[root@localhost ~]\\# ssh-copy-id -i ~/.ssh/id_rsa.pub skinyi@127.0.0.1/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;The authenticity of host &#x27;127.0.0.1 (127.0.0.1)&#x27; can\\&#x27;t be established.ECDSA key fingerprint is SHA256:CYiNIK6WgrScHzOuI/rnxIdZN68Fm0LVvFKbCzx721w.Are you sure you want to continue connecting (yes/no/[fingerprint])? yes/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysskinyi@127.0.0.1\\&#x27;s password: Number of key(s) added: 1Now try logging into the machine, with: &quot;ssh &#x27;skinyi@127.0.0.1&#x27;&quot; and check to make sure that only the key(s) you wanted were added. ï¼ˆä¸ç¬¬äºŒæ­¥äºŒé€‰ä¸€ï¼‰åœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰‹åŠ¨å¯¼å…¥å…¬é’¥ï¼šå°† id_rsa.pub æ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶è¿½åŠ åˆ°è¿œç¨‹ä¸»æœºçš„ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­å»ï¼› 12[root@localhost .ssh]\\# cat ~/.ssh/authorized_keysssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAzIU/3G5LbJEs763JRhvfTzdWAUdfmbRBTzVUo3r0IPnGDUIF135wR7FoI6KVc6jFesgJKfkGos06GdphPgF04z5tFG5VaJS+xQZepveGza2QH6eMssBNwzpZ517FQkRs1l3pLbHweI47gByhRx1xMKWjWX5dhkI0aiNaf2GAZlevb4YNRznx6MEj39LdNEqFKHdfU0iybFDm1p0ql+jPGV7T7N/Xz4GRvnuZQGUrBK39tzAdLHDlf8lU5Muhs8zJ0pMzv7tRdJCMNZ6gW+4dK6GTaOGAR6tc4HwGgIYTOPLGbYpdyJpdNd8hvBp5b17jAs5xLZHib4PVlZJJ6gw== rsa2048-082021 éªŒè¯ã€‚ ğŸ”´ æ³¨æ„ï¼šè¿œç¨‹æœºå™¨çš„ .ssh ç›®å½•éœ€è¦ 700 æƒé™ï¼Œauthorized_keys æ–‡ä»¶éœ€è¦ 600 æƒé™ã€‚å¦åˆ™å°†ä¼šè¢«æ‹’ç»è¿æ¥ã€‚ å·²çŸ¥ä¸»æœºå¯†é’¥ç®¡ç† â€‹è‹¥è¿œç¨‹ä¸»æœºå…¬é’¥è¢«æ›¿æ¢ï¼Œåˆ™éœ€è¦åœ¨æœ¬åœ°ä¸»æœºä¸Šç¼–è¾‘å·²çŸ¥ä¸»æœºæ–‡ä»¶ä»¥ç¡®ä¿å°†æ—§å…¬é’¥æ¡ç›®æ›¿æ¢ä¸ºæ–°å…¬é’¥æ¡ç›®ã€‚ â€‹è¿œç¨‹ä¸»æœºå…±äº«çš„å…¬é’¥ä¼šåœ¨æœ¬åœ° /etc/ssh/ssh_known_hosts æˆ– ~/.ssh/known_hosts æ–‡ä»¶ä¸­è®°å½•ã€‚ä¾‹å¦‚ï¼š 12[root@localhost .ssh]\\# cat known_hosts127.0.0.1 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBBnrDFHMD5vaRSn1P9CN5FTpHTGEnAR9n0PN15bMdmD/dNcUQUYGsrKva+StL4y1CXGK4FurJ9gDLliRvjere+U= â€‹å…¶ä¸­ï¼Œæ¯ä¸ªå…¬é’¥å„å ä¸€è¡Œã€‚æ¯æ¡è®°å½•çš„ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å…±äº«è¯¥å…¬é’¥çš„ä¸»æœºåå’Œ IP åœ°å€çš„åˆ—è¡¨ï¼›ç¬¬äºŒä¸ªå­—æ®µæ˜¯å…¬é’¥çš„åŠ å¯†ç®—æ³•ï¼›æœ€åä¸€ä¸ªå­—æ®µæ˜¯å…¬é’¥æœ¬èº«ã€‚ â€‹è¿œç¨‹ä¸»æœºå°†å…¬é’¥æ–‡ä»¶å­˜æ”¾åœ¨ /etc/ssh/ ç›®å½•ä¸‹ï¼Œå…¶æ‹“å±•åä¸º .pubã€‚ SSH é…ç½®ä¼˜åŒ– â€‹OpenSSH æœåŠ¡ç«¯ç”±ä¸€ä¸ªåä¸º sshd çš„å®ˆæŠ¤è¿›ç¨‹æä¾›ã€‚å®ƒçš„ä¸»é…ç½®æ–‡ä»¶ä¸º /etc/ssh/sshd_configã€‚ ç¦æ­¢è¿œç¨‹ä½¿ç”¨ root è´¦æˆ·ç™»é™† â€‹å®Œå…¨ç¦æ­¢å¯ä»¥å°† /etc/ssh/sshd_config é…ç½®æ–‡ä»¶ä¸­çš„ PermitRootLogin é…ç½®è®¾ç½®ä¸º noï¼Œä»…å…è®¸é€šè¿‡å¯†é’¥ç™»é™†å¯ä»¥å°†å…¶å€¼è®¾ç½®ä¸º without-passwordã€‚ ä»…å…è®¸ä½¿ç”¨å…¬ç§é’¥å¯¹çš„æ–¹å¼è¿›è¡Œç™»é™† â€‹æ­¤åœºæ™¯ä¸‹å¯ä»¥å°† /etc/ssh/sshd_config é…ç½®æ–‡ä»¶ä¸­çš„ PasswordAuthentication é…ç½®ä¸º noã€‚ ğŸŸ¢ ä¿®æ”¹ sshd æœåŠ¡çš„é…ç½®æ–‡ä»¶åï¼Œè¯·ä½¿ç”¨ systemctl reload sshd å‘½ä»¤ç¡®ä¿æ›´æ”¹ç«‹å³ç”Ÿæ•ˆã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"æ§åˆ¶æœåŠ¡å’Œå®ˆæŠ¤è¿›ç¨‹","slug":"Linux | æ§åˆ¶æœåŠ¡å’Œå®ˆæŠ¤è¿›ç¨‹","date":"2022-08-15T02:37:40.706Z","updated":"2022-08-15T02:45:47.715Z","comments":true,"path":"2022-08-15-Linux | æ§åˆ¶æœåŠ¡å’Œå®ˆæŠ¤è¿›ç¨‹.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E6%8E%A7%E5%88%B6%E6%9C%8D%E5%8A%A1%E5%92%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ SYSTEMCTLå‘½ä»¤æ‘˜è¦ ä»»åŠ¡ å‘½ä»¤ æŸ¥çœ‹æœ‰å…³å•å…ƒçŠ¶æ€çš„è¯¦ç»†ä¿¡æ¯ systemctl status UNIT åœ¨è¿è¡Œä¸­çš„ç³»ç»Ÿä¸Šåœæ­¢ä¸€é¡¹æœåŠ¡ systemctl stop UNIT åœ¨è¿è¡Œä¸­çš„ç³»ç»Ÿä¸Šå¯åŠ¨ä¸€é¡¹æœåŠ¡ systemctl start UNIT åœ¨è¿è¡Œä¸­çš„ç³»ç»Ÿä¸Šé‡æ–°å¯åŠ¨ä¸€é¡¹æœåŠ¡ systemctl restart UNIT é‡æ–°åŠ è½½è¿è¡Œä¸­æœåŠ¡çš„é…ç½®æ–‡ä»¶ systemctl reload UNIT å½»åº•ç¦ç”¨æœåŠ¡ï¼Œä½¿å…¶æ— æ³•æ‰‹åŠ¨å¯åŠ¨æˆ–åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ systemctl mask UNIT ä½¿å±è”½çš„æœåŠ¡å˜ä¸ºå¯ç”¨ systemctl unmask UNIT å°†æœåŠ¡é…ç½®ä¸ºåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ systemctl enable UNIT ç¦æ­¢æœåŠ¡åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ systemctl disable UNIT åˆ—å‡ºæŒ‡å®šå•å…ƒä¾èµ–çš„å•å…ƒ systemctl list-dependencies UNIT è®¤è¯† SYSTEMD æœåŠ¡ â€‹Systemd æœåŠ¡å¯ä»¥ç®¡ç†ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹å’Œç½‘ç»œæœåŠ¡ï¼ŒåŒ…æ‹¬ Linux çš„å¯åŠ¨ï¼Œä¸€èˆ¬åŒ…æ‹¬æœåŠ¡å¯åŠ¨å’ŒæœåŠ¡ç®¡ç†ã€‚å®ƒå¯åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶ä»¥åŠè¿è¡Œä¸­çš„ç³»ç»Ÿä¸Šæ¿€æ´»ç³»ç»Ÿèµ„æºã€æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹ã€‚ â€‹å®ˆæŠ¤è¿›ç¨‹æ˜¯åœ¨æ‰§è¡Œå„ç§ä»»åŠ¡çš„åå°ç­‰å¾…æˆ–è¿è¡Œçš„è¿›ç¨‹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ˆæŠ¤è¿›ç¨‹åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶è‡ªåŠ¨å¯åŠ¨å¹¶æŒç»­è¿è¡Œè‡³å…³æœºæˆ–æ‰‹åŠ¨åœæ­¢ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè®¸å¤šå®ˆæŠ¤è¿›ç¨‹çš„åç§°ä»¥å­—æ¯ d ç»“å°¾ã€‚ â€‹systemd æ„ä¹‰ä¸Šçš„æœåŠ¡é€šå¸¸æŒ‡çš„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä½†å¯åŠ¨æˆ–åœæ­¢ä¸€é¡¹æœåŠ¡å¯èƒ½ä¼šå¯¹ç³»ç»Ÿçš„çŠ¶æ€è¿›è¡Œä¸€æ¬¡æ€§æ›´æ”¹ï¼Œä¸ä¼šç•™ä¸‹å®ˆæŠ¤è¿›ç¨‹ä¹‹åç»§ç»­è¿è¡Œï¼ˆç§°ä¸º oneshotï¼‰ã€‚ â€‹åœ¨ RHEL ä¸­ï¼Œç¬¬ä¸€ä¸ªå¯åŠ¨çš„è¿›ç¨‹ï¼ˆPID 1ï¼‰æ˜¯ systemdã€‚ å¦‚ä¸‹æ˜¯ systemd æä¾›çš„å‡ é¡¹åŠŸèƒ½ï¼š å¹¶è¡ŒåŒ–åŠŸèƒ½ï¼ˆåŒæ—¶å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼‰ï¼Œå®ƒå¯æé«˜ç³»ç»Ÿçš„å¯åŠ¨é€Ÿåº¦ã€‚ æŒ‰éœ€å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œä¸éœ€è¦å•ç‹¬çš„æœåŠ¡ã€‚ è‡ªåŠ¨æœåŠ¡ä¾èµ–å…³ç³»ç®¡ç†ï¼Œå¯ä»¥é˜²æ­¢é•¿æ—¶é—´è¶…æ—¶ã€‚ä¾‹å¦‚ï¼Œåªæœ‰åœ¨ç½‘ç»œå¯ç”¨æ—¶ï¼Œä¾èµ–ç½‘ç»œçš„æœåŠ¡æ‰ä¼šå°è¯•å¯åŠ¨ã€‚ åˆ©ç”¨ Linux æ§åˆ¶ç»„ä¸€èµ·è¿½è¸ªç›¸å…³è¿›ç¨‹çš„æ–¹å¼ã€‚ SYSTEMD æœåŠ¡å•å…ƒ â€‹Systemd ä½¿ç”¨å•å…ƒæ¥ç®¡ç†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚ å•å…ƒç±»å‹ æ‹“å±•å æè¿° ç³»ç»ŸæœåŠ¡ .service ç”¨äºå¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œé‡è½½ç»å¸¸è®¿é—®çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå¦‚ web æœåŠ¡å™¨ã€‚ è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å¥—æ¥å­— .socket ç”± Systemd åº”ç›‘æ§çš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰å¥—æ¥å­—ã€‚å¦‚æœå®¢æˆ·ç«¯è¿æ¥å¥—æ¥å­—ï¼Œsystemd å°†å¯åŠ¨ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹å¹¶å°†è¿æ¥ä¼ é€’ç»™å®ƒã€‚å¥—æ¥å­—å•å…ƒç”¨äºå»¶è¿Ÿç³»ç»Ÿå¯åŠ¨æ—¶çš„æœåŠ¡å¯åŠ¨ï¼Œæˆ–è€…æŒ‰éœ€å¯åŠ¨ä¸å¸¸ä½¿ç”¨çš„æœåŠ¡ã€‚ è·¯å¾„å•å…ƒ .path ç”¨äºå°†æœåŠ¡çš„æ¿€æ´»æ¨è¿Ÿåˆ°ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿæ›´æ”¹å‘ç”Ÿä¹‹åã€‚è¿™é€šå¸¸ç”¨äºä½¿ç”¨å‡è„±æœºç›®å½•çš„æœåŠ¡ï¼Œå¦‚æ‰“å°ç³»ç»Ÿã€‚ Target .target å®šä¹‰ target ä¿¡æ¯(ç±»ä¼¼ä¹‹å‰çš„ run-level)åŠä¾èµ–å…³ç³»ï¼Œä¸€èˆ¬ä»…åŒ…å« Unit æ®µ è®¾å¤‡å•å…ƒ .device å¯¹äº /dev ç›®å½•ä¸‹çš„ç¡¬ä»¶è®¾å¤‡ï¼Œä¸»è¦ç”¨äºå®šä¹‰è®¾å¤‡ä¹‹é—´çš„ä¾èµ–å…³ç³» æŒ‚è½½å•å…ƒ .mount å®šä¹‰æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ï¼Œå¯ä»¥æ›¿ä»£è¿‡å»çš„ /etc/fstab é…ç½®æ–‡ä»¶ è‡ªåŠ¨æŒ‚è½½å•å…ƒ .automount ç”¨äºæ§åˆ¶è‡ªåŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œç›¸å½“äº SysV-init çš„ autofs æœåŠ¡ Scope .scope éç”¨æˆ·åˆ›å»ºï¼Œç”± Systemd è¿è¡Œæ—¶äº§ç”Ÿçš„ï¼Œæè¿°ä¸€äº›ç³»ç»ŸæœåŠ¡çš„åˆ†ç»„ä¿¡æ¯ Slice .slice ç”¨äºè¡¨ç¤ºä¸€ä¸ª CGroup çš„æ ‘ Snapshot .snapshot ç”¨äºè¡¨ç¤ºä¸€ä¸ªç”± systemctl snapshot å‘½ä»¤åˆ›å»ºçš„ Systemd Units è¿è¡ŒçŠ¶æ€å¿«ç…§ï¼Œå¯ä»¥åˆ‡å›æŸä¸ªå¿«ç…§ äº¤æ¢åˆ†åŒºå•å…ƒ .swap å®šä¹‰ä¸€ä¸ªç”¨æˆ·åšè™šæ‹Ÿå†…å­˜çš„äº¤æ¢åˆ†åŒº å®šæ—¶å™¨å•å…ƒ .timer ç”¨äºé…ç½®åœ¨ç‰¹å®šæ—¶é—´å‡ºå‘çš„ä»»åŠ¡ï¼Œæ›¿ä»£äº† Crontab çš„åŠŸèƒ½ è‹¥è¦ä¿®æ”¹æŸå•å…ƒæ–‡ä»¶è¯·å‹¿åœ¨ /usr/lib/systemd/system ç›®å½•é‡Œç›´æ¥ä¿®æ”¹ï¼Œè€Œåº”åœ¨ /etc/systemd/system ç›®å½•ä¸‹åˆ›å»ºè¯¥å•å…ƒæ–‡ä»¶çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç„¶åä¿®æ”¹è¯¥å‰¯æœ¬æ–‡ä»¶ã€‚Systemd ä¼šä¼˜å…ˆä½¿ç”¨ /etc/systemd/system ç›®å½•ä¸‹çš„å•å…ƒæ–‡ä»¶ã€‚ æŸ¥çœ‹æ‰€æœ‰å·²åŠ è½½çš„æœåŠ¡å•å…ƒ â€‹å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥åˆ—å‡º systemd åŠ è½½çš„æ‰€æœ‰æœåŠ¡å•å…ƒï¼š 12345[root@localhost ~]\\# systemctl list-units --type=service # æŒ‡å®šä¸åŒçš„ type å¯ä»¥åˆ—å‡ºä¸åŒçš„å•å…ƒç±»å‹UNIT LOAD ACTIVE SUB DESCRIPTION abrt-journal-core.service loaded active running Creates ABRT problems from coredumpctl messagesabrt-oops.service loaded active running ABRT kernel log watcher...... â€‹å…¶ä¸­ï¼Œè¯¥å‘½ä»¤è¾“å‡ºçš„å„åˆ—çš„æ„ä¹‰æ˜¯ï¼š åˆ—å å«ä¹‰ UNIT å•å…ƒåç§° LOAD systemd æ˜¯å¦æ­£ç¡®è§£æäº†å•å…ƒçš„é…ç½®å¹¶å°†è¯¥å•å…ƒåŠ è½½åˆ°å†…å­˜ä¸­ ACTIVE å•å…ƒçš„é«˜çº§åˆ«æ¿€æ´»çŠ¶æ€ã€‚æ­¤ä¿¡æ¯è¡¨æ˜å•å…ƒæ˜¯å¦å·²æˆåŠŸå¯åŠ¨ SUB å•å…ƒçš„ä½çº§åˆ«æ¿€æ´»çŠ¶æ€ã€‚æ­¤ä¿¡æ¯æŒ‡ç¤ºæœ‰å…³è¯¥å•å…ƒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ä¿¡æ¯è§†å•å…ƒç±»å‹ã€çŠ¶æ€ä»¥åŠå•å…ƒçš„æ‰§è¡Œæ–¹å¼è€Œå¼‚ DESCRIPTION å•å…ƒçš„ç®€çŸ­æè¿° â€‹é»˜è®¤æƒ…å†µä¸‹ï¼Œ``systemctl list-units --type=service` å‘½ä»¤ä»…åˆ—å‡ºæ¿€æ´»çŠ¶æ€ä¸º active çš„æœåŠ¡å•å…ƒã€‚æŒ‡å®š --all é€‰é¡¹å¯åˆ—å‡ºæ‰€æœ‰æœåŠ¡å•å…ƒï¼Œä¸è®ºæ¿€æ´»çŠ¶æ€å¦‚ä½•ï¼š 1234[root@localhost ~]\\# systemctl list-units --type=service --all UNIT LOAD ACTIVE SUB DESCRIPTION abrt-ccpp.service loaded inactive dead Install ABRT coredump hook abrt-journal-core.service loaded active running Creates ABRT problems from coredumpctl messages â€‹ä½¿ç”¨ --state= é€‰é¡¹å¯æŒ‰ç…§ LOADã€ACTIVE æˆ– SUB å­—æ®µä¸­çš„å€¼è¿›è¡Œç­›é€‰ã€‚ 1234[root@localhost ~]\\# systemctl list-units --type=service --state=dead | head -n 3 UNIT LOAD ACTIVE SUB DESCRIPTION abrt-ccpp.service loaded inactive dead Install ABRT coredump hook abrt-vmcore.service loaded inactive dead Harvest vmcores for ABRT â€‹ä¸å¸¦ä»»ä½•å‚æ•°è¿è¡Œ systemctl å‘½ä»¤å¯ä»¥åˆ—å‡ºå·²åŠ è½½å’Œæ´»åŠ¨çš„å•å…ƒã€‚ 12345678910111213141516[root@localhost ~]\\# systemctlUNIT LOAD ACTIVE SUB DESCRIPTION proc-sys-fs-binfmt_misc.automount loaded active waiting Arbitrary Executable File Formats File System Automount Po&gt;sys-devices-pci0000:00-0000:00:11.0-0000:02:00.0-usb2-2\\x2d2-2\\x2d2.1-2\\x2d2.1:1.0-bluetooth-hci0.device loaded active plugged /sys/devices/pci0000:00/0000:00:11.0/0000:02:00.0/usb2/2-2&gt;......-.mount loaded active mounted Root Mount boot.mount loaded active mounted /boot......cups.path loaded active running CUPS Scheduler systemd-ask-password-plymouth.path loaded active waiting Forward Password Requests to Plymouth Directory Watch ......init.scope loaded active running System and Service Manager session-2.scope loaded active running Session 2 of user student ......... æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„å•å…ƒæ–‡ä»¶çš„çŠ¶æ€ â€‹systemctl list-units å‘½ä»¤æ˜¾ç¤º systemd æœåŠ¡å°è¯•è§£æå¹¶åŠ è½½åˆ°å†…å­˜ä¸­çš„å•å…ƒï¼›å®ƒä¸æ˜¾ç¤ºå·²å®‰è£…ä½†æœªå¯ç”¨çš„å•å…ƒã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„å•å…ƒæ–‡ä»¶çš„çŠ¶æ€ï¼š 1234[root@localhost ~]\\# systemctl list-unit-filesUNIT FILE STATE proc-sys-fs-binfmt_misc.automount static -.mount generated â€‹*--type=* ä»¥åŠ state= é€‰é¡¹åŒæ ·é€‚ç”¨äºæ­¤å‘½ä»¤ã€‚å…¶ä¸­ STATE çš„å¯é€‰å€¼ä¸º [enabled | disabled | static | masked]ã€‚ 3. æŸ¥çœ‹æœåŠ¡çŠ¶æ€ â€‹ä½¿ç”¨ systemctl status name.type å‘½ä»¤æ¥æŸ¥çœ‹ç‰¹å®šå•å…ƒçš„çŠ¶æ€ï¼Œå¦‚æœæœªæä¾›å•å…ƒç±»å‹ï¼Œåˆ™ systemctl å°†æ˜¾ç¤ºæœåŠ¡å•å…ƒçš„çŠ¶æ€ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ 12345678910111213141516171819202122[root@localhost ~]\\# systemctl status cupsâ— cups.service - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: e&gt; Active: active (running) since Mon 2021-08-09 17:08:41 PDT; 1h 11min ago Docs: man:cupsd(8) Main PID: 1213 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 3.7M CGroup: /system.slice/cups.service â””â”€1213 /usr/sbin/cupsd -lAug 09 17:08:40 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 17:08:41 localhost.localdomain systemd[1]: Started CUPS Scheduler.......[root@localhost ~]\\# systemctl status cups.pathâ— cups.path - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.path; enabled; vendor preset: enab&gt; Active: active (running) since Mon 2021-08-09 17:08:29 PDT; 1h 13min agoAug 09 17:08:29 localhost.localdomain systemd[1]: Started CUPS Scheduler....... â€‹ä¸€äº›é‡è¦å­—æ®µçš„å«ä¹‰ï¼š å­—æ®µ æè¿° Loaded æœåŠ¡å•å…ƒæ˜¯å¦å·²åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ Active æœåŠ¡å•å…ƒæ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œè‹¥æ˜¯ï¼Œä»–å·²ç»è¿è¡Œäº†å¤šä¹…ã€‚ Main PID æœåŠ¡çš„ä¸»è¿›ç¨‹ ID, åŒ…æ‹¬å‘½ä»¤åç§°ã€‚ Status æœ‰å…³è¯¥æœåŠ¡çš„å…¶ä»–ä¿¡æ¯ã€‚ â€‹Status å­—æ®µçš„ä¸åŒå€¼çš„å«ä¹‰ï¼š å€¼ æè¿° loaded å•å…ƒé…ç½®æ–‡ä»¶å·²åŠ è½½å¤„ç†ã€‚ active(running) æ­£åœ¨é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªæŒç»­è¿›ç¨‹è¿è¡Œã€‚ active(exited) å·²æˆåŠŸå®Œæˆä¸€æ¬¡æ€§é…ç½®ã€‚ active(waiting) è¿è¡Œä¸­ï¼Œä½†æ­£åœ¨ç­‰å¾…äº‹ä»¶ã€‚ inactive ä¸åœ¨è¿è¡Œã€‚ enabled åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ã€‚ disabled æœªè®¾ä¸ºåœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ã€‚ static æ— æ³•å¯ç”¨ï¼Œä½†å¯ä»¥ç”±æŸä¸€å¯ç”¨çš„å•å…ƒè‡ªåŠ¨å¯åŠ¨ã€‚ éªŒè¯æœåŠ¡çš„çŠ¶æ€ â€‹systemctl å‘½ä»¤æä¾›äº†ä¸€äº›æ–¹æ³•æ¥éªŒè¯æœåŠ¡çš„å…·ä½“çŠ¶æ€ã€‚ 123456[root@localhost ~]\\# systemctl is-active sshd # æ˜¯å¦æ´»åŠ¨active # inactive[root@localhost ~]\\# systemctl is-enabled sshd # æ˜¯å¦è‡ªå¯ enabled # disabled[root@localhost ~]\\# systemctl is-failed sshd # æ˜¯å¦å¯åŠ¨å¤±è´¥active # failedï¼Œè‹¥å·²è¢«åœæ­¢ï¼Œåˆ™ unknown æˆ– inactive â€‹åˆ—å‡ºæ‰€æœ‰å¯åŠ¨å¤±è´¥çš„å•å…ƒï¼š 123[root@localhost ~]\\# systemctl --failed --type=service0 loaded units listed. Pass --all to see loaded but inactive units, too.To show all installed unit files use &#x27;systemctl list-unit-files&#x27;. æ§åˆ¶ç³»ç»ŸæœåŠ¡ æ‰‹åŠ¨å¯åœæœåŠ¡ â€‹æ‰‹åŠ¨å¯åœæœåŠ¡çš„åŸå› ï¼š1. æ›´æ–°æœåŠ¡ï¼›2. æ›´æ”¹é…ç½®æ–‡ä»¶ï¼›3. å¸è½½æœåŠ¡ï¼›4. å¯åŠ¨ä¸å¸¸ä½¿ç”¨çš„æœåŠ¡ã€‚ â€‹å¯åŠ¨æœåŠ¡å‰ï¼Œå¯ä»¥å…ˆç”¨ systemctl status å‘½ä»¤éªŒè¯æœåŠ¡æ˜¯å¦æœªåœ¨è¿è¡Œã€‚å¯åœæœåŠ¡éœ€è¦ root æƒé™è¿›è¡Œæ“ä½œã€‚ä»¥ cups æœåŠ¡ä¸ºä¾‹ï¼Œä»¥ä¸‹å‘½ä»¤å±•ç¤ºäº†å¯åœæœåŠ¡çš„å‘½ä»¤ï¼š 1234567891011121314151617181920212223242526272829303132333435# éªŒè¯æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨[root@localhost ~]\\# systemctl status cupsâ— cups.service - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: e&gt; Active: active (running) since Mon 2021-08-09 17:08:41 PDT; 2h 0min ago Docs: man:cupsd(8) Main PID: 1213 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 3.7M CGroup: /system.slice/cups.service â””â”€1213 /usr/sbin/cupsd -lAug 09 17:08:40 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 17:08:41 localhost.localdomain systemd[1]: Started CUPS Scheduler.# åœæ­¢ cups å®ˆæŠ¤è¿›ç¨‹æœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€[root@localhost ~]\\# systemctl stop cups.service # .service æ‹“å±•å¯ä»¥çœç•¥ï¼Œä¸‹åŒ[root@localhost ~]\\# systemctl is-active cups # éªŒè¯ cups æœåŠ¡æ˜¯å¦åœ¨æ´»åŠ¨inactive # æœåŠ¡å·²åœæ­¢# å¯åŠ¨ cups å®ˆæŠ¤è¿›ç¨‹æœåŠ¡å¹¶æŸ¥çœ‹çŠ¶æ€[root@localhost ~]\\# systemctl start cups[root@localhost ~]\\# systemctl status cupsâ— cups.service - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: e&gt; Active: active (running) (thawing) since Mon 2021-08-09 19:15:01 PDT; 1min 17s &gt; Docs: man:cupsd(8) Main PID: 4284 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 1.9M CGroup: /system.slice/cups.service â””â”€4284 /usr/sbin/cupsd -lAug 09 19:15:01 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 19:15:01 localhost.localdomain systemd[1]: Started CUPS Scheduler. æ‰‹åŠ¨é‡å¯æœåŠ¡å’Œé‡æ–°åŠ è½½æœåŠ¡ â€‹é‡å¯ = åœæ­¢ + å¯åŠ¨ï¼Œå› æ­¤é‡å¯åçš„æœåŠ¡è¿›ç¨‹ ID ä¼šæ”¹å˜ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æœŸé—´ä¼šå…³è”æ–°çš„è¿›ç¨‹ IDã€‚è‹¥åªæ˜¯å› ä¸ºä¿®æ”¹äº†æŸé¡¹æ”¯æŒé‡æ–°åŠ è½½çš„æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç›´æ¥é‡æ–°åŠ è½½è¯¥æœåŠ¡è€Œæ— éœ€é‡å¯è¯¥æœåŠ¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637[root@localhost ~]\\# systemctl restart cups[root@localhost ~]\\# systemctl status cupsâ— cups.service - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: e&gt; Active: active (running) (thawing) since Mon 2021-08-09 19:24:21 PDT; 10s ago Docs: man:cupsd(8) Main PID: 4384 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 2.0M CGroup: /system.slice/cups.service â””â”€4384 /usr/sbin/cupsd -lAug 09 19:24:21 localhost.localdomain systemd[1]: cups.service: Succeeded.Aug 09 19:24:21 localhost.localdomain systemd[1]: Stopped CUPS Scheduler.......[root@localhost ~]\\# systemctl reload cups # cups æœåŠ¡ä¸æ”¯æŒé‡è½½Failed to reload cups.service: Job type reload is not applicable for unit cups.service.[root@localhost ~]\\# systemctl reload firewalld # firewalld æœåŠ¡æ”¯æŒé‡è½½[root@localhost ~]\\# systemctl status firewalld # æœ€åº•ä¸‹è¯¦æƒ…è®°å½•äº†é‡è½½çš„ä¿¡æ¯â— firewalld.service - firewalld - dynamic firewall daemon Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled) Active: active (running) (thawing) since Mon 2021-08-09 17:08:40 PDT; 2h 19min ago Docs: man:firewalld(1) Process: 4443 ExecReload=/bin/kill -HUP $MAINPID (code=exited, status=0/SUCCESS) Main PID: 1116 (firewalld) Tasks: 3 (limit: 23503) Memory: 35.2M CGroup: /system.slice/firewalld.service â””â”€1116 /usr/libexec/platform-python -s /usr/sbin/firewalld --nofork --nopidAug 09 17:08:38 localhost.localdomain systemd[1]: Starting firewalld - dynamic firewall daemon...Aug 09 17:08:40 localhost.localdomain systemd[1]: Started firewalld - dynamic firewall daemon.Aug 09 17:08:41 localhost.localdomain firewalld[1116]: WARNING: AllowZoneDrifting is enabled. This is considered an insecure configuration option. It will be removed in a future release. &gt;Aug 09 19:27:17 localhost.localdomain systemd[1]: Reloading firewalld - dynamic firewall daemon.Aug 09 19:27:17 localhost.localdomain systemd[1]: Reloaded firewalld - dynamic firewall daemon.Aug 09 19:27:17 localhost.localdomain firewalld[1116]: WARNING: AllowZoneDrifting is enabled. This is considered an insecure configuration option. It will be removed in a future release. â€‹è‹¥ä¸ç¡®å®šæŸæœåŠ¡æ˜¯å¦å…·æœ‰é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶æ›´æ”¹çš„åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ reload-or-restart é€‰é¡¹æ¥è¿è¡Œ systemctl å‘½ä»¤ã€‚å¦‚æœé‡æ–°åŠ è½½åŠŸèƒ½å¯ç”¨ï¼Œè¯¥å‘½ä»¤å°†é‡æ–°åŠ è½½é…ç½®æ›´æ”¹ï¼Œå¦åˆ™ï¼Œè¯¥å‘½ä»¤å°†é‡æ–°å¯åŠ¨æœåŠ¡ä»¥å®æ–½æ–°çš„é…ç½®æ›´æ”¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445[root@localhost ~]\\# systemctl status NetworkManager # æ”¯æŒé‡è½½â— NetworkManager.service - Network Manager Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled) Active: active (running) (thawing) since Mon 2021-08-09 17:08:40 PDT; 2h 28min ago Docs: man:NetworkManager(8) Process: 4531 ExecReload=/usr/bin/busctl call org.freedesktop.NetworkManager /org/freedesktop/NetworkManager org.freedesktop.NetworkManager Reload u 0 (code=exited, status=0/SUCCESS) Main PID: 1190 (NetworkManager) Tasks: 3 (limit: 23503) Memory: 10.7M CGroup: /system.slice/NetworkManager.service â””â”€1190 /usr/sbin/NetworkManager --no-daemonAug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option requested_subnet_mask =&gt; &#x27;1&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option requested_time_offset =&gt; &#x27;1&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option requested_wpad =&gt; &#x27;1&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option routers =&gt; &#x27;192.168.30.2&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option subnet_mask =&gt; &#x27;255.255.255.0&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): state changed bound -&gt; extendedAug 09 19:36:30 localhost.localdomain systemd[1]: Reloading Network Manager.Aug 09 19:36:30 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562990.2331] audit: op=&quot;reload&quot; arg=&quot;0&quot; pid=4531 uid=0 result=&quot;success&quot;Aug 09 19:36:30 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562990.2339] config: signal: SIGHUP (no changes from disk)Aug 09 19:36:30 localhost.localdomain systemd[1]: Reloaded Network Manager.[root@localhost ~]\\# systemctl reload-or-restart NetworkManager[root@localhost ~]\\# systemctl status NetworkManagerâ— NetworkManager.service - Network Manager Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled) Active: active (running) (thawing) since Mon 2021-08-09 17:08:40 PDT; 2h 28min ago Docs: man:NetworkManager(8) Process: 4547 ExecReload=/usr/bin/busctl call org.freedesktop.NetworkManager /org/freedesktop/NetworkManager org.freedesktop.NetworkManager Reload u 0 (code=exited, status=0/SUCCESS) Main PID: 1190 (NetworkManager) Tasks: 3 (limit: 23503) Memory: 10.8M CGroup: /system.slice/NetworkManager.service â””â”€1190 /usr/sbin/NetworkManager --no-daemonAug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): option subnet_mask =&gt; &#x27;255.255.255.0&#x27;Aug 09 19:20:04 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562004.4206] dhcp4 (ens160): state changed bound -&gt; extendedAug 09 19:36:30 localhost.localdomain systemd[1]: Reloading Network Manager.Aug 09 19:36:30 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562990.2331] audit: op=&quot;reload&quot; arg=&quot;0&quot; pid=4531 uid=0 result=&quot;success&quot;Aug 09 19:36:30 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628562990.2339] config: signal: SIGHUP (no changes from disk)Aug 09 19:36:30 localhost.localdomain systemd[1]: Reloaded Network Manager.Aug 09 19:37:18 localhost.localdomain systemd[1]: Reloading Network Manager.Aug 09 19:37:19 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628563039.0110] audit: op=&quot;reload&quot; arg=&quot;0&quot; pid=4547 uid=0 result=&quot;success&quot;Aug 09 19:37:19 localhost.localdomain NetworkManager[1190]: &lt;info&gt; [1628563039.0114] config: signal: SIGHUP (no changes from disk)Aug 09 19:37:19 localhost.localdomain systemd[1]: Reloaded Network Manager. åˆ—å‡ºå•å…ƒä¾èµ–é¡¹ â€‹æŸäº›æœåŠ¡è¦æ±‚é¦–å…ˆè¿è¡Œå…¶ä»–æœåŠ¡ï¼Œä»è€Œåˆ›å»ºå¯¹å…¶ä»–æœåŠ¡çš„ä¾èµ–é¡¹ã€‚å…¶ä»–æœåŠ¡å¹¶ä¸åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶å¯åŠ¨ï¼Œè€Œæ˜¯ä»…åœ¨éœ€è¦æ—¶å¯åŠ¨ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œ systemd å’Œ systemctl æ ¹æ®éœ€è¦å¯åŠ¨æœåŠ¡ï¼Œä¸è®ºæ˜¯è§£å†³ä¾èµ–é¡¹ï¼Œè¿˜æ˜¯å¯åŠ¨ä¸ç»å¸¸ä½¿ç”¨çš„æœåŠ¡ã€‚ â€‹ä½¿ç”¨ systemctl list-dependencies å‘½ä»¤å¯ä»¥åˆ—å‡ºæŒ‡å®šæœåŠ¡çš„ä¾èµ–é¡¹æ ‘ï¼Œå¦‚ï¼š 123456789[root@localhost ~]\\# systemctl list-dependencies cups # åˆ—å‡º cups æœåŠ¡çš„ä¾èµ–é¡¹cups.serviceâ— â”œâ”€cups.pathâ— â”œâ”€cups.socketâ— â”œâ”€system.sliceâ— â””â”€sysinit.targetâ— â”œâ”€dev-hugepages.mountâ— â”œâ”€dev-mqueue.mount...... å±è”½æœªå±è”½çš„æœåŠ¡ â€‹ç›®çš„ï¼šå±è”½æœåŠ¡å¯é˜²æ­¢ç®¡ç†å‘˜æ„å¤–å¯åŠ¨ä¸å…¶ä»–æœåŠ¡å†²çªçš„æœåŠ¡ã€‚ â€‹åŸç†ï¼šåœ¨é…ç½®ç›®å½•ä¸­åˆ›å»ºæŒ‡å‘ /dev/null æ–‡ä»¶çš„é“¾æ¥ï¼Œè¯¥æ–‡ä»¶å¯é˜»æ­¢æœåŠ¡å¯åŠ¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152[root@localhost ~]\\# systemctl mask cups # ä½¿ç”¨ mask é€‰é¡¹å±è”½æŸæœåŠ¡Created symlink /etc/systemd/system/cups.service â†’ /dev/null.[root@localhost ~]\\# systemctl status cupsâ— cups.service Loaded: masked (Reason: Unit cups.service is masked.) Active: active (running) (thawing) since Mon 2021-08-09 19:45:56 PDT; 11min ago Main PID: 4653 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 1.9M CGroup: /system.slice/cups.service â””â”€4653 /usr/sbin/cupsd -lAug 09 19:45:56 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 19:45:56 localhost.localdomain systemd[1]: Started CUPS Scheduler.Aug 09 19:56:23 localhost.localdomain systemd[1]: cups.service: Current command va&gt;[root@localhost ~]\\# systemctl stop cups[root@localhost ~]\\# systemctl status cupsâ— cups.service Loaded: masked (Reason: Unit cups.service is masked.) Active: inactive (dead) (thawing) since Mon 2021-08-09 19:57:53 PDT; 3s ago Main PID: 4653 (code=exited, status=0/SUCCESS) Status: &quot;Scheduler is running...&quot;Aug 09 19:45:56 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 19:45:56 localhost.localdomain systemd[1]: Started CUPS Scheduler.Aug 09 19:56:23 localhost.localdomain systemd[1]: cups.service: Current command va&gt;Aug 09 19:57:53 localhost.localdomain systemd[1]: Stopping cups.service...Aug 09 19:57:53 localhost.localdomain systemd[1]: cups.service: Succeeded.Aug 09 19:57:53 localhost.localdomain systemd[1]: Stopped cups.service.[root@localhost ~]\\# systemctl start cupsFailed to start cups.service: Unit cups.service is masked.[root@localhost ~]\\# systemctl list-unit-files --type=service | grep maskedcups.service masked systemd-timedated.service masked [root@localhost ~]\\# systemctl unmask cups # ä½¿ç”¨ unmask æ¥è§¦å¯¹æŸæœåŠ¡çš„å±è”½Removed /etc/systemd/system/cups.service.[root@localhost ~]\\# systemctl start cups[root@localhost ~]\\# systemctl status cupsâ— cups.service - CUPS Scheduler Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: e&gt; Active: active (running) (thawing) since Mon 2021-08-09 19:59:12 PDT; 4s ago Docs: man:cupsd(8) Main PID: 4833 (cupsd) Status: &quot;Scheduler is running...&quot; Tasks: 1 (limit: 23503) Memory: 1.9M CGroup: /system.slice/cups.service â””â”€4833 /usr/sbin/cupsd -lAug 09 19:59:12 localhost.localdomain systemd[1]: Starting CUPS Scheduler...Aug 09 19:59:12 localhost.localdomain systemd[1]: Started CUPS Scheduler. ğŸŸ¢ mask é€‰é¡¹å¹¶ä¸ä¼šè‡ªåŠ¨åœæ­¢å·²ç»å¯åŠ¨çš„æœåŠ¡ï¼Œè€Œä¸”åªèƒ½å±è”½å¯¹æœåŠ¡çš„å¯åŠ¨æ“ä½œã€‚ è®¾ç½®æŸæœåŠ¡å¼€å¯æˆ–å…³é—­å¼€æœºè‡ªå¯ 12345678910111213141516[root@localhost ~]\\# systemctl is-enabled cups # æŸ¥çœ‹ cups æœåŠ¡æ˜¯å¦æ˜¯å¼€æœºè‡ªå¯çš„enabled[root@localhost ~]\\# systemctl disable cups # å…³é—­ cups å¼€æœºè‡ªå¯Removed /etc/systemd/system/multi-user.target.wants/cups.service.Removed /etc/systemd/system/multi-user.target.wants/cups.path.Removed /etc/systemd/system/sockets.target.wants/cups.socket.Removed /etc/systemd/system/printer.target.wants/cups.service.[root@localhost ~]\\# systemctl is-enabled cups # éªŒè¯disabled[root@localhost ~]\\# systemctl enable cups # å¼€å¯ cups å¼€æœºè‡ªå¯Created symlink /etc/systemd/system/printer.target.wants/cups.service â†’ /usr/lib/systemd/system/cups.service.Created symlink /etc/systemd/system/multi-user.target.wants/cups.service â†’ /usr/lib/systemd/system/cups.service.Created symlink /etc/systemd/system/sockets.target.wants/cups.socket â†’ /usr/lib/systemd/system/cups.socket.Created symlink /etc/systemd/system/multi-user.target.wants/cups.path â†’ /usr/lib/systemd/system/cups.path.[root@localhost ~]\\# systemctl is-enabled cups # éªŒè¯enabled â€‹è®¾ç½®å¼€æœºè‡ªå¯æŸæœåŠ¡å¹¶ä¸ä¼šç«‹å³å¯åŠ¨è¯¥æœåŠ¡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆäºŒï¼‰","slug":"Linux | ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆäºŒï¼‰","date":"2022-08-15T02:32:03.345Z","updated":"2022-08-15T02:36:36.744Z","comments":true,"path":"2022-08-15-Linux | ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆäºŒï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%9B%91%E6%8E%A7%E5%92%8C%E7%AE%A1%E7%90%86%20Linux%20%E8%BF%9B%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç›‘æ§è¿›ç¨‹æ´»åŠ¨ Linux è´Ÿè½½å¹³å‡å€¼ â€‹è´Ÿè½½å¹³å‡å€¼æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§åº¦é‡æ–¹å¼ï¼Œå®ƒå¯ä»¥ç®€å•åœ°è¡¨ç¤ºä¸€æ®µæ—¶é—´å†…æ„ŸçŸ¥çš„ç³»ç»Ÿè´Ÿè½½ã€‚è¿™ä¸ªæ•°å€¼å¯ä»¥ç”¨æ¥ç²—ç•¥è¡¡é‡å¾…å¤„ç†çš„ç³»ç»Ÿèµ„æºè¯·æ±‚æ•°é‡ï¼Œå¹¶ç¡®å®šç³»ç»Ÿè´Ÿè½½æ˜¯éšæ—¶é—´å¢åŠ è¿˜æ˜¯å‡å°‘ã€‚ â€‹æ ¹æ®å¤„äºå¯è¿è¡Œå’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„è¿›ç¨‹æ•°ï¼Œå†…æ ¸ä¼šæ¯äº”ç§’é’Ÿæ”¶é›†ä¸€æ¬¡å½“å‰çš„è´Ÿè½½æ•°ã€‚é€šè¿‡æ±‡æ€»è¿™äº›æ•°å€¼ï¼Œå¯ä»¥å¾—åˆ°æœ€è¿‘ä¸€åˆ†é’Ÿã€äº”åˆ†é’Ÿå’Œåäº”åˆ†é’Ÿå†…çš„æŒ‡æ•°ç§»åŠ¨å¹³å‡å€¼ã€‚ è´Ÿè½½æ•°åŸºæœ¬ä¸Šæ˜¯æ ¹æ®å‡†å¤‡è¿è¡Œçš„è¿›ç¨‹æ•°ï¼ˆè¿›ç¨‹çŠ¶æ€ä¸º Rï¼‰å’Œç­‰å¾… I/O å®Œæˆçš„è¿›ç¨‹æ•°ï¼ˆè¿›ç¨‹çŠ¶æ€ä¸º Dï¼‰è€Œå¾—åˆ°çš„ï¼› ä¸€äº› UNIX ç³»ç»Ÿä»…è€ƒè™‘ CPU ä½¿ç”¨ç‡æˆ–è¿è¡Œé˜Ÿåˆ—é•¿åº¦æ¥æŒ‡ç¤ºç³»ç»Ÿè´Ÿè½½ã€‚Linux è¿˜åŒ…å«ç£ç›˜æˆ–ç½‘ç»œåˆ©ç”¨ç‡ï¼Œå› ä¸ºä»–ä»¬ä¸ CPU è´Ÿè½½ä¸€æ ·ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚é‡åˆ°è´Ÿè½½å¹³å‡å€¼å¾ˆé«˜ä½† CPU æ´»åŠ¨å¾ˆä½æ—¶ï¼Œè¯·æ£€æŸ¥ç£ç›˜å’Œç½‘ç»œæ´»åŠ¨ã€‚ â€‹è´Ÿè½½å¹³å‡å€¼å¯ç²—ç•¥è¡¡é‡åœ¨å¯ä»¥æ‰§è¡Œå…¶ä»–ä»»ä½•ä½œä¸šä¹‹å‰ï¼Œæœ‰å¤šå°‘è¿›ç¨‹å½“å‰åœ¨ç­‰å¾…è¯·æ±‚å®Œæˆã€‚è¯·æ±‚å¯èƒ½æ˜¯ç”¨äºè¿è¡Œè¿›ç¨‹çš„ CPU æ—¶é—´ã€‚æˆ–è€…ï¼Œè¯·æ±‚å¯èƒ½æ˜¯è®©å…³é”®ç£ç›˜ I/O æ“ä½œå®Œæˆï¼›åœ¨è¯·æ±‚å®Œæˆä¹‹å‰ï¼Œå³ä½¿ CPU ç©ºé—²ï¼Œä¹Ÿä¸èƒ½åœ¨ CPU ä¸Šè¿è¡Œè¯¥è¿›ç¨‹ã€‚æ— è®ºæ˜¯å“ªç§æ–¹å¼ï¼Œéƒ½ä¼šå½±å“ç³»ç»Ÿè´Ÿè½½ï¼›ç³»ç»Ÿçš„è¿è¡Œçœ‹èµ·æ¥ä¼šå˜æ…¢ï¼Œå› ä¸ºæœ‰è¿›ç¨‹æ­£åœ¨ç­‰å¾…è¿è¡Œã€‚ ä½¿ç”¨ uptime å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿå½“å‰è´Ÿè½½å¹³å‡å€¼ 12345678910uptime # æ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é•¿åŠè¿‡å» 1ï¼Œ5ï¼Œ15 åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½-p, --pretty # åªæ˜¾ç¤ºå¼€æœºè¿è¡Œæ—¶é•¿-s, --since # åªæ˜¾ç¤ºå¼€æœºè¿è¡Œçš„æ—¶é—´ç‚¹# ä¾‹å­ï¼š[student@localhost ~]$ uptime -s2021-06-02 16:30:42[student@localhost ~]$ uptime -pup 17 minutes[student@localhost ~]$ uptime16:48:01 up 17 min, 1 user, load average: 0.13, 0.14, 0.13 ä½¿ç”¨ w å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿå½“å‰è´Ÿè½½ 1234567891011121314151617w # æŸ¥çœ‹å·²ç™»å½•çš„ç”¨æˆ·åŠå…¶å½“å‰æ´»åŠ¨-h, --no-header # ä¸è¦æ‰“å°æ ‡é¢˜è¡Œ-s, --short # ç®€æ´æ¨¡å¼-f, --from # æ‰“å°ç”¨æˆ·çš„ç™»é™†ç»ˆç«¯ä¿¡æ¯-i, --ip-addr # åœ¨ from åˆ—æ‰“å° IP åœ°å€è€Œä¸æ˜¯ä¸»æœºå-u, --no-current # å½“æŒ‡å‡ºå½“å‰è¿›ç¨‹å’Œ cpu æ—¶é—´æ—¶å¿½ç•¥ç”¨æˆ·å# ä¾‹å­ï¼š[student@localhost ~]$ w 16:58:40 up 27 min, 1 user, load average: 0.04, 0.03, 0.06USER TTY FROM LOGIN@ IDLE JCPU PCPU WHATstudent tty2 tty2 16:31 27:49 49.47s 0.15s /usr/libexec/track[student@localhost ~]$ w -hstudent tty2 tty2 16:31 28:16 50.82s 0.15s /usr/libexec/track[student@localhost ~]$ w -s 16:59:27 up 28 min, 1 user, load average: 0.07, 0.04, 0.06USER TTY FROM IDLE WHATstudent tty2 tty2 28:36 /usr/libexec/tracker-miner-fs ä½¿ç”¨ top å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿå½“å‰è´Ÿè½½ 123456789101112top # åŠ¨æ€åˆ—å‡º linux è¿›ç¨‹[student@localhost ~]$ toptop - 17:00:39 up 29 min, 1 user, load average: 0.11, 0.07, 0.07Tasks: 329 total, 1 running, 328 sleeping, 0 stopped, 0 zombie%Cpu(s): 1.8 us, 2.5 sy, 0.0 ni, 94.3 id, 0.0 wa, 1.2 hi, 0.2 si, 0.0 stMiB Mem : 3709.4 total, 1835.5 free, 1239.4 used, 634.4 buff/cacheMiB Swap: 2048.0 total, 2048.0 free, 0.0 used. 2217.5 avail Mem PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 11 root 20 0 0 0 0 I 0.3 0.0 0:01.85 rcu_sched ...# è¿›ç¨‹å· æ‰€å±ç”¨æˆ· è™šæ‹Ÿå†…å­˜ å¸¸é©»å†…å­˜ è¿›ç¨‹çŠ¶æ€ CPUæ—¶é—´ è¿›ç¨‹å‘½ä»¤åç§° â€‹ top å‘½ä»¤å¸¸è§æŒ‰é”®æ“ä½œï¼š æŒ‰é”® ç”¨é€” ? or h å…³äºå¿«æ·é”®æ“ä½œçš„å¸®åŠ©ä¿¡æ¯ã€‚ lã€tã€m åˆ‡æ¢åˆ°è´Ÿè½½ã€çº¿ç¨‹å’Œå†…å­˜æ ‡é¢˜è¡Œã€‚ 1 æ ‡é¢˜ä¸­åˆ‡æ¢æ˜¾ç¤ºå•ç‹¬ CPU ä¿¡æ¯æˆ–æ‰€æœ‰ CPU çš„æ±‡æ€»ã€‚ s * æ›´æ”¹åˆ·æ–°ï¼ˆå±å¹•ï¼‰ç‡ï¼Œä»¥å¸¦å°æ•°çš„ç§’æ•°è¡¨ç¤ºï¼ˆå¦‚0.5ã€1ã€5ï¼‰ã€‚ b åˆ‡æ¢åå‘çªå‡ºæ˜¾ç¤º è¿è¡Œä¸­ çš„è¿›ç¨‹ï¼›é»˜è®¤ä¸ºä»…ç²—ä½“ã€‚ shift + b åœ¨æ˜¾ç¤ºä¸­ä½¿ç”¨ç²—ä½“ï¼Œç”¨äºæ ‡é¢˜ä»¥åŠè¿è¡Œä¸­çš„è¿›ç¨‹ã€‚ shift + h åˆ‡æ¢çº¿ç¨‹ï¼›æ˜¾ç¤ºè¿›ç¨‹æ‘˜è¦æˆ–å•ç‹¬çº¿ç¨‹ã€‚ uã€shift + u è¿‡æ»¤ä»»ä½•ç”¨æˆ·åç§°ï¼ˆæœ‰æ•ˆã€çœŸå®ï¼‰ã€‚ shift + m æŒ‰ç…§å†…å­˜ä½¿ç”¨ç‡é™åºæ’åˆ—è¿›ç¨‹åˆ—è¡¨ã€‚ shift + p æŒ‰ç…§å¤„ç†å™¨ä½¿ç”¨ç‡é™åºæ’åˆ—è¿›ç¨‹åˆ—è¡¨ã€‚ k * ä¸­æ–­è¿›ç¨‹ã€‚è‹¥æœ‰æç¤ºï¼Œè¾“å…¥ PID ï¼Œå†è¾“å…¥ signalã€‚ r * è°ƒæ•´è¿›ç¨‹çš„ nice å€¼ã€‚è‹¥ç”±æç¤ºï¼Œè¾“å…¥ PIDï¼Œå†è¾“å…¥ nice_valueã€‚ shift + w å†™å…¥ï¼ˆä¿å­˜ï¼‰å½“å‰çš„æ˜¾ç¤ºé…ç½®ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡é‡æ–°å¯åŠ¨ top æ—¶ä½¿ç”¨ã€‚ q é€€å‡ºã€‚ f é€šè¿‡å¯ç”¨æˆ–ç¦ç”¨å­—æ®µçš„æ–¹å¼æ¥ç®¡ç†åˆ—ã€‚åŒæ—¶è¿˜å…è®¸æ‚¨ä¸º top è®¾ç½®æ’åºå­—æ®µã€‚ * æ³¨ï¼š å¦‚æœ top åœ¨å®‰å…¨æ¨¡å¼ä¸­å¯åŠ¨ï¼Œåˆ™ä¸å¯ç”¨ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆä¸€ï¼‰","slug":"Linux | ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆä¸€ï¼‰","date":"2022-08-15T02:20:42.222Z","updated":"2022-08-15T02:29:08.419Z","comments":true,"path":"2022-08-15-Linux | ç›‘æ§å’Œç®¡ç† Linux è¿›ç¨‹ï¼ˆä¸€ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%9B%91%E6%8E%A7%E5%92%8C%E7%AE%A1%E7%90%86%20Linux%20%E8%BF%9B%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ äº†è§£ Linux è¿›ç¨‹ ä»€ä¹ˆæ˜¯è¿›ç¨‹ â€‹è¿›ç¨‹æ˜¯å·²å¯åŠ¨çš„å¯æ‰§è¡Œç¨‹åºçš„è¿è¡Œä¸­å®ä¾‹ï¼Œå…¶ç”±ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ç»„æˆï¼š å·²åˆ†é…å†…å­˜çš„åœ°å€ç©ºé—´ï¼› å®‰å…¨å±æ€§ï¼› ç¨‹åºä»£ç çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œçº¿ç¨‹ï¼› è¿›ç¨‹çŠ¶æ€ï¼› â€‹è¿›ç¨‹çš„ç¯å¢ƒåŒ…æ‹¬ï¼š æœ¬åœ°å’Œå…¨å±€å˜é‡ï¼› å½“å‰è°ƒåº¦ä¸Šä¸‹æ–‡ï¼› åˆ†é…çš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æ–‡ä»¶æè¿°ç¬¦å’Œç½‘ç»œç«¯å£ï¼› â€‹ç°æœ‰çš„ï¼ˆçˆ¶ï¼‰è¿›ç¨‹å¤åˆ¶è‡ªå·±çš„åœ°å€ç©ºé—´ï¼ˆforkï¼‰æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ˆå­ï¼‰è¿›ç¨‹ç»“æ„ã€‚æ¯ä¸ªæ–°è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªå”¯ä¸€è¿›ç¨‹ ID(PID) ï¼Œæ»¡è¶³è·Ÿè¸ªå’Œå®‰å…¨æ€§çš„éœ€è¦ã€‚PID å’Œçˆ¶è¿›ç¨‹ ID(PPID) æ˜¯æ–°è¿›ç¨‹ç¯å¢ƒçš„å…ƒç´ ã€‚ä»»ä½•è¿›ç¨‹éƒ½å¯åˆ›å»ºå­è¿›ç¨‹ã€‚æ‰€æœ‰è¿›ç¨‹éƒ½æ˜¯ç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹çš„åä»£ï¼Œåœ¨ RHEL8 ç³»ç»Ÿä¸Šï¼Œç¬¬ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹æ˜¯ systemdã€‚ â€‹é€šè¿‡forkä¾‹ç¨‹ï¼Œå­è¿›ç¨‹ç»§æ‰¿å®‰å…¨æ€§èº«ä»½ã€è¿‡å»å’Œå½“å‰çš„æ–‡ä»¶æè¿°ç¬¦ã€ç«¯å£å’Œèµ„æºç‰¹æƒã€ç¯å¢ƒå˜é‡ï¼Œä»¥åŠç¨‹åºä»£ç ã€‚éšåï¼Œå­è¿›ç¨‹å¯èƒ½ exec å…¶è‡ªå·±çš„ç¨‹åºä»£ç ã€‚é€šå¸¸ï¼Œçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹è¿è¡ŒæœŸé—´å¤„äºç¡çœ çŠ¶æ€ï¼Œè®¾ç½®ä¸€ä¸ªåœ¨å­è¿›ç¨‹å®Œæˆæ—¶å‘å‡ºä¿¡å·çš„è¯·æ±‚ wait ï¼‰ã€‚åœ¨é€€å‡ºæ—¶ï¼Œå­è¿›ç¨‹å·²ç»å…³é—­æˆ–ä¸¢å¼ƒäº†å…¶èµ„æºå’Œç¯å¢ƒã€‚å”¯ä¸€å‰©ä¸‹çš„èµ„æºç§°ä¸ºåƒµåœï¼Œæ˜¯è¿›ç¨‹è¡¨ä¸­çš„ä¸€ä¸ªæ¡ç›®ã€‚çˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹é€€å‡ºæ—¶æ”¶åˆ°ä¿¡å·è€Œè¢«å”¤é†’ï¼Œæ¸…ç†å­æ¡ç›®çš„è¿›ç¨‹è¡¨ï¼Œç”±æ­¤é‡Šæ”¾å­è¿›ç¨‹çš„æœ€åä¸€ä¸ªèµ„æºã€‚ç„¶åï¼Œçˆ¶è¿›ç¨‹ç»§ç»­æ‰§è¡Œè‡ªå·±çš„ç¨‹åºä»£ç ã€‚ è¿›ç¨‹çš„çŠ¶æ€ â€‹åœ¨å¤šä»»åŠ¡å¤„ç†æ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ª CPUï¼ˆæˆ– CPU æ ¸å¿ƒï¼‰åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šå¤„ç†ä¸€ä¸ªè¿›ç¨‹ã€‚åœ¨è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå®ƒå¯¹ CPU æ—¶é—´å’Œèµ„æºåˆ†é…çš„ç›´æ¥è¦æ±‚ä¼šæœ‰å˜åŒ–ã€‚è¿›ç¨‹åˆ†é…æœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒéšç€ç¯å¢ƒçš„è¦æ±‚è€Œæ”¹å˜ã€‚ â€‹ä¸Šå›¾å±•ç¤ºäº† Linux è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­çš„å„ç§çŠ¶æ€ï¼Œä¸‹è¡¨æ˜¯å¯¹ä»¥ä¸ŠçŠ¶æ€çš„è¯´æ˜ï¼š åç§° æ ‡å¿— å†…æ ¸å®šä¹‰çš„çŠ¶æ€åç§° æè¿° è¿è¡Œ R TASK_RUNNING è¿›ç¨‹æ­£åœ¨ CPU ä¸Šæ‰§è¡Œï¼Œæˆ–è€…æ­£åœ¨ç­‰å¾…è¿è¡Œã€‚å¤„äºè¿è¡Œä¸­ï¼ˆæˆ–å¯è¿è¡Œï¼‰çŠ¶æ€æ—¶ï¼Œè¿›ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œç”¨æˆ·ä¾‹ç¨‹æˆ–å†…æ ¸ä¾‹ç¨‹ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Œæˆ–è€…å·²æ’é˜Ÿå¹¶å°±ç»ªã€‚ ç¡çœ  S TASK_INTERRUPTIBLE è¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€æ¡ä»¶ï¼šç¡¬ä»¶è¯·æ±‚ã€ç³»ç»Ÿèµ„æºè®¿é—®æˆ–ä¿¡å·ã€‚å½“äº‹ä»¶æˆ–ä¿¡å·æ»¡è¶³è¯¥æ¡ä»¶æ—¶ï¼Œè¯¥è¿›ç¨‹å°†è¿”å›åˆ°è¿è¡Œä¸­ã€‚ D TASK_UNINTERRUPTIBLE æ­¤è¿›ç¨‹ä¹Ÿåœ¨ç¡çœ ï¼Œä½†ä¸ S çŠ¶æ€ä¸åŒï¼Œä¸ä¼šå“åº”ä¿¡å·ã€‚ä»…åœ¨è¿›ç¨‹ä¸­æ–­å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è®¾å¤‡çŠ¶æ€çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ K TASK_KILLABLE ä¸ä¸å¯ä¸­æ–­çš„ D çŠ¶æ€ç›¸åŒå§ï¼Œä½†æœ‰æ‰€ä¿®æ”¹ï¼Œå…è®¸ç­‰å¾…ä¸­çš„ä»»åŠ¡å“åº”è¦è¢«ä¸­æ–­ï¼ˆå½»åº•é€€å‡ºï¼‰çš„ä¿¡å·ã€‚å®ç”¨ç¨‹åºé€šå¸¸å°†å¯ä¸­æ–­çš„è¿›ç¨‹æ˜¾ç¤ºä¸º K çŠ¶æ€ã€‚ I TASK_REPORT_IDLE D çŠ¶æ€çš„ä¸€ä¸ªå­é›†ã€‚åœ¨è®¡ç®—è´Ÿè½½å¹³å‡å€¼æ—¶ï¼Œå†…æ ¸ä¸ä¼šç»Ÿè®¡è¿™äº›è¿›ç¨‹ã€‚ç”¨äºå†…æ ¸çº¿ç¨‹ã€‚è®¾ç½®äº† TASK_UNINTERRUPTABLE å’Œ TASK_NOLOAD æ ‡å¿—ã€‚ç±»ä¼¼äº TASK_KILLABLEï¼Œä¹Ÿæ˜¯ D çŠ¶æ€çš„ä¸€ä¸ªå­é›†ã€‚å®ƒæ¥å—è‡´å‘½ä¿¡å·ã€‚ å·²åœæ­¢ T TASK_STOPPED è¿›ç¨‹å·²è¢«åœæ­¢ï¼ˆæš‚åœï¼‰ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç”¨æˆ·æˆ–å…¶ä»–è¿›ç¨‹å‘å‡ºçš„ä¿¡å·ã€‚è¿›ç¨‹å¯ä»¥é€šè¿‡å¦ä¸€ä¿¡å·è¿”å›åˆ°è¿è¡Œä¸­çŠ¶æ€ï¼Œç»§ç»­æ‰§è¡Œï¼ˆæ¢å¤ï¼‰ã€‚ T TASK_TRACED æ­£åœ¨è¢«è°ƒè¯•çš„è¿›ç¨‹ä¹Ÿä¼šä¸´æ—¶åœæ­¢ï¼Œå¹¶ä¸”å…±äº«åŒä¸€ä¸ª T çŠ¶æ€æ ‡å¿—ã€‚ åƒµåœ Z EXIT_ZOMBIE å­è¿›ç¨‹åœ¨é€€å‡ºæ—¶å‘çˆ¶è¿›ç¨‹å‘å‡ºä¿¡å·ã€‚é™¤è¿›ç¨‹èº«ä»½ï¼ˆPIDï¼‰ä¹‹å¤–çš„æ‰€æœ‰èµ„æºéƒ½å·²é‡Šæ”¾ã€‚ X EXIT_DEAD å½“çˆ¶è¿›ç¨‹æ¸…ç†ï¼ˆè·å–ï¼‰å‰©ä½™çš„å­è¿›ç¨‹ç»“æ„æ—¶ï¼Œè¿›ç¨‹ç°åœ¨å·²å½»åº•é‡Šæ”¾ã€‚æ­¤çŠ¶æ€ä»ä¸ä¼šåœ¨è¿›ç¨‹åˆ—å‡ºå®ç”¨ç¨‹åºä¸­çœ‹åˆ°ã€‚ â€‹åœ¨å¯¹ç³»ç»Ÿè¿›è¡Œæ•…éšœæ’é™¤æ—¶ï¼Œäº†è§£å†…æ ¸å¦‚ä½•ä¸è¿›ç¨‹é€šä¿¡ä»¥åŠè¿›ç¨‹å¦‚ä½•ç›¸äº’é€šä¿¡éå¸¸é‡è¦ã€‚åœ¨åˆ›å»ºè¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿä¼šä¸ºè¿›ç¨‹åˆ†é…ä¸€ä¸ªçŠ¶æ€ã€‚topå‘½ä»¤çš„ S åˆ—æˆ– ps çš„ STAT åˆ—æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚åœ¨å• CPU ç³»ç»Ÿä¸Šï¼Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚å¯ä»¥çœ‹åˆ°å¤šä¸ªçŠ¶æ€ä¸º R çš„è¿›ç¨‹ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰è¿™äº›è¿›ç¨‹éƒ½åœ¨æŒç»­è¿è¡Œï¼Œå…¶ä¸­ä¸€äº›å°†å¤„äºç­‰å¾…çŠ¶æ€ã€‚ 1234567[root@localhost ~]\\# ps auxUSER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMANDroot 1 0.0 0.3 245648 14544 ? Ss Apr25 0:16 /usr/lib/systemd/systemd --switched-root --system --deserialize 18root 2 0.0 0.0 0 0 ? S Apr25 0:00 [kthreadd]root 3 0.0 0.0 0 0 ? I&lt; Apr25 0:00 [rcu_gp]root 4 0.0 0.0 0 0 ? I&lt; Apr25 0:00 [rcu_par_gp]...... â€‹å¯ä»¥ä½¿ç”¨ä¿¡å·æš‚åœã€åœæ­¢ã€æ¢å¤ã€ç»ˆæ­¢å’Œä¸­æ–­è¿›ç¨‹ï¼Œä¿¡å·å¯ä»¥ç”±å…¶ä»–è¿›ç¨‹ã€å†…æ ¸æœ¬èº«æˆ–ç™»é™†ç³»ç»Ÿçš„ç”¨æˆ·ä½¿ç”¨ã€‚ä»¥ä¸‹ä¼šæœ‰è¯¦ç»†ä»‹ç»ã€‚ åˆ—å‡ºè¿›ç¨‹ â€‹ps å‘½ä»¤å¯ä»¥ç”¨äºåˆ—å‡ºå½“å‰çš„è¿›ç¨‹ï¼Œå®ƒå¯ä»¥æä¾›è¯¦ç»†çš„è¿›ç¨‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š ç”¨æˆ·æ ‡è¯†ç¬¦ï¼ˆUIDï¼‰ï¼Œå®ƒç¡®å®šè¿›ç¨‹çš„ç‰¹æƒï¼› å”¯ä¸€è¿›ç¨‹è¯†åˆ«ç¬¦ï¼ˆPIDï¼‰ï¼› CPU å’Œå·²ç»èŠ±è´¹çš„å®æ—¶æ—¶é—´ï¼› è¿›ç¨‹åœ¨å„ç§ä½ç½®ä¸Šåˆ†é…çš„å†…å­˜æ•°é‡ï¼› è¿›ç¨‹ stdout çš„ä½ç½®ï¼Œç§°ä¸ºæ§åˆ¶ç»ˆç«¯ï¼› å½“å‰çš„è¿›ç¨‹çŠ¶æ€ã€‚ ğŸŸ¢ å¸¸è§é€‰é¡¹ç»„åˆ aux: æ˜¾ç¤ºåŒ…æ‹¬äº”æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹åœ¨å†…çš„æ‰€æœ‰è¿›ç¨‹ï¼Œæ³¨æ„ aux != -auxï¼› USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.3 245648 14544 ? Ss Apr25 0:16 &gt; /usr/lib/systemd/systemd --switched-root --system --deserialize 18 lax: é•¿åˆ—è¡¨æä¾›æ›´å¤šæŠ€æœ¯è¯¦ç»†ä¿¡æ¯ï¼Œä½†å¯ä»¥é€šè¿‡é¿å…æŸ¥è¯¢ç”¨æˆ·åæ¥åŠ å¿«æ˜¾ç¤ºã€‚ F UID PID PPID PRI NI VSZ RSS WCHAN STAT TTY TIME COMMAND 4 0 1 0 20 0 245648 14544 do_epo Ss ? 0:16 &gt; /usr/lib/systemd/systemd --switched-root --system --deserialize 18 -ef: UID PID PPID C STIME TTY TIME CMD root 1 0 0 Apr25 ? 00:00:16 /usr/lib/systemd/systemd --&gt; switched-root --system --deserialize 18 æ²¡æœ‰é€‰é¡¹ï¼šé€‰æ‹©å…·æœ‰ä¸å½“å‰ç”¨æˆ·ç›¸åŒçš„æœ‰æ•ˆç”¨æˆ· ID(EUID) å¹¶äºè°ƒç”¨ ps æ‰€å¤„ç»Ÿä¸€ç»ˆç«¯å…³è”çš„æ‰€æœ‰è¿›ç¨‹ã€‚ PID TTY TIME CMD 19667 pts/0 00:00:00 bash ğŸŸ¢ ä½¿ç”¨ ps -ef | grep [PROC_NAME] æ—¶æ³¨æ„æ­¤å‘½ä»¤ä¼šå°† grep å‘½ä»¤è‡ªèº«çš„è¿›ç¨‹ä¹Ÿåˆ—å‡ºä¸€ä»½ã€‚ ğŸŸ¢ å…¶ä»–äº‹é¡¹ æ–¹æ‹¬å·ä¸­çš„è¿›ç¨‹ï¼ˆé€šå¸¸ä½äºåˆ—è¡¨é¡¶éƒ¨ï¼‰ä¸ºè°ƒåº¦çš„å†…æ ¸çº¿ç¨‹ï¼› åƒµåœåˆ—ä¸º exiting æˆ– defunctï¼› ps çš„è¾“å‡ºä»…æ˜¾ç¤ºä¸€æ¬¡ã€‚ä½¿ç”¨ top æ¥è·å¾—åŠ¨æ€æ›´æ–°çš„è¿›ç¨‹æ˜¾ç¤ºï¼› ps å¯ä»¥é‡‡ç”¨æ ‘å½¢æ˜¾ç¤ºæ ¼å¼ï¼ˆf é€‰é¡¹ï¼‰ï¼Œä»¥ä¾¿æŸ¥çœ‹çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Œï¼ˆæ›´ç›´è§‚çš„å¯ä»¥ä½¿ç”¨ pstree å‘½ä»¤ï¼‰ï¼› é»˜è®¤è¾“å‡ºæŒ‰è¿›ç¨‹ ID ç¼–å·æ’åºã€‚ ä½œä¸šæ§åˆ¶ è¿›ç¨‹ç»„ã€ä½œä¸šã€ä¼šè¯ â€‹Linux ä¸‹è¿›ç¨‹ä¸ä»…æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„ PIDï¼Œè¿˜æœ‰å…¶å±äºå“ªä¸ªè¿›ç¨‹ç»„çš„æ ‡è¯† PGIDã€‚å¦‚æœæŸè¿›ç¨‹çš„ PGID ç­‰äºå…¶è‡ªèº«çš„ PIDï¼Œé‚£ä¹ˆæ­¤è¿›ç¨‹å°±å¯ä»¥è¢«ç§°ä¸ºä¸å®ƒå…·æœ‰åŒä¸€ PGID çš„è¿›ç¨‹ç»„çš„ç»„é•¿è¿›ç¨‹ã€‚å½“ä¸€ä¸ªç¨‹åºåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ç»„æ—¶ï¼Œå…¶åˆ›å»ºè¿›ç¨‹ç»„çš„è¿™ä¸ªè¿›ç¨‹å°±ä¸ºç»„é•¿è¿›ç¨‹ã€‚ç¨‹åºå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸåªä¸è¿›ç¨‹ç»„ä¸­çš„æœ€åä¸€ä¸ªè¿›ç¨‹æœ‰å…³ã€‚Shell çš„ä½œä¸šæ§åˆ¶åŠŸèƒ½æ§åˆ¶çš„å¯¹è±¡æ˜¯ä½œä¸šæˆ–è€…è¿›ç¨‹ç»„è€Œä¸æ˜¯è¿›ç¨‹ã€‚æ¯ä¸ªç»ˆç«¯å‰å°åªèƒ½è¿è¡Œä¸€ä¸ªè¿›ç¨‹ç»„æˆ–ä¸€ä¸ªç»„æˆ–ä¸€ä¸ªä½œä¸šï¼Œè€Œæ¯ä¸ªç»ˆç«¯åå°å¯ä»¥è¿è¡Œå¤šä¸ªè¿›ç¨‹ç»„å’Œå¤šä¸ªä½œä¸šã€‚ä¼šè¯æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„çš„é›†åˆã€‚ 12345[root@localhost ~]\\# ps -ajx | grep 19667 PPID PID PGID SID TTY TPGID STAT UID TIME COMMAND 19658 19667 19667 19667 pts/0 20514 Ss 0 0:00 -bash # åŒä¸€ 19667 20514 20514 19667 pts/0 20514 R+ 0 0:00 ps -ajx # åŒä¸€ä¸ª ä¸ªä¼š 19667 20515 20514 19667 pts/0 20514 S+ 0 0:00 grep --color=auto 19667 # è¿›ç¨‹ç»„ è¯ â€‹ps å‘½ä»¤åœ¨ TTY åˆ—ä¸­æ˜¾ç¤ºè¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯çš„è®¾å¤‡åç§°ã€‚æŸäº›è¿›ç¨‹ï¼ˆå¦‚ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ï¼‰ç”±ç³»ç»Ÿå¯åŠ¨ï¼Œå¹¶ä¸æ˜¯ä» shell æç¤ºç¬¦å¯åŠ¨ã€‚è¿™äº›è¿›ç¨‹æ²¡æœ‰æ§åˆ¶ç»ˆç«¯ï¼Œä¹Ÿä¸æ˜¯ä½œä¸šçš„æˆå‘˜ï¼Œæ— æ³•è½¬è‡³å‰å°ã€‚ps å‘½ä»¤åœ¨ TTY åˆ—ä¸­é’ˆå¯¹è¿™äº›è¿›ç¨‹æ˜¾ç¤ºä¸€ä¸ªé—®å·ã€‚ æŸ¥çœ‹å½“å‰ä¼šè¯çš„ä½œä¸šåˆ—è¡¨ 1234567jobs [-lnprs] [jobspec ...] # æ˜¾ç¤ºå½“å‰ä¼šè¯æ‰€æœ‰ï¼ˆæˆ–æä¾› jobspec å‚æ•°æŒ‡å®šçš„ï¼‰ä½œä¸šçš„çŠ¶æ€# é€‰é¡¹ï¼š-l, # é¢å¤–åˆ—å‡ºè¿›ç¨‹çš„ PID-n, # åˆ—å‡ºæœ€åä¸€æ¬¡é€šçŸ¥åæ”¹å˜è¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹-p, # åªåˆ—å‡ºè¿›ç¨‹çš„ PID-r, # ä»…é™è¾“å‡ºæ­£åœ¨è¿è¡Œçš„ä½œä¸š-s, # ä»…é™è¾“å‡ºå·²ç»åœæ­¢çš„ä½œä¸š å°†ä½œä¸šæ”¾åœ¨å‰å°æ‰§è¡Œ å¯¹äºå°†è¦è¿è¡Œçš„ç¨‹åºï¼šåœ¨å‘½ä»¤è¡Œçš„ç»“å°¾å¤„ä¸é™„åŠ ç¬¦å· &amp;ï¼Œè¿™æ ·ç¨‹åºæ‰€å¯¹åº”çš„ä½œä¸šç›´æ¥åœ¨å‰å°ä¸‹è¿è¡Œã€‚ æŠŠåå°ä½œä¸šæ‹‰åˆ°å‰å°è¿è¡Œï¼šæ‰§è¡Œå‘½ä»¤ 1fg [%]ä½œä¸šå· # [%] è¡¨ç¤º % ä¸ºå¯é€‰ ğŸŸ¢ å½“åœ¨å‰å°ä¸‹è¿è¡Œä¸€ä¸ªä½œä¸šæ—¶ï¼Œshell ä¼šè¢«æ‹‰åˆ°åå°ï¼Œå› ä¸ºå‰å°åªèƒ½è¿è¡Œä¸€ä¸ªä½œä¸šæˆ–è€…è¿›ç¨‹ç»„ã€‚ å°†ä½œä¸šæ”¾åœ¨åå°æ‰§è¡Œ å¯¹äºå°†è¦è¿è¡Œçš„ç¨‹åºï¼šåœ¨å‘½ä»¤è¡Œçš„ç»“å°¾å¤„é™„åŠ ç¬¦å· &amp;ã€‚ æŠŠä¸€ä¸ªæ­£åœ¨å‰å°è¿è¡Œçš„ç¨‹åºæ”¾åˆ°åå°è¿è¡Œï¼šå…ˆä½¿ç”¨ Ctrl + Z å¿«æ·é”®å°†å‰å°çš„ä½œä¸šæ”¾åˆ°åå°ï¼Œæ­¤æ—¶è¯¥åå°ä½œä¸šæ˜¯å¤„äºæš‚åœçŠ¶æ€çš„ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å…¶ä»åœæ­¢çŠ¶æ€æ¢å¤åˆ°è¿è¡ŒçŠ¶æ€ï¼š 1bg [%]ä½œä¸šå· # [%] è¡¨ç¤º % ä¸ºå¯é€‰ ä½¿ä½œä¸šåœ¨å…³é—­ç»ˆç«¯åä¹Ÿèƒ½è¿è¡Œ 1nohup COMMAND [ARG]... [&gt; FILE] # æ‰§è¡Œå‘½ä»¤ï¼Œå¿½ç•¥æŒ‚èµ·ä¿¡å·ï¼ˆä¸€èˆ¬åé¢è¿½åŠ ä¸ª &amp; é…åˆä½¿ç”¨ï¼‰ ç»ˆæ­¢å½“å‰è¿è¡Œçš„å‰å°ä»»åŠ¡ â€‹ä½¿ç”¨ Ctrl + C å¿«æ·é”®ã€‚ ä¸­æ–­è¿›ç¨‹ ä½¿ç”¨ä¿¡å·æ§åˆ¶è¿›ç¨‹ â€‹ä¿¡å·æ˜¯ä¼ é€’è‡³è¿›ç¨‹çš„è½¯ä»¶ä¸­æ–­ã€‚ä¿¡å·å‘æ‰§è¡Œä¸­çš„ç¨‹åºæŠ¥å‘Šäº‹ä»¶ã€‚ç”Ÿæˆä¿¡å·çš„äº‹ä»¶å¯ä»¥æ˜¯é”™è¯¯æˆ–å¤–éƒ¨äº‹ä»¶ï¼ˆI/Oè¯·æ±‚æˆ–å®šæ—¶å™¨è¿‡æœŸï¼‰ï¼Œæˆ–è€…æ¥è‡ªäºæ˜¾å¼ä½¿ç”¨ä¿¡å·å‘é€å‘½ä»¤æˆ–é”®ç›˜åºåˆ—ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¸­æ–­ä¿¡å·çš„ä»‹ç»ï¼ˆæ›´è¯¦ç»†çš„å¯å‚è§ manpage signal(7)ï¼‰ï¼š ä¿¡å·ç¼–å· åç§° å®šä¹‰ ç”¨é€” 1 SIGHUP æŒ‚èµ· ç”¨äºæŠ¥å‘Šç»ˆç«¯æ§åˆ¶è¿›ç¨‹çš„ç»ˆæ­¢ã€‚ä¹Ÿç”¨äºè¯·æ±‚è¿›ç¨‹é‡æ–°åˆå§‹åŒ–ï¼ˆé‡æ–°åŠ è½½é…ç½®ï¼‰è€Œä¸ç»ˆæ­¢ã€‚ 2 SIGINT é”®ç›˜ä¸­æ–­ å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚å¯ä»¥è¢«æ‹¦æˆªæˆ–å¤„ç†ã€‚é€šè¿‡æŒ‰ INTR é”®ç›˜åºåˆ—ï¼ˆCTRL + Cï¼‰å‘é€ã€‚ 3 SIGQUIT é”®ç›˜é€€å‡º ä¸ SIGINT ç›¸ä¼¼ï¼›åœ¨ç»ˆæ­¢æ—¶æ·»åŠ è¿›ç¨‹è½¬å‚¨ã€‚é€šè¿‡æŒ‰ QUIT é”®åºåˆ—ï¼ˆCTRL + \\ï¼‰å‘é€ã€‚ 9 SIGKILL ä¸­æ–­ï¼Œæ— æ³•æ‹¦æˆª å¯¼è‡´ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚æ— æ³•è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†ï¼›æ€»æ˜¯è‡´å‘½çš„ã€‚ 15é»˜è®¤ SIGTERM ç»ˆæ­¢ å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚å’Œ SIGKILL ä¸åŒï¼Œå¯ä»¥è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†ã€‚è¦æ±‚ç¨‹åºç»ˆæ­¢çš„â€œå‹å¥½â€æ–¹å¼ï¼›å…è®¸è‡ªæˆ‘æ¸…ç†ã€‚ 18 SIGCONT ç»§ç»­ å‘é€è‡³è¿›ç¨‹ä½¿å…¶æ¢å¤ï¼ˆè‹¥å·²åœæ­¢ï¼‰ã€‚æ— æ³•è¢«æ‹¦æˆªã€‚å³ä½¿è¢«å¤„ç†ï¼Œä¹Ÿå§‹ç»ˆæ¢å¤è¿›ç¨‹ã€‚ 19 SIGSTOP åœæ­¢ï¼Œæ— æ³•æ‹¦æˆª æš‚åœè¿›ç¨‹ã€‚æ— æ³•è¢«æ‹¦æˆªæˆ–å¤„ç†ã€‚ 20 SIGTSTP é”®ç›˜åœæ­¢ å’ŒSIGSTOPä¸åŒï¼Œå¯ä»¥è¢«æ‹¦æˆªã€å¿½ç•¥æˆ–å¤„ç†ã€‚é€šè¿‡æŒ‰ SUSP é”®åºåˆ—ï¼ˆCTRL + Zï¼‰å‘é€ã€‚ ğŸŸ¢ ä¿¡å·ç¼–å·è·Ÿç¡¬ä»¶å¹³å°æœ‰å…³ï¼Œä¸Šè¡¨ä¸­çš„ç¼–å·ä»¥ x86_64 ç³»ç»Ÿä¸ºä¾‹ã€‚ä½œä¸ºå‘½ä»¤ä½¿ç”¨æ—¶å»ºè®®ä½¿ç”¨ä¿¡å·åç§°ä½œä¸ºå‚æ•°ã€‚ å‘ä½œä¸šå‘é€ä¿¡å· 12345kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... # å‘ä½œä¸šå‘é€ä¿¡å·ï¼ŒæœªæŒ‡å®šä¿¡å·çš„è¯åˆ™é»˜è®¤å‘é€ SIGTERM ä¿¡å·kill -l [sigspec] # åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä¸­æ–­åç§°æˆ–æŒ‡å®š sigspec çš„ä¸­æ–­å·# å¸¸è§é€‰é¡¹ï¼š-s SIG # SIG æ˜¯ä¿¡å·åç§°-n SIGNUM # SIGN æ˜¯ä¿¡å·ç¼–ç  12killall [-s sigspec | -sigspec] NAME... # å‘å¤šä¸ªä½œä¸šå‘é€ä¿¡å·ï¼ŒæœªæŒ‡å®šä¿¡å·çš„è¯åˆ™é»˜è®¤å‘é€ SIGTERM ä¿¡å·# è¯¥å‘½ä»¤è¿˜æœ‰ä¸€äº›ç­›é€‰é€‰é¡¹ï¼Œå…·ä½“ç”¨åˆ°æ—¶å¯å‚è§å…¶ --help é€‰é¡¹çš„è¯´æ˜ 12pkill [-&lt;SIG&gt; | --signal &lt;SIG&gt;] [OTHER_OPTIONS] PATTERN # å‘å¤šä¸ªä½œä¸šå‘é€ä¿¡å·ï¼ŒæœªæŒ‡å®šä¿¡å·çš„è¯åˆ™é»˜è®¤å‘é€ SIGTERM ä¿¡å·# æ­¤å‘½ä»¤çš„ç­›é€‰æ¡ä»¶æ›´è¯¦ç»†ï¼Œä¸”è¿›ç¨‹åéƒ½æ˜¯å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…çš„ ä»¥ç®¡ç†å‘˜çš„èº«ä»½æ³¨é”€å…¶ä»–ç”¨æˆ·çš„ç™»é™† â€‹è¦æ³¨é”€æŸä¸ªç”¨æˆ·ï¼Œé¦–å…ˆç¡®å®šè¦ç»ˆæ­¢çš„ç™»å½•ä¼šè¯ã€‚ä½¿ç”¨ w å‘½ä»¤åˆ—å‡ºç”¨æˆ·ç™»é™†å’Œå½“å‰è¿è¡Œçš„è¿›ç¨‹ã€‚è®°å½• TTY å’Œ FROM åˆ—ï¼Œä»¥ç¡®å®šè¦å…³é—­çš„ä¼šè¯ã€‚ 12345[root@localhost ~]\\# w 11:06:17 up 1 day, 2:29, 2 users, load average: 0.00, 0.00, 0.00USER TTY FROM LOGIN@ IDLE JCPU PCPU WHATstudent tty2 tty2 15Apr21 10days 5:04 1.20s /usr/libexec/trackroot pts/0 192.168.30.1 07:35 1.00s 0.25s 0.01s w ğŸŸ¢ TTY åˆ—ï¼špts/N ä»£è¡¨å›¾å½¢ç•Œé¢ç»ˆç«¯çª—å£æˆ–è¿œç¨‹ç™»å½•ä¼šè¯ç›¸å…³è”çš„ä¼ªç»ˆç«¯ï¼›ttyN ä»£è¡¨ç”¨æˆ·ä½äºä¸€ä¸ªç³»ç»Ÿæ§åˆ¶å°ã€æ›¿ä»£æ§åˆ¶å°æˆ–å…¶ä»–ç›´æ¥è¿æ¥çš„ç»ˆç«¯è®¾å¤‡ä¸Šã€‚ â€‹ä½¿ç”¨ pgrep ç¡®å®šè¦ä¸­æ–­çš„ PID ç¼–å·ï¼š 12345678[root@localhost ~]\\# pgrep -l -u student # pgrep ä¸ pkill å‘½ä»¤çš„ç”¨æ³•ç±»ä¼¼ï¼Œä½œç”¨ä¸åŒ2238 systemd2248 (sd-pam)2257 pulseaudio2263 gnome-keyring-d......[root@localhost ~]\\# pkill -SIGKILL -u student # æ€æ­» student ç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹[root@localhost ~]\\# pgrep -l -u student ğŸŸ¢ é€šå¸¸å»ºè®®ä¸è¦ç›´æ¥ä½¿ç”¨ SIGKILL æ€æ­»è¿›ç¨‹ï¼Œè€Œæ˜¯åœ¨å°è¯• SIGTERM å’Œ SIGINT ä¸èµ·ä½œç”¨ä¹‹åä½¿ç”¨ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux æ–‡ä»¶ç³»ç»Ÿæƒé™","slug":"Linux | Linux æ–‡ä»¶ç³»ç»Ÿæƒé™","date":"2022-08-15T02:17:38.330Z","updated":"2022-08-15T02:19:32.512Z","comments":true,"path":"2022-08-15-Linux | Linux æ–‡ä»¶ç³»ç»Ÿæƒé™.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20Linux%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ Linux æ–‡ä»¶æƒé™ç±»åˆ« â€‹å¯¹äºä¸€ä¸ª linux ç³»ç»Ÿä¸Šçš„ä¸€èˆ¬æ–‡ä»¶ï¼Œå…¶è®¿é—®æƒé™çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š ä¾‹å­ ç”¨æˆ·ç±»åˆ« å…·ä½“æƒé™ sample.sh u: è¯¥æ–‡ä»¶çš„å±ä¸»ï¼Œé€šå¸¸æ˜¯åˆ›å»ºè€… r: è¯»å–æƒé™ï¼Œå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ w: ä¿®æ”¹æƒé™ï¼Œå¯ä»¥æ›´æ”¹æ–‡ä»¶å†…å®¹ x: æ‰§è¡Œæƒé™ï¼Œå¯ä»¥åšä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œ g: è¯¥æ–‡ä»¶å±ä¸»æ‰€å¤„çš„ä¸»è¦ç»„ r: è¯»å–æƒé™ï¼Œå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ w: ä¿®æ”¹æƒé™ï¼Œå¯ä»¥æ›´æ”¹æ–‡ä»¶å†…å®¹ x: æ‰§è¡Œæƒé™ï¼Œå¯ä»¥åšä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œ o: å…¶ä»–ç”¨æˆ·ä»¥åŠä»–ä»¬çš„ç”¨æˆ·ç»„ r: è¯»å–æƒé™ï¼Œå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ w: ä¿®æ”¹æƒé™ï¼Œå¯ä»¥æ›´æ”¹æ–‡ä»¶å†…å®¹ x: æ‰§è¡Œæƒé™ï¼Œå¯ä»¥åšä¸ºå¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œ â€‹å¯¹äºç›®å½•æ–‡ä»¶ï¼Œå…¶æƒé™æ ‡è¯†çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š æƒé™ ä½œç”¨ r: è¯»å–æƒé™ å¯ä»¥åˆ—å‡ºç›®å½•çš„å†…å®¹ w: å†™å…¥æƒé™ å¯ä»¥åˆ›å»ºæˆ–åˆ é™¤ç›®å½•ä¸­çš„ä»»ä¸€æ–‡ä»¶ x: æ‰§è¡Œæƒé™ è¯¥ç›®å½•å¯ä»¥æˆä¸ºå½“å‰å·¥ä½œç›®å½•ï¼ˆå¯ä»¥ ch åˆ°ï¼‰ï¼Œä½†è¦è¯»å–æƒé™æ‰èƒ½æŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ ä¿®æ”¹ Linux æ–‡ä»¶æƒé™ ä½¿ç”¨ chmod å‘½ä»¤ä¿®æ”¹æ–‡ä»¶æƒé™ 12345678chmod [OPTION]... MODE[,MODE]... FILE... # ä»¥ç¬¦å·å½¢å¼ä¿®æ”¹æƒé™chmod [OPTION]... OCTAL-MODE FILE... # ä»¥æ•°å­—å½¢å¼ä¿®æ”¹æƒé™chmod [OPTION]... --reference=RFILE FILE... # å°†æ–‡ä»¶çš„æƒé™ä¿®æ”¹çš„å’Œ RFILE ä¸€æ ·# å¸¸è§é€‰é¡¹ï¼š-R, --recursive # é€’å½’ä¿®æ”¹ç›®å½•å’Œæ–‡ä»¶-v, --verbose # ä¸ºæ¯ä¸ªå¤„ç†çš„æ–‡ä»¶è¾“å‡ºè¯Šæ–­ä¿¡æ¯-c, --changes # ç±»ä¼¼ -v é€‰é¡¹ï¼Œä½†æ˜¯ä»…åœ¨æ–‡ä»¶æ›´æ”¹æˆåŠŸæ—¶æŠ¥å‘Š-f, --silent, --quiet # å¿½ç•¥å¤§å¤šæ•°é”™è¯¯ä¿¡æ¯ ç¬¦å·æ³• â€‹å¯ä»¥ä½¿ç”¨ uã€gã€oã€a å­—æ¯åˆ†åˆ«ä»£è¡¨æ–‡ä»¶å±ä¸»ã€å±ä¸»æ‰€åœ¨ç»„ã€å…¶ä»–ç”¨æˆ·åŠç»„ã€æ‰€æœ‰ç”¨æˆ·åŠç»„ï¼Œå¯¹åº”çš„åŠ¨ä½œ +ã€-ã€= åˆ†åˆ«ä»£è¡¨æ·»åŠ ã€åˆ é™¤ã€ç²¾ç¡®è®¾ç½®ï¼Œrã€wã€x ä»£è¡¨æ‰€è¦è®¾ç½®çš„æƒé™ï¼Œè®¾ç½®å¤šä¸ªç”¨æˆ·ç±»åˆ«æ—¶ç”¨é€—å·éš”å¼€ï¼Œå³å¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š 1chmod u+wx,o-rx executable.sh # å±ä¸»å¢åŠ å†™å…¥å’Œæ‰§è¡Œæƒé™ï¼Œå…¶ä»–ç”¨æˆ·åˆ é™¤è¯»å’Œæ‰§è¡Œæƒé™ æ•°å­—æ³• â€‹è®© rã€wã€x æƒé™åˆ†åˆ«å¯¹åº”æ•°å­— 4ã€2ã€1ï¼Œç”±è¿™ä¸‰ä¸ªæ•°å­—ä»»æ„ç»„åˆç›¸åŠ å¾—åˆ°ä¸€ä¸ª 0-7 çš„ç»“æœï¼Œå°†è¿™ä¸ªç»“æœä»å·¦åˆ°å³ä¸‰ä½åˆ†åˆ«ä»£è¡¨ uã€gã€o å¯¹åº”çš„æƒé™å†ç»„åˆä¸ºä¸€ä¸ªä¸‰ä½æ•°ï¼ˆæœ€é«˜ä½å¯ä»¥ä¸ºé›¶ï¼‰ï¼Œæ­¤æ–¹æ³•é€‚ç”¨äºç²¾ç¡®è®¾ç½®æ–‡ä»¶çš„æƒé™ï¼Œå³å¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š 1chmod 777 executable.sh # å°†æ­¤æ–‡ä»¶è®¾ç½®ä¸ºæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™ã€æ‰§è¡Œã€‚ â€‹ç¬¬ä¸‰ç§å½¢å¼è¾ƒæ˜“ç†è§£ï¼Œä¸å†èµ˜è¿°ã€‚ ä½¿ç”¨ chown ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·æˆ–ç»„ â€‹åªæœ‰ root ç”¨æˆ·å¯ä»¥æ›´æ”¹æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·ï¼Œæ–‡ä»¶æ‰€æœ‰è€…å’Œ root å¯ä»¥æ›´æ”¹æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·ï¼ˆå‰è€…åªèƒ½æ”¹åˆ°è‡ªå·±åœ¨çš„ç»„é‡Œï¼Œåè€…ä»»æ„ï¼‰ã€‚ 1234567chown [OPTION]... [OWNER][:[GROUP] FILE... # ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·å’Œç»„chown [OPTION]... --reference=RFILE FILE... # å‚ç…§ RFILE ä¿®æ”¹æ–‡ä»¶æ‰€å±ç”¨æˆ·å’Œç»„# å¸¸è§é€‰é¡¹ï¼š-R, --recursive # é€’å½’ä¿®æ”¹ç›®å½•å’Œæ–‡ä»¶-v, --verbose # ä¸ºæ¯ä¸ªå¤„ç†çš„æ–‡ä»¶è¾“å‡ºè¯Šæ–­ä¿¡æ¯-c, --changes # ç±»ä¼¼ -v é€‰é¡¹ï¼Œä½†æ˜¯ä»…åœ¨æ–‡ä»¶æ›´æ”¹æˆåŠŸæ—¶æŠ¥å‘Š-f, --silent, --quiet # å¿½ç•¥å¤§å¤šæ•°é”™è¯¯ä¿¡æ¯ 123chown -R student:student /opt/dir/ # å°† /opt/dir ç›®å½•çš„æ‰€æœ‰è€…å’Œç»„æ”¹ä¸º student å’Œ student ç»„chown :wheel /opt/file # ä½œç”¨ç­‰åŒäºä¸‹æ¡å‘½ä»¤chgrp wheel /opt/file # å°† /opt/file æ–‡ä»¶çš„æ‰€æœ‰ç»„æ”¹ä¸º wheel ç»„ ç‰¹æ®Šæƒé™ ç‰¹æ®Šæƒé™ å¯¹æ–‡ä»¶çš„å½±å“ å¯¹ç›®å½•çš„å½±å“ u+s(suid) ä»¥æ‹¥æœ‰æ–‡ä»¶çš„ç”¨æˆ·èº«ä»½ï¼Œè€Œä¸æ˜¯ä»¥è¿è¡Œæ–‡ä»¶çš„èº«ä»½æ‰§è¡Œæ–‡ä»¶ æ— å½±å“ g+s(sgid) ä»¥æ‹¥æœ‰è¯¥æ–‡ä»¶çš„ç»„èº«ä»½æ‰§è¡Œæ–‡ä»¶ åœ¨ç›®å½•ä¸­æœ€æ–°åˆ›å»ºçš„æ–‡ä»¶å°†å…¶ç»„æ‰€æœ‰è€…è®¾ç½®ä¸ºä¸ç›®å½•çš„ç»„æ‰€æœ‰è€…ç›¸åŒ¹é… o+t(stiky) æ— å½±å“ å¯¹ç›®å½•å…·æœ‰å†™å…¥è®¿é—®æƒé™çš„ç”¨æˆ·ä»…å¯ä»¥åˆ é™¤å…¶æ‰€æ‹¥æœ‰çš„æ–‡ä»¶ï¼Œè€Œæ— æ³•åˆ é™¤æˆ–å¼ºåˆ¶ä¿å­˜åˆ°å…¶ä»–ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æ–‡ä»¶ â€‹ç¤ºä¾‹ï¼š 12345678[root@localhost ~]\\# ll /usr/bin/passwd-rwsr-xr-x. 1 root root 33544 Dec 14 2019 /usr/bin/passwd # u.x-&gt;s[root@localhost ~]\\# ll -d /run/log/journaldrwxr-sr-x. 3 root systemd-journal 60 Apr 15 16:47 /run/log/journal # g.x-&gt;s[root@localhost ~]\\# ll /usr/bin/locate-rwx--s--x. 1 root slocate 47128 Aug 12 2018 /usr/bin/locate # g.x-&gt;s[root@localhost ~]\\# ll -d /tmp drwxrwxrwt. 22 root root 4096 Apr 23 20:10 /tmp # o.x-&gt;t è®¾ç½®ç‰¹æ®Šæƒé™çš„æ–¹æ³• ç¬¦å·æ³•ï¼šu+sã€g+sã€o+tï¼› æ•°å€¼æ³•ï¼šåœ¨åŸæ¥ä¸‰ä½çš„åŸºç¡€ä¸Šåœ¨å·¦è¾¹å¢åŠ ä¸€ä½ï¼šsetuid=4ã€setgid=2ã€sticky=1ï¼› åˆ›å»ºçš„æ–°æ–‡ä»¶çš„é»˜è®¤æƒé™ â€‹ä¸¤ä¸ªå› ç´ å½±å“åˆ›å»ºçš„æ–°æ–‡ä»¶ï¼ˆå«ç›®å½•ï¼‰çš„åˆå§‹æƒé™ï¼šä¸€æ˜¯æ–‡ä»¶çš„ç±»å‹ï¼ˆå¸¸è§„æ–‡ä»¶è¿˜æ˜¯ç›®å½•ï¼‰ï¼ŒäºŒæ˜¯å½“å‰çš„ umaskã€‚å¯¹äºå› ç´ ä¸€ï¼Œè‹¥æ˜¯åˆ›å»ºçš„æ–°ç›®å½•ï¼Œæ“ä½œç³»ç»Ÿé»˜è®¤é¦–å…ˆä¸ºå…¶åˆ†é…å…«è¿›åˆ¶æƒé™ 0777ï¼ˆdrwxrwxrwxï¼‰ï¼›å¦‚æœæ˜¯å¸¸è§„æ–‡ä»¶ï¼Œæ“ä½œç³»ç»Ÿé»˜è®¤é¦–å…ˆä¸ºå…¶åˆ†é…å…«è¿›åˆ¶æƒé™ 0666ï¼ˆ-rw-rw-rw-ï¼‰ï¼Œå› æ­¤å¯æ‰§è¡Œæ–‡ä»¶åˆ›å»ºåéœ€æ‰‹åŠ¨èµ‹äºˆæ‰§è¡Œæƒé™æ‰èƒ½å¤Ÿè¢«æ‰§è¡Œã€‚å¯¹äºå› ç´ äºŒï¼Œshell å†…ç½®äº† umask æœºåˆ¶æ¥è¿›ä¸€æ­¥é™åˆ¶åˆ›å»ºçš„æ–°æ–‡ä»¶çš„æƒé™ï¼Œä½¿ç”¨ä¸å¸¦å‚æ•°çš„ umask å¯ä»¥æŸ¥çœ‹å½“å‰ shell è®¾ç½®çš„ umask å€¼ï¼Œå…¶å†…å®¹ä¸ºä¸€ä¸ªå…«è¿›åˆ¶ä½æ©ç ï¼Œæ¯ä½çš„æ•°å­—ä»£è¡¨ä»å½“å‰ç”¨æˆ·çš„é»˜è®¤è®¾ç½®ä¸­åˆ æ‰æŸç§æƒé™ï¼š 12[root@localhost ~]\\# umask0022 # ä»£è¡¨ go-wï¼Œå³åœ¨é»˜è®¤çš„åŸºç¡€ä¸Šå»æ‰åŒç»„ç”¨æˆ·å’Œå…¶å®ƒç”¨æˆ·çš„å†™å…¥æƒé™ 1234umask [-p] [-S] [MODE] # æ˜¾ç¤ºæˆ–è®¾ç½®æ–‡ä»¶æ¨¡å¼æ©ç # å¸¸è§é€‰é¡¹ï¼š-p, # è¾“å‡ºçš„å…·ä½“æ©ç å‰é¢åŠ ä¸Š umaskï¼Œå³å¯ä»¥ä½œä¸ºå‘½ä»¤è¾“å…¥å¤ç”¨-S, # ä½¿ç”¨ç¬¦å·æ¨¡å¼ â€‹ä½¿ç”¨ umask å¯ä»¥ä¸´æ—¶æ›´æ”¹å½“å‰ shell åˆ›å»ºæ–‡ä»¶æ—¶çš„æ©ç ï¼Œæƒ³æ°¸ä¹…æ›´æ”¹éœ€åœ¨ bashrc å’Œ profile æ–‡ä»¶ä¸­è¦†ç›–ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆäºŒï¼‰","slug":"Linux | ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆäºŒï¼‰","date":"2022-08-15T02:07:41.170Z","updated":"2022-08-15T02:16:26.482Z","comments":true,"path":"2022-08-15-Linux | ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆäºŒï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%AE%A1%E7%90%86%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%EF%BC%88%E4%BA%8C%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç®¡ç†æœ¬åœ°ç”¨æˆ·è´¦æˆ· ä½¿ç”¨ useradd å‘½ä»¤åˆ›å»ºæ–°ç”¨æˆ· â€‹æ·»åŠ ç”¨æˆ·æ‰€ä½¿ç”¨çš„é»˜è®¤é…ç½®ä¿å­˜åœ¨ /etc/default/useradd ä¸­ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€äº›é»˜è®¤é…ç½®ä» /etc/login.defs æ–‡ä»¶ä¸­è¯»å–ã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶åªä¼šå½±å“æ–°åˆ›å»ºçš„ç”¨æˆ·ï¼Œæ›´æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸ä¼šå½±å“ç°æœ‰ç”¨æˆ·ã€‚æ²¡æœ‰è®¾ç½®å¯†ç çš„ç”¨æˆ·æ˜¯æ— æ³•ç™»é™†ç³»ç»Ÿçš„ã€‚ 1234567891011121314151617useradd [OPTION]... LOGIN_NAME # æ–°å»ºç™»é™†ç”¨æˆ·useradd -D [-befgs] # æŸ¥çœ‹æˆ–ä¿®æ”¹åˆ›å»ºç”¨æˆ·ä½¿ç”¨çš„é»˜è®¤è®¾ç½®ï¼Œ# å¸¸è§é€‰é¡¹-b, --base-dir BASE_DIR # æŒ‡å®šåˆ›å»ºç”¨æˆ·å®¶ç›®å½•çš„åŸºç›®å½•ï¼ˆä¸€èˆ¬ä¸º /home ï¼‰-u, --uid UID # ä¸ºæ–°è´¦æˆ·æŒ‡å®š UID-c, --comment COMMENT # æŒ‡å®šæ–°ç”¨æˆ·æè¿°ä¿¡æ¯æˆ–çœŸå®å§“å-d, --home-dir HOME_DIR # æŒ‡å®šæ–°ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œé»˜è®¤ $BASE_DIR/LOGIN_NAME-D, --difaults # æ‰“å°æˆ–æ”¹å˜é»˜è®¤çš„ useradd é…ç½®-g, --gid GROUP # æŒ‡å®šæ–°è´¦æˆ·çš„ä¸»è¦ç»„çš„ ID æˆ–åå­—-G, --groups GROUPS # æŒ‡å®šæ–°è´¦æˆ·çš„è¡¥å……ç»„-m, --create-home # åˆ›å»ºç”¨æˆ·çš„å®¶ç›®å½•ï¼ˆæŒ‡å®šè¯¥å­—æ®µæˆ– CREATE_HOME é…ç½®é¡¹ä¸º yes æ‰ä¼šåˆ›å»ºï¼‰-M, --no-create-home # ä¸åˆ›å»ºç”¨æˆ·çš„å®¶ç›®å½•ï¼Œå³ä½¿ /etc/login.defs ä¸­çš„ CREATE_HOME å­—æ®µçš„å€¼ä¸º yes-U, --user-group # ä¸ºç”¨æˆ·åˆ›å»ºä¸ç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„-N, --no-user-group # ä¸åˆ›å»ºä¸ç”¨æˆ·åŒåçš„ç”¨æˆ·ç»„-p, --password PASSWORD # ä¸ºè¯¥æ–°è´¦æˆ·è®¾ç½®åŠ å¯†çš„å¯†ç ï¼ˆä¸æ¨èï¼‰-r, --system # åˆ›å»ºç³»ç»Ÿè´¦æˆ·-s, --shell SHELL # ä¸ºæ–°è´¦æˆ·æŒ‡å®šç™»é™† shell 12345678910[root@localhost ~]\\# useradd -D # æ·»åŠ ç”¨æˆ·æ‰€ä½¿ç”¨çš„é»˜è®¤é…ç½®GROUP=100HOME=/homeINACTIVE=-1EXPIRE=SHELL=/bin/bashSKEL=/etc/skelCREATE_MAIL_SPOOL=yes[root@localhost ~]\\# getent group 100 # æŸ¥è¯¢ GID 100 å¯¹åº”çš„ group ä¿¡æ¯users:x:100: # æ·»åŠ çš„æ–°ç”¨æˆ·ä¼šé»˜è®¤å°†å…¶ä¸»è¦ç»„è®¾ç½®ä¸º users ç»„ â€‹ä»¥ä¸Šç¤ºä¾‹ä¸­ä½¿ç”¨äº† getent å‘½ä»¤ï¼Œåœ¨æœ¬ç« ç»“å°¾å¯¹è¿™ä¸ªå‘½ä»¤ä¼šæœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚ ä½¿ç”¨ usermod å‘½ä»¤ä¿®æ”¹ç°æœ‰ç”¨æˆ· 123456789usermod [OPTION]... LOGIN_NAME # ä¿®æ”¹ç”¨æˆ·è´¦æˆ·# ä»¥ä¸‹ useradd ä¸­çš„é€‰é¡¹ä¹Ÿé€‚ç”¨äº usermodï¼Œåªä¸è¿‡è¡Œä¸ºå˜æˆäº†æ›´æ”¹è€Œä¸æ˜¯åˆ›å»ºï¼Œå°†ä¸å†èµ˜è¿°ï¼š-u, -d, -g, -G, -c, -s, -p# å…¶ä½™å¸¸è§é€‰é¡¹ï¼š-a, --append # ä¸ -G æ­é…ï¼Œè¿½åŠ åŠ å…¥è¡¥å……ç»„æ¨¡å¼ï¼ˆ-G é»˜è®¤æ˜¯æ›¿æ¢ï¼‰-l, --login NEW_LOGIN # ä¿®æ”¹ç”¨æˆ·å-L, --lock # é”å®šè´¦æˆ·-U, --unlock # è§£é”è´¦æˆ·-m, --move-home # ä¸ -d æ­é…ï¼Œç«‹å³ç§»åŠ¨åˆ°æ–°çš„å®¶ç›®å½• ä½¿ç”¨ userdel å‘½ä»¤åˆ é™¤ç°æœ‰ç”¨æˆ· 1234userdel [OPTION]... LOGIN_NAME # åˆ é™¤ç”¨æˆ·è´¦æˆ·ï¼ˆé»˜è®¤ä¸åˆ é™¤æ­¤ç”¨æˆ·çš„æ–‡ä»¶ï¼Œåˆ›å»ºçš„æ–°ç”¨æˆ·å¦‚æœä½¿ç”¨äº†ä¹‹å‰è¢«åˆ çš„ç”¨æˆ·çš„ uid åˆ™æ–°ç”¨æˆ·ä¼šé»˜è®¤è·å¾—æ—§ç”¨æˆ·æ–‡ä»¶çš„æ‰€å±æƒï¼‰# å¸¸è§é€‰é¡¹ï¼š-f, --force # å¼ºåˆ¶åˆ é™¤æ™®é€šåˆ é™¤ä¼šå¤±è´¥çš„è´¦æˆ·ï¼ˆå¦‚ï¼šåˆ é™¤æœ‰äººç™»é™†çš„è´¦æˆ·ï¼‰-r, --remove # åŒæ—¶åˆ é™¤è¯¥ç”¨æˆ·å®¶ç›®å½•å’Œé‚®ç®±ç›®å½•ï¼ˆæ¨èï¼‰ ä½¿ç”¨ passwd å‘½ä»¤è®¾ç½®ç”¨æˆ·åˆå§‹å¯†ç æˆ–æ›´æ”¹ç°æœ‰çš„å¯†ç  12345678910passwd [-k] [-l] [-u] [-e] [-d] [-S] [--stdin] [username]# å¸¸è§é€‰é¡¹ï¼š-k, --keep-tokens # ç»§ç»­ä½¿ç”¨æ—§å¯†ç ï¼Œé‡æ–°è®¡ç®—è¿‡æœŸæ—¶é—´-l, --lock # ä»… root å¯ç”¨ï¼Œé”å®šæŒ‡å®šè´¦æˆ·çš„å¯†ç ï¼ˆä½†è´¦æˆ·æ²¡æœ‰è¢«é”ï¼Œå…¶ä»–æ–¹å¼ä»èƒ½ç™»é™†ï¼‰-u, --unlock # ä»… root å¯ç”¨ï¼Œè§£é”æŒ‡å®šè´¦æˆ·çš„å¯†ç -d, --delete # ä»… root å¯ç”¨ï¼Œåˆ é™¤æŸä¸ªè´¦æˆ·çš„å¯†ç -e, --expire # ä»… root å¯ç”¨ï¼Œå¼ºåˆ¶æŸä¸ªç”¨æˆ·ä¸‹æ¬¡ç™»é™†æ—¶ä¿®æ”¹å¯†ç -S, --status # è¾“å‡ºè´¦æˆ·çš„è´¦æˆ·å¯†ç çŠ¶æ€ä¿¡æ¯--stdin, # ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–å¯†ç ï¼ˆå¸¸ä¸ç®¡é“é…åˆï¼‰# ä¸ä½¿ç”¨ä»»ä½•é€‰é¡¹æ—¶å¯çœç•¥ username, é»˜è®¤ä¿®æ”¹å½“å‰ç™»é™†è´¦æˆ·çš„ç”¨æˆ·å¯†ç  ç®¡ç†æœ¬åœ°ç»„è´¦æˆ· ä½¿ç”¨ groupadd å‘½ä»¤æ·»åŠ ç”¨æˆ·ç»„ 12345groupadd [OPTIONS] GROUP # åˆ›å»ºæ–°ç”¨æˆ·ç»„# å¸¸è§é€‰é¡¹ï¼š-g, --gid GID # æŒ‡å®š GID-K, --key KEY=VALUE # è¦†ç›– /etc/login.defs ä¸­çš„é»˜è®¤å€¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª -K é€‰é¡¹-r, --system # åˆ›å»ºç³»ç»Ÿç»„ ä½¿ç”¨ groupmod å‘½ä»¤ä¿®æ”¹ç”¨æˆ·ç»„ 1234groupmod [OPTIONS] GROUP # ä¿®æ”¹ç³»ç»Ÿä¸­çš„ç”¨æˆ·ç»„çš„å®šä¹‰# å¸¸è§é€‰é¡¹ï¼š-g, --gid GID # æ”¹å˜ç»„ ID-n, --new-name NEW_GROUP # ä¿®æ”¹ç»„å ä½¿ç”¨ groupdel å‘½ä»¤åˆ é™¤ç”¨æˆ·ç»„ 1groupdel [OPTIONS] GROUP # åˆ é™¤ç”¨æˆ·ç»„ ç®¡ç†ç”¨æˆ·å¯†ç  â€‹ç”¨æˆ·å¯†ç å­˜æ”¾æ–‡ä»¶ /etc/shadow çš„æ ¼å¼ï¼š â€‹ ç”¨æˆ·å:åŠ å¯†åçš„å¯†ç [^1]:ä¸Šæ¬¡æ›´æ”¹å¯†ç çš„æ—¥æœŸ:ä»ä¸Šæ¬¡æ›´æ”¹å¯†ç åˆ°ä¸‹ä¸€æ¬¡å¯ä»¥æ›´æ”¹æ‰€å¿…é¡»ç»è¿‡çš„æœ€çŸ­å¤©æ•°:åœ¨å¯†ç è¿‡æœŸä¹‹å‰ä¸è¿›è¡Œå¯†ç æ›´æ”¹å¯ä»¥ç»è¿‡çš„æœ€é•¿å¤©æ•°[^2]:è­¦å‘ŠæœŸ[^3]:éæ´»åŠ¨æœŸ[^4]:å¯†ç è¿‡æœŸæ—¥[^5]:é¢„ç•™å­—æ®µ [^1]: åŠ å¯†å¯†ç å­—ç¬¦ä¸²çš„ä¸åŒéƒ¨åˆ†ç”±ç¾å…ƒç¬¦å· $ éš”å¼€ï¼Œç¬¬ä¸€ä¸ª $ åçš„æ•°å­—ä»£è¡¨æ­¤å¯†ç æ‰€ç”¨çš„å“ˆå¸Œç®—æ³•ï¼Œæ•°å­— 6 ä»£è¡¨ä½¿ç”¨çš„æ˜¯ SHA-512 å“ˆå¸Œç®—æ³•ï¼ˆçº¢å¸½ 8 é»˜è®¤ç®—æ³•ï¼‰ï¼Œ1 ä»£è¡¨ MD5 å“ˆå¸Œç®—æ³•ï¼Œ5 ä»£è¡¨ SHA-256 å“ˆå¸Œç®—æ³•ã€‚ç¬¬äºŒä¸ª $ åé¢çš„æ˜¯åŠ å¯†å¯†ç ä½¿ç”¨çš„ç›å€¼ã€‚ç¬¬ä¸‰ä¸ª $ åé¢çš„æ˜¯ç”¨æˆ·å¯†ç çš„åŠ å¯†å“ˆå¸Œå€¼ï¼Œå‰é¢ç›å€¼å’Œç”¨æˆ·æœªåŠ å¯†å¯†ç è¿›è¡Œç»„åˆåŠ å¯†ç”Ÿæˆçš„å¯†ç å“ˆå¸Œä¸²ã€‚ [^2]: ç©ºå­—æ®µè¡¨ç¤ºå®ƒä¸ä¼šæ ¹æ®ä¸Šæ¬¡æ›´æ”¹ä»¥æ¥çš„æ—¶é—´å¤±æ•ˆã€‚ [^3]: å½“ç”¨æˆ·åœ¨æˆªæ­¢æ—¥å‰ä¹‹å‰ç™»é™†è¾¾åˆ°è¯¥å¤©æ•°æ—¶ï¼Œä¼šæ”¶åˆ°æœ‰å…³å¯†ç è¿‡æœŸçš„è­¦å‘Šã€‚ [^4]: ä¸€æ—¦å¯†ç è¿‡æœŸï¼Œè¿™äº›å¤©å†…ä»å¯ä»¥æ¥å—ç™»é™†ï¼Œè¿‡äº†è¿™ä¸€æ—¶æœŸä¹‹åï¼Œè´¦æˆ·å°†è¢«é”å®šã€‚ [^5]: å…¶è®¾ç½®å€¼ä¸ºä» 1970 å¹´ 1 æœˆ 1 æ—¥èµ·çš„å¤©æ•°ï¼Œå¹¶æŒ‰ UTC æ—¶åŒºè®¡ç®—ã€‚ç©ºå­—æ®µè¡¨ç¤ºå®ƒä¸ä¼šåœ¨ç‰¹å®šçš„æ—¥æœŸå¤±æ•ˆã€‚ â€‹å½“ç”¨æˆ·å°è¯•ç™»é™†æ—¶ï¼Œç³»ç»Ÿä¼šä» /etc/shadow ä¸­æŸ¥è¯¢ç”¨æˆ·çš„å¯†ç æ¡ç›®ï¼Œå¹¶å°†ç”¨æˆ·çš„ç›å€¼å’Œé”®å…¥çš„æœªåŠ å¯†å¯†ç ç»„åˆï¼Œå†ä½¿ç”¨æŒ‡å®šçš„å“ˆå¸Œç®—æ³•åŠ å¯†ã€‚å¦‚æœç»“æœä¸å·²åŠ å¯†å“ˆå¸ŒåŒ¹é…ï¼Œåˆ™ç”¨æˆ·è¾“å…¥äº†æ­£ç¡®çš„å¯†ç ï¼Œå³ä¼šç™»é™†æˆåŠŸï¼Œå¦åˆ™è¡¨ç¤ºç”¨æˆ·è¾“å…¥äº†é”™è¯¯çš„å¯†ç ï¼Œç™»é™†å°è¯•ä¹Ÿä¼šå¤±è´¥ã€‚ â€‹ä¸‹å›¾å±•ç¤ºäº†ç›¸å…³å¯†ç æœŸé™å‚æ•°åŠå…¶å‘¨æœŸä½œç”¨ã€‚ ä½¿ç”¨ chage å‘½ä»¤ä¿®æ”¹ç”¨æˆ·å¯†ç è¿‡æœŸè®¾ç½® 123456789chage [OPTIONS] LOGIN_NAME # ä¿®æ”¹ç”¨æˆ·å¯†ç è¿‡æœŸä¿¡æ¯# å¸¸è§é€‰é¡¹ï¼š-d, --lastday LAST_DAY # ä¿®æ”¹æœ€åä¸€æ¬¡æ›´æ”¹å¯†ç çš„æ—¶é—´ï¼Œå¯ä»¥è®¾ç½®ä¸ºä» 1970 å¹´ 1 æœˆ 1 æ—¥èµ·åº¦è¿‡çš„å¤©æ•°ï¼Œä¹Ÿå¯ä»¥ä»¥ YYYY-MM-DD çš„å½¢å¼è¿›è¡Œè®¾ç½®ï¼Œå¦‚æœè®¾ç½®ä¸º 0 çš„è¯ï¼Œåˆ™è¯¥ç”¨æˆ·åœ¨ä¸‹æ¬¡ç™»é™†æ—¶ä¼šè¢«å¼ºåˆ¶è¦æ±‚æ›´æ”¹å¯†ç -E, --expiredate EXPIRE_DATE # ä¿®æ”¹å¯†ç å¼ºåˆ¶è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸå°†æ— æ³•ç™»é™†ï¼Œåªèƒ½ç”± root è§£é”åæ‰èƒ½ç»§ç»­ä½¿ç”¨ï¼Œå¯ä»¥è®¾ç½®ä¸º 1970 å¹´ 1 æœˆ 1 æ—¥èµ·åº¦è¿‡çš„å¤©æ•°ï¼Œä¹Ÿå¯ä»¥ä»¥ YYYY-MM-DD çš„å½¢å¼è¿›è¡Œè®¾ç½®ï¼Œè®¾ç½®ä¸º -1 å¯†ç å°†æ°¸ä¸è¿‡æœŸ-I, --inactive INACTIVE # è®¾ç½®å®½é™æœŸï¼ˆå¤©æ•°ï¼Œå³å¯†ç å·²è¿‡æœŸåˆ°ç”¨æˆ·è´¦æˆ·è¢«é”è¿™æ®µæ—¶é—´ï¼‰,è®¾ç½®ä¸º -1 åˆ™æ²¡æœ‰å®½é™æœŸ-l, --list # æ˜¾ç¤ºè´¦æˆ·å¯†ç çš„é‡è¦æ—¶é—´æ®µ-m, --mindays MIN_DAYS # è®¾ç½®ä¸¤æ¬¡æ›´æ”¹å¯†ç çš„æœ€å°é—´éš”ï¼ˆå¤©æ•°ï¼‰ï¼Œè®¾ç½®ä¸º 0 ä»£è¡¨æ²¡æœ‰é™åˆ¶-M, --maxdays MAX_DAYS # è®¾ç½®å¯†ç å¯ç”¨çš„æœ€å¤§å¤©æ•°ï¼Œè¶…è¿‡æ—¶é—´å³ä¼šè¿‡æœŸï¼Œè®¾ç½®ä¸º -1 ä¼šç§»é™¤å¯†ç è¿‡æœŸé™åˆ¶-W, --warndays WARN_DAYS # è®¾ç½®å¯†ç åˆ°æœŸå‰å‘å‡ºæ”¹å¯†è­¦å‘Šçš„å¤©æ•° â€‹å¦‚æœæ²¡æœ‰æŒ‡å®šé€‰é¡¹ï¼Œåˆ™ chage ä¼šè¿›å…¥äº¤äº’å¼æ“ä½œæ¨¡å¼ã€‚ GETENT å‘½ä»¤ä»‹ç» â€‹ä½¿ç”¨ getent å‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿçš„æ•°æ®åº“ä¸­çš„ç›¸å…³è®°å½•ã€‚ è¯­æ³• 12345getent database [key ...] # Get entries from administrative database.-s, --service=CONFIG # è¦ä½¿ç”¨çš„æœåŠ¡é…ç½®-?, --help # ç»™å‡ºè¯¥ç³»ç»Ÿæ±‚åŠ©åˆ—è¡¨ --usage # ç»™å‡ºç®€è¦çš„ç”¨æ³•ä¿¡æ¯-V, --version # æ‰“å°ç¨‹åºç‰ˆæœ¬å· æ”¯æŒçš„ç³»ç»Ÿæ•°æ®åº“ â€‹åŒ…å«ï¼šahostsã€ahostsv4ã€ahostsv6ã€aliasã€ethersã€groupã€gshadowã€hostsã€netgroupã€networksã€passwdã€protocolsã€rpcã€servicesã€shadowã€‚ ç¤ºä¾‹ 1234567891011# 1. æŸ¥çœ‹å‰ä¸‰é¡¹ç³»ç»Ÿæ³¨å†Œçš„æœåŠ¡åŠå…¶å ç”¨çš„ç«¯å£å’Œåè®®[root@vmrhelskinyi ~]\\# getent services | head -3tcpmux 1/tcptcpmux 1/udprje 5/tcp# 2. æ ¹æ®å½“å‰ç™»é™†ä¿¡æ¯æŸ¥æ‰¾ UID[root@vmrhelskinyi ~]\\# getent passwd `whoami`root:x:0:0:root:/root:/bin/bash# 3. è¿›è¡Œ DNS åæŸ¥[root@vmrhelskinyi ~]\\# getent hosts kernel.org198.145.29.83 kernel.org","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆä¸€ï¼‰","slug":"Linux | ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆä¸€ï¼‰","date":"2022-08-15T02:00:28.205Z","updated":"2022-08-15T02:07:01.313Z","comments":true,"path":"2022-08-15-Linux | ç®¡ç†æœ¬åœ°ç”¨æˆ·å’Œç»„ï¼ˆä¸€ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E7%AE%A1%E7%90%86%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%EF%BC%88%E4%B8%80%EF%BC%89.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ ç”¨æˆ·å’Œç»„çš„æ¦‚å¿µ ä»€ä¹ˆæ˜¯ç”¨æˆ· ç”¨æˆ·è´¦æˆ·ç”¨äºåœ¨å¯ä»¥è¿è¡Œå‘½ä»¤çš„ä¸åŒäººå‘˜å’Œç¨‹åºä¹‹é—´æä¾›å®‰å…¨ç•Œé™ã€‚ â€‹ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå‘äººç±»ç”¨æˆ·æ ‡è¯†è‡ªå·±å¹¶å¢åŠ æ“ä½œçš„ä¾¿åˆ©æ€§ã€‚åœ¨å†…éƒ¨ï¼Œç³»ç»Ÿé€šè¿‡åˆ†é…çš„å”¯ä¸€æ ‡è¯†å·ç”¨æˆ·IDæˆ–UIDï¼‰æ¥åŒºåˆ†ä¸åŒçš„ç”¨æˆ·å¸æˆ·ã€‚äººç±»ä½¿ç”¨ç”¨æˆ·å¸æˆ·æ—¶ï¼Œé€šå¸¸ä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªå¯†ç ï¼Œä¾›ç”¨æˆ·ç”¨äºåœ¨ç™»å½•æ—¶è¯æ˜ä»–ä»¬æ˜¯å®é™…çš„æˆæƒç”¨æˆ·ã€‚ ç”¨æˆ·å¸æˆ·æ„æˆäº†ç³»ç»Ÿå®‰å…¨çš„åŸºç¡€ã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸ªè¿›ç¨‹ï¼ˆè¿è¡Œç¨‹åºï¼‰éƒ½ä½œä¸ºä¸€ä¸ªç‰¹å®šç”¨æˆ·è¿è¡Œã€‚æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªç‰¹å®šç”¨æˆ·ä½œä¸ºå…¶æ‰€æœ‰è€…ã€‚æ–‡ä»¶æ‰€æœ‰æƒæœ‰åŠ©äºç³»ç»Ÿå¯¹æ–‡ä»¶ç”¨æˆ·å®æ–½è®¿é—®æ§åˆ¶ã€‚ä¸è¿è¡Œè¿›ç¨‹ç›¸å…³è”çš„ç”¨æˆ·å¯ç¡®å®šè¯¥è¿›ç¨‹å¯è®¿é—®çš„æ–‡ä»¶å’Œç›®å½•ã€‚ â€‹ç”¨æˆ·å¸æˆ·æœ‰ä¸‰ç§ä¸»è¦ç±»å‹ï¼šè¶…çº§ç”¨æˆ·ã€ç³»ç»Ÿç”¨æˆ·å’Œæ™®é€šç”¨æˆ·ã€‚ è¶…çº§ç”¨æˆ·å¸æˆ·ç”¨äºç®¡ç†ç³»ç»Ÿã€‚è¶…çº§ç”¨æˆ·çš„åç§°ä¸º rootï¼Œå…¶å¸æˆ· UID ä¸º 0ã€‚è¶…çº§ç”¨æˆ·å¯¹ç³»ç»Ÿå…·æœ‰å®Œå…¨è®¿é—®æƒé™ã€‚ ç³»ç»Ÿç”¨æˆ·å¸æˆ·ä¾›æä¾›æ”¯æŒæœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚è¿™äº›è¿›ç¨‹ï¼ˆæˆ–å®ˆæŠ¤è¿›ç¨‹ï¼‰é€šå¸¸ä¸éœ€è¦ä»¥è¶…çº§ç”¨æˆ·èº«ä»½è¿è¡Œã€‚ç³»ç»Ÿä¼šä¸ºå®ƒä»¬åˆ†é…éç‰¹æƒå¸æˆ·ï¼Œå…è®¸å®ƒä»¬ç¡®ä¿å…¶æ–‡ä»¶å’Œå…¶ä»–èµ„æºä¸å—å½¼æ­¤ä»¥åŠç³»ç»Ÿä¸Šæ™®é€šç”¨æˆ·çš„å½±å“ã€‚ç”¨æˆ·æ— æ³•ä½¿ç”¨ç³»ç»Ÿç”¨æˆ·å¸æˆ·ä»¥äº¤äº’æ–¹å¼ç™»å½•ã€‚ æ™®é€šç”¨æˆ·æ˜¯å¤§å¤šæ•°ç”¨æˆ·éƒ½æœ‰ç”¨äºå¤„ç†æ—¥å¸¸å·¥ä½œçš„å¸æˆ·ã€‚ä¸ç³»ç»Ÿç”¨æˆ·ä¸€æ ·ï¼Œæ™®é€šç”¨æˆ·å¯¹ç³»ç»Ÿå…·æœ‰æœ‰é™çš„è®¿é—®æƒé™ã€‚ã€‚ â€‹å¯ä»¥ä½¿ç”¨ id å‘½ä»¤æ˜¾ç¤ºæœ‰å…³å½“å‰å·²ç™»é™†ç”¨æˆ·çš„ä¿¡æ¯ã€‚ 123456789id [OPTION]... [USER] # æ‰“å°çœŸå®æœ‰æ•ˆçš„ç”¨æˆ·å’Œå…¶ç»„ IDï¼Œå¿½ç•¥ USER æ—¶æ‰“å°å½“å‰ç”¨æˆ·çš„ç”¨æˆ·å’Œå…¶ç»„ä¿¡æ¯# å¸¸è§é€‰é¡¹ï¼ˆä¸‹é¢å››ä¸ªåªèƒ½å››é€‰ä¸€ï¼‰ï¼š-g, --group # åªæ‰“å°æœ‰æ•ˆçš„ç»„ ID-G, --groups # æ‰“å°æ‰€æœ‰çš„ç»„ ID-u, --user # åªæ‰“å°æœ‰æ•ˆçš„ç”¨æˆ· ID-Z, --context # åªæ‰“å°è¿›ç¨‹å®‰å…¨ä¸Šä¸‹æ–‡## ç”¨äº -gã€-Gã€-u ä¹‹åçš„ï¼š-n, --name # æ‰“å°åå­—è€Œä¸æ˜¯ç”¨æˆ· ID-r, --real # æ‰“å°çœŸå® ID è€Œä¸æ˜¯æœ‰æ•ˆ ID 1234[root@localhost ~]\\# iduid=0(root) gid=0(root) groups=0(root) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 # å®‰å…¨ä¸Šä¸‹æ–‡[root@localhost ~]\\# id -ur student1000 # åªæ‰“å° student ç”¨æˆ·çš„ç”¨æˆ·ID â€‹å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ä¸º /etc/passwd æ–‡ä»¶ï¼Œå®ƒçš„æ ¼å¼ä¸ºï¼š â€‹ â€‹ç”¨æˆ·å:åŠ å¯†çš„ç”¨æˆ·å¯†ç [^1]:ç”¨æˆ·UID:ç”¨æˆ·ä¸»è¦ç»„çš„GID:ç”¨æˆ·çœŸå®å§“å:ç”¨æˆ·ä¸»ç›®å½•:ç”¨æˆ·çš„é»˜è®¤ç™»é™†shell[^2] [^1]: å·²å¼ƒç”¨ï¼Œç°åœ¨è¯¥å­—æ®µå§‹ç»ˆåº”ä¸º xï¼Œå¯†ç é…ç½®å·²ç»ç§»åˆ°äº† /etc/shadow é…ç½®æ–‡ä»¶ã€‚ [^2]: å¯¹äºæ™®é€šç”¨æˆ·ä¸€èˆ¬æ¥è¯´æ˜¯ /bin/bashï¼ŒæŸäº›æœåŠ¡çš„ç³»ç»Ÿç”¨æˆ·ä¸€èˆ¬ä¸å…è®¸è¿›è¡Œäº¤äº’å¼ç™»é™†ï¼Œå…¶å¯èƒ½ä¼šä½¿ç”¨ï¼š/sbin/nologinã€‚ â€‹ä¾‹å­ï¼š 12[root@localhost ~]\\# head -n 1 /etc/passwdroot:x:0:0:root:/root:/bin/bash çº¢å¸½ UID èŒƒå›´åˆ’åˆ† UID èŒƒå›´ è´¦æˆ·èŒƒå›´ 0 root 1-200 ç³»ç»Ÿç”¨æˆ·ï¼Œçº¢å¸½é™æ€åˆ†é…ç»™ä¸€äº›ç³»ç»Ÿè¿›ç¨‹ 201-999 ç³»ç»Ÿç”¨æˆ·ï¼Œä¾›æ–‡ä»¶ç³»ç»Ÿä¸­æ²¡æœ‰è‡ªå·±çš„æ–‡ä»¶çš„ç³»ç»Ÿè¿›ç¨‹ä½¿ç”¨ã€‚ä¸€èˆ¬æ˜¯ä¸€äº›åç»­å®‰è£…çš„ç³»ç»ŸæœåŠ¡ï¼Œç”±çº¢å¸½åŠ¨æ€åˆ†é…ï¼Œç”¨æ¥é™åˆ¶è¿™äº›æœåŠ¡ä»…è®¿é—®å®ƒä»¬æ­£å¸¸è¿è¡Œæ‰€éœ€çš„èµ„æºã€‚ 1000+ æ™®é€šç”¨æˆ· ä»€ä¹ˆæ˜¯ç»„ â€‹ç»„æ˜¯éœ€è¦å…±äº«æ–‡ä»¶å’Œå…¶ä»–ç³»ç»Ÿèµ„æºè®¿é—®æƒé™çš„ç”¨æˆ·çš„é›†åˆã€‚ç»„å¯ç”¨äºå‘ä¸€ç»„ç”¨æˆ·æˆäºˆæ–‡ä»¶è®¿é—®æƒé™ï¼Œè€Œéä»…ä»…å‘ä¸€ä¸ªç”¨æˆ·æˆäºˆè®¿é—®æƒé™ã€‚ â€‹ä¸ç”¨æˆ·ç›¸ä¼¼ï¼Œç»„ä¹Ÿæœ‰ç»„åç§°ä»¥å¢åŠ æ“ä½œçš„ä¾¿åˆ©æ€§ã€‚åœ¨å…§éƒ¨ï¼Œç³»ç»Ÿé€šè¿‡åˆ†é…çš„å”¯ä¸€æ ‡è¯†å·ï¼ˆç»„IDæˆ–GIDï¼‰æ¥åŒºåˆ†ä¸åŒçš„ç»„ã€‚ â€‹å­˜å‚¨ç”¨æˆ·ç»„ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ä¸º /etc/group æ–‡ä»¶ï¼Œå®ƒçš„æ ¼å¼ä¸ºï¼š â€‹ ç»„åç§°:ç»„å¯†ç [^3]:è¯¥ç»„çš„GIDå·:ç»„æˆå‘˜åˆ—è¡¨ï¼ˆä»¥é€—å·ä½œä¸ºåˆ†ç•Œç¬¦ï¼‰ [^3]: å·²å¼ƒç”¨ï¼Œè¯¥å­—æ®µå§‹ç»ˆåº”ä¸º xã€‚ç»„å¯†ç é…ç½®æ–‡ä»¶å·²ç§»è‡³ /etc/gshadowã€‚ ä¸»è¦ç»„å’Œè¡¥å……ç»„ â€‹æ¯ä¸ªç”¨æˆ·æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»è¦ç»„ã€‚å¯¹äºæœ¬åœ°ç”¨æˆ·è€Œè¨€ï¼Œè¿™æ˜¯æŒ‰ /etc/passwd æ–‡ä»¶ä¸­çš„ GID å·åˆ—å‡ºçš„ç»„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æ‹¥æœ‰ç”¨æˆ·åˆ›å»ºçš„æ–°æ–‡ä»¶çš„ç»„ã€‚ â€‹é€šå¸¸ï¼Œåœ¨åˆ›å»ºæ–°çš„æ™®é€šç”¨æˆ·æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸è¯¥ç”¨æˆ·åŒåçš„æ–°ç»„ã€‚è¯¥ç»„å°†ç”¨ä½œæ–°ç”¨æˆ·çš„ä¸»è¦ç»„ï¼Œè€Œè¯¥ç”¨æˆ·æ˜¯è¿™ä¸€ç”¨æˆ·ä¸“ç”¨ç»„çš„å”¯ä¸€æˆå‘˜ã€‚äº‹å®è¯æ˜ï¼Œè¿™æœ‰åŠ©äºç®€åŒ–æ–‡ä»¶æƒé™çš„ç®¡ç†ã€‚ â€‹ç”¨æˆ·ä¹Ÿå¯ä»¥æœ‰è¡¥å……ç»„ã€‚è¡¥å……ç»„çš„æˆå‘˜èµ„æ ¼ç”± /etc/group æ–‡ä»¶ç¡®å®šã€‚æ ¹æ®æ‰€åœ¨çš„ç»„æ˜¯å¦å…·æœ‰è®¿é—®æƒé™ï¼Œå°†æˆäºˆç”¨æˆ·å¯¹æ–‡ä»¶çš„è®¿é—®æƒé™ã€‚å…·æœ‰è®¿é—®æƒé™çš„ç»„æ˜¯ç”¨æˆ·çš„ä¸»è¦ç»„è¿˜æ˜¯è¡¥å……ç»„æ— å…³ç´§è¦ã€‚ â€‹ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ· user æœ‰ä¸€ä¸ªä¸»è¦ç»„ user ä»¥åŠä¸¤ä¸ªè¡¥å……ç»„ wheel å’Œ webadminï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å°±å¯ä»¥è¯»å–å…¶ä¸­ä»»ä½•ä¸€ä¸ªç»„å¯è¯»çš„æ–‡ä»¶ã€‚ â€‹æŸ¥è¯¢ç”¨æˆ·ä¸»è¦ç»„åŠå…¶ç»„ GID ä¹Ÿå¯ä»¥ä½¿ç”¨ id å‘½ä»¤ï¼Œå…·ä½“ç”¨æ³•è¯¦è§ä¸Šé¢å¯¹ id å‘½ä»¤çš„ä»‹ç»ã€‚ ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™ è¶…çº§ç”¨æˆ· â€‹å¤§å¤šæ•°æ“ä½œç³»ç»Ÿå…·æœ‰æŸç§ç±»å‹çš„è¶…çº§ç”¨æˆ·ï¼Œå³å…·æœ‰ç³»ç»Ÿå…¨éƒ¨æƒé™çš„ç”¨æˆ·ã€‚åœ¨ RHEL ä¸­ï¼Œæ­¤ä¸º root ç”¨æˆ·ã€‚è¯¥ç”¨æˆ·çš„ç‰¹æƒé«˜äºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸€èˆ¬ç‰¹æƒï¼Œç”¨äºç®¡ç†ç³»ç»Ÿã€‚è¦æ‰§è¡Œè¯¸å¦‚å®‰è£…æˆ–åˆ é™¤è½¯ä»¶ä»¥åŠç®¡ç†ç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•ç­‰ä»»åŠ¡ï¼Œå¿…é¡»å°†ç‰¹æƒå‡çº§åˆ°rootç”¨æˆ·ã€‚ â€‹æ™®é€šç”¨æˆ·èƒ½æ§åˆ¶å¤§éƒ¨åˆ†çš„è®¾å¤‡ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ä¾‹å¤–ï¼Œåªæœ‰æ­¤æ—¶æ‰éœ€è¦ root ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼Œæ™®é€šç”¨æˆ·å¯ä»¥æ§åˆ¶å¯ç§»åŠ¨è®¾å¤‡ï¼Œå¦‚ USB è®¾å¤‡ã€‚å› æ­¤ï¼Œè™½ç„¶æ™®é€šç”¨æˆ·å¯ä»¥æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶å¹¶å¯ç®¡ç†å¯ç§»åŠ¨çš„è®¾å¤‡ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ root ç”¨æˆ·æ‰èƒ½ç®¡ç†â€œå›ºå®šçš„â€ç¡¬ç›˜ã€‚ â€‹root ç”¨æˆ·è¿™ç§æ— é™åˆ¶çš„ç‰¹æƒä¹Ÿå¸¦æ¥äº†èŒè´£é—®é¢˜ã€‚root ç”¨æˆ·æ‹¥æœ‰è¶³ä»¥ç ´åç³»ç»Ÿçš„æ— é™åˆ¶æƒé™ï¼šåˆ é™¤æ–‡ä»¶å’Œç›®å½•ã€åˆ é™¤ç”¨æˆ·å¸æˆ·ï¼Œä»¥åŠæ·»åŠ åé—¨ç­‰ã€‚å¦‚æœ root å¸æˆ·æ³„éœ²ï¼Œåˆ™å…¶ä»–äººå°±æœ‰å¯èƒ½æ‹¥æœ‰ç³»ç»Ÿçš„ç®¡ç†æ§åˆ¶æƒé™ã€‚åœ¨ä¸€èˆ¬çš„ç³»ç»Ÿä½¿ç”¨åœºæ™¯ä¸‹ï¼Œå»ºè®®ç®¡ç†å‘˜ä»¥æ™®é€šç”¨æˆ·èº«ä»½ç™»å½•ï¼Œä»…åœ¨éœ€è¦æ—¶å‡çº§åˆ° root ç”¨æˆ·ç‰¹æƒã€‚ â€‹Linux ä¸Šçš„ root å¸æˆ·å¤§è‡´ç›¸å½“äº Microsoft Windows ä¸Šçš„æœ¬åœ° Administrator å¸æˆ·ã€‚åœ¨ Linux ä¸­ï¼Œå¤šæ•°ç³»ç»Ÿç®¡ç†å‘˜éƒ½ä½œä¸ºæ— ç‰¹æƒçš„ç”¨æˆ·ç™»å½•ï¼Œç„¶åä½¿ç”¨å„ç§å·¥å…·ä¸´æ—¶è·å¾— root ç‰¹æƒã€‚ 2. ä½¿ç”¨ su å‘½ä»¤è¿›è¡Œç”¨æˆ·åˆ‡æ¢ 12345su [OPTIONS] [-] [USER [ARG...]] # ä½¿ç”¨æ›¿æ¢çš„ç”¨æˆ·å’Œç»„è¿è¡Œå‘½ä»¤# å¸¸è§é€‰é¡¹ï¼š-c, --command=COMMAND # åˆ‡æ¢ç”¨æˆ·è¿‡å»æ‰§è¡Œå‘½ä»¤ï¼ˆæ…ç”¨åˆ«åï¼‰ï¼Œæ‰§è¡Œå®Œæ¯•ååˆ‡å›åŸæ¥çš„ç”¨æˆ·-g, --group=GROUP # æŒ‡å®šä¸»è¦ç»„ï¼Œä»…é€‚ç”¨äº root-, -l, --login # åˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œä½¿ç¯å¢ƒå˜é‡(HOMEï¼ŒSHELLï¼ŒUSERï¼ŒLOGNAMEï¼ŒPATHç­‰ï¼‰å’Œæ¬²åˆ‡æ¢çš„ç”¨æˆ·ç›¸åŒã€ä¸ä½¿ç”¨åˆ™å–å¾—ç”¨æˆ·çš„ä¸´æ—¶æƒé™ï¼Œä¸åŠ è½½ç¯å¢ƒå˜é‡ 1234[root@localhost ~]\\# su --login student -c &quot;ls -l&quot;total 0[root@localhost ~]\\# su - student[student@localhost ~]\\$ â€‹ä½¿ç”¨ exit æˆ– logout å‘½ä»¤å¯ä»¥ä»ä¸´æ—¶åˆ‡æ¢è¿‡å»çš„ç”¨æˆ·åˆ‡æ¢å›åŸæ¥çš„ç”¨æˆ·ã€‚ 3. ä½¿ç”¨ sudo å‘½ä»¤åˆ©ç”¨è¶…çº§ç”¨æˆ·ç‰¹æƒæ‰§è¡Œå‘½ä»¤ â€‹æœ‰æ—¶ä¸ºäº†å®‰å…¨èµ·è§ï¼Œroot ç”¨æˆ·çš„è´¦æˆ·å¯èƒ½æ²¡æœ‰è®¾ç½®æœ‰æ•ˆçš„å¯†ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æ— æ³•æ­£å¸¸é€šè¿‡å¯†ç éªŒè¯ä»¥ root ç”¨æˆ·ç™»é™†ï¼Œä¹Ÿä¸èƒ½é€šè¿‡ä½¿ç”¨ su è·å–äº¤äº’å¼ shellï¼Œè€Œä¸ºäº†ä½¿ç”¨ root ç‰¹æƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨ sudo å‘½ä»¤æ¥ä¸´æ—¶è·å¾— root ç‰¹æƒæ‰§è¡Œå‘½ä»¤ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿéœ€è¦è¿›è¡Œå¯†ç éªŒè¯ï¼Œä¸è¿‡æ˜¯éœ€è¦è¾“å…¥å½“å‰ç”¨æˆ·è‡ªå·±çš„å¯†ç ã€‚ â€‹æ™®é€šç”¨æˆ·èƒ½æ‰§è¡Œ root ç‰¹æƒå‘½ä»¤çš„å‰ææ˜¯è¯¥æ™®é€šä¸ºç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·ï¼Œå³å…¶å·²ç»åœ¨ /etc/sudoers ä¸­ï¼Œå¹¶ä¸”å·²ç»è¢«é…ç½®äº†äº›è®¸å¯ä»¥ä»¥ root æƒé™è¿è¡Œçš„å‘½ä»¤ã€‚æ™®é€šç”¨æˆ·å¦‚æœæ²¡è¢«å…è®¸æ‰§è¡Œç‰¹æƒå‘½ä»¤ï¼Œå…¶ä½¿ç”¨ sudo æ‰§è¡Œå‘½ä»¤ä¼šè¢«æ‹’ç»ï¼Œä¸”ä¼šè¢«è®°å½•ä¸‹æ¥å‘ root ç”¨æˆ·æŠ¥å‘Šã€‚ â€‹ä½¿ç”¨ visudo å‘½ä»¤å¯ä»¥ç¼–è¾‘ /etc/sudoers é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œ root æƒé™ä¸‹æ”¾çš„é…ç½®ï¼ŒRHEL7 ä¹‹å wheel ç»„æˆå‘˜é»˜è®¤è¢«æˆäºˆäº†è¶…çº§ç”¨æˆ·çš„ä¸€äº›æƒé™ï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨ sudo æ‰§è¡Œä¸€äº› root ç‰¹æƒå‘½ä»¤ã€‚ ğŸŸ¢ å»ºè®®åœ¨ /etc/sudoers.d ç›®å½•ä¸‹è¡¥å……è‡ªå·±çš„ sudo æƒé™è®¿é—®æƒé™è€Œä¸æ˜¯ä¿®æ”¹ /etc/sudoersã€‚ â€‹ä¸ºç”¨æˆ·é…ç½®æƒé™çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼šç”¨æˆ·åæˆ–%ç»„å ALL=(ALL) [NOPASSWD:]ALLï¼Œå…¶ä¸­ NOPASSWD: ä¼šå…è®¸å½“å‰ç”¨æˆ·æˆ–ç»„ä¸ç”¨è¾“å…¥ç”¨æˆ·è‡ªå·±çš„å¯†ç ç›´æ¥è¿è¡Œç‰¹æƒå‘½ä»¤ï¼Œæ¯”è¾ƒå±é™©ã€‚ â€‹ç®¡ç†å‘˜ç”¨æˆ·ä½¿ç”¨ root ç‰¹æƒæ‰§è¡Œå‘½ä»¤çš„å†…å®¹ä¼šè¢«è®°å½•åˆ° /var/log/secure æ—¥å¿—ä¸­å»ï¼š 1234[student@localhost ~]\\$ sudo tail -n 0 -f /var/log/secureApr 17 12:27:16 localhost sudo[9240]: student : TTY=pts/2 ; PWD=/home/student ; USER=root ; COMMAND=/bin/tail -n 0 -f /var/log/secureApr 17 12:27:16 localhost sudo[9240]: pam_systemd(sudo:session): Cannot create session: Already running in a session or user sliceApr 17 12:27:16 localhost sudo[9240]: pam_unix(sudo:session): session opened for user root by root(uid=0) â€‹ç‰¹æ®Šåœ°ï¼Œç®¡ç†å‘˜ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼åˆ‡æ¢åˆ° rootï¼Œè¿™ä¸¤ç§æ–¹å¼çš„è¡Œä¸ºä¸å®Œå…¨ç›¸åŒï¼š 123456[student@localhost ~]\\$ sudo su - # æ¨è[sudo] password for student: [root@localhost ~]\\# [student@localhost ~]\\$ sudo -i # è™½åˆ‡æ¢åˆ°äº† root ä½†ä½¿ç”¨çš„ç¯å¢ƒä¸ä¸Šæ–¹æ–¹æ³•æœ‰å·®å¼‚[sudo] password for student: [root@localhost ~]\\#","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Shell å˜é‡ä¸ç¯å¢ƒå˜é‡","slug":"Linux | Shell å˜é‡ä¸ç¯å¢ƒå˜é‡","date":"2022-08-15T01:53:16.429Z","updated":"2022-08-15T01:57:20.126Z","comments":true,"path":"2022-08-15-Linux | Shell å˜é‡ä¸ç¯å¢ƒå˜é‡.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20Shell%20%E5%8F%98%E9%87%8F%E4%B8%8E%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ Shell å˜é‡ ä½¿ç”¨ Shell å˜é‡ â€‹Shell å˜é‡å¯ä»¥å¸®åŠ©è¿è¡Œå‘½ä»¤æˆ–ä¿®æ”¹ shell çš„è¡Œä¸ºï¼Œshell å˜é‡ä¹Ÿå¯ä»¥è¢«å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡ï¼Œå®ƒä¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨å¤åˆ¶åˆ°ä»è¯¥ shell è¿è¡Œçš„ç¨‹åºä¸­ã€‚ â€‹Shell å˜é‡å¯¹äºç‰¹å®š shell ä¼šè¯æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ª shell éƒ½æœ‰è‡ªå·±çš„ä¸€ç»„ shell å˜é‡å€¼ã€‚ ä½¿ç”¨ echo å‘½ä»¤è¾“å‡ºä¸€è¡Œæ–‡æœ¬å†…å®¹ 12345echo [SHORT_OPTION]... string...# å¸¸è§å‚æ•°ï¼š-n, # ä¸è¦è¾“å‡ºè·Ÿéšçš„æ¢è¡Œç¬¦-e, # è§£é‡Šè½¬ä¹‰å­—ç¬¦-E, # ä¸è§£é‡Šè½¬ä¹‰å­—ç¬¦ï¼ˆé»˜è®¤ï¼‰ â€‹Shell å˜é‡åç§°å¯ä»¥åŒ…å«å¤§å†™æˆ–å°å†™å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿å­—ç¬¦_ã€‚ç”¨ç¾å…ƒç¬¦å· $ å¯ä»¥è¯»å–è®¾ç½®çš„ shell å˜é‡çš„å€¼ã€‚å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 12345[root@localhost ~]\\# count=250 # è®¾ç½®å˜é‡ï¼Œæ³¨æ„ç­‰å·å·¦å³åˆ«åŠ å¤šä½™çš„ç©ºæ ¼å­—ç¬¦[root@localhost ~]\\# echo count # ä¸åŠ  $ ç¬¦å·åªä¼šå°†åŸæ–‡å½“æ–‡æœ¬è¾“å‡ºcount[root@localhost ~]\\# echo $count # åŠ ä¸Š $ ç¬¦å·ä¼šå°† count è§†ä½œå˜é‡ï¼Œä¸”æ­¤å‘½ä»¤ä¹Ÿä¼šè¾“å‡ºå…¶å€¼250 ä½¿ç”¨èŠ±æ‹¬å·æ¥ä¿æŠ¤å˜é‡ 1234[root@localhost ~]\\# echo something $countx # æ‰¾ä¸åˆ°å˜é‡ä¸ä¼šå¯¼è‡´é”™è¯¯ï¼Œè€Œæ˜¯ä¸è¿”å›ä»»ä½•å†…å®¹something[root@localhost ~]\\# echo something $&#123;count&#125;xsomething 250x ä½¿ç”¨ set å‘½ä»¤åˆ—å‡ºå½“å‰è®¾ç½®çš„æ‰€æœ‰ Shell å˜é‡ â€‹set å‘½ä»¤ç”±äºæ‰“å°å½“å‰ç»ˆç«¯è®¾ç½®çš„æ‰€æœ‰ shell å˜é‡å’Œ shell å‡½æ•°ã€‚ 123456[root@localhost ~]\\# set | moreBASH=/bin/bashBASHOPTS=checkwinsize:cmdhist:complete_fullquote:expand_aliases:extglob:extquote:force_fignore:histappend:interactive_comments:login_shell:progcomp:promptvars:sourcepath# çœç•¥å¤§éƒ¨åˆ†è¾“å‡º ä½¿ç”¨ Shell å˜é‡é…ç½® Bash â€‹ä¸€äº› shell å˜é‡åœ¨ bash å¯åŠ¨æ—¶è®¾ç½®ï¼Œä½†å¯ä»¥è¿›è¡Œä¿®æ”¹æ¥è°ƒæ•´ shell çš„è¡Œä¸ºã€‚å¦‚ï¼š$PATHã€$PS1ã€$HISSIZE ç­‰ã€‚ ç¯å¢ƒå˜é‡ â€‹Shell æä¾›äº†ä¸€ä¸ªç¯å¢ƒåŒ…æ‹¬æœ‰å…³æ–‡ä»¶ç³»ç»Ÿä¸Šå½“å‰å·¥ä½œç›®å½•çš„ä¿¡æ¯ã€ä¼ é€’ç»™ç¨‹åºçš„å‘½ä»¤è¡Œé€‰é¡¹ï¼Œä»¥åŠç¯å¢ƒå˜é‡çš„å€¼ã€‚ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡æ¥æ›´æ”¹å…¶è¡Œä¸ºæˆ–å…¶é»˜è®¤è®¾ç½®ã€‚ â€‹ä¸æ˜¯ç¯å¢ƒå˜é‡çš„ shell å˜é‡åªèƒ½ç”± shell ä½¿ç”¨ï¼Œç¯å¢ƒå˜é‡å¯ä»¥ç”± shell ä»¥åŠä»è¯¥ shell å¯åŠ¨çš„ç¨‹åºä½¿ç”¨ã€‚ è®¾ç½®ç¯å¢ƒå˜é‡ 123456[root@localhost ~]\\# RHEL_VERSION=8.3 # åˆ›å»º shell å˜é‡[root@localhost ~]\\# export RHEL_VERSION # å°†å…¶å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡[root@localhost ~]\\# export RHEL_VERSION= # åœ¨ä¸€è¡Œä¸­å®Œæˆä¸Šé¢ä¸¤æ­¥[root@localhost ~]\\# echo $RHEL_VERSION # è¾“å‡ºç¯å¢ƒå˜é‡çš„å†…å®¹[root@localhost ~]\\# ä½¿ç”¨ env å‘½ä»¤åˆ—å‡º shell çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ â€‹env ä¿®æ”¹ç¯å¢ƒå˜é‡å¹¶è¿è¡Œç¨‹åºã€‚ä½¿ç”¨ export -p ä¹Ÿå¯ä»¥æ‰“å°æ‰€æœ‰çš„ shell å˜é‡ï¼Œä¸è¿‡æ¯æ¡è¾“å‡ºå‰é¢éƒ½ä¼šåŠ ä¸Šï¼š&quot;declare -x &quot;ã€‚ 123456789101112env [OPTION]... [-] [NAME=VALUE]... [COMMAND [ARG]...] # ä¿®æ”¹ç¯å¢ƒå˜é‡å¹¶è¿è¡Œç¨‹åº# å¸¸è§é€‰é¡¹ï¼š-i, --ignore-environment # ä½¿ç”¨ç©ºçš„ç¯å¢ƒè¿è¡Œç¨‹åº-0, --null # ä½¿ç”¨ç©ºå­—ç¬¦ç»“æŸè¾“å‡ºï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦-u, --unset=NAME # ä»ç¯å¢ƒä¸­ç§»é™¤ç¯å¢ƒå˜é‡ NAME-c, --chdir=DIR # ä¿®æ”¹å·¥ä½œç›®å½•åˆ° DIR-S, --split-string=S # å°† S æ‹†åˆ†ä¸ºå¤šä¸ªå‚æ•°ï¼Œç”¨æ¥ä¼ é€’å¤šä¸ªå‚æ•°# -S åœ¨è„šæœ¬ä¸­çš„ä½¿ç”¨ä¸¾ä¾‹ï¼Œå¦‚æƒ³æ‰§è¡Œ 1.pl è¿™ä¸ª perl è„šæœ¬,å…¶ç¬¬ä¸€è¡Œçš„å†™æ³•ä¸ºï¼š#!/user/bin/env -S perl -w -T # å°†ä¼šæ‰§è¡Œ perl -w -T 1.pl# æ²¡æœ‰ -S çš„è¯åˆ™ä¼šæç¤ºï¼š/usr/bin/env: &#x27;perl -w -T&#x27;ï¼šNo such file or directory 12345678[root@localhost ~]\\# env # env ä¸åŠ å‚æ•°åˆ™ä¼šåˆ—å‡ºæ‰€æœ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡# çœç•¥éƒ¨åˆ†è¾“å‡ºRHEL_VERSION=SSH_TTY=/dev/pts/1MAIL=/var/spool/mail/rootTERM=xtermSHELL=/bin/bash# çœç•¥éƒ¨åˆ†è¾“å‡º ä¿å­˜ç¯å¢ƒå˜é‡ä»¥é•¿æœŸä½¿ç”¨ â€‹å¦‚æœè¦ä¿®æ”¹æ•´ä¸ªç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œåˆ™å»ºè®®åœ¨ /etc/profile.d ç›®å½•ä¸‹æ·»åŠ è‡ªå·±çš„ .sh ç»“å°¾çš„æ–‡ä»¶ï¼ˆéœ€è¦ root æƒé™ï¼‰ï¼Œå¦‚æœåªæ˜¯å¸Œæœ›ä¿®æ”¹è‡ªå·±ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ï¼Œåˆ™ä¿®æ”¹è‡ªå·±çš„ ~/.bashrc æ–‡ä»¶ã€‚ å–æ¶ˆè®¾ç½®å˜é‡ä¸å–æ¶ˆå¯¼å‡ºç¯å¢ƒå˜é‡ â€‹ä½¿ç”¨ export -n å‘½ä»¤å–æ¶ˆå¯¼å‡ºçš„ç¯å¢ƒå˜é‡ï¼ˆä½†å…¶è¿˜æ˜¯ shell å˜é‡ï¼‰ï¼š 1234567[root@localhost ~]\\# export RHEL_VERSION=8.3[root@localhost ~]\\# env | grep RHELRHEL_VERSION=8.3[root@localhost ~]\\# export -n RHEL_VERSION[root@localhost ~]\\# env | grep RHEL[root@localhost ~]\\# echo $RHEL_VERSION8.3 â€‹ä½¿ç”¨ unset å‘½ä»¤å–æ¶ˆè®¾ç½®å˜é‡ä»¥åŠç¯å¢ƒå˜é‡ï¼š 12345678[root@localhost ~]\\# export RHEL_VERSION[root@localhost ~]\\# env | grep RHELRHEL_VERSION=8.3[root@localhost ~]\\# unset RHEL_VERSION[root@localhost ~]\\# env | grep RHEL[root@localhost ~]\\# echo $RHEL_VERSION[root@localhost ~]\\#","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"æŸ¥é˜… Linux ç³»ç»Ÿæ‰‹å†Œä¸ Vim çš„ä½¿ç”¨","slug":"Linux | æŸ¥é˜… Linux ç³»ç»Ÿæ‰‹å†Œä¸ vim çš„ä½¿ç”¨","date":"2022-08-15T00:57:36.250Z","updated":"2022-08-15T01:00:44.943Z","comments":true,"path":"2022-08-15-Linux | æŸ¥é˜… Linux ç³»ç»Ÿæ‰‹å†Œä¸ vim çš„ä½¿ç”¨.html","link":"","permalink":"https://skinyi.github.io/2022-08-15-Linux%20|%20%E6%9F%A5%E9%98%85%20Linux%20%E7%B3%BB%E7%BB%9F%E6%89%8B%E5%86%8C%E4%B8%8E%20vim%20%E7%9A%84%E4%BD%BF%E7%94%A8.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ Linux æ“ä½œæ‰‹å†Œ â€‹Linux æœ¬åœ°ç³»ç»Ÿæä¾›çš„ä¸€ä¸ª linux æ“ä½œæ–‡æ¡£æ˜¯ç³»ç»Ÿæ‰‹å†Œï¼Œæˆ–ç§°ä¸º man pageï¼Œå¯ä»¥é€šè¿‡ man å‘½ä»¤ä»å‘½ä»¤è¡Œè¿›è¡Œè®¿é—®æŸ¥è¯¢ã€‚man page æºè‡ªè¿‡å»çš„ Linux ç¨‹åºå‘˜æ‰‹å†Œï¼Œè¯¥æ‰‹å†Œç¯‡å¹…å¾ˆé•¿ï¼Œè¶³ä»¥æ‰“å°æˆå¤šä¸ªç« èŠ‚ï¼Œæ¯ä¸ªç« èŠ‚ä¸­éƒ½åŒ…å«äº†æœ‰å…³ç‰¹å®šä¸»é¢˜çš„ä¿¡æ¯ã€‚ä»¥ä¸‹åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„ç« èŠ‚ã€‚ ç« èŠ‚ å†…å®¹ç±»å‹ 1 ç”¨æˆ·å‘½ä»¤ï¼ˆå¯æ‰§è¡Œå‘½ä»¤å’Œ shell ç¨‹åºï¼‰ 2 ç³»ç»Ÿè°ƒç”¨ï¼ˆä»ç”¨æˆ·ç©ºé—´è°ƒç”¨çš„å†…æ ¸ä¾‹ç¨‹ï¼‰ 3 åº“å‡½æ•°ï¼ˆç”±ç¨‹åºåº“æä¾›ï¼‰ 4 ç‰¹æ®Šæ–‡ä»¶ï¼ˆå¦‚è®¾å¤‡æ–‡ä»¶ï¼‰ 5 æ–‡ä»¶æ ¼å¼ï¼ˆç”¨äºè®¸å¤šé…ç½®æ–‡ä»¶å’Œç»“æ„ï¼‰ 6 æ¸¸æˆï¼ˆè¿‡å»çš„æœ‰è¶£ç¨‹åºç« èŠ‚ï¼‰ 7 æƒ¯ä¾‹ã€æ ‡å‡†å’Œå…¶ä»–ï¼ˆåè®®ã€æ–‡ä»¶ç³»ç»Ÿï¼‰ 8 ç³»ç»Ÿç®¡ç†å’Œç‰¹æƒå‘½ä»¤ï¼ˆç»´æŠ¤ä»»åŠ¡ï¼‰ 9 Linux å†…æ ¸ APIï¼ˆå†…æ ¸è°ƒç”¨ï¼‰ â€‹ä¸ºåŒºåˆ†ä¸åŒç« èŠ‚ä¸­çš„ç›¸åŒä¸»é¢˜åç§°ï¼Œman page å‚è€ƒä¸­åœ¨ä¸»é¢˜åé™„ä¸Šäº†ç« èŠ‚ç¼–å·ï¼ˆç”¨æ‹¬å·æ‹¬èµ·ï¼‰ï¼šå¦‚ passwd(1) ä»‹ç»ä½¿ç”¨ passwd å‘½ä»¤æ›´æ”¹ç”¨æˆ·å¯†ç ï¼Œè€Œ passwd(5) è¯´æ˜ç”¨äºå­˜å‚¨æœ¬åœ°ç”¨æˆ·è´¦æˆ·çš„ /etc/passwd é…ç½®æ–‡ä»¶æ ¼å¼ã€‚ 1234man [THEME_NUM] TOPIC # ä½¿ç”¨ man å‘½ä»¤æŸ¥é˜… TOPIC çš„ç›¸å…³æ–‡æ¡£ï¼Œä¸æŒ‡å®š THEME_NUM åˆ™é»˜è®¤ä¸º 1# ä¾‹å­ï¼šman passwd # æŸ¥çœ‹ passwd å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯man 5 passwd # æŸ¥çœ‹ passwd é…ç½®æ–‡ä»¶çš„ä»‹ç»ä¿¡æ¯ é˜…è¯»æ–‡æ¡£ç›¸å…³ å¯¼èˆªä¸æœç´¢ â€‹man page åº•å±‚ä½¿ç”¨ less ä½œä¸ºå…¶æŸ¥çœ‹å™¨ï¼Œå…·ä½“çš„å¯¼èˆªä¸æŸ¥æ‰¾çš„æ“ä½œä¿¡æ¯å¯å‚è§ 04. Linux æ–‡ä»¶æ“ä½œã€é‡å®šå‘å’Œç®¡é“ ä¸­ä¸ less å‘½ä»¤æœ‰å…³çš„ç›¸å…³ç« èŠ‚ã€‚ å°æ ‡é¢˜ â€‹man page æ¯ä¸ªä¸»é¢˜éƒ½åˆ’åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å›ºå®šçš„å°æ ‡é¢˜ï¼Œå¤§å¤šæ•°ä¸»é¢˜éƒ½å…±äº«ç›¸åŒçš„å°æ ‡é¢˜ï¼Œä¸”è¿™äº›å°æ ‡é¢˜å‡ºç°çš„å¾ªåºéƒ½æ˜¯çº¦å®šä¿—æˆçš„ã€‚æ¯ä¸ªä¸»é¢˜ä¸‹ä¸å¯èƒ½åŒ…å«æ‰€æœ‰çš„å°æ ‡é¢˜ï¼Œå› ä¸ºæœ‰äº›å°æ ‡é¢˜ä¸é€‚ç”¨äºå½“å‰ä¸»é¢˜ã€‚ä»¥ä¸‹åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„å°æ ‡é¢˜ï¼š æ ‡é¢˜ æè¿° NAME ä¸»é¢˜åç§°ï¼Œé€šå¸¸æ˜¯å‘½ä»¤æˆ–æ–‡ä»¶åï¼Œåè·Ÿéå¸¸ç®€çŸ­çš„æè¿° SYNOPSIS å‘½ä»¤è¯­æ³•çš„æ¦‚è¦ DESCRIPTION æä¾›å¯¹ä¸»é¢˜çš„åŸºæœ¬ç†è§£çš„æ·±åº¦æè¿° OPTIONS å¯¹å‘½ä»¤æ‰§è¡Œé€‰é¡¹çš„è¯´æ˜ EXAMPLES æœ‰å…³å¦‚ä½•ä½¿ç”¨å‘½ä»¤ã€åŠŸèƒ½æˆ–æ–‡ä»¶çš„ç¤ºä¾‹ FILES ä¸ man page ç›¸å…³çš„æ–‡ä»¶å’Œç›®å½•çš„åˆ—è¡¨ SEE ALSO ç›¸å…³çš„ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯å…¶ä»– man page çš„ä¸»é¢˜ BUGS è½¯ä»¶ä¸­çš„å·²çŸ¥é”™è¯¯ AUTHOR æœ‰å…³å‚ä¸ç¼–å†™è¯¥ä¸»é¢˜çš„äººå‘˜çš„ä¿¡æ¯ æ ¹æ®å…³é”®å­—æœç´¢ man page 12345man -k keyword # åœ¨ manpage ä¸­æœç´¢è·Ÿ keyword æœ‰å…³çš„ man page ä¸»é¢˜å’Œç« èŠ‚å·# éœ€æ›´æ–° whatis åº“åæ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™æç¤ºï¼š[KEYWORD]: nothting appropriate# é€šè¿‡ root ä½¿ç”¨ makewhatis æŒ‡ä»¤æ¥æ‰‹åŠ¨å»ºç«‹èµ„æ–™åº“ apropos ä¸ man -k ç›¸åŒï¼Œ whatis ä¸ man -f ç›¸åŒã€‚# å¥½å§ï¼Œæˆ‘ç³»ç»Ÿä¸Šä¹Ÿæ²¡è£… makewhatis ï¼ŒçŸ¥é“å°±è¡Œç®—äº†ğŸ˜’ pinfo æ“ä½œæ‰‹å†Œ â€‹é€šå¸¸è€Œè¨€ï¼Œman page æ–‡æ¡£æ›´åŠ æ­£å¼ï¼Œå…¶é‡‡ç”¨ç‹¬ç«‹æ–‡æœ¬æ–‡ä»¶çš„ç»“æ„ï¼Œpinfo æ–‡æ¡£æ›´åŠ å…¨é¢å’Œçµæ´»ï¼Œé‡‡ç”¨è¶…æ–‡æœ¬æ–‡æ¡£çš„ç»“æ„ã€‚ 1pinfo [TOPIC] # æ‰“å¼€å…³äº TOPIC çš„ info æ–‡æ¡£ï¼Œä¸æŒ‡å®š TOPIC åˆ™æ‰“å¼€é¡¶çº§ç›®å½• å¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰é’ˆå¯¹è¯¥ä¸»é¢˜çš„ info æ¡ç›®ï¼Œåˆ™ pinfo å°±ä¼šå»æŸ¥æ‰¾ man page å¹¶æ˜¾ç¤ºç›¸åº”çš„å†…å®¹ã€‚ â€‹pinfo å’Œ man å‘½ä»¤çš„é”®ç›˜å¯¼èˆªæ“ä½œçš„åŒºåˆ«å¦‚ä¸‹ï¼š å¯¼èˆªæ“ä½œ pinfo man å‘å‰ï¼ˆä¸‹ï¼‰æ»šåŠ¨ä¸€ä¸ªå±å¹• PgDn æˆ– SPACE PgDn æˆ– SPACE å‘åï¼ˆä¸Šï¼‰æ»šåŠ¨ä¸€ä¸ªå±å¹• PgUp æˆ– b PgUp æˆ– b æ˜¾ç¤ºä¸»é¢˜ç›®å½• d æ—  å‘å‰ï¼ˆä¸‹ï¼‰æ»šåŠ¨åŠä¸ªå±å¹• æ—  d æ˜¾ç¤ºä¸»é¢˜çš„çˆ¶èŠ‚ç‚¹ u æ—  æ˜¾ç¤ºä¸»é¢˜çš„é¡¶éƒ¨ï¼ˆä¸Šéƒ¨ï¼‰ h g å‘åï¼ˆä¸Šï¼‰æ»šåŠ¨åŠä¸ªå±å¹• - u å‘å‰ï¼ˆä¸‹ï¼‰æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªè¶…é“¾æ¥ â†“ æ—  æ‰“å¼€å…‰æ ‡å¤„çš„ä¸»é¢˜ ENTER æ—  å‘å‰ï¼ˆä¸‹ï¼‰æ»šåŠ¨ä¸€è¡Œ æ—  â†“ æˆ– ENTER å‘åï¼ˆä¸Šï¼‰æ»šåŠ¨åˆ°ä¸Šä¸€è¶…é“¾æ¥ â†‘ æ—  å‘åï¼ˆä¸Šï¼‰æ»šåŠ¨ä¸€è¡Œ æ—  â†‘ æœç´¢æŸç§æ¨¡å¼ /string /sting å’Œ ?string æ˜¾ç¤ºä¸»é¢˜ä¸­çš„ä¸‹ä¸€èŠ‚ç‚¹ï¼ˆç« èŠ‚ï¼‰ n æ—  é‡å¤ä¹‹å‰çš„å‘å‰ï¼ˆä¸‹ï¼‰æœç´¢ / + ENTER n æ˜¾ç¤ºä¸»é¢˜ä¸­çš„ä¸Šä¸€èŠ‚ç‚¹ï¼ˆç« èŠ‚ï¼‰ p æ—  é‡å¤ä¹‹å‰çš„å‘åï¼ˆä¸Šï¼‰æœç´¢ æ—  SHIFT + n é€€å‡ºç¨‹åº q q Vim Cheat Sheet â€‹ä¸­æ–‡ç‰ˆ Cheat Sheet å¯ä»¥å‚é˜…è¿™é‡Œã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†","slug":"Linux | Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†","date":"2022-08-13T00:52:07.799Z","updated":"2022-08-15T01:05:53.722Z","comments":true,"path":"2022-08-13-Linux | Linux æ–‡ä»¶ä¸ç›®å½•ç®¡ç†.html","link":"","permalink":"https://skinyi.github.io/2022-08-13-Linux%20|%20Linux%20%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ–‡ä»¶ç›®å½•æ“ä½œ ä½¿ç”¨ mkdir åˆ›å»ºç›®å½• 12345mkdir [OPTION]... DIRECTORY... # å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºç›®å½•# å¸¸è§å¯é€‰é€‰é¡¹-m, --mode=MODE # è®¾ç½®æ–‡ä»¶è¯»å†™æ‰§è¡Œæƒé™ï¼ˆè·Ÿ chmod ä»¥æ•°å­—è®¾ç½®æ–‡ä»¶æƒé™çš„æ–¹æ³•ä¸€æ ·ï¼‰-v, --verbose # æ‰“å°åˆ›å»ºçš„æ¯ä¸€ä¸ªç›®å½•çš„ä¿¡æ¯-p, --parents # é€’å½’åˆ›å»ºæ¯å±‚ç›®å½•ï¼Œå³å¦‚æœçˆ¶ç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»ºå¥½çˆ¶ç›®å½•åå†åˆ›å»ºè‡ªå·± ä½¿ç”¨ rmdir åˆ é™¤ç©ºçš„ç›®å½• 12345rmdir [OPTION]... DIRECTORY... # è¦åˆ é™¤çš„ç›®å½•å¿…é¡»ä¸ºç©º# å¸¸è§é€‰é¡¹-p, --parents # é€’å½’åˆ é™¤-v, --verbose # æ‰“å°ç¨‹åºæ‰§è¡Œè¿‡ç¨‹--ignore-fail-on-non-empty # å¿½ç•¥ç›®å½•éç©ºé”™è¯¯ ä½¿ç”¨ cd åˆ‡æ¢å·¥ä½œç›®å½• 123cd [-L|[-P [-e]] [-@]] [DIR] # åˆ‡æ¢ shell å·¥ä½œç›®å½•åˆ° DIRï¼ˆé»˜è®¤æœªå½“å‰ç”¨æˆ·å®¶ç›®å½•ï¼Œå¯çœç•¥ï¼‰# å¸¸è§é€‰é¡¹-Pï¼Œ# ç¬¦å·é“¾æ¥ç›´æ¥è½¬åˆ°ç‰©ç†ç›®å½•ç»“æ„ä¸­ï¼Œä¾‹ï¼šcd -L /bin/ &amp;&amp; pwd è¾“å‡º /usr/bin â€‹å¸¸è§ä¸”å…¸å‹çš„ä¾‹å­ï¼š 123456789[root@localhost cups]\\# cd &amp;&amp; pwd # ä¸è·Ÿå‚æ•°é»˜è®¤åˆ‡æ¢åˆ°å®¶ç›®å½•/root[root@localhost home]\\# cd ~ &amp;&amp; pwd # cd ~ åˆ‡æ¢åˆ°å®¶ç›®å½•/root[root@localhost home]\\# cd - # cd - ä¸ºè¿”å›æ—§çš„å·¥ä½œç›®å½•/root[root@localhost ~]\\# ls /etc/ # çœç•¥è¾“å‡º[root@localhost ~]\\# cd !$ # cd !$ å°†ä¸Šæ¡å‘½ä»¤çš„å‚æ•°ä½œä¸º cd çš„å‚æ•°cd /etc/ ğŸŸ¢ æƒ³ç©ç‚¹èŠ±çš„ğŸ˜ï¼štouch 1.txt &amp;&amp; rm -rf !$ï¼Œå¦‚æœä½ ä¸å·§æ˜¯åœ¨æ‰§è¡Œäº†ä»¥æŸä¸ªå­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•ä½œä¸ºå‚æ•°çš„å‘½ä»¤ä¹‹åæ‰§è¡Œçš„è¿™æ¡è¯­å¥ï¼Œé‚£ä¹ˆä½ åˆšæ‰æ“ä½œçš„é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•å°†ä¸å¹¸è¢«åˆ é™¤ğŸ˜¢ï¼äººç”Ÿå¿ å‘Šï¼šåœ¨åˆ é™¤æ–‡ä»¶å‰ä¸€å®šè¦ç¡®ä¿çŸ¥é“ä½ åœ¨å¹²ä»€ä¹ˆã€‚ä¸€ä¸ªä¾‹å­ï¼šrm -rf $VAR_NOT_DEFINED/*ï¼Œè¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ VAR_NOT_DEFINEDï¼Œä½†è¯¥å˜é‡æœªåœ¨ç³»ç»Ÿä¸­å®šä¹‰ï¼Œæ•…åŸå‘½ä»¤å°±ç›¸å½“äº rm -rf /*ï¼Œæ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å°†ä¸ä¿ğŸ˜‚ã€‚ä¸€å®šåˆ‡è®°ï¼šåˆ ä¸œè¥¿éœ€è°¨æ…ï¼ŒéªŒè¯åå†ç©èŠ±çš„ã€‚çŒ®ä¸Šæˆ‘å·®ç‚¹ä¸­æ‹›çš„ä¾‹å­ï¼š 1234[root@localhost ~]\\# cd /etc[root@localhost etc]\\# touch 1.txt &amp;&amp; rm -f !$ # ä¸€æ¡è¯­å¥ != ä¸€æ¡å‘½ä»¤ï¼Œå¹¸å¥½æˆ‘æ²¡æŒ‡å®š -rtouch 1.txt &amp;&amp; rm -f /etcrm: cannot remove &#x27;/etc&#x27;: Is a directory åˆ—å‡ºç›®å½•é‡Œçš„å†…å®¹ 123456789101112131415161718ls [OPTION]... [FILE]...# å¸¸è§å¯é€‰é€‰é¡¹ï¼š-a, --all # åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬ ./ã€../ä»¥åŠéšè—æ–‡ä»¶ï¼‰-A, --almost-all # åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰--color[=WHEN] # ç”¨é¢œè‰²æ¸²æŸ“è¾“å‡ºï¼šalways æ€»æ˜¯ï¼ˆé»˜è®¤ï¼‰ï¼Œauto è‡ªåŠ¨, never æ°¸ä¸-r, # å°†æ–‡ä»¶ä»¥ç›¸åæ¬¡åºæ˜¾ç¤ºï¼ˆåŸæ¥ä»¥è‹±æ–‡å­—æ¯æ¬¡åºæ’åºï¼‰-t, # å°†æ–‡ä»¶ä¾å»ºç«‹æ—¶é—´ä¹‹å…ˆåæ¬¡åºåˆ—å‡º-R, # é€’å½’æ˜¾ç¤ºå­ç›®å½•çš„å†…å®¹-l, # ä¸€è¡Œå±•ç¤ºä¸€ä¸ªæ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–‡ä»¶å¤¹ï¼‰ï¼Œæ›´åŠ è¯¦ç»† ll [OPTION]... [FILE]... # ll å®é™…ä¸Šæ˜¯ ls -l --color=auto çš„åˆ«åï¼Œæœ‰äº›å‘è¡Œç‰ˆå¯èƒ½ä¸ä¼šé»˜è®¤è®¾ç½®# ä¾‹å­[root@localhost ~]\\# ll /hometotal 0drwx------. 3 student student 99 Apr 11 00:22 student# å¯é€‰é€‰é¡¹-h, # äººç±»å‹å¥½æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°-dï¼Œ# åˆ—å‡ºç›®å½•æˆ–æ–‡ä»¶è‡ªå·±æœ¬èº«çš„å±æ€§ â€‹ ls -l å‘½ä»¤æ‰§è¡Œç»“æœçš„å„ä¸ªéƒ¨åˆ†çš„æ„ä¹‰å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š éƒ¨åˆ† æ„ä¹‰ drwx------. æ–‡ä»¶ç±»å‹è¯»å†™æ‰§è¡Œæƒé™å±æ€§æ ‡è¯†ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå­—æ¯ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼Œ- ä»£è¡¨æ™®é€šæ–‡ä»¶ï¼Œd ä»£è¡¨ç›®å½•ï¼Œl ç¬¦å·é“¾æ¥ï¼Œb å—è®¾å¤‡æ–‡ä»¶ï¼Œc å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œc å¥—æ¥å­—æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æ¯ä¸‰ä½åˆ†åˆ«ä»£è¡¨æ–‡ä»¶æ‰€æœ‰è€…ã€æ‰€æœ‰è€…å¤„äºçš„ç»„ã€å…¶ä½™ç”¨æˆ·çš„è¯»å–æ‰§è¡Œæƒé™ï¼š- ä»£è¡¨æ— æƒé™ï¼Œr ä»£è¡¨æœ‰è¯»å–æƒé™ï¼Œw ä»£è¡¨æœ‰å†™å…¥æƒé™ï¼Œx ä»£è¡¨æœ‰æ‰§è¡Œè¯¥æ–‡ä»¶çš„æƒé™ 3 é“¾æ¥æ•°ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæ–‡ä»¶é“¾æ¥åˆ°inodeå·ç ï¼Œæ™®é€šæ–‡ä»¶ä¸º 1ï¼Œç›®å½•çš„è¯æ˜¯å…¶åŒ…å«çš„æ–‡ä»¶æˆ–ç›®å½•çš„ä¸ªæ•° student è¯¥æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€… student è¯¥æ–‡ä»¶æ‹¥æœ‰è€…çš„åˆ†ç»„ 99 æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ç”¨ byte æ¥è¡¨ç¤º Apr 11 00:22 æ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼Œæ ¼å¼ï¼šæœˆ-æ—¥-æ—¶é—´ student æ–‡ä»¶å ä½¿ç”¨ mv å‘½ä»¤é‡å‘½åæˆ–ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½• 12345678910111213141516mv cp [OPTION]... [-T] SOURCE DEST # é‡å‘½å|äº§ç”Ÿæ–‡ä»¶çš„ä¸åŒåçš„å‰¯æœ¬mv cp [OPTION]... SOURCE... DIRECTORY # å°†æ‰€æœ‰ SOURCE å‚æ•°ä»£è¡¨çš„æ–‡ä»¶ç§»åŠ¨|å¤åˆ¶åˆ° DIRECTORY ç›®å½•ä¸­mv cp [OPTION]... -t DIRECTORY SOURCE... # ä¼ å‚é¡ºåºæ”¹å˜ï¼Œæ›´å®¹æ˜“ç†è§£# å¸¸è§å‚æ•°--backup[=CONTROL] # å¤‡ä»½å·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶ï¼Œé€šè¿‡é€‰é¡¹ä¼ å‚å†³å®šï¼šnone|off ä¸å¤‡ä»½ï¼Œnumbered|t äº§ç”Ÿæœ‰ç¼–å·çš„å¤‡ä»½æ–‡ä»¶ existing|nil å¦‚æœå·²å­˜åœ¨æœ‰ç¼–å·çš„å¤‡ä»½åˆ™ç¼–å·å¤‡ä»½ï¼Œå¦åˆ™ä¸ç¼–å·ï¼Œsimple|never æ™®é€šå¤‡ä»½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ $VERSION_CONTROL å†³å®šå¤‡ä»½ç±»å‹-b # åŒ --backupï¼Œä¸è¿‡ä¸æ¥å—å‚æ•°-S, --suffix=SUFFIX # æŒ‡å®šå¤‡ä»½æ–‡ä»¶åç¼€åï¼Œé»˜è®¤ ~ ã€‚# -i, -n, -f åŒæ—¶æŒ‡å®šåˆ™ä»…æœ€åä¸€ä¸ªç”Ÿæ•ˆ-f, --force # ä¸è¯¢é—®ï¼Œç›´æ¥è¦†ç›–ç§»åŠ¨-i, --interactive # åœ¨è¦†ç›–å‰è¯¢é—®-n, --no-clobber # ä¸è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶--strip-trailing-slashes # ä»æºå‚æ•°ä¸­ç§»é™¤å°¾éšæ–œæ -t, --target-directory=DIRECTORY # å°†æ‰€æœ‰ SOURCE å‚æ•°ä»£è¡¨çš„æ–‡ä»¶ç§»åŠ¨åˆ° DIRECTORY ç›®å½•ä¸­-T, --no-target-directory # å°† DESC è§†ä½œæ­£å¸¸æ–‡ä»¶-u, --update # ä»…å½“æºæ–‡ä»¶æ¯”ç›®æ ‡æ–‡ä»¶æ–°æˆ–ç›®æ ‡æ–‡ä»¶ä¸¢å¤±çš„æ—¶å€™ç§»åŠ¨-v, --verbose # è¾“å‡ºæ“ä½œçš„è¯¦ç»†ä¿¡æ¯ ä½¿ç”¨ cp å‘½ä»¤å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• â€‹ cp å‘½ä»¤æ ¼å¼è§ mvã€‚ 123# å…¶å®ƒå¸¸è§é€‰é¡¹--attributes-only # ä¸è¦å¤åˆ¶æ–‡ä»¶æ•°æ®ï¼Œä»…å¤åˆ¶æ–‡ä»¶çš„å±æ€§-R, -r, --recursive # é€’å½’å¤åˆ¶ï¼Œå³åŒ…æ‹¬ç›®å½•é‡Œçš„å†…å®¹ä¹Ÿå¤åˆ¶ ä½¿ç”¨ rm å‘½ä»¤åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• 12345678rm [OPTION]... [FILE]...-f, --force # å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–å‚æ•°æŠ¥é”™ï¼Œä¸æç¤º-i, # åˆ é™¤å‰éœ€ç¡®è®¤æ“ä½œ-I, # åˆ é™¤ä¸‰ä¸ªä»¥ä¸Šç›®å½•æˆ–æ–‡ä»¶æ—¶ï¼Œæˆ–è€…åœ¨é€’å½’åˆ é™¤æ—¶ï¼Œä»…æç¤ºä¸€æ¬¡-r, -R, --recursive # é€’å½’åˆ é™¤ç›®å½•å’Œå…¶ä¸­çš„æ–‡ä»¶-d, --dir # åˆ é™¤ç©ºç›®å½•-v, --verbose # åˆ é™¤æ—¶è¾“å‡ºæ“ä½œä¿¡æ¯--, # åˆ é™¤ä»¥ - ä¸ºå¼€å¤´çš„æ–‡ä»¶æ—¶ä½¿ç”¨ é“¾æ¥æ–‡ä»¶ äº†è§£ linux æ–‡ä»¶åº•å±‚æœºåˆ¶ â€‹Linux ä¸‹çš„æ–‡ä»¶é™¤äº†æ–‡ä»¶æ•°æ®å†…å®¹ï¼ˆblock èŠ‚ç‚¹ï¼‰æœ¬èº«ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¯¹è¿™äº›çº¯æ–‡ä»¶æ•°æ®å†…å®¹çš„ç®¡ç†ä¿¡æ¯ï¼Œå¦‚ï¼šæ–‡ä»¶åã€è®¿é—®æƒé™ã€æ–‡ä»¶çš„å±ä¸»ä»¥åŠè¯¥æ–‡ä»¶çš„æ•°æ®æ‰€å¯¹åº”çš„ç£ç›˜å—ç­‰ï¼Œè¿™äº›ç®¡ç†ä¿¡æ¯ç§°ä¹‹ä¸ºå…ƒæ•°æ®ï¼ˆmeta data)ï¼Œå…ƒæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶çš„ inode èŠ‚ç‚¹ä¹‹ä¸­ã€‚ â€‹å¯ä»¥é€šè¿‡ stat å‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„ inode ä¿¡æ¯ã€‚ 1234567891011121314151617[root@localhost ~]\\# stat /var/log/messages # linux ä¸‹ inode æ˜¯è¯¥æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸€æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯† File: /var/log/messages Size: 1378414 Blocks: 2696 IO Block: 4096 regular file Device: fd00h/64768d Inode: 34218021 Links: 1 Access: (0600/-rw-------) Uid: ( 0/ root) Gid: ( 0/ root)Context: system_u:object_r:var_log_t:s0 Access: 2021-04-14 18:41:03.906745879 +0800 Modify: 2021-04-14 18:41:03.906745879 +0800 Change: 2021-04-14 18:41:03.906745879 +0800 Birth: -## stat æ˜¾ç¤ºæ–‡ä»¶æˆ–æ–‡ä»¶ç³»ç»ŸçŠ¶æ€stat [OPTIONS]... FILE...# å¸¸è§é€‰é¡¹ï¼š-L, --dereference # è·Ÿéšé“¾æ¥-f, --file-system # æ˜¾ç¤ºæ–‡ä»¶ç³»ç»ŸçŠ¶æ€è€Œä¸æ˜¯æ–‡ä»¶çŠ¶æ€-t, --terse # ä»¥ç²¾å°çš„æ–¹å¼æ‰“å°ä¿¡æ¯ï¼ˆä¸å¸¸ç”¨ï¼‰ â€‹ä½¿ç”¨ df -ih å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿç»™æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ inode åŒºåŸŸåˆ’åˆ†æƒ…å†µã€‚ 12345678910[root@localhost ~]\\# df -ihFilesystem Inodes IUsed IFree IUse% Mounted ondevtmpfs 457K 426 456K 1% /devtmpfs 464K 1 464K 1% /dev/shmtmpfs 464K 987 463K 1% /runtmpfs 464K 17 464K 1% /sys/fs/cgroup/dev/mapper/rhel-root 18M 120K 18M 1% //dev/nvme0n1p1 512K 302 512K 1% /boottmpfs 464K 20 464K 1% /run/user/42tmpfs 464K 32 464K 1% /run/user/0 æŸä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ inode åŒºåŸŸè¢«ä½¿ç”¨å®Œäº†å°±æ— æ³•åœ¨è¯¥æ–‡ä»¶ç³»ç»Ÿä¸‹åˆ›å»ºæ–‡ä»¶äº†ï¼Œå³ä½¿è¯¥æ–‡ä»¶ç³»ç»Ÿè¿˜æœ‰ç£ç›˜å—å¯ä»¥å­˜æ”¾æ–‡ä»¶æ•°æ®ã€‚ â€‹Linux ä¸‹çš„ç›®å½•å…¶å®æ˜¯ä¸€ç±»ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œâ€ç›®å½•â€œæ–‡ä»¶ä¸‹ä¿å­˜ç€è¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„æ–‡ä»¶ååˆ° inode å·çš„å¯¹åº”å…³ç³»ï¼Œè¿™é‡Œçš„æ¯ä¸ªå¯¹åº”å…³ç³»è¢«ç§°ä¸ºä¸€ä¸ªç›®å½•é¡¹ï¼ˆdirectory entryï¼Œå³ dentryï¼‰ã€‚ ç¡¬é“¾æ¥ï¼ˆhard linkï¼‰ â€‹ç¡¬é“¾æ¥çš„å®è´¨æ˜¯ç°æœ‰æ–‡ä»¶åœ¨æ–‡ä»¶ç›®å½•æ ‘ä¸­çš„å¦ä¸€ä¸ªå…¥å£ï¼Œå³åˆ†å±…äºä¸åŒæˆ–ç›¸åŒç›®å½•ä¸‹çš„æŒ‡å‘åŒä¸€ä¸ª inode çš„ dentryï¼Œå…¶æ–‡ä»¶å†…å®¹ä¹Ÿä½äºç›¸åŒçš„ç£ç›˜æ•°æ®åº“ï¼Œå…·æœ‰ç›¸åŒçš„è®¿é—®æƒé™ã€å±æ€§ç­‰ã€‚ç¡¬é“¾æ¥å¯ä»¥ç†è§£ä¸ºç»™å·²å­˜åœ¨çš„æ–‡ä»¶å–ä¸€ä¸ªåˆ«åï¼Œåªåˆ é™¤ä¸€ä¸ªç¡¬è¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„é“¾æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªé“¾æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„é“¾æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚ â€‹ç¡¬é“¾æ¥çš„ä¼˜ç‚¹æ˜¯å‡ ä¹ä¸å ç£ç›˜ç©ºé—´ï¼Œå› ä¸ºä»…ä»…æ˜¯åœ¨ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­å¢åŠ äº†ä¸€ä¸ªç›®å½•é¡¹çš„å¯¹åº”å…³ç³»ï¼Œä½†è¿™ä¸€æœ‰ç‚¹ç›¸è¾ƒè½¯è¿æ¥å¹¶ä¸æ˜æ˜¾ï¼Œè½¯é“¾æ¥å ç”¨çš„ç£ç›˜ç©ºé—´ä¹Ÿå¾ˆå°ã€‚ç¡¬é“¾æ¥çš„ç¼ºç‚¹æ˜¯ï¼š1. ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºç¡¬é“¾æ¥ï¼›2. ä¸èƒ½å¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥åŸå› å¯ä»¥å‚ç…§ç½‘ç»œä¸Šçš„è¿™ç¯‡æ–‡ç« ã€‚ ç¬¦å·é“¾æ¥ï¼ˆsymlink,symbolic link, ä¹Ÿç§°è½¯é“¾æ¥ï¼‰ â€‹ç¬¦å·é“¾æ¥å…¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„æŒ‡é’ˆã€‚å½“è¦æŸ¥çœ‹æŸä¸ªè½¯é“¾æ¥æŒ‡å‘æ–‡ä»¶çš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿä¼šå¾ªç€æŒ‡é’ˆæ‰¾å‡ºå«æœ‰å®é™…æ•°æ®çš„ç›®æ ‡æ–‡ä»¶ï¼Œå¹¶è¯»å–å…¶å†…å®¹ã€‚ â€‹è½¯è¿æ¥å¯ä»¥è·¨è¶Šæ–‡ä»¶ç³»ç»ŸæŒ‡å‘å¦ä¸€ä¸ªåˆ†åŒºçš„æ–‡ä»¶ï¼Œç”šè‡³å¯ä»¥è·¨è¶Šä¸»æœºæŒ‡å‘è¿œç¨‹ä¸»æœºçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å‘ç›®å½•æ–‡ä»¶ã€‚è½¯è¿æ¥æ–‡ä»¶çš„æƒé™æ˜¯ 777ï¼Œå³æ‰€æœ‰æƒé™éƒ½æ˜¯å¼€æ”¾çš„ï¼Œä¸”æ— æ³•æ›´æ”¹ï¼Œä½†å®é™…æ–‡ä»¶çš„æƒé™ä¿æŠ¤æœºåˆ¶ä»ç„¶èµ·ä½œç”¨ã€‚ç¬¦å·é“¾æ¥å¯ä»¥æŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå³ä¸ç›®æ ‡æ–‡ä»¶å¤„äºæ–­è£‚çŠ¶æ€ï¼Œç¡¬é“¾æ¥ä¸èƒ½ã€‚ ä½¿ç”¨é“¾æ¥çš„å¥½å¤„ ä¿æŒè½¯ä»¶çš„å…¼å®¹æ€§ â€‹åœ¨ RHEL8 æ“ä½œç³»ç»Ÿä¸­ï¼Œsh å‘½ä»¤çš„äºŒè¿›åˆ¶æ–‡ä»¶å®é™…ä¸Šæ˜¯ bash æ–‡ä»¶çš„ä¸€ä¸ªè½¯è¿æ¥ï¼š 12[root@localhost ~]\\# ll /bin/shlrwxrwxrwx. 1 root root 4 Jun 23 2020 /bin/sh -&gt; bash â€‹è¿™æ ·åšçš„å¥½å¤„æ˜¯æ–¹ä¾¿ç³»ç»Ÿå‘åå…¼å®¹ï¼Œå› ä¸ºæœ‰äº›è¾ƒä¸ºæ—©æœŸçš„è„šæœ¬æ–‡ä»¶å…¶é»˜è®¤ä½¿ç”¨çš„è§£é‡Šå™¨è¿˜é»˜è®¤æ˜¯ sh ,è€Œ bash æ˜¯åæ¥ sh çš„æœ€æˆåŠŸçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œä¸ºäº†ä½¿è¿™äº›è¾ƒä¸ºæ—©æœŸçš„è„šæœ¬ä¹Ÿèƒ½åœ¨ bash ä¸Šæ­£å¸¸çš„æ‰§è¡Œï¼Œæ•…å°† sh ä½œä¸º bash çš„ä¸€ä¸ªé“¾æ¥ï¼Œå®ç°äº†ä¸ç”¨æ›´æ”¹è„šæœ¬å†…å®¹å°±å¯ä»¥ä½¿ç”¨ bash æ¥è§£é‡Šæ‰§è¡Œå®ƒä»¬ã€‚ æ–¹ä¾¿ä½¿ç”¨ â€‹å¦‚å½“æˆ‘ä»¬åœ¨ /opt ç›®å½•ä¸‹å®‰è£…äº†å¤§å‹è½¯ä»¶åï¼Œå¯åœ¨ /usr/bin ç›®å½•ä¸‹ä¸ºå…¶å¯åŠ¨è„šæœ¬æˆ–å¯æ‰§è¡Œæ–‡ä»¶åˆ›å»ºé“¾æ¥ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸ç”¨ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œåœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥è½¯é“¾æ¥çš„æ–‡ä»¶åæ‰§è¡Œå°±å¯ä»¥æ‰“å¼€å®‰è£…å¥½çš„è½¯ä»¶ã€‚ ç»´æŒæ—§çš„æ“ä½œä¹ æƒ¯ â€‹æ¯”å¦‚åœ¨ SuSE ä¸­ï¼Œå¯åŠ¨è„šæœ¬çš„ä½ç½®æ˜¯æ”¾åœ¨ /etc/init.d ç›®å½•ä¸‹ï¼Œè€Œåœ¨ RedHat çš„å‘è¡Œç‰ˆä¸­ï¼Œæ˜¯æ”¾åœ¨ /etc/rc.d/init.d ç›®å½•ä¸‹ã€‚ä¸ºäº†é¿å…å› ä¸ºä» SuSE è½¬æ¢åˆ° RedHat ç³»ç»Ÿè€Œå¯¼è‡´ç®¡ç†å‘˜æ‰¾ä¸åˆ°ä½ç½®çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ /etc/init.d ä½¿å…¶æŒ‡å‘ /etc/rc.d/init.d å³å¯ã€‚ 12[root@localhost ~]\\# ll -d /etc/init.dlrwxrwxrwx. 1 root root 11 Apr 17 2020 /etc/init.d -&gt; rc.d/init.d RHEL8 ç‰ˆæœ¬ä¸­ï¼ŒåŸå…ˆçš„ service æœºåˆ¶ï¼ˆåŒ…æ‹¬ init.d æ§åˆ¶å¯åŠ¨é¡¹çš„æœºåˆ¶ï¼‰å·²ç» systemd æœºåˆ¶å–ä»£äº†ã€‚ä½†ä¸ºäº†å‘åå…¼å®¹ï¼Œç°ç‰ˆæœ¬è¿˜å­˜åœ¨è¿™äº›æ–‡ä»¶ç›®å½•ã€‚ ä½¿ç”¨ ln å‘½ä»¤åˆ›å»ºé“¾æ¥ 12345678910111213141516ln [OPTION]... [-T] TARGET LINK_NAME # ä¸º TARGET åˆ›å»ºä¸€ä¸ªåä¸º LINK_NAME çš„é“¾æ¥ln [OPTION]... TARGET # åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­ä¸º TARGET åˆ›å»ºä¸€ä¸ªé“¾æ¥ls [OPTION]... TARGET... DIRECTORY # åœ¨ DIRECTORY ä¸­ä¸ºæ¯ä¸€ä¸ª TARGET åˆ›å»ºé“¾æ¥ï¼ˆé»˜è®¤ç¡¬é“¾æ¥ï¼Œé»˜è®¤é“¾æ¥æ–‡ä»¶çš„æ–‡ä»¶åä¸å…è®¸åœ¨è¯¥ç›®å½•ä¸­å·²å­˜åœ¨ï¼‰ls [OPTION]... -t DIRECTORY TARGET... # ç¡¬é“¾æ¥çš„ç›®æ ‡æ–‡ä»¶å¿…é¡»å­˜åœ¨# å¸¸è§é€‰é¡¹ï¼š--backup=[CONTROL] # ä¸ºæ¯ä¸ªå·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶åˆ›å»ºå¤‡ä»½ï¼Œè¯¦è§ mv çš„ --backup é€‰é¡¹-b, # ç±»ä¼¼ --backup ä½†ä¸æ¥å—å‚æ•°-f, --force # å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨åˆ™åˆ é™¤å®ƒ-i, --interactive # äº¤äº’è¯¢é—®æ˜¯å¦åˆ é™¤å·²å­˜åœ¨çš„ç›®æ ‡æ–‡ä»¶-L, --logical # æ–­å¼€ç¬¦å·é“¾æ¥æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ä¹‹é—´çš„é“¾æ¥-n, --no-dereference # å°† LINK_NAME è§†ä½œæ­£å¸¸æ–‡ä»¶å¦‚æœå®ƒæ˜¯ç›®å½•çš„ä¸€ä¸ªè½¯è¿æ¥-P, --physical # ä½¿ç¡¬é“¾æ¥ç›´æ¥æŒ‡å‘ç¬¦å·é“¾æ¥-s, --symbolic # åˆ›å»ºè½¯è¿æ¥è€Œä¸æ˜¯ç¡¬é“¾æ¥-t, --target-directory=DIRECTORY # æŒ‡å®šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºé“¾æ¥-T, --no-target-directory # å°†é“¾æ¥åæ€»æ˜¯è§†ä½œæ­£å¸¸æ–‡ä»¶-v, --verbose # æ‰“å°æ¯ä¸ªåˆ›å»ºå¥½çš„é“¾æ¥æ–‡ä»¶å ç›¸å…³ä¾‹å­å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940# åˆ›å»ºç»ƒä¹ æ–‡ä»¶ file.txt å¹¶ä¸ºå…¶åˆ›å»ºè½¯é“¾æ¥å’Œç¡¬é“¾æ¥[student@localhost ~]\\$ touch file.txt &amp;&amp; echo &quot;this is an example file of links&quot; &gt; file.txt &amp;&amp; lltotal 4-rw-rw-r--. 1 student student 33 Apr 14 22:13 file.txt[student@localhost ~]\\$ ln -s file.txt symlink_file[student@localhost ~]\\$ ln file.txt hlink_file[student@localhost ~]\\$ lltotal 8-rw-rw-r--. 2 student student 33 Apr 14 22:13 file.txt-rw-rw-r--. 2 student student 33 Apr 14 22:13 hlink_filelrwxrwxrwx. 1 student student 8 Apr 14 22:15 symlink_file -&gt; file.txt# ä½¿ç”¨ stat å‘½ä»¤æ£€æŸ¥è¿™ä¸‰ä¸ªæ–‡ä»¶[student@localhost ~]\\$ stat * File: file.txt Size: 33 Blocks: 8 IO Block: 4096 regular fileDevice: fd00h/64768d Inode: 3252736 Links: 2Access: (0664/-rw-rw-r--) Uid: ( 1000/ student) Gid: ( 1000/ student)Context: unconfined_u:object_r:user_home_t:s0Access: 2021-04-14 22:13:47.856472747 +0800Modify: 2021-04-14 22:13:47.857472747 +0800Change: 2021-04-14 22:16:20.095481417 +0800 Birth: - File: hlink_file Size: 33 Blocks: 8 IO Block: 4096 regular fileDevice: fd00h/64768d Inode: 3252736 Links: 2Access: (0664/-rw-rw-r--) Uid: ( 1000/ student) Gid: ( 1000/ student)Context: unconfined_u:object_r:user_home_t:s0Access: 2021-04-14 22:13:47.856472747 +0800Modify: 2021-04-14 22:13:47.857472747 +0800Change: 2021-04-14 22:16:20.095481417 +0800 Birth: - File: symlink_file -&gt; file.txt Size: 8 Blocks: 0 IO Block: 4096 symbolic linkDevice: fd00h/64768d Inode: 3252737 Links: 1Access: (0777/lrwxrwxrwx) Uid: ( 1000/ student) Gid: ( 1000/ student)Context: unconfined_u:object_r:user_home_t:s0Access: 2021-04-14 22:16:23.155481591 +0800Modify: 2021-04-14 22:15:43.072479308 +0800Change: 2021-04-14 22:15:43.072479308 +0800 Birth: - â€‹ç»è¿‡å¯¹æ¯”è¿™ä¸‰ä¸ªæ–‡ä»¶å¯ä»¥å‘ç°ï¼šæºæ–‡ä»¶å’Œå…¶ç¡¬é“¾æ¥æ–‡ä»¶å…±åŒæŒ‡å‘äº†åŒä¸€ä¸ª inode (Inode:3252736) ,ç¡¬é“¾æ¥æ•°ï¼ˆLinksï¼‰å­—æ®µåŒä¸º 2ï¼Œè¡¨ç¤ºæœ‰ä¸¤ä¸ªç›®å½•é¡¹æŒ‡å‘è¯¥ inodeï¼Œæœ‰å¤šå°‘ä¸ªç¡¬é“¾æ¥å…¶å€¼å°±ä¸ºå¤šå°‘ï¼ˆæ™®é€šæ–‡ä»¶å¿…å­˜åœ¨ä¸€ä¸ªç¡¬é“¾æ¥ï¼‰ï¼Œå®ƒä»¬çš„æ–‡ä»¶å…ƒæ•°æ®æ˜¯ä¸€æ ·çš„ï¼›è€Œè½¯é“¾æ¥ä¸æºæ–‡ä»¶ç›¸æ¯”ï¼Œå…¶è®¿é—®æƒé™ä¸º 0777ï¼Œä¸” inode å·ä¹Ÿä¸æºæ–‡ä»¶ä¸åŒï¼Œå…¶æ‰€å çš„æ–‡ä»¶æ•°æ®å—å¤§å°ä¸º0ã€‚ 12345678# åˆ é™¤æºæ–‡ä»¶åçœ‹çœ‹[student@localhost ~]\\$ rm file.txt &amp;&amp; ll -i &amp;&amp; cat hlink_filetotal 43252736 -rw-rw-r--. 1 student student 33 Apr 14 22:13 hlink_file3252737 lrwxrwxrwx. 1 student student 8 Apr 14 22:15 symlink_file -&gt; file.txtthis is an example file of links[student@localhost ~]\\$ cat symlink_file cat: symlink_file: No such file or directory â€‹åˆ é™¤äº†æºæ–‡ä»¶åè¿˜å¯ä»¥é€šè¿‡ç¡¬é“¾æ¥è®¿é—®æ–‡ä»¶å†…å®¹ï¼Œä½†è¯¥æ–‡ä»¶çš„å…ƒæ•°æ®çš„ Links å­—æ®µé‡æ–°å˜å›äº† 1ï¼ˆç¬¬ä¸‰åˆ—ï¼‰ï¼Œå…¶ inodeï¼ˆç¬¬ä¸€åˆ—ï¼‰ æ²¡æœ‰æ”¹å˜ï¼Œè½¯é“¾æ¥çš„è®°å½•ä¼šä¸æ–­é—ªçƒè¡¨æ˜è¯¥è½¯é“¾æ¥å·²ç»æ–­è£‚å¤±æ•ˆï¼Œé€šè¿‡ cat å‘½ä»¤æŸ¥çœ‹å…¶å†…å®¹ä¹Ÿä¼šæç¤ºæ²¡æœ‰è¯¥æ–‡ä»¶ã€‚ è¿½éšé“¾æ¥ â€‹è‡ªä»æœ‰äº†è½¯é“¾æ¥ï¼Œå½“è¦å¤‡ä»½ã€å¤åˆ¶æˆ–è€…ç§»åŠ¨ç›®å½•æˆ–æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æ˜¯å¦è¦â€è¿½éšé“¾æ¥â€œçš„é—®é¢˜ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä¼šæ“ä½œé“¾æ¥æ‰€æŒ‡çš„å¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä»…ä»…æ“ä½œé“¾æ¥æœ¬èº«ã€‚ä¸€äº›å‘½ä»¤å·¥å…·ä¼šå‡ºç°æ˜¯å¦è¿½éšçš„é€‰é¡¹ï¼Œå¦‚ cpï¼š 123# cp å‘½ä»¤å…³äºé“¾æ¥çš„é€‰é¡¹-L, --dereference # è¿½éšé“¾æ¥ï¼ˆå¤åˆ¶é“¾æ¥æ‰€æŒ‡å‘çš„ç›®æ ‡ï¼‰-P, --no-dereference # ä¸è¿½éšé“¾æ¥ï¼ˆå¤åˆ¶é“¾æ¥æœ¬èº«ï¼‰","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux æ–‡ä»¶æ“ä½œã€é‡å®šå‘å’Œç®¡é“","slug":"Linux | Linux æ–‡ä»¶æ“ä½œã€é‡å®šå‘å’Œç®¡é“","date":"2022-08-12T10:35:40.374Z","updated":"2022-08-12T10:54:15.930Z","comments":true,"path":"2022-08-12-Linux | Linux æ–‡ä»¶æ“ä½œã€é‡å®šå‘å’Œç®¡é“.html","link":"","permalink":"https://skinyi.github.io/2022-08-12-Linux%20|%20Linux%20%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E7%AE%A1%E9%81%93.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ æ–‡ä»¶æ“ä½œç›¸å…³ æ–‡ä»¶åé€šé…ç¬¦ é€šé…ç¬¦ ä½œç”¨ ä¸¾ä¾‹ * ä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ åˆ—å‡ºä»¥&quot;.log&quot;ç»“å°¾çš„æ–‡ä»¶ï¼šll *.log ? ä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦ åˆ—å‡ºå•ä¸ªå­—ç¬¦æ„æˆæ–‡ä»¶åçš„æ–‡ä»¶ï¼šll ? [abc...] æ‹¬èµ·çš„ç±»ï¼ˆä½äºæ–¹æ‹¬å·é—´çš„ï¼‰ä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ åˆ—å‡ºç”±çº¯å°å†™å­—æ¯æ„æˆï¼Œç¬¬äºŒä½ä¸ºiçš„ä¸‰ä½å­—ç¬¦æ„æˆæ–‡ä»¶åçš„æ–‡ä»¶ï¼šll -d [a-z]i[a-z] [!abc...] ä¸æ˜¯æ‹¬èµ·çš„ç±»ä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ ll -d [^a-b]i[^x-z] {åŒ¹é…ä¸€,åŒ¹é…äºŒ,åŒ¹é…ä¸‰...}æˆ–{åŒ¹é…ä¸€..åŒ¹é…ä¸‰} å°†ä¸Šä¸‹æ–‡ä¸èŠ±æ‹¬å·å†…çš„å†…å®¹ç»“åˆåŒ¹é… ll -d /etc/rc{1,4,5}.d â€‹ [] ä¸­çš„å…¶å®ƒå¸¸è§ç±»åï¼š[:alpha:] ä»»ä½•å­—æ¯å­—ç¬¦ï¼Œ[:lower:] ä»»ä½•å°å†™å­—æ¯ï¼Œ[:upper:] ä»»ä½•å¤§å†™å­—æ¯ï¼Œ[:alnum:] ä»»ä½•å­—æ¯å­—ç¬¦æˆ–æ•°å­—ï¼Œ[:punct:] é™¤ç©ºæ ¼å’Œå­—æ¯æ•°å­—ä»¥å¤–çš„ä»»ä½•å¯æ‰“å°å­—ç¬¦ï¼Œ[:digit:] ä» 0 åˆ° 9 ä»»ä½•å•ä¸ªæ•°å­—ï¼Œ[:space:] ä»»ä½•ä¸€ä¸ªç©ºç™½å­—ç¬¦ã€‚å¯èƒ½åŒ…å«åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ã€å›è½¦ç¬¦ã€æ¢é¡µç¬¦æˆ–ç©ºæ ¼ã€‚ ä½¿ç”¨ pwd å‘½ä»¤æŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ 1234[root@localhost ~]\\# type pwdpwd is a shell builtin[root@localhost ~]\\# pwd/root ä½¿ç”¨ touch å‘½ä»¤æ–°å»ºæ–‡ä»¶ â€‹ touch å‘½ä»¤çš„ä½œç”¨æ˜¯æ”¹å˜æ–‡ä»¶çš„æ—¶é—´æˆ³ï¼Œä¸è¿‡æœ€å¸¸ç”¨æ¥åˆ›å»ºæ–°çš„ç©ºç™½æ–‡ä»¶ï¼š 12[root@localhost ~]\\# touch file.txt &amp;&amp; ls | grep filefile.txt ä½¿ç”¨ file å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶ç±»å‹ â€‹Linux ä¸éœ€è¦æ–‡ä»¶æ‹“å±•åæ¥åŒºåˆ†æ–‡ä»¶ç±»å‹ï¼Œä½¿ç”¨ file å‘½ä»¤å¯ä»¥æ‰«ææ–‡ä»¶çš„æ–‡ä»¶å¤´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•ç±»å‹ï¼š 123456[root@localhost ~]\\# file /usr/bin/file/usr/bin/file: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=2f48178ab3e0f2368f38669dd1d58c49bf0dcf8f, stripped# file å‘½ä»¤å¸¸è§é€‰é¡¹ï¼š-b, --brief ä¸ä¼šåœ¨è¾“å‡ºç»“æœå‰é¢åŠ ä¸Šæ–‡ä»¶åå’Œå†’å·ï¼ˆç®€æ´æ¨¡å¼ï¼‰-i, --mime æ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„ mime ä»¥åŠå­—ç¬¦é›†ä¿¡æ¯ï¼Œæ•ˆæœç›¸å½“äºï¼š--mime-type --mime-encoding-L, --dereference è¿›ä¸€æ­¥æ˜¾ç¤ºç¬¦å·é“¾æ¥åˆ°çš„æ–‡ä»¶çš„ç±»å‹ ä½¿ç”¨ cat å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆä»¥å­—ç¬¦æ–‡ä»¶å½¢å¼æ‰“å¼€ï¼‰ ğŸŸ¢ å‡†ç¡®çš„è¯´ cat å‘½ä»¤çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶ä»¥å­—ç¬¦çš„å½¢å¼è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸­ã€‚ 123456789[root@localhost ~]\\# cat /proc/cpuinfo # æ— æ–‡ä»¶åå‚æ•°æˆ–æä¾›&quot;-&quot;æ—¶ä¼šè¯»å–æ ‡å‡†è¾“å…¥è®¾å¤‡,æ”¯æŒåŒæ—¶è¾“å‡ºå¤šä¸ªæ–‡ä»¶processor : 0vendor_id : GenuineIntelcpu family : 6model : 142model name : Intel(R) Core(TM) i5-7200U CPU @ 2.50GHz# å¸¸è§é€‰é¡¹-b, --number-noblank ä¸ºéç©ºç™½è¡Œæ˜¾ç¤ºè¡Œå·å¹¶è¾“å‡º-n, --number ä¸ºæ‰€æœ‰è¾“å‡ºè¡Œè¿›è¡Œç¼–å· ä½¿ç”¨ grep å‘½ä»¤æœç´¢æ–‡ä»¶å†…å®¹ â€‹grep - å°†åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶å†…å®¹æŒ‰è¡Œè¾“å‡ºã€‚å¦‚æœæ²¡æœ‰æä¾› FILE å‚æ•°ï¼Œé€’å½’æœç´¢ä¼šæ£€æŸ¥å·¥ä½œç›®å½•ï¼Œéé€’å½’æœç´¢ä¼šè¯»å–æ ‡å‡†è¾“å…¥ã€‚ 123456789101112131415161718grep [OPTIONS] PATTERN [FILE...] # æœç´¢æ¯ä¸ªæ–‡ä»¶ä¸­çš„æ¨¡å¼ï¼ˆé»˜è®¤ä½¿ç”¨åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼‰ï¼Œç”¨ - ä»£è¡¨è¯»å–æ ‡å‡†è¾“å…¥æ–‡ä»¶grep [OPTIONS] -e PATTERN ... [FILE...]grep [OPTIONS] -f FILE ... [FILE...]# å¸¸è§é€‰é¡¹ï¼š-E, --extended-regexp=PATTERN # å°† PATTERN è§£é‡Šä¸ºæ‹“å±•æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢åŒ¹é…-F, --fixed-strings=PATTERN # å°† PATTERN è§£é‡Šä¸ºå›ºå®šå­—ç¬¦ä¸²åˆ—è¡¨ï¼ˆè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œç”± \\ åˆ†éš”ï¼Œå…¶ä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½è¦åŒ¹é…-e, --regexp=PATTERN # å¯ä»¥æŒ‡å®šå¤šæ¬¡ï¼Œä¹Ÿå¯ä»¥å’Œ -f æ··ç”¨ï¼Œæœç´¢æ‰€æœ‰æŒ‡å®šçš„æ¨¡å¼ï¼Œæœç´¢æŒ‡å®šçš„æ¨¡å¼-f, --file=FILE # å¯ä»¥æŒ‡å®šå¤šæ¬¡ï¼Œä¹Ÿå¯ä»¥å’Œ -e æ··ç”¨ï¼Œæœç´¢æ‰€æœ‰æŒ‡å®šçš„æ¨¡å¼ï¼Œä»æ–‡ä»¶ä¸­è¯»å–æ¨¡å¼ï¼Œä¸€è¡Œä¸€ä¸ª-i, --ignore-case # å¿½ç•¥å¤§å°å†™-v, --invert-match # è¾“å‡ºä¸åŒ¹é…æ¨¡å¼çš„æ‰€æœ‰è¡Œï¼ˆåé€‰ï¼‰-w, --word-regexp # å®Œæ•´åŒ¹é…ï¼Œå³æœç´¢ç»“æœå¿…é¡»æ˜¯å®Œæ•´çš„å­—-x, --line-regexp # æœç´¢ä¸€æ•´è¡Œ-c # å¿½ç•¥è¾“å‡ºåŒ¹é…ç»“æœï¼Œåªè¾“å‡ºåŒ¹é…ç»“æœæ•°ï¼Œ-cv è¾“å‡ºä¸åŒ¹é…çš„ç»“æœ --color=WHEN # ç»“æœé¢œè‰²é«˜äº®ï¼Œé…è‰²æ–¹æ¡ˆå¯åœ¨ç¯å¢ƒå˜é‡ $GREP_COLORS ä¸­é…ç½®ï¼Œå€¼ï¼šnever,always,autoï¼Œé»˜è®¤ï¼šgrep=grep --color=auto-L, --files-without-matches # å¿½ç•¥è¾“å‡ºåŒ¹é…ç»“æœï¼Œåªè¾“å‡ºæ²¡æœ‰åŒ¹é…ç»“æœçš„æ–‡ä»¶-l, --files-with-matches # å¿½ç•¥è¾“å‡ºåŒ¹é…ç»“æœï¼Œåªè¾“å‡ºå«æœ‰åŒ¹é…ç»“æœçš„æ–‡ä»¶-m, --max-count # è¾¾åˆ°æŒ‡å®šæ•°é‡è¡Œæ•°çš„åŒ¹é…ç»“æœååœæ­¢æœç´¢-o, --only-matching # åªè¾“å‡ºåŒ¹é…ç»“æœä¸­åŒ¹é…çš„éƒ¨åˆ† ä¾‹å­ï¼š 123456789101112131415[root@localhost ~]\\# grep -e rm -e mv .bashrcalias rm=&#x27;rm -i&#x27;alias mv=&#x27;mv -i&#x27;[root@localhost ~]\\# grep -c -e rm -e mv .bashrc2[root@localhost ~]\\# grep -w alias .bashrcalias rm=&#x27;rm -i&#x27;alias cp=&#x27;cp -i&#x27;alias mv=&#x27;mv -i&#x27;[root@localhost ~]\\# grep -w alia .bashrc[root@localhost ~]\\# grep -i ALIas .bashrc# User specific aliases and functionsalias rm=&#x27;rm -i&#x27;alias cp=&#x27;cp -i&#x27;alias mv=&#x27;mv -i&#x27; ä½¿ç”¨ wc å‘½ä»¤ç»Ÿè®¡æ–‡ä»¶ä¸­è¡Œã€å­—å’Œå­—ç¬¦çš„æ•°é‡ â€‹å¯ä»¥ä¸€æ¬¡æŒ‡å®šå¤šä¸ªæ–‡ä»¶ï¼Œä¸”æœªæŒ‡å®šæ–‡ä»¶åå‚æ•°æˆ–æŒ‡å®šå‚æ•° â€-â€œ æ—¶é»˜è®¤è¯»å–æ ‡å‡†è¾“å…¥æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥å‘½ä»¤è¾“å‡ºçš„ç»“æœæŒ‰ç…§ è¡Œæ•°ã€ å­—æ•°ã€å­—ç¬¦æ•°ã€å­—èŠ‚æ•°ã€æœ€å¤§è¡Œçš„é•¿åº¦ çš„é¡ºåºæ’åºï¼Œä¹Ÿå¯ä»¥é€šè¿‡é€‰é¡¹æ¥æŒ‡å®šè¦è¾“å‡ºçš„å†…å®¹ï¼š 12345678[root@localhost ~]\\# wc --help | wc # ç»Ÿè®¡å‘½ä»¤ wc --help æ‰§è¡Œç»“æœçš„è¡Œæ•°ã€å­—æ•°ã€å­—ç¬¦æ•° 24 158 1201# å¸¸è§é€‰é¡¹-l, --lines æ‰“å°è¡Œæ•°-w, --words æ‰“å°å­—æ•°-m, --chars æ‰“å°å­—ç¬¦æ•°-c, --bytes æ‰“å°å­—èŠ‚æ•°-L, --max-line-length æ‰“å°æœ€é•¿è¡Œçš„é•¿åº¦ é‡å®šå‘å’Œç®¡é“ â€‹å› ä¸ºä¸Šä¸‹æ–‡ä¸­éƒ½æœ‰æ¶‰åŠï¼Œå…ˆæ¥äº†è§£é‡å®šå‘å’Œç®¡é“çš„ç›¸å…³çŸ¥è¯†ï¼š é‡å®šå‘å’Œç®¡é“ â€‹Linux æœ‰ä¸‰ä¸ªç‰¹æ®Šçš„æ–‡ä»¶åˆ†åˆ«æ˜¯æ ‡å‡†è¾“å…¥æµæ–‡ä»¶ï¼ˆstdin)ã€æ ‡å‡†è¾“å‡ºæµæ–‡ä»¶ï¼ˆstdoutï¼‰ã€æ ‡å‡†é”™è¯¯è¾“å‡ºæµæ–‡ä»¶ï¼ˆstderrï¼‰ï¼Œå®ƒä»¬åœ¨ä½ æ‰“å¼€çš„ç¨‹åºå¼€å§‹è¿è¡Œæ—¶è¢«é»˜è®¤æ‰“å¼€ã€‚ä»¥ç»ˆç«¯ç¨‹åºä¸ºä¾‹ï¼Œæ¯æ¬¡é”®å…¥çš„å†…å®¹è¢«é€åˆ°æ ‡å‡†è¾“å…¥æµä½œä¸ºç¨‹åºçš„è¾“å…¥ï¼Œç¨‹åºå¤„ç†åçš„æ–‡å­—è¾“å‡ºé€šè¿‡æ ‡å‡†è¾“å‡ºæµæˆä¸ºæˆ‘ä»¬çœ‹åˆ°çš„å‘½ä»¤æ‰§è¡Œç»“æœï¼Œé”™è¯¯ä¿¡æ¯åˆ™ä¼šè¢«é€åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºæµä¸­å¤„ç†ï¼Œå®ƒä»¬é€šå¸¸éƒ½ä¼šæ˜¾ç¤ºåœ¨å¯¹åº”çš„ç»ˆç«¯çª—å£ä¸­ã€‚åœ¨ç»ˆç«¯ä¸­åˆ†åˆ«å¯ä»¥ç”¨ 0ã€1ã€2 ä»£æŒ‡å®ƒä»¬ï¼Œä¾‹å­ï¼š 1234[root@localhost ~]\\# cat file.txt 1&gt;&gt; res.txt &amp;&amp; cat res.txt # æ–‡ä»¶æè¿°ç¬¦ 1 å¯ä»¥çœç•¥echo hellowordecho helloword# è§£é‡Šï¼šè¯»å– file.txt çš„å†…å®¹å¹¶ç›´æ¥è¿½åŠ è¾“å‡ºåˆ° res.txt å¹¶æ˜¾ç¤º res.txt æ–‡ä»¶é‡Œçš„å†…å®¹ â€‹æœ‰æ—¶æˆ‘ä»¬ä¼šæœ‰éœ€æ±‚å°†æŸä¸ªæ–‡ä»¶ä½œä¸ºå‘½ä»¤è¾“å…¥æˆ–è€…å‘½ä»¤æ‰§è¡Œç»“æœçš„è¾“å‡ºï¼Œè¿™å¯ä»¥ä½¿ç”¨é‡å®šå‘æ¥å®ç°ï¼Œè¾“å…¥è¾“å‡ºé‡å®šå‘å¯ç®€å•ç†è§£ä¸ºç”¨å…¶å®ƒè®¾å¤‡ä»£æ›¿é”®ç›˜å’Œæ˜¾ç¤ºå™¨ã€‚ â€‹æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å°†æŸæ¡å‘½ä»¤çš„æ‰§è¡Œç»“æœä½œä¸ºç¬¬äºŒæ¡å‘½ä»¤çš„å‚æ•°ï¼Œéœ€è¦é€šè¿‡ç®¡é“æ¥å®ç°è€Œä¸æ˜¯é‡å®šå‘ã€‚ ğŸ”´ å¦‚æœè¯¯ä½¿ç”¨é‡å®šå‘å‘ç¬¬äºŒæ¡å‘½ä»¤ä¼ å‚çš„è¯å¯èƒ½ä¼šç ´ç¯ç¬¬äºŒæ¡å‘½ä»¤çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å†…å®¹ï¼åˆ‡è®°ï¼šé‡å®šå‘æ˜¯å°†æœ¬è¯¥åœ¨æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆé”®ç›˜ã€å±å¹•ï¼‰çš„å†…å®¹æ”¹ç”¨å…¶ä»–æ–‡ä»¶æ¥è¿›è¡Œè¯»å†™çš„ã€‚ å‘½ä»¤ç¬¦å·æ ¼å¼ ä½œç”¨ å‘½ä»¤ &lt; æ–‡ä»¶ å°†æŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä½œä¸ºå‘½ä»¤çš„è¾“å…¥è®¾å¤‡ å‘½ä»¤ &lt;&lt; åˆ†ç•Œç¬¦ è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥è®¾å¤‡ï¼ˆé”®ç›˜ï¼‰ä¸­è¯»å…¥ï¼Œç›´åˆ°é‡åˆ°åˆ†ç•Œç¬¦æ‰åœæ­¢ï¼ˆè¯»å…¥çš„æ•°æ®ä¸åŒ…æ‹¬åˆ†ç•Œç¬¦ï¼‰ï¼Œè¿™é‡Œçš„åˆ†ç•Œç¬¦å…¶å®æ˜¯è‡ªå®šä¹‰çš„å­—ç¬¦ä¸² å‘½ä»¤ &lt; æ–‡ä»¶1 &gt; æ–‡ä»¶2 å°†æ–‡ä»¶1ä½œä¸ºå‘½ä»¤çš„è¾“å…¥è®¾å¤‡ï¼Œè¯¥å‘½ä»¤çš„æ‰§è¡Œç»“æœè¾“å‡ºåˆ°æ–‡ä»¶2ä¸­ å‘½ä»¤ &gt; æ–‡ä»¶ å°†å‘½ä»¤æ‰§è¡Œçš„æ ‡å‡†è¾“å‡ºç»“æœé‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼ˆæ¸…ç©ºå†™å…¥æ¨¡å¼ï¼‰ å‘½ä»¤ 2&gt; æ–‡ä»¶ å°†å‘½ä»¤æ‰§è¡Œçš„é”™è¯¯è¾“å‡ºç»“æœé‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼ˆæ¸…ç©ºå†™å…¥æ¨¡å¼ï¼‰ å‘½ä»¤ &gt;&gt; æ–‡ä»¶ å°†å‘½ä»¤æ‰§è¡Œçš„æ ‡å‡†è¾“å‡ºç»“æœé‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼ˆè¿½åŠ å†™å…¥æ¨¡å¼ï¼‰ å‘½ä»¤ 2&gt;&gt; æ–‡ä»¶ å°†å‘½ä»¤æ‰§è¡Œçš„é”™è¯¯è¾“å‡ºç»“æœé‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼ˆè¿½åŠ å†™å…¥æ¨¡å¼ï¼‰ å‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&amp;1 æˆ–è€… å‘½ä»¤ &amp;&gt;&gt; æ–‡ä»¶ å°†å‘½ä»¤æ‰§è¡Œçš„æ ‡å‡†è¾“å‡ºæˆ–è€…é”™è¯¯è¾“å‡ºå†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼ˆè¿½åŠ å†™å…¥æ¨¡å¼ï¼‰ å‘½ä»¤1 ` ` å‘½ä»¤2 é‡å®šå‘çš„ä¾‹å­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091## ä¾‹ä¸€ï¼š[root@localhost ~]\\# cat &lt; /etc/hosts # è·Ÿ cat /etc/hosts æ•ˆæœä¸€è‡´127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6# è™½ç„¶å®ƒä»¬çš„æ‰§è¡Œç»“æœç›¸åŒï¼Œä½†æœ¬ä¾‹æ˜¯ä»¥ /etc/hosts æ–‡ä»¶ä½œä¸ºè¾“å…¥è®¾å¤‡çš„ï¼Œæ³¨é‡Šæ˜¯ä»¥é”®ç›˜ä½œä¸ºè¾“å…¥è®¾å¤‡çš„ã€‚## ä¾‹äºŒï¼š[root@localhost ~]\\# cat &lt;&lt; EOF # ä»æ ‡å‡†è¾“å…¥è®¾å¤‡ä¸æ–­è¯»å–å†…å®¹çŸ¥é“è¯»å–åˆ° EOF æ‰åœæ­¢ï¼Œå¹¶è¾“å‡º&gt; abcd&gt; cde&gt; eof EOF&gt; EOFabcdcdeeof EOF## ä¾‹ä¸‰ï¼š# åšçš„äº‹ï¼šæ–°å»º hosts.bak æ–‡ä»¶ -&gt; ä» /etc/hosts è¯»å…¥å†…å®¹å¹¶è¾“å‡ºåˆ° hosts.bak -&gt; æ˜¾ç¤º hosts.bak çš„å†…å®¹[root@localhost ~]\\# touch hosts.bak &amp;&amp; cat &lt; /etc/hosts &gt; hosts.bak &amp;&amp; cat hosts.bak127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6# æ•´æ¡å‘½ä»¤ç”±ä¸‰æ¡è¯­å¥æ„æˆï¼Œä¸”åé¢çš„è¯­å¥æ‰§è¡Œä¸å¦ç”±å‰é¢è¯­å¥çš„æ‰§è¡ŒæˆåŠŸä¸å¦çš„ç»“æœå†³å®š## ä¾‹å››ï¼š# å‡†å¤‡å·¥ä½œï¼šæ–°å»ºä¸¤ä¸ªç©ºç™½æ–‡ä»¶ file1.txt å’Œ file2.txtï¼Œå…¶ä¸­å‘ file1.txt æ·»åŠ å†…å®¹ â€123321â€œ# æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹[root@localhost ~]\\# more file1.txt file2.txt::::::::::::::file1.txt # -&gt; æ–‡ä»¶1çš„æ–‡ä»¶å::::::::::::::123321 # -&gt; æ–‡ä»¶1çš„å†…å®¹::::::::::::::file2.txt # -&gt; æ–‡ä»¶2çš„æ–‡ä»¶å å› ä¸ºæ²¡æœ‰å†…å®¹æ‰€ä»¥æ˜¾ç¤ºå†…å®¹ä¸ºç©º::::::::::::::# è¯»å– file2.txt çš„å†…å®¹å¹¶æ¸…ç©ºå†™å…¥åˆ° file1.txt å¹¶æ˜¾ç¤º file1.txt çš„å†…å®¹[root@localhost ~]\\# cat file2.txt &gt; file1.txt &amp;&amp; cat file1.txt[root@localhost ~]\\# â–ˆ # file1.txt çš„å†…å®¹è¢«æ¸…ç©ºå†™å…¥äº†ç©ºå†…å®¹# å‘æ–‡ä»¶ file1.txt å’Œ file2.txt åˆ†åˆ«å†™å…¥ 123321[root@localhost ~]\\# echo &#x27;123321&#x27; &gt; file1.txt &amp;&amp; cat file1.txt &gt; file2.txt# æ­¤æ—¶å†æŸ¥çœ‹è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹[root@localhost ~]\\# more file1.txt file2.txt::::::::::::::file1.txt # -&gt; æ–‡ä»¶1çš„æ–‡ä»¶å::::::::::::::123321 # -&gt; æ–‡ä»¶1çš„å†…å®¹::::::::::::::file2.txt # -&gt; æ–‡ä»¶2çš„æ–‡ä»¶å::::::::::::::123321 # -&gt; æ–‡ä»¶2çš„å†…å®¹# å°† file1.txt çš„å†…å®¹è¿½åŠ åˆ° file2.txt ä¸­å¹¶æ˜¾ç¤º file2.txt çš„å†…å®¹[root@localhost ~]\\# cat file1.txt &gt;&gt; file2.txt &amp;&amp; cat file2.txt123321123321 # &lt;-- æ–°è¿½åŠ çš„å†…å®¹# å°†ä¸å­˜åœ¨çš„æ–‡ä»¶çš„å†…å®¹æ¸…ç©ºå†™å…¥åˆ° file1.txt å¹¶å°è¯•æŸ¥çœ‹ file1.txt çš„å†…å®¹[root@localhost ~]\\# cat file_not_exist.txt &gt; file1.txt; cat file1.txtcat: file_not_exist.txt: No such file or directory # å‰é¢è¯­å¥æ‰§è¡Œå‡ºé”™,æ ‡å‡†è¾“å‡ºä¸ºç©ºï¼Œé”™è¯¯è¾“å‡ºæ˜¾ç¤ºåœ¨äº†å±å¹•ä¸Šï¼Œfile1.txt çš„å†…å®¹è¢«æ¸…ç©ºå†™å…¥äº†ç©ºå†…å®¹# åŒä¸Šä¾‹ï¼Œä¸è¿‡è¦æ±‚å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ° file1.txtï¼Œæ ‡å‡†è¾“å‡ºæ­£å¸¸è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨[root@localhost ~]\\# cat file_not_exist.txt 2&gt; file1.txt; cat file1.txtcat: file_not_exist.txt: No such file or directory # æ³¨æ„è¿™æ˜¯ file1.txt çš„æ–‡ä»¶å†…å®¹[root@localhost ~]\\# cat file_not_exist.txt &amp;&gt;&gt; file1.txt # å†æ¬¡æ‰§è¡Œï¼Œå°†æ ‡å‡†è¾“å‡ºæˆ–é”™è¯¯è¾“å‡ºéƒ½è¿½åŠ åˆ° file1.txt [root@localhost ~]\\# cat file1.txtcat: file_not_exist.txt: No such file or directorycat: file_not_exist.txt: No such file or directory## ä¾‹äº”ï¼šï¼ˆè¦ä½¿ç”¨ä¸Šä¾‹ä¸­çš„ä¸¤ä¸ªæ–‡ä»¶ï¼‰# æŸ¥çœ‹ file1.txt å’Œä¸å­˜åœ¨çš„æ–‡ä»¶çš„å†…å®¹å¹¶å°†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘è¿½åŠ å†™å…¥åˆ° file2.txt[root@localhost ~]\\# cat file1.txt file_not_exist.txt &gt;&gt; file2.txt 2&gt;&amp;1[root@localhost ~]\\# cat file2.txt123321 # -&gt; file2.txt çš„åŸæœ‰å†…å®¹123321 # -&gt; file2.txt çš„åŸæœ‰å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file1.txt å®šå‘è¿‡æ¥çš„å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file1.txt å®šå‘è¿‡æ¥çš„å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; æ‰¾ä¸åˆ°æ–‡ä»¶çš„æ ‡å‡†é”™è¯¯è¾“å‡º# ä¸Šä¾‹ä¹Ÿå¯ä»¥å¦‚ä¸‹å®ç°ï¼š[root@localhost ~]\\# cat file1.txt file_not_exist.txt &amp;&gt;&gt; file2.txt[root@localhost ~]\\# cat file2.txt123321 # -&gt; file2.txt çš„åŸæœ‰å†…å®¹123321 # -&gt; file2.txt çš„åŸæœ‰å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file2.txt çš„åŸæœ‰å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file2.txt çš„åŸæœ‰å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file2.txt çš„åŸæœ‰å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file1.txt å®šå‘è¿‡æ¥çš„å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; file1.txt å®šå‘è¿‡æ¥çš„å†…å®¹cat: file_not_exist.txt: No such file or directory # -&gt; æ‰¾ä¸åˆ°æ–‡ä»¶çš„æ ‡å‡†é”™è¯¯è¾“å‡º## ä¾‹å…­[root@localhost .config]\\# ps aux | grep bash # æ‰§è¡Œ ps aux å‘½ä»¤å¹¶åœ¨å…¶è¾“å‡ºä¸­æŸ¥æ‰¾ bash å…³é”®å­—root 1045 0.0 0.0 26344 2468 ? S Apr11 0:13 /bin/bash /usr/sbin/ksmtunedroot 12458 0.0 0.1 27660 5612 pts/0 Ss 08:25 0:01 -bashroot 20373 0.0 0.0 12112 1092 pts/0 S+ 21:33 0:00 grep --color=auto bash æ—¢æƒ³åœ¨ç»ˆç«¯ä¸Šè¾“å‡ºå‘½ä»¤æ‰§è¡Œç»“æœåˆæƒ³å°†å…¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­ â€‹ tee å‘½ä»¤ï¼šä»æ ‡å‡†è¾“å…¥ä¸­è·å–å†…å®¹å¹¶å†™å…¥åˆ°æ ‡å‡†è¾“å‡ºå’Œæ–‡ä»¶ä¸­å»ã€‚ 1234tee [OPTIONS]... [FILE]... # å¤åˆ¶æ ‡å‡†è¾“å…¥è·å¾—çš„å†…å®¹åˆ°æ–‡ä»¶å’Œæ ‡å‡†è¾“å‡º# å¸¸è§é€‰é¡¹ï¼š-a, --append # å‘æŒ‡å®šçš„æ–‡ä»¶ä¸­è¿½åŠ å†™å…¥ï¼Œè€Œä¸æ˜¯è¦†ç›–-i, --ignore-interrupts # å¿½ç•¥ä¸­æ–­ä¿¡å· ä¾‹å­ï¼š 123456789101112131415[root@localhost ~]\\# ll | tee file.txt | grep Videos &amp;&amp; cat file.txtdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Videostotal 8-rw-r--r--. 1 root root 0 Apr 10 21:51 $-rw-------. 1 root root 1327 Apr 9 04:40 anaconda-ks.cfgdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Desktopdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Documentsdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Downloads-rw-r--r--. 1 root root 0 Apr 15 19:46 file.txt-rw-r--r--. 1 root root 1680 Apr 9 04:43 initial-setup-ks.cfgdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Musicdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Picturesdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Publicdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Templatesdrwxr-xr-x. 2 root root 6 Apr 9 04:49 Videos å…¶ä»–æŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„æ–¹æ³• ä½¿ç”¨ cat å‘½ä»¤æŸ¥çœ‹å¤§ç¯‡å¹…çš„æ–‡ä»¶å†…å®¹æ—¶ï¼Œæ˜¾ç¤ºè¿™äº›æ–‡ä»¶æ—¶æ‰€å ç”¨çš„ç©ºé—´å¯èƒ½è¦è¶…è¿‡ç»ˆç«¯æä¾›çš„å¤§å°ã€‚cat å‘½ä»¤ä¸ä¼šå¯¹æ–‡ä»¶çš„å†…å®¹è¿›è¡Œåˆ†é¡µã€‚ ä½¿ç”¨ more åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹ â€‹more å’Œ cat ç±»ä¼¼ï¼Œä½†æ˜¯ more æ”¯æŒåˆ†é¡µæŸ¥çœ‹ã€‚ 123456789[root@localhost ~]\\# more /proc/meminfoMemTotal: 3798432 kBMemFree: 1387992 kB...... # çœç•¥å†…å®¹KReclaimable: 213284 kB--More--(0%)â–ˆ # space æˆ– ctrl + f å¾€ä¸‹ç¿»é¡µï¼Œb æˆ– ctrl + b å¾€å›ç¿»é¡µï¼Œenter å‘ä¸‹æ»šåŠ¨ä¸€è¡Œï¼Œq é€€å‡º# å¸¸è§é€‰é¡¹ h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯-d, æ˜¾ç¤ºæ“ä½œæç¤ºä¿¡æ¯-f, ä»¥å®é™…æ–‡ä»¶è¡Œæ•°è®¡ç®—è¡Œæ•°ï¼ˆéè‡ªåŠ¨æ¢è¡Œåçš„è¡Œæ•°ï¼‰ ä½¿ç”¨ less åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹ â€‹less ç®—æ˜¯ more çš„åŠ å¼ºç‰ˆï¼Œless ä¸ä¼šè¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œå› æ­¤å…¶åŠ è½½æ—¶é—´ä¼šå¾ˆå¿«ã€‚ 1234567891011121314151617# ä½¿ç”¨ less è¯»å–æ–‡ä»¶[root@localhost ~]\\# less /proc/cpuinfoprocessor : 0vendor_id : GenuineIntel...... # çœç•¥å†…å®¹a cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc cp....../proc/cpuinfocâ–ˆ# ä½¿ç”¨ less è¯»å–å‘½ä»¤è¾“å‡ºçš„å†…å®¹ï¼ˆéœ€ç»“åˆç®¡é“ï¼‰[root@localhost ~]\\# ps aux | lessUSER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND...... # çœç•¥å†…å®¹root 13 0.0 0.0 0 0 ? S 11:00 0:00 [watchdog/0]:â–ˆ# å¸¸è§é€‰é¡¹-N, æ˜¾ç¤ºè¡Œå·-X, é€€å‡º less ååœ¨å±å¹•ä¸Šä¿ç•™å†…å®¹+F, è¡¨ç°ä¸ tail -f å‘½ä»¤å‡ ä¹ç›¸åŒ å¯ä½¿ç”¨çš„é”®ç›˜æ“ä½œï¼š æŒ‰é”® ä½œç”¨ å¤‡æ³¨ space or f å¾€ä¸‹ç¿» N è¡Œ N é»˜è®¤ä¸ºä¸€ä¸ªçª—å£çš„è¡Œæ•°å¤§å°ï¼Œå¯ä»¥åœ¨å†’å·åé¢è¾“å…¥æ•°å­—æŒ‡å®š N çš„å€¼å†æŒ‰å¿«æ·é”® b æˆ– ctrl + b æˆ– esc + v å¾€ä¸Šç¿» N è¡Œ N é»˜è®¤ä¸ºä¸€ä¸ªçª—å£çš„è¡Œæ•°å¤§å°ï¼Œå¯ä»¥åœ¨å†’å·åé¢è¾“å…¥æ•°å­—æŒ‡å®š N çš„å€¼å†æŒ‰å¿«æ·é”® d æˆ– ctrl + d å¾€ä¸‹ç¿» N è¡Œ N é»˜è®¤ä¸ºåŠä¸ªå±å¹•çš„è¡Œæ•°å¤§å°ï¼Œå¯ä»¥åœ¨å†’å·åé¢è¾“å…¥æ•°å­—æŒ‡å®š N çš„å€¼å†æŒ‰å¿«æ·é”® u æˆ– ctrl + u å¾€ä¸Šç¿» N è¡Œ N é»˜è®¤ä¸ºåŠä¸ªå±å¹•çš„è¡Œæ•°å¤§å°ï¼Œå¯ä»¥åœ¨å†’å·åé¢è¾“å…¥æ•°å­—æŒ‡å®š N çš„å€¼å†æŒ‰å¿«æ·é”® â†“ æˆ– e æˆ– j æˆ– enter å¾€ä¸‹ç¿»ä¸€è¡Œ â†‘ æˆ– y æˆ– k å¾€ä¸Šç¿»ä¸€è¡Œ g æˆ– p åˆ†åˆ«å¯¹åº”è½¬åˆ°ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œ g å‰é¢æŒ‡å®š N è½¬åˆ°ç¬¬ N è¡Œï¼Œp å‰é¢æŒ‡å®š N è½¬åˆ°ç¬¬ N% çš„å†…å®¹ / æˆ– ? è·Ÿæ¨¡å¼ åˆ†åˆ«å¯¹åº”å‘å‰æˆ–å‘åæœç´¢æ¨¡å¼ n é‡å¤ä¸Šä¸€æ¬¡æœç´¢ï¼ŒN åå‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢ h æˆ– q h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ q é€€å‡º lessã€‚ head æˆ– tail æ˜¾ç¤ºéƒ¨åˆ†æ–‡ä»¶å†…å®¹ â€‹head å’Œ tail åˆ†åˆ«æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´å’Œç»“å°¾éƒ¨åˆ†ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„ 10 è¡Œï¼Œä½†å®ƒä»¬éƒ½æœ‰ä¸€ä¸ª -n é€‰é¡¹ï¼Œå…è®¸æŒ‡å®šä¸åŒçš„è¡Œæ•°ã€‚æœªæŒ‡å®šæ–‡ä»¶åå‚æ•°æˆ–æŒ‡å®šå‚æ•° â€-â€œ æ—¶é»˜è®¤è¯»å–æ ‡å‡†è¾“å…¥æ–‡ä»¶ã€‚ 123456789[root@localhost ~]\\# head -n 3 /etc/passwdroot:x:0:0:root:/root:/bin/bashbin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologin[root@localhost ~]\\# tail -n 2 -fs 2 /var/log/messagesApr 11 22:21:47 localhost systemd[1]: Started Network Manager Script Dispatcher Service.Apr 11 22:21:57 localhost systemd[1]: NetworkManager-dispatcher.service: Succeeded.â–ˆ # -f ç›‘è§†æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ä¹Ÿè·Ÿç€è¾“å‡ºï¼ˆè¿½åŠ ï¼‰ï¼Œ -s æŒ‡å®šæ‰«ææ–‡ä»¶å˜åŒ–é—´éš”çš„ç§’æ•°ï¼ˆä¸ -f æ­é…ï¼Œé»˜è®¤ 1sï¼‰# æŒ‰ ctrl + c é€€å‡ºç›‘æ§æ¨¡å¼","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Shell ä½¿ç”¨ç›¸å…³ä¸ Linux æ–‡ä»¶ç³»ç»ŸåŸºç¡€","slug":"Linux | Shell ä½¿ç”¨ç›¸å…³ä¸ Linux æ–‡ä»¶ç³»ç»ŸåŸºç¡€","date":"2022-08-12T10:27:44.899Z","updated":"2022-08-12T10:55:30.838Z","comments":true,"path":"2022-08-12-Linux | Shell ä½¿ç”¨ç›¸å…³ä¸ Linux æ–‡ä»¶ç³»ç»ŸåŸºç¡€.html","link":"","permalink":"https://skinyi.github.io/2022-08-12-Linux%20|%20Shell%20%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%85%B3%E4%B8%8E%20Linux%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ Shell ä½¿ç”¨ç›¸å…³ åœ¨å›¾å½¢ç•Œé¢ä¸­æ‰“å¼€ç»ˆç«¯ â€‹æœ€å¸¸ç”¨çš„æ˜¯æ‰¾ç»ˆç«¯çš„å›¾æ ‡å•å‡»æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”® &quot;Alt + F2&quot; æ‰“å¼€ â€Enter a commandâ€œ çª—å£ï¼ˆç±»ä¼¼äº windows ä¸Šçš„ â€è¿è¡Œâ€œ çª—å£ï¼‰ï¼Œè¾“å…¥ â€gnome-terminalâ€œ æŒ‰å›è½¦å³å¯æ‰“å¼€å›¾å½¢ç•Œé¢è‡ªå¸¦çš„ç»ˆç«¯ã€‚ ç»ˆç«¯ä¸Šå¸¸ç”¨çš„å¿«æ·é”®æ“ä½œ a. tabï¼šå¯ä»¥å®ç°å‘½ä»¤çš„è‡ªåŠ¨è¡¥å…¨ï¼ˆå½“æ‰€è¾“å…¥çš„å†…å®¹å¯ä»¥æ¨æ–­å‡ºå”¯ä¸€ç»“æœæ—¶ï¼‰ï¼Œè¿æŒ‰ä¸¤æ¬¡ä¼šç»™å‡ºæ‰€æœ‰å¯èƒ½åŒ¹é…çš„ç»“æœã€‚ï¼ˆæ­¤åŠŸèƒ½ç”±è½¯ä»¶åŒ… bash-completion æä¾›ï¼Œæœ€å°åŒ–å®‰è£…æ“ä½œç³»ç»Ÿæ—¶å¯èƒ½ä¸ä¼šè‡ªåŠ¨å®‰è£…ï¼‰ï¼› b. è°ƒæ•´å…‰æ ‡ä½ç½®æˆ–å†…å®¹è°ƒæ•´ï¼š å¿«æ·é”® æ•ˆæœ Ctrl + A è·³åˆ°å‘½ä»¤è¡Œè¯­å¥çš„å¼€å¤´ Ctrl + E è·³åˆ°å‘½ä»¤è¡Œè¯­å¥çš„æœ«å°¾ Ctrl + U å°†å…‰æ ‡å¤„åˆ°å‘½ä»¤è¡Œè¯­å¥å¼€å¤´çš„å†…å®¹æ¸…é™¤ Ctrl + K å°†å…‰æ ‡å¤„åˆ°å‘½ä»¤è¡Œè¯­å¥æœ«å°¾çš„å†…å®¹æ¸…é™¤ Ctrl + â† è·³åˆ°å‘½ä»¤è¡Œè¯­å¥ä¸­å‰ä¸€å­—çš„å¼€å¤´ Ctrl + â†’ è·³åˆ°å‘½ä»¤è¡Œè¯­å¥ä¸­ä¸‹ä¸€å­—çš„æœ«å°¾ Ctrl + R åœ¨å†å²è®°å½•åˆ—è¡¨ä¸­æœç´¢æŸä¸€æ¨¡å¼çš„å‘½ä»¤ Esc + . æ’å…¥æ‰§è¡Œçš„ä¸Šæ¡å‘½ä»¤çš„å‚æ•° Shell å†å²å‘½ä»¤æ“ä½œ â€‹ä½¿ç”¨ history å‘½ä»¤å¯ä»¥æŸ¥çœ‹å†å²æ‰§è¡Œè¿‡çš„å‘½ä»¤ã€‚ 12345678910111213141516[root@localhost ~]\\# type historyhistory is a shell builtin # history å‘½ä»¤æ˜¯ bash å†…å»ºå‘½ä»¤[root@localhost ~]\\# history # ä½¿ç”¨ history å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¹‹å‰æ‰§è¡Œè¿‡çš„å‘½ä»¤ 1 ip addr show 2 clear 3 vim /etc/sysconfig/network-scripts/ifcfg-ens160 4 ls /etc/sysconfig/network-scripts/ 5 ls 6 ls -a /etc/sysconfig/network-scripts/ 7 ll -a /etc/sysconfig/network-scripts/ 8 clear 9 vim /etc/sysconfig/network-scripts/ifcfg-ens160 10 reboot 11 ip addr show 12 type history 13 history â€‹æ­¤æ—¶å¦‚æœè¿˜æƒ³æ‰§è¡Œä¹‹å‰æ‰§è¡Œè¿‡çš„ç¬¬ 7 è¡Œå‘½ä»¤ï¼Œåˆ™åªéœ€æ‰§è¡Œï¼š 123456[root@localhost ~]\\# !7 # ä½¿ç”¨ &quot;!&quot; åè·Ÿå†å²åºå·å³å¯æ‰§è¡Œ history ç»“æœé‡Œçš„ç¬¬è¯¥åºå·æ¡å‘½ä»¤ll -a /etc/sysconfig/network-scripts/ # æ‰§è¡Œçš„å†å²å‘½ä»¤çš„å†…å®¹ä¼šé¦–å…ˆåˆ—å‡ºtotal 8 # ç„¶åæ˜¯æ‰§è¡Œç»“æœdrwxr-xr-x. 2 root root 26 Apr 9 06:01 .drwxr-xr-x. 6 root root 4096 Apr 9 04:39 ..-rw-r--r--. 1 root root 282 Apr 9 06:01 ifcfg-ens160 â€‹ç‰¹æ®Šçš„ï¼Œå¦‚æœæƒ³å†æ¬¡æ‰§è¡Œä¸Šä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 123456789101112[root@localhost ~]\\# type file # æ‰§è¡Œ â€!!â€œ å‰çš„ä¸Šä¸€æ¡å‘½ä»¤file is /usr/bin/file[root@localhost ~]\\# !! # ä½¿ç”¨ â€!!â€œ å†æ¬¡æ‰§è¡Œtype file # åŒæ ·ä¼šå…ˆæ˜¾ç¤ºæ‰§è¡Œå†…å®¹file is /usr/bin/file # æ‰§è¡Œç»“æœ# sudo !! çš„ä¾‹å­[student@localhost root]\\$ dnf update # è¯¥æ™®é€šç”¨æˆ·æ²¡æœ‰æƒé™ï¼Œæ— æ³•å‡çº§æœ¬åœ°è½¯ä»¶åŒ…2021-04-10 22:13:38,682 [ERROR] dnf:5314:MainThread @logutil.py:194 - [Errno 13] Permission denied: &#x27;/var/log/rhsm/rhsm.log&#x27; - Further logging output will be written to stderrNot root, Subscription Management repositories not updated[student@localhost root]\\$ sudo !! # ä½¿ç”¨ sudo æå‡å½“å‰ç”¨æˆ·çš„æƒé™å†æ¬¡æ‰§è¡Œä¸Šæ¬¡æœªæˆåŠŸçš„æ“ä½œï¼ˆå‰ææ˜¯å½“å‰ç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œå³åœ¨ sudoers é‡Œï¼‰sudo dnf updateUpdating Subscription Management repositories. Shell é…ç½®æ–‡ä»¶ æ–‡ä»¶è·¯å¾„ æè¿° ~/.bashrc å’Œ /etc/bashrc åˆ†åˆ«å¯¹åº”å½“å‰ç”¨æˆ·å’Œå…¨å±€ç”¨æˆ·çš„ bash çš„ä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®ï¼Œå¦‚å‘½ä»¤åˆ«åã€å‡½æ•°ç­‰ï¼Œé€šå¸¸ä¸å»ºè®®ç›´æ¥ä¿®æ”¹ /etc/bashrc è€Œåº”è¯¥åœ¨ /etc/profile.d/ ç›®å½•ä¸­æ·»åŠ è‡ªå·±çš„è„šæœ¬ ~/.bash_profile å’Œ /etc/profile åˆ†åˆ«å¯¹åº”å½“å‰ç”¨æˆ·å’Œå…¨å±€ç”¨æˆ·çš„ bash ç¯å¢ƒå˜é‡ä»¥åŠå¯åŠ¨ç¨‹åºç­‰ï¼Œé€šå¸¸ä¸å»ºè®®ç›´æ¥ä¿®æ”¹ /etc/bashrc è€Œåº”è¯¥åœ¨ /etc/profile.d/ ç›®å½•ä¸­æ·»åŠ è‡ªå·±çš„è„šæœ¬ ~/.bash_history å­˜å‚¨å½“å‰ç”¨æˆ·ç»ˆç«¯ä¸­æ‰§è¡Œè¿‡çš„å†å²å‘½ä»¤ï¼Œç¯å¢ƒå˜é‡ $HISSIZE å®šä¹‰å…¶å­˜å‚¨å¤§å° ~/.bash_logout å­˜å‚¨å½“å‰ç”¨æˆ·ç™»å‡ºç»ˆç«¯æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ ğŸŸ¢ é…ç½®æ–‡ä»¶è¯»å–æƒ…æ™¯åŠè¯»å–é¡ºåº å›¾å½¢ç•Œé¢ç™»é™†æ—¶ï¼š/etc/profile -&gt; ~/.profile ç™»é™†åï¼Œæ‰“å¼€ç»ˆç«¯åï¼š-&gt; /etc/bashrc -&gt; ~/.bashrc æ–‡æœ¬æ¨¡å¼ç™»é™†æ—¶ï¼š/etc/bashrc -&gt; /etc/profile -&gt; ~/.bash_profile ä»å…¶å®ƒç”¨æˆ· su åˆ°è¯¥ç”¨æˆ·ï¼Œåˆ™åˆ†ä¸¤ç§æƒ…å†µï¼š a. å¸¦ -l, -, --login å‚æ•°ï¼š/etc/bash -&gt; /etc/profile -&gt; ~/.bash_profile b. æ²¡æœ‰å¸¦ -l å‚æ•°ï¼š/etc/bashrc -&gt; /bashrc æ³¨é”€æ—¶ï¼Œæˆ–é€€å‡º su -l ç™»é™†çš„ç”¨æˆ·æ—¶ä¼šè¯»å–ï¼š~/.bash_logout æ‰§è¡Œè‡ªå®šä¹‰çš„ shell æ–‡ä»¶æ—¶ï¼Œè‹¥ä½¿ç”¨ bash -l a.sh çš„æ–¹å¼ï¼Œåˆ™ bash ä¼šè¯»å–ï¼š/etc/profile å’Œ ~/.bash_profileï¼Œè‹¥ä½¿ç”¨å…¶ä»–æ–¹å¼ï¼Œå¦‚ï¼šbash a.shï¼Œ./a.shï¼Œsh a.sh åˆ™ä¸ä¼šè¯»å–ä¸Šé¢ä»»ä½•æ–‡ä»¶ã€‚ Linux æ–‡ä»¶ç³»ç»ŸåŸºç¡€ â€‹å¤§å¤šæ•° linux å‘è¡Œç‰ˆé‡‡ç”¨ FHSï¼ˆFilesystem Hierarchy Standard,æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†ï¼‰æ¥ç»„ç»‡æ–‡ä»¶ç³»ç»Ÿç»“æ„ï¼Œè¿™æ˜¯ä¸€ç§ä»¥ä¸€ä¸ªæ ¹èŠ‚ç‚¹å¼€å§‹çš„å€’ç½®çš„æ ‘å½¢ç»“æ„ï¼ŒFHSå®šä¹‰äº†ç³»ç»Ÿä¸­æ¯ä¸ªåŒºåŸŸçš„ç”¨é€”ã€æ‰€éœ€è¦çš„æœ€å°æ„æˆçš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒæ—¶è¿˜ç»™å‡ºäº†ä¾‹å¤–å¤„ç†ä¸çŸ›ç›¾å¤„ç†ã€‚ â€‹FHS å®šä¹‰äº†ä¸¤å±‚è§„èŒƒï¼Œä¸€æ˜¯ linux æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ï¼ˆå³ &quot;/&quot; ï¼‰ä¸‹çš„å„ä¸ªç›®å½•è¯¥æ”¾ä»€ä¹ˆæ–‡ä»¶æ•°æ®ï¼ŒäºŒæ˜¯é’ˆå¯¹/usråŠ/varè¿™ä¸¤ä¸ªç›®å½•çš„å­ç›®å½•æ¥è¿›è¡Œäº†æ›´æ·±ä¸€å±‚çš„å®šä¹‰ã€‚ â€‹Linux çš„æ–‡ä»¶ç»“æ„æ ‘æ ¹æ®æ¯ä¸ªäººçš„å–œå¥½ä¸åŒå¯èƒ½ä¼šè¢«ç»„ç»‡æˆå„å¼å„æ ·çš„å½¢å¼ï¼Œè¿™æ— ç–‘ä¼šå¯¼è‡´ä¸€ç§æ··ä¹±çš„å±€åŠ¿ï¼ŒFHS ä¸€å®šç¨‹åº¦ä¸Šæä¾›äº†ä¸€ç§å…±è¯†ï¼Œæ˜¯å³ä½¿æ˜¯ä¸åŒçš„ linux å‘è¡Œç‰ˆä¸ä¼šå› ä¸ºæ–‡ä»¶ç»“æ„çš„æ··ä¹±äº§ç”Ÿå¾ˆå¤§çš„å­¦ä¹ æˆæœ¬ã€‚ â€‹åœ¨Linuxæ–‡ä»¶ç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ç›®å½•ï¼Œä¸€ä¸ªç”¨æˆ·æ‰€åœ¨çš„å·¥ä½œç›®å½•ï¼Œä¹Ÿå«å½“å‰ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‚¹æ¥è¡¨ç¤ºï¼›å¦ä¸€ä¸ªæ˜¯å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼Œä¹Ÿå«çˆ¶ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç‚¹æ¥è¡¨ç¤ºï¼š . ï¼šä»£è¡¨å½“å‰çš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ ./ æ¥è¡¨ç¤ºï¼› .. ï¼šä»£è¡¨ä¸Šä¸€å±‚ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ ../ æ¥ä»£è¡¨ã€‚ â€‹å¦‚æœä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶åä»¥ä¸€ä¸ªç‚¹ &quot;.&quot; å¼€å§‹ï¼Œè¡¨ç¤ºè¿™ä¸ªç›®å½•æˆ–æ–‡ä»¶æ˜¯ä¸€ä¸ªéšè—ç›®å½•æˆ–æ–‡ä»¶(å¦‚ï¼š.bashrc)ï¼Œä»¥é»˜è®¤æ–¹å¼æŸ¥æ‰¾æ—¶ï¼Œä¸æ˜¾ç¤ºè¯¥ç›®å½•æˆ–æ–‡ä»¶ã€‚ linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€äº›é‡è¦ç›®å½•åŠå…¶ä½œç”¨ æ ¹ç›®å½• ä¸€çº§ç›®å½• äºŒçº§ç›®å½• æè¿° / boot ç³»ç»Ÿå¯åŠ¨ç›®å½•ï¼ŒåŒ…å«å¯å¼•å¯¼çš„ linux å†…æ ¸å’Œå¼•å¯¼è£…è½½é…ç½®æ–‡ä»¶ï¼Œåˆ é™¤åè™šæ‹Ÿæœºæ— æ³•å¯åŠ¨ root root ç”¨æˆ·çš„å®¶ç›®å½• home student /homeæ˜¯æ‰€æœ‰æ™®é€šç”¨æˆ·å®¶ç›®å½•å­˜æ”¾çš„è·¯å¾„ï¼Œæ™®é€šç”¨æˆ·ä¸€èˆ¬å†æ¬¡è·¯å¾„ä¸‹æ‹¥æœ‰å’Œè‡ªå·±ç”¨æˆ·åä¸€æ ·çš„å®¶ç›®å½•ï¼Œç”¨ä»¥å­˜æ”¾ä¿å­˜çš„æ–‡ä»¶ã€ä¸ªäººé…ç½®æ–‡ä»¶ç­‰ï¼Œæ­¤ä¾‹ä¸­æœ‰ä¸€ä¸ª student ç”¨æˆ·çš„å®¶ç›®å½•ï¼š/home/student usr bin è§/binï¼Œ/binä¸‹çš„å‘½ä»¤åœ¨ä»»ä½•è¿è¡Œçº§åˆ«éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ­¤è·¯å¾„ä¸‹çš„å‘½ä»¤åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹ä¸èƒ½æ‰§è¡Œ sbin è§/sbin local æ‰‹å·¥å®‰è£…çš„è½¯ä»¶ä¿å­˜ä½ç½®ï¼Œä¸€èˆ¬å»ºè®®æºç åŒ…è½¯ä»¶å®‰è£…åœ¨è¿™ä¸ªä½ç½® tmp å­˜æ”¾ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå…¶çœŸå®ç›®å½•åœ¨/var/tmpï¼Œæ­¤ç›®å½•å­˜æ”¾éœ€è¦é•¿æœŸä¿å­˜çš„ä¸´æ—¶æ–‡ä»¶ï¼Œæœªè®¿é—®ã€ä¿®æ”¹ã€æ›´æ”¹è¶… 30 å¤©çš„æ–‡ä»¶ä¼šè¢«åˆ é™¤ local æ‰‹å·¥å®‰è£…çš„è½¯ä»¶ä¿å­˜ä½ç½®ï¼Œä¸€èˆ¬å»ºè®®æºç åŒ…è½¯ä»¶å®‰è£…åœ¨è¿™ä¸ªä½ç½® share åº”ç”¨ç¨‹åºçš„èµ„æºæ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œå¦‚å¸®åŠ©æ–‡æ¡£ã€è¯´æ˜æ–‡æ¡£å’Œå­—ä½“ç›®å½• include C/C++ ç­‰ç¼–ç¨‹è¯­è¨€å¤´æ–‡ä»¶çš„æ”¾ç½®ç›®å½• bin äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•çš„é“¾æ¥ï¼ŒçœŸå®ç›®å½•ä¸º/usr/binï¼Œæ™®é€šç”¨æˆ·å’Œ root ç”¨æˆ·å‡å¯æ“ä½œï¼ŒåŒ…å«å¸¸ç”¨çš„ linux ç”¨æˆ·å‘½ä»¤ sbin ä¿å­˜ä¸ç³»ç»Ÿç¯å¢ƒè®¾ç½®ç›¸å…³çš„å‘½ä»¤ï¼Œåªæœ‰ root å¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤è¿›è¡Œç³»ç»Ÿç¯å¢ƒè®¾ç½®ï¼ŒçœŸå®ç›®å½•åœ¨/usr/sbin tmp å­˜æ”¾ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå­˜æ”¾çš„æ–‡ä»¶éœ€è¦çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œæœ‰äº›ç³»ç»Ÿä¼šååˆ†é¢‘ç¹çš„æ¸…ç†è¿™ä¸ªç›®å½•ï¼ˆRHEL è‡ªåŠ¨åˆ é™¤æœªè®¿é—®ã€ä¿®æ”¹ã€æ›´æ”¹è¶… 10 å¤©çš„ç›®å½•ï¼‰ï¼Œä¸ºäº†è¿½æ±‚è¯»å–å’Œå†™å…¥è¿…é€Ÿæœ‰äº›ç³»ç»Ÿç”šè‡³ä¼šå°†è¿™ä¸ªç›®å½•æŒ‚è½½åˆ° RAM ä¸Šã€‚åœ¨ç³»ç»Ÿå¯åŠ¨é˜¶æ®µï¼Œè®¸å¤šå¯åŠ¨è„šæœ¬å°†è¿™ä¸ªç›®å½•ä½œä¸ºä¸´æ—¶æ–‡ä»¶å­˜æ”¾ç›®å½• lib ç³»ç»Ÿçš„åŠ¨æ€åº“ç›®å½•ï¼Œå­˜æ”¾/binå’Œ/sbinç›®å½•ä¸­äºŒè¿›åˆ¶æ–‡ä»¶ä¾èµ–çš„è¿è¡Œåº“æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½ä¼šç”¨åˆ°è¯¥ç›®å½•ä¸‹çš„å…±äº«åº“ lib64 å­˜æ”¾é’ˆå¯¹64ä½ç³»ç»Ÿçš„ç‰¹å®šçš„ä¸€äº›é¢å¤–åŠ¨æ€åº“çš„ç›®å½• opt å¯é€‰ç›®å½•ã€‚ä¸€èˆ¬ç”¨ä»¥å­˜æ”¾ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œæ•°æ®æ–‡ä»¶ etc é…ç½®æ–‡ä»¶ä¿å­˜ä½ç½®ã€‚ç³»ç»Ÿå†…æ‰€æœ‰é‡‡ç”¨é»˜è®¤å®‰è£…æ–¹å¼çš„æœåŠ¡é…ç½®æ–‡ä»¶å…¨éƒ¨ä¿å­˜åœ¨æ­¤ç›®å½•ä¸­ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ã€æœåŠ¡çš„å¯åŠ¨è„šæœ¬ã€å¸¸ç”¨æœåŠ¡çš„é…ç½®æ–‡ä»¶ç­‰ srv æœåŠ¡ç›®å½•ï¼Œservice çš„ç¼©å†™ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨æœ¬æœºæˆ–æœ¬æœåŠ¡å™¨æä¾›çš„æœåŠ¡æˆ–æ•°æ® sys äº2.6å†…æ ¸å¼•å…¥ï¼Œå­˜æ”¾sysfsåœ¨å†…å­˜ä¸­ï¼Œsysfsæ–‡ä»¶ç³»ç»Ÿé›†æˆäº†ä¸‹é¢3ç§ä¿¡æ¯ï¼šé’ˆå¯¹è¿›ç¨‹ä¿¡æ¯çš„procæ–‡ä»¶ç³»ç»Ÿã€é’ˆå¯¹è®¾å¤‡çš„devfsæ–‡ä»¶ç³»ç»Ÿä»¥åŠé’ˆå¯¹ä¼ªç»ˆç«¯çš„devptsæ–‡ä»¶ç³»ç»Ÿã€‚è¯¥æ–‡ä»¶ç³»ç»Ÿæ˜¯å†…æ ¸è®¾å¤‡æ ‘çš„ä¸€ä¸ªç›´è§‚åæ˜ ã€‚å½“ä¸€ä¸ªå†…æ ¸å¯¹è±¡è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•ä¹Ÿåœ¨å†…æ ¸å¯¹è±¡å­ç³»ç»Ÿä¸­ var tmp /varä¸ºå¯å˜ç›®å½•ï¼Œç”¨ä»¥å­˜æ”¾ç»å¸¸å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ï¼›/var/tmpè§/usr/tmp lib ç¨‹åºè¿è¡Œä¸­éœ€è¦è°ƒç”¨æˆ–æ”¹å˜çš„æ•°æ®ä¿å­˜ä½ç½®ã€‚å¦‚ MySQL çš„æ•°æ®åº“ä¿å­˜åœ¨ /var/lib/mysql ç›®å½•ä¸­ log ç™»é™†æ–‡ä»¶æ”¾ç½®çš„ç›®å½•ï¼Œå…¶ä¸­æ‰€åŒ…å«æ¯”è¾ƒé‡è¦çš„æ–‡ä»¶å¦‚ /var/log/messages, /var/log/wtmp ç­‰ run ä¸€äº›æœåŠ¡å’Œç¨‹åºè¿è¡Œåï¼Œå®ƒä»¬çš„ PIDï¼ˆè¿›ç¨‹ IDï¼‰ä¿å­˜ä½ç½® spool é‡Œé¢ä¸»è¦éƒ½æ˜¯ä¸€äº›ä¸´æ—¶å­˜æ”¾ï¼Œéšæ—¶ä¼šè¢«ç”¨æˆ·æ‰€è°ƒç”¨çš„æ•°æ®ï¼Œä¾‹å¦‚ /var/spool/mail å­˜æ”¾æ–°æ”¶åˆ°çš„é‚®ä»¶ï¼Œ/var/spool/cron/å­˜æ”¾ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ niså’Œyp NIS æœåŠ¡æœºåˆ¶æ‰€ä½¿ç”¨çš„ç›®å½•ï¼Œ/var/nis ä¸»è¦è®°å½•æ‰€æœ‰ç½‘ç»œä¸­æ¯ä¸€ä¸ª client çš„è¿æ¥ä¿¡æ¯ï¼›/var/yp æ˜¯ linux çš„ nis æœåŠ¡çš„æ—¥å¿—æ–‡ä»¶å­˜æ”¾çš„ç›®å½• run ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ï¼ˆPIDå’Œé”æ–‡ä»¶ï¼‰ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæœ‰ /var/run ç›®å½•ï¼Œåº”è¯¥è®©å®ƒæŒ‡å‘ run proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæ•°æ®ç›´æ¥ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå°†å†…æ ¸ã€è¿›ç¨‹ã€å¤–éƒ¨è®¾å¤‡å’Œç½‘ç»œçŠ¶æ€å½’æ¡£ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼ˆç³»ç»Ÿä¿¡æ¯éƒ½å­˜æ”¾åœ¨è¿™ç›®å½•ä¸‹ï¼‰ï¼Œä¾‹å¦‚ï¼šuptimeã€networkã€‚åœ¨ linux ä¸­ï¼Œå¯¹åº” procfs æ ¼å¼æŒ‚è½½ï¼Œç›®å½•ä¸‹æ–‡ä»¶åªèƒ½çœ‹ä¸èƒ½æ”¹ cpuinfo ä¿å­˜ CPU ä¿¡æ¯ devices ä¿å­˜è®¾å¤‡é©±åŠ¨åˆ—è¡¨ net ä¿å­˜ç½‘ç»œåè®®ä¿¡æ¯ dev è®¾å¤‡æ–‡ä»¶ï¼Œä»»ä½•è®¾å¤‡ä¸æ¥å£è®¾å¤‡éƒ½æ˜¯ä»¥æ–‡ä»¶å½¢å¼å­˜åœ¨äºè¿™ä¸ªç›®å½•çš„ï¼ŒåŒ…æ‹¬ç»ˆç«¯è®¾å¤‡ ttyã€è½¯ç›˜ fdã€ç¡¬ç›˜ hdã€RAM ram å’Œ CD-ROM cdç­‰ï¼Œç”¨æˆ·é€šè¿‡è®¾å¤‡æ–‡ä»¶ç›´æ¥è®¿é—®è¿™äº›è®¾å¤‡ mnt ä¸´æ—¶æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚ç§»åŠ¨ç¡¬ç›˜, Uç›˜å’Œå…¶ä»–æ“ä½œç³»ç»Ÿçš„åˆ†åŒº media åª’ä½“ç›®å½•ï¼Œä¹Ÿæ˜¯æŒ‚è½½ç‚¹ç›®å½•ï¼Œæä¾›æŒ‚è½½å’Œè‡ªåŠ¨æŒ‚è½½è®¾å¤‡çš„æ ‡å‡†ä½ç½®ï¼Œå¦‚è¿œç¨‹è®¿é—®æ–‡ä»¶ç³»ç»Ÿå’Œå¯ç§»åŠ¨ä»‹è´¨ æ–‡ä»¶ç³»ç»Ÿå½’ç±»ï¼š ç³»ç»Ÿå¯åŠ¨å¿…é¡»ï¼š/bootã€/etcã€/libã€/sysï¼› äºŒè¿›åˆ¶æŒ‡ä»¤é›†åˆï¼š/binã€/sbinï¼› å¤–éƒ¨æ–‡ä»¶ç®¡ç†ï¼š/devã€/mediaã€/mntï¼› è´¦æˆ·ç›¸å…³ï¼š/rootã€/homeã€/usrã€/usr/binã€/usr/sbinã€/usr/srcï¼› è¿è¡Œè¿‡ç¨‹ç›¸å…³ï¼š/varã€/procï¼› æ‰©å±•ç”¨çš„ï¼š/optã€/srvï¼› å…¶å®ƒå¸¸ç”¨çš„é‡è¦æ–‡ä»¶ä½ç½®åŠä½œç”¨ï¼š ä½ç½® ä½œç”¨ /etc/yum.repos.d/redhat.repo RHEL YUM ä»“åº“çš„é…ç½®æ–‡ä»¶ï¼ˆå®‰è£…ã€æ›´æ–°è½¯ä»¶ç›¸å…³ï¼‰ /etc/sysconfig/network-scripts/ifcfg-ens160 ç½‘å¡é…ç½®æ–‡ä»¶ï¼ˆè¿æ¥å¤–ç½‘ï¼‰ /boot/vmlinuz-4.18.0-240.el8.x86_64 å†…æ ¸æ–‡ä»¶ /boot/initramfs-4.18.0-240.el8.x86_64.img æ˜¯å†…å­˜ä¸­çš„ç£ç›˜ç»“æ„çš„å®ç°ï¼Œå…¶ä¸­åŒ…å«å¿…è¦çš„å·¥å…·å’Œè„šæœ¬ï¼Œç”¨äºåœ¨å°†æ§åˆ¶æƒäº¤ç»™æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ init åº”ç”¨ç¨‹åºä¹‹å‰æŒ‚è½½æ‰€éœ€çš„æ–‡ä»¶ç³»ç»Ÿ /boot/grub2/.. ä¸å¼•å¯¼ç¨‹åºæœ‰å…³çš„æ–‡ä»¶ /etc/ssh/sshd.conf SSH é…ç½®æ–‡ä»¶ /etc/services å¸¸ç”¨å’Œå·²æ³¨å†Œçš„ç½‘ç»œç«¯å£ç›‘å¬åˆ—è¡¨","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Linux åŸºæœ¬æ¶æ„ä¸ Shell åˆè¯†","slug":"Linux | Linux åŸºæœ¬æ¶æ„ä¸ Shell åˆè¯†","date":"2022-08-12T09:53:32.669Z","updated":"2022-08-13T00:51:00.651Z","comments":true,"path":"2022-08-12-Linux | Linux åŸºæœ¬æ¶æ„ä¸ Shell åˆè¯†.html","link":"","permalink":"https://skinyi.github.io/2022-08-12-Linux%20|%20Linux%20%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84%E4%B8%8E%20Shell%20%E5%88%9D%E8%AF%86.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ Linux æ¶æ„æ¦‚è§ˆ â€‹Linuxï¼Œå…¨ç§° GNU/Linuxï¼Œæ˜¯ä¸€ç§å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» UNIX æ“ä½œç³»ç»Ÿï¼Œå®ƒåŸºäº POSIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€åŒæ—¶æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU,å®ƒèƒ½è¿è¡Œä¸»è¦çš„ unix å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚GNU/Linux æ˜¯å®å†…æ ¸çš„æ“ä½œç³»ç»Ÿï¼Œæ•´ä½“è´¯å½»æ¨¡å—åŒ–çš„å¼€å‘æ€æƒ³ï¼Œå› æ­¤æ”¯æŒé’ˆå¯¹ä¸åŒåº”ç”¨åœºæ™¯å’Œè®¾å¤‡ç¡¬ä»¶æƒ…å†µè¿›è¡Œè£å‰ªå®šåˆ¶ã€‚ä¸‹å›¾å±•ç¤ºäº† linux å†…æ ¸çš„åŸºæœ¬æ¨¡å—æ„æˆã€‚ ğŸŸ¢ ä¸¥æ ¼æ¥è¯´ï¼Œlinux æ˜¯æŒ‡ linux å†…æ ¸ï¼ŒGNU/Linux æ‰æ˜¯ä¸€ä¸ªåŒ…å«è½¯ä»¶å’Œå†…æ ¸çš„å®Œæ•´æ“ä½œç³»ç»Ÿã€‚ Shell ä¸å‘½ä»¤åˆè¯† â€‹Shell æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„å¤–å£³ï¼Œç”¨ä»¥ä¿æŠ¤æ“ä½œç³»ç»Ÿå†…æ ¸å’Œæä¾›ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿå†…æ ¸è¿›è¡Œäº¤äº’çš„æ¥å£ã€‚åŒæ—¶ shell è¿˜æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€ï¼šä½œä¸ºå‘½ä»¤è¯­è¨€ï¼Œå®ƒäº¤äº’å¼è§£é‡Šå’Œæ‰§è¡Œç”¨æˆ·è¾“å…¥çš„å‘½ä»¤æˆ–è€…è‡ªåŠ¨åœ°è§£é‡Šå’Œæ‰§è¡Œé¢„å…ˆè®¾å®šå¥½çš„ä¸€è¿ä¸²çš„å‘½ä»¤ï¼›ä½œä¸ºç¨‹åºè®¾è®¡è¯­è¨€ï¼Œå®ƒå®šä¹‰äº†å„ç§å˜é‡å’Œå‚æ•°ï¼Œå¹¶æä¾›äº†è®¸å¤šåœ¨é«˜çº§è¯­è¨€ä¸­æ‰å…·æœ‰çš„æ§åˆ¶ç»“æ„ï¼ŒåŒ…æ‹¬å¾ªç¯å’Œåˆ†æ”¯ã€‚ â€‹Shell å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå³å›¾å½¢ç•Œé¢ shell å’Œå‘½ä»¤è¡Œå¼ shellã€‚å›¾å½¢ç•Œé¢ shell ç›¸è¾ƒäºå‘½ä»¤è¡Œ shell æ¯”è¾ƒå ç”¨ç³»ç»Ÿèµ„æºä¸”çµæ´»æ€§ä¸é«˜ï¼Œå‘½ä»¤è¡Œ shell å› ä¸ºè¦è®°å¿†å¤§é‡çš„ linux åŸºæœ¬æ“ä½œå‘½ä»¤è€Œæ¯”è¾ƒéš¾ä»¥æŒæ¡ï¼Œä¸è¿‡å¾ˆå¤š Linux å‘½ä»¤æœ¬èº«æä¾›äº†æŸ¥é˜…æ‰‹å†Œå’Œå¸®åŠ©é€‰é¡¹ç”¨ä»¥æç¤ºç”¨æˆ·ç›¸å…³çš„äº¤äº’æŒ‡ä»¤ç”¨æ³•ã€‚Shell æ ¹æ®å†å²é˜¶æ®µçš„ä¸åŒæœ‰ä¸åŒçš„å®ç°ï¼Œåœ¨ RHEL ä¸­æ”¯æŒ sh å’Œ bashï¼ˆé»˜è®¤ï¼‰ å‘½ä»¤å¼äº¤äº’ shellï¼ˆä½†è°ƒç”¨ sh æ—¶ä»æ˜¯ä½¿ç”¨çš„ bashï¼Œbash æ˜¯ sh çš„ä¸€ä¸ªæœ€æˆåŠŸçš„æ”¹è¿›äº§å“ï¼‰ã€‚ â€‹ä»¥å‘½ä»¤è¡Œäº¤äº’æ–¹å¼ä½¿ç”¨ shell æ—¶ï¼Œå¯åŠ¨ç»ˆç«¯å­—ç¬¦ç•Œé¢åï¼Œå®ƒåœ¨ç­‰å¾…ç”¨æˆ·è¾“å…¥å‘½ä»¤æ—¶ä¼šé—ªçƒä¸€ä¸ªâ€œâ–ˆâ€å°å…‰æ ‡ï¼Œåœ¨å®ƒçš„å‰é¢ä¼šæœ‰ä¸€ä¸²shellæç¤ºç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆè¯·å¿½ç•¥&quot;$&quot;æˆ–&quot;#&quot;å‰è¾¹çš„\\è½¬ä¹‰ç¬¦å·ï¼Œä¸‹åŒï¼‰ï¼š 1[user@host ~]\\$ â–ˆ ğŸŸ¢ Shellæç¤ºç¬¦çš„æ„æˆ userï¼šå½“å‰ç™»é™†ç”¨æˆ·ï¼Œå¦‚æœä½¿ç”¨ root ç”¨æˆ·çš„åˆ™æ˜¾ç¤º rootï¼› hostï¼šç™»é™†ç»ˆç«¯çš„ä¸»æœºåï¼Œä¸€èˆ¬ç”± ip æˆ–åŸŸåæ„æˆï¼› ~ï¼šå½“å‰æ“ä½œæ‰€ä½äºçš„å·¥ä½œè·¯å¾„ï¼Œâ€œ~â€ä»£è¡¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼ˆé»˜è®¤ç™»é™†åçš„å·¥ä½œç›®å½•ï¼‰ï¼Œå¦‚ç¤ºä¾‹åˆ™å®Œæ•´è·¯å¾„ä¸ºï¼š/home/userï¼Œå…¶ä»–è·¯å¾„ä»¥å®Œæ•´ç»å¯¹è·¯å¾„æ˜¾ç¤ºã€‚ $ï¼šä»¥è¯¥ç³»ç»Ÿçš„æ™®é€šç”¨æˆ·ç™»é™†æ—¶åˆ™æ˜¾ç¤ºç¾å…ƒç¬¦å·â€œ$â€ï¼Œè¡¨æ˜å½“å‰ä¼šè¯ä»¥æ™®é€šç”¨æˆ·ç™»é™†ï¼Œè‹¥ä»¥ root ç”¨æˆ·ç™»é™†æ—¶åˆ™æ˜¾ç¤ºäº•å·â€œ#â€ï¼Œç”¨ä»¥æç¤ºç”¨æˆ·è°¨æ…æ“ä½œã€‚ Shell æç¤ºç¬¦çš„å†…å®¹åŠå½¢å¼ç”± PS1 ç¯å¢ƒå˜é‡ç¡®å®šã€‚ â€‹Shell å‘½ä»¤ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå‘½ä»¤ã€é€‰é¡¹ã€å‚æ•°ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 12[root@host ~]\\# usermod -L user01 # command-&gt;usermod options-&gt;-L args-&gt;user01# é€‰é¡¹è‹¥ç”±å­—æ¯æŒ‡å®šï¼Œä¸€èˆ¬å‰é¢åŠ ä¸€ä¸ª &quot;-&quot;ï¼Œç©ºæ ¼åè·Ÿå‚æ•°ï¼Œè‹¥ç”±å•è¯æŒ‡å®šï¼Œä¸€èˆ¬å‰é¢åŠ  &quot;--&quot;ï¼Œ= åè·Ÿå‚æ•° â€‹å¯ä»¥åœ¨ä¸€è¡Œä¸­ä½¿ç”¨åˆ†å·å°†ä¸åŒè¯­å¥éš”ç¦»å¼€ï¼Œshell ä¼šæŒ‰åºæ‰§è¡Œï¼Œä½†æ˜¯è¿™æ ·åšæ˜¯æœ‰é£é™©çš„ï¼Œå› ä¸ºåé¢çš„è¯­å¥ä¸è®ºå‰é¢çš„æ‰§è¡Œç»“æœæˆåŠŸä¸å¦éƒ½ä¼šæ‰§è¡Œï¼Œå› æ­¤ä¾èµ–äºå‰é¢æ‰§è¡Œç»“æœçš„è¯­å¥å¯èƒ½ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚ä¸ºäº†ä½¿æ“ä½œæ›´åŠ å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨â€&amp;&amp;â€œå°†å®ƒä»¬è¿æ¥èµ·æ¥ï¼Œè¿™ä¸ªç¬¦å·è¿æ¥çš„ä¸¤æ¡è¯­å¥åªæœ‰ç¬¬ä¸€æ¡è¯­å¥æ‰§è¡ŒæˆåŠŸåç¬¬äºŒæ¡æ‰ä¼šæ‰§è¡Œã€‚ä¸æ­¤ç›¸åï¼Œâ€||â€œè¿æ¥çš„ä¸¤æ¡è¯­å¥åªæœ‰å‰ä¸€æ¡æ‰§è¡Œå¤±è´¥çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç¬¬äºŒæ¡ã€‚ â€‹å¦‚æœä½ è¦æ‰§è¡Œçš„å‘½ä»¤æ¯”è¾ƒå†—é•¿ï¼Œå¯ä»¥ä½¿ç”¨â€\\â€œå°†å…¶åˆ‡å‰²ä¸ºå¤šè¡Œï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 123[user@host ~]\\$ command --this_is_a_very_long_option \\ # ä¿æŒå„ä¸ªç»„æˆéƒ¨åˆ†å®Œæ•´ï¼Œä¸è¦æ‹†åˆ†&gt; very_long_parameter_that_you_never_see_before_1 \\&gt; very_long_parameter_that_you_never_see_before_2 ä½¿ç”¨æœ¬åœ°ç»ˆç«¯ç™»å½•åˆ°æœ¬åœ°è®¡ç®—æœº â€‹ç»ˆç«¯æ˜¯ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„ç•Œé¢ï¼Œç”¨äºå‘è®¡ç®—æœºç³»ç»Ÿè¾“å…¥å‘½ä»¤ä»¥åŠæ˜¾ç¤ºè®¡ç®—æœºç³»ç»Ÿçš„è¾“å‡ºã€‚æœ¬åœ°ç»ˆç«¯æ˜¯æŒ‡è¿è¡Œåœ¨è¿æ¥äº†é”®ç›˜å’Œæ˜¾ç¤ºå™¨ç›´æ¥è¾“å…¥è¾“å‡ºçš„è®¾å¤‡ä¸Šçš„æ–‡æœ¬ç•Œé¢ï¼Œè¿™äº›è®¾å¤‡ä¹Ÿç§°ä¸º Linux è®¡ç®—æœºçš„ç‰©ç†æ§åˆ¶å°ã€‚ç‰©ç†æ§åˆ¶å°æ”¯æŒå¤šä¸ªè™šæ‹Ÿæ§åˆ¶å°ï¼Œå®ƒä»¬å¯ä»¥è¿è¡Œå•ç‹¬çš„ç»ˆç«¯ã€‚æ¯ä¸ªè™šæ‹Ÿæ§åˆ¶å°å‡æ”¯æŒç‹¬ç«‹çš„ç™»å½•ä¼šè¯ã€‚ ğŸŸ¢ ä½¿ç”¨ Ctrl + Alt + F1~F6 å¿«æ·é”®è¿›è¡Œè™šæ‹Ÿæ§åˆ¶å°ä¸€åˆ°å…­çš„å¿«é€Ÿç»ˆç«¯åˆ‡æ¢ã€‚ åœ¨ RHEL8 ä¸­ï¼Œå¦‚æœå›¾å½¢ç¯å¢ƒå¯ç”¨ï¼Œåˆ™ç™»é™†å±å¹•é»˜è®¤ä¼šåœ¨ç§°ä¸º tty1 çš„ç¬¬ä¸€ä¸ªè™šæ‹Ÿæ§åˆ¶å°ä¸­è¿è¡Œï¼Œå…¶ä½™ç¬¬äºŒåˆ°ç¬¬å…­è™šæ‹Ÿæ§åˆ¶å°åˆ™æä¾›æ–‡æœ¬ Shell äº¤äº’ç•Œé¢ã€‚ç”¨æˆ·åœ¨ç™»é™†ç•Œé¢ç™»é™†æˆåŠŸååˆ™ä¼šä¸ºè¯¥ç”¨æˆ·åœ¨äºŒåˆ°å…­é¡ºå»¶ç©ºé—²çš„ä¸€ä¸ªè™šæ‹Ÿæ§åˆ¶å°å»ºç«‹å›¾å½¢ä¼šè¯ã€‚è¦åœ¨å›¾å½¢ç•Œé¢ä¸­è·å¾— Shell æç¤ºç¬¦ï¼Œéœ€è¦ä½¿ç”¨å›¾å½¢ç•Œé¢æä¾›çš„ç»ˆç«¯åº”ç”¨ç¨‹åºã€‚ ğŸŸ¢ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤ä»¥ä»€ä¹ˆæ–¹å¼è¿›è¡Œç™»é™†ï¼š [root@localhost opt]# systemctl get-default # set-default æˆ– isolate é€‰é¡¹å¯ä»¥è®¾ç½®å…¶å®ƒç™»é™†æ–¹å¼ï¼ˆä¸€èˆ¬ä¸ºmulti-user.targetï¼‰ï¼ˆå‰è€…é‡å¯ç”Ÿæ•ˆæ°¸ä¹…ä¿å­˜ï¼Œåè€…å³æ—¶ç”Ÿæ•ˆä¸´æ—¶æœ‰æ•ˆï¼‰ graphical.target # é»˜è®¤å›¾å½¢ç•Œé¢ç™»é™† â€‹ç™»é™†ç”¨æˆ·è‹¥æƒ³é€€å‡ºå½“å‰å›¾å½¢ç•Œé¢çš„äº¤äº’ï¼Œéœ€è¦è¿›è¡Œæ³¨é”€æ“ä½œï¼Œæ³¨æ„ï¼šåˆ‡æ¢ç”¨æˆ·çš„ç•Œé¢åŒæ ·æ˜¯è¿”å› tty1 è¿›è¡Œç™»é™†æ“ä½œä½†ä¸é€€å‡ºå½“å‰æ“ä½œç”¨æˆ·ï¼ŒåŒæ ·åœ¨ä¸‹ä¸€ä¸ªæœªä½¿ç”¨çš„è™šæ‹Ÿæ§åˆ¶å°ä¸ºåˆ‡æ¢è¿‡å»çš„ç”¨æˆ·æä¾›å›¾å½¢äº¤äº’ç•Œé¢ã€‚ç”¨æˆ·æ³¨é”€åï¼Œç‰©ç†æ§åˆ¶å°åˆ™è‡ªåŠ¨åˆ‡å›ç¬¬ä¸€è™šæ‹Ÿæ§åˆ¶å°çš„å›¾å½¢ç™»é™†ç•Œé¢ï¼Œç­‰å¾…é€‰æ‹©ç”¨æˆ·å¹¶ç™»å½•ã€‚ â€‹æ— å¤–è®¾æœåŠ¡å™¨æä¾›äº†ä¸²è¡Œç«¯å£ç”¨ä»¥ä¸ºç®¡ç†å‘˜æä¾›ç™»é™†æœåŠ¡ï¼Œè¯¥ä¸²è¡Œç«¯å£ä¸ºè¿œç¨‹ç™»é™†æœåŠ¡å™¨å’Œè¯¥åº”ç”¨æœåŠ¡å™¨æä¾›è¿æ¥ï¼Œä¸²å£ç™»é™†ä¸ºç½‘ç»œé…ç½®æœ‰è¯¯æˆ–è€…å°šæœªé…ç½®ç½‘ç»œçš„æœåŠ¡å™¨æä¾›ç™»é™†æ”¯æŒä»¥ä¿®å¤ï¼Œä¸è¿‡å¤§å¤šæ•°ä¸‹ï¼Œç½‘ç»œé…ç½®æ— è¯¯æœ‰æ•ˆçš„æœåŠ¡å™¨é€šè¿‡ç½‘ç»œæ¥è¿›è¡Œç™»é™†ã€‚ ä½¿ç”¨è¿œç¨‹æœåŠ¡ç™»é™†åˆ°ç½‘ç»œè®¡ç®—æœº â€‹Linux ç”¨æˆ·å’Œç®¡ç†å‘˜é€šå¸¸éœ€è¦é€šè¿‡ç½‘ç»œè¿æ¥åˆ°è¿œç¨‹ç³»ç»Ÿæ¥è·å¾—å¯¹è¿œç¨‹ç³»ç»Ÿçš„ shell è®¿é—®ã€‚éšç€ç°ä»£è™šæ‹ŸåŒ–ä»¥åŠäº‘è®¡ç®—æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œç½‘ç»œç™»é™†å˜å¾—æ›´åŠ ååˆ†æ™®éï¼Œåœ¨ Linux ä¸­ï¼Œæœ€å¸¸è§çš„æ˜¯ä½¿ç”¨ Secure Shell Daemon(SSHD) æœåŠ¡ä¸ºå®¿ä¸»è®¡ç®—æœºæä¾›è¿œç¨‹ç™»é™†è·å¾—å‘½ä»¤æç¤ºç¬¦çš„æœåŠ¡ã€‚å…¶å®ƒéœ€è¦ç™»é™†åˆ°è¿œç¨‹æœåŠ¡å™¨çš„è®¡ç®—æœºåˆ™éœ€è¦å®‰è£… SSH å®¢æˆ·ç«¯ã€‚æœ€ä¸»æµçš„ SSH å®ç°ä¸º OpenSSH å®ç°ã€‚é€šå¸¸ä¸€å° Linux æœºå™¨ä¸Šæ˜¯åŒæ—¶å®‰è£…äº† SSH å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº†çš„ï¼Œç”¨ä»¥å®ç°ç™»é™†ç™»é™†å…¶å®ƒæœºå™¨å’Œä¸ºå…¶å®ƒç™»é™†åˆ°è‡ªå·±çš„æœºå™¨æä¾›ä¼šè¯ã€‚å¦‚ä¸‹ä¾‹ï¼š 123[user@host ~]\\$ ssh remoteuser@remotehost # sshd æœåŠ¡é»˜è®¤ç›‘å¬ 22 ç«¯å£ï¼Œç™»é™†æ—¶ä¸æŒ‡å®šçš„è¯å®¢æˆ·ç«¯é»˜è®¤å»è¿ 22remoteuser@remotehost\\`s password: password # å¯†ç ä¸ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸Š[remoteuser@remotehost ~]\\$ â–ˆ ğŸŸ¢ æœ¬ç¤ºä¾‹å±•ç¤ºäº†é€šè¿‡æœ¬åœ° user ç”¨æˆ·è¿œç¨‹ç™»é™†åˆ°äº†è¿œç¨‹ remotehost ä¸Šçš„ remoteuser ç”¨æˆ·ï¼Œä¸”è¿™ä¸ªè¿‡ç¨‹éœ€è¦æä¾›èº«ä»½éªŒè¯ï¼Œæœ¬ç¤ºä¾‹æ˜¯ä½¿ç”¨å¯†ç éªŒè¯ï¼Œç™»é™†æˆåŠŸå shell æç¤ºç¬¦å˜ä¸ºäº†è¿œç¨‹è®¡ç®—æœºçš„ shell æç¤ºç¬¦ã€‚ â€‹ssh å‘½ä»¤é€šè¿‡åŠ å¯†è¿æ¥æ¥é˜²æ­¢é€šä¿¡è¢«çªƒå¬æˆ–åŠ«æŒå¯†ç å’Œå†…å®¹ã€‚æœ‰äº›ç³»ç»Ÿä¸å…è®¸ç”¨æˆ·ä½¿ç”¨å¯†ç ç™»é™†åˆ°è¿œç¨‹ä¸»ä»¥å¢å¼ºå®‰å…¨æ€§ï¼Œå…¶ä½¿ç”¨çš„ç”¨æˆ·èº«ä»½éªŒè¯æ–¹æ³•æ˜¯å…¬ç§é’¥èº«ä»½éªŒè¯ã€‚è¿™ç§éªŒè¯æ–¹æ³•çš„æµç¨‹æ˜¯ï¼šç”¨æˆ·æœ¬åœ°å­˜æ”¾ç§é’¥ã€è¿œç¨‹è®¡ç®—æœºå­˜æ”¾å…¬é’¥ï¼Œç”¨æˆ·ç™»å½•æ—¶é€šè¿‡ä¸º ssh å‘½ä»¤æä¾›å…¬é’¥æ–‡ä»¶è·¯å¾„çš„å‚æ•°ï¼Œssh ç¨‹åºé€šè¿‡ä¸è¿œç¨‹è®¡ç®—æœºä¸Šå®‰è£…çš„æˆæƒå…¬é’¥è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸¤è€…æ˜¯åŒ¹é…çš„ï¼Œåˆ™ä¸éœ€è¦å¯†ç å°±å¯ç™»é™†ï¼Œå¦‚ä¸‹ä¾‹ï¼š 12[user@host ~]\\$ ssh -i mylab.pem remoteuser@remotehost[remoteuser@remotehost ~]\\$ â–ˆ ğŸŸ¢ ç”¨æˆ·çš„ç§é’¥æ–‡ä»¶å¿…é¡»åªèƒ½è¯¥ç”¨æˆ·æœ¬èº«æ‹¥æœ‰è¯»å–æƒé™ã€‚ç”¨æˆ·é¦–æ¬¡ç™»é™†è¿œç¨‹è®¡ç®—æœºæ—¶ç³»ç»Ÿä¼šå‘å‡ºè­¦å‘Šï¼Œè¡¨ç¤ºæœ¬åœ°æ²¡æœ‰å­˜å‚¨è¿‡è¿œç¨‹è®¡ç®—æœºçš„å¯†é’¥ï¼Œå¦‚æœä½ ä¿¡ä»»è¯¥å¯†é’¥ï¼Œåˆ™æœ¬åœ°è®¡ç®—æœºä¼šä¿å­˜å…¶å¯†é’¥ç™»é™†ä¸”ä¸‹æ¬¡ä¸å†æé†’ã€‚ â€‹ä½¿ç”¨ exit å‘½ä»¤å¯ä»¥é€€å‡ºåœ¨è¿œç¨‹è®¡ç®—æœºä¸Šçš„ç™»é™†ï¼Œä¸” shell æç¤ºç¬¦åˆ‡æ¢å›æœ¬åœ°çš„ï¼š 1234[remoteuser@remotehost ~]\\$ exitlogoutConnection to remotehost closed.[user@host ~]\\$ â–ˆ Linux å‘½ä»¤æ‰§è¡Œä¼˜å…ˆçº§ â€‹Shell ä¸­å¯æ‰§è¡Œå‘½ä»¤åˆ†ä¸º shell å†…å»ºå‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤ã€‚å†…å»ºå‘½ä»¤ç›´æ¥ä»å†…å­˜ä¸­è¯»å–åªéœ€æä¾›å‘½ä»¤åï¼Œè€Œå¤–éƒ¨å‘½ä»¤éœ€è¦ä»ç³»ç»Ÿæ–‡ä»¶ä¸­è¯»å–å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€èˆ¬æ¥è¯´å¯ä»¥ç›´æ¥æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼Œä½†æ˜¯è¿™æ ·è¦è¾“å…¥é•¿ä¸²çš„è·¯å¾„ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤ shell æä¾›äº†ç¯å¢ƒå˜é‡ $PATH æ¥æŒ‡å®šå‘½ä»¤çš„æœç´¢è·¯å¾„ï¼Œè¿™æ ·çš„è¯æ‰§è¡Œå‘½ä»¤å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤åæ¥æ‰§è¡Œäº†ï¼Œshell ç¨‹åºä¼šè‡ªåŠ¨æœç´¢ $PATH ç¯å¢ƒå˜é‡ä¸­çš„è·¯å¾„ï¼ŒåŒæ—¶ä¸ºäº†åŠ å¿«å¤–éƒ¨å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ shell è¿˜æä¾›äº†ç¼“å­˜è¡¨æœºåˆ¶ã€‚æœ‰äº›å¸¸ç”¨çš„å‘½ä»¤å¯èƒ½è¾“å…¥èµ·æ¥æ¯”è¾ƒé•¿ï¼Œå› æ­¤è¿˜æœ‰åˆ«åæœºåˆ¶ç”¨ä»¥å®ç°å¿«é€Ÿè¾“å…¥æ‰§è¡Œã€‚ æŸ¥çœ‹å‘½ä»¤ç±»å‹å¯ä»¥ä½¿ç”¨ type å‘½ä»¤ï¼š 123456[root@localhost ~]\\# type type # type æ˜¯å†…å»ºå‘½ä»¤,é™¤æ­¤ä¹‹å¤– echoã€hashã€aliasã€pwdä¹Ÿæ˜¯type is a shell builtin[root@localhost ~]\\# type top # top æ˜¯å¤–éƒ¨å‘½ä»¤top is /usr/bin/top[root@localhost ~]\\# type rm # rm æ˜¯ rm -i çš„åˆ«åï¼Œé™¤æ­¤ä¹‹å¤– ll æ˜¯ ls -l çš„åˆ«årm is aliased to `rm -i&#x27; æŸ¥çœ‹ $PATH ç¯å¢ƒå˜é‡çš„å†…å®¹ï¼š 1234567891011121314151617[root@localhost ~]\\# echo $PATH/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin# å¯æ‰§è¡Œæ–‡ä»¶æœç´¢ç›¸å…³[root@localhost opt]\\# type which # which ä¹Ÿæ˜¯åˆ«åwhich is aliased to `(alias; declare -f) | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot`[root@localhost opt]\\# which top # æŸ¥çœ‹å‘½ä»¤å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„/usr/bin/top[root@localhost opt]\\# type whereis # æˆ‘ä¹‹å‰æ‰§è¡Œè¿‡ whereis æ­¤å¤„ whereis æ˜¯ä»ç¼“å­˜è¡¨é‡ŒåŠ è½½çš„ whereis is hashed (/usr/bin/whereis)[root@localhost opt]\\# whereis top # æŸ¥çœ‹å‘½ä»¤å¯æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„åŠå¸®åŠ©æ–‡æ¡£ç»å¯¹è·¯å¾„top: /usr/bin/top /usr/share/man/man1/top.1.gz# æŸ¥çœ‹å‘½ä»¤çš„ç¼“å­˜è¡¨[root@localhost opt]\\# hashhits command 3 /usr/bin/whereis 1 /usr/bin/ls 1 /usr/bin/clear â€‹Shell å‘½ä»¤çš„æ‰§è¡Œä¼˜å…ˆçº§ä¸ºï¼šç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„æ‰§è¡Œçš„å‘½ä»¤ &gt; åˆ«åæŒ‡å®šçš„å‘½ä»¤ &gt; Shell å†…éƒ¨å‘½ä»¤ &gt; hash è¡¨ä¸­çš„å‘½ä»¤ &gt; $PATH ç¯å¢ƒå˜é‡ä¸­æŒ‡ç¤ºçš„è·¯å¾„æŒ‰åºæŸ¥æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚ æ‰§è¡Œå½“å‰å·¥ä½œç›®å½•ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ â€‹æ ¹æ®ä¸Šé¢çš„ç»“è®ºå¯çŸ¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œshell æ˜¯ä¸ä¼šåœ¨å½“å‰å·¥ä½œç›®å½•æœç´¢å¯æ‰§è¡Œæ–‡ä»¶çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šå½“å‰å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„æ¥æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œæœ€ç®€å•æ–¹å¼è‡ªç„¶æ˜¯æŒ‡å®šç›¸å¯¹è·¯å¾„ï¼Œlinux ä»¥ â€œ.â€ ä»£è¡¨å½“å‰å·¥ä½œç›®å½•ï¼Œå› æ­¤æ‰§è¡Œå½“å‰å·¥ä½œç›®å½•ä¸‹çš„å‘½ä»¤ command åˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼ˆæ¨èï¼‰ï¼š 1[user@host ~]\\$ ./command # å…¶ä¸­ command å‘½ä»¤å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ä¸º /home/user/command ğŸ”´ æŠŠ ./ æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ $PATH ä¸­ä¹Ÿå¯ä»¥å®ç°è¾“å…¥å‘½ä»¤åç›´æ¥æŸ¥æ‰¾æ‰§è¡Œçš„æ•ˆæœï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸å®‰å…¨ã€‚ 123[user@host ~]\\$ export $PATH=./:$PATH # è¿™ç§æ–¹å¼æœ€ä¸å®‰å…¨ï¼Œå¦‚å°†å…¬å…±ç›®å½•ä¸­çš„ç—…æ¯’ç¨‹åºåå­—å–ä¸º ls ï¼Œä»»ä½•ç”¨æˆ·åœ¨æ­¤å·¥ä½œç›®å½•ä¸­éƒ½ä¼šä¼˜å…ˆæ‰§è¡Œç—…æ¯’ç¨‹åº[user@host ~]\\$ export $PATH=$PATH:./ # å¦‚æœä¸€å®šè¦è®¾ç½®çš„è¯å¯ä»¥è¿™æ ·è®¾ç½®ï¼šå¦‚æœè‡ªå·±çš„å‘½ä»¤åå’Œç³»ç»Ÿçš„ä¸€æ ·çš„è¯ä¼šä¼˜å…ˆæ‰§è¡Œç³»ç»Ÿçš„ï¼Œè‡ªå·±çš„å‘½ä»¤å¹¶ä¸æ‰§è¡Œ[user@host ~]\\$ command # é…ç½®å¥½ç¯å¢ƒå˜é‡åæ‰§è¡Œä¸Šé¢çš„ä¾‹å­","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"äºŒäºŒå¹´å››æœˆä¸€æ—¥æ–°äº¤è§„è®°åˆ†","slug":"é©¾é©¶ | äºŒäºŒå¹´å››æœˆä¸€æ—¥æ–°äº¤è§„è®°åˆ†","date":"2022-04-18T02:31:41.767Z","updated":"2022-04-18T04:42:00.651Z","comments":true,"path":"2022-04-18-é©¾é©¶ | äºŒäºŒå¹´å››æœˆä¸€æ—¥æ–°äº¤è§„è®°åˆ†.html","link":"","permalink":"https://skinyi.github.io/2022-04-18-%E9%A9%BE%E9%A9%B6%20|%20%E4%BA%8C%E4%BA%8C%E5%B9%B4%E5%9B%9B%E6%9C%88%E4%B8%80%E6%97%A5%E6%96%B0%E4%BA%A4%E8%A7%84%E8%AE%B0%E5%88%86.html","excerpt":"","text":"å¼•ç”¨æ¥æº ä»¥ä¸‹å†…å®¹å¼•ç”¨æ€»ç»“è‡ªä» 2022 å¹´ 4 æœˆ 1 æ—¥èµ·æ–½è¡Œã€Šé“è·¯äº¤é€šå®‰å…¨è¿æ³•è¡Œä¸ºè®°åˆ†ç®¡ç†åŠæ³•ã€‹ï¼ˆå…¬å®‰éƒ¨ä»¤ç¬¬163å·ï¼‰ã€‚ è®°åˆ†è§„å®š è®°åäºŒåˆ†çš„ç›¸å…³æƒ…å½¢ é¥®é…’åé©¾é©¶æœºåŠ¨è½¦çš„ï¼› é€ æˆè‡´äººè½»ä¼¤ä»¥ä¸Šæˆ–è€…æ­»äº¡çš„äº¤é€šäº‹æ•…åé€ƒé€¸ï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼› ä½¿ç”¨ä¼ªé€ ã€å˜é€ çš„æœºåŠ¨è½¦å·ç‰Œã€è¡Œé©¶è¯ã€é©¾é©¶è¯ã€æ ¡è½¦æ ‡ç‰Œæˆ–è€…ä½¿ç”¨å…¶ä»–æœºåŠ¨è½¦å·ç‰Œã€è¡Œé©¶è¯çš„ï¼› é©¾é©¶æ ¡è½¦ã€å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šï¼Œæˆ–è€…é©¾é©¶å…¶ä»–è½½å®¢æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹ç™¾ä»¥ä¸Šçš„ï¼› é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šï¼Œæˆ–è€…é©¾é©¶å…¶ä»–æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äº”åä»¥ä¸Šçš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šå€’è½¦ã€é€†è¡Œã€ç©¿è¶Šä¸­å¤®åˆ†éš”å¸¦æ‰å¤´çš„ï¼› ä»£æ›¿å®é™…æœºåŠ¨è½¦é©¾é©¶äººæ¥å—äº¤é€šè¿æ³•è¡Œä¸ºå¤„ç½šå’Œè®°åˆ†ç‰Ÿå–ç»æµåˆ©ç›Šçš„ã€‚ è®°ä¹åˆ†çš„ç›¸å…³æƒ…å½¢ é©¾é©¶ 7 åº§ä»¥ä¸Šè½½å®¢æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹äº”åä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾çš„ï¼› é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äº”åä»¥ä¸Šçš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯æˆ–è€…åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¿æ³•åœè½¦çš„ï¼› é©¾é©¶æœªæ‚¬æŒ‚æœºåŠ¨è½¦å·ç‰Œæˆ–è€…æ•…æ„é®æŒ¡ã€æ±¡æŸæœºåŠ¨è½¦å·ç‰Œçš„æœºåŠ¨è½¦ä¸Šé“è·¯è¡Œé©¶çš„ï¼› é©¾é©¶ä¸å‡†é©¾è½¦å‹ä¸ç¬¦çš„æœºåŠ¨è½¦çš„ï¼› æœªå–å¾—æ ¡è½¦é©¾é©¶èµ„æ ¼é©¾é©¶æ ¡è½¦çš„ï¼› è¿ç»­é©¾é©¶ä¸­å‹ä»¥ä¸Šè½½å®¢æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†è¶…è¿‡ 4 å°æ—¶æœªåœè½¦ä¼‘æ¯æˆ–è€…åœè½¦ä¼‘æ¯æ—¶é—´å°‘äº 20 åˆ†é’Ÿçš„ã€‚ è®°å…­åˆ†çš„ç›¸å…³æƒ…å½¢ é©¾é©¶æ ¡è½¦ã€å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°æœªè¾¾åˆ°ç™¾åˆ†ä¹‹äºŒåï¼Œæˆ–è€…é©¾é©¶ 7 åº§ä»¥ä¸Šè½½å®¢æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åï¼Œæˆ–è€…é©¾é©¶å…¶ä»–è½½å®¢æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹äº”åä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾çš„ï¼› é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äºŒåï¼Œæˆ–è€…åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åçš„ï¼› é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†ä»¥å¤–çš„æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åï¼Œæˆ–è€…åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äº”åä»¥ä¸Šçš„ï¼› é©¾é©¶è½½è´§æ±½è½¦è½½ç‰©è¶…è¿‡æœ€å¤§å…è®¸æ€»è´¨é‡ç™¾åˆ†ä¹‹äº”åä»¥ä¸Šçš„ï¼› é©¾é©¶æœºåŠ¨è½¦è½½è¿çˆ†ç‚¸ç‰©å“ã€æ˜“ç‡ƒæ˜“çˆ†åŒ–å­¦ç‰©å“ä»¥åŠå‰§æ¯’ã€æ”¾å°„æ€§ç­‰å±é™©ç‰©å“ï¼ŒæœªæŒ‰æŒ‡å®šçš„æ—¶é—´ã€è·¯çº¿ã€é€Ÿåº¦è¡Œé©¶æˆ–è€…æœªæ‚¬æŒ‚è­¦ç¤ºæ ‡å¿—å¹¶é‡‡å–å¿…è¦çš„å®‰å…¨æªæ–½çš„ï¼› é©¾é©¶æœºåŠ¨è½¦è¿è½½è¶…é™çš„ä¸å¯è§£ä½“çš„ç‰©å“ï¼ŒæœªæŒ‰æŒ‡å®šçš„æ—¶é—´ã€è·¯çº¿ã€é€Ÿåº¦è¡Œé©¶æˆ–è€…æœªæ‚¬æŒ‚è­¦ç¤ºæ ‡å¿—çš„ï¼› é©¾é©¶æœºåŠ¨è½¦è¿è¾“å±é™©åŒ–å­¦å“ï¼Œæœªç»æ‰¹å‡†è¿›å…¥å±é™©åŒ–å­¦å“è¿è¾“è½¦è¾†é™åˆ¶é€šè¡Œçš„åŒºåŸŸçš„ï¼› é©¾é©¶æœºåŠ¨è½¦ä¸æŒ‰äº¤é€šä¿¡å·ç¯æŒ‡ç¤ºé€šè¡Œçš„ï¼› æœºåŠ¨è½¦é©¾é©¶è¯è¢«æš‚æ‰£æˆ–è€…æ‰£ç•™æœŸé—´é©¾é©¶æœºåŠ¨è½¦çš„ï¼› é€ æˆè‡´äººè½»å¾®ä¼¤æˆ–è€…è´¢äº§æŸå¤±çš„äº¤é€šäº‹æ•…åé€ƒé€¸ï¼Œå°šä¸æ„æˆçŠ¯ç½ªçš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯æˆ–è€…åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¿æ³•å ç”¨åº”æ€¥è½¦é“è¡Œé©¶çš„ã€‚ è®°ä¸‰åˆ†çš„ç›¸å…³æƒ…å½¢ é©¾é©¶æ ¡è½¦ã€å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦ã€7 åº§ä»¥ä¸Šè½½å®¢æ±½è½¦ä»¥å¤–çš„å…¶ä»–è½½å®¢æ±½è½¦è½½äººè¶…è¿‡æ ¸å®šäººæ•°ç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åçš„ï¼› é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†ä»¥å¤–çš„æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹äºŒåä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åçš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯æˆ–è€…åŸå¸‚å¿«é€Ÿè·¯ä¸Šä¸æŒ‰è§„å®šè½¦é“è¡Œé©¶çš„ï¼› é©¾é©¶æœºåŠ¨è½¦ä¸æŒ‰è§„å®šè¶…è½¦ã€è®©è¡Œï¼Œæˆ–è€…åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šé€†è¡Œçš„ï¼› é©¾é©¶æœºåŠ¨è½¦é‡å‰æ–¹æœºåŠ¨è½¦åœè½¦æ’é˜Ÿæˆ–è€…ç¼“æ…¢è¡Œé©¶æ—¶ï¼Œå€Ÿé“è¶…è½¦æˆ–è€…å ç”¨å¯¹é¢è½¦é“ã€ç©¿æ’ç­‰å€™è½¦è¾†çš„ï¼› é©¾é©¶æœºåŠ¨è½¦æœ‰æ‹¨æ‰“ã€æ¥å¬æ‰‹æŒç”µè¯ç­‰å¦¨ç¢å®‰å…¨é©¾é©¶çš„è¡Œä¸ºçš„ï¼› é©¾é©¶æœºåŠ¨è½¦è¡Œç»äººè¡Œæ¨ªé“ä¸æŒ‰è§„å®šå‡é€Ÿã€åœè½¦ã€é¿è®©è¡Œäººçš„ï¼› é©¾é©¶æœºåŠ¨è½¦ä¸æŒ‰è§„å®šé¿è®©æ ¡è½¦çš„ï¼› é©¾é©¶è½½è´§æ±½è½¦è½½ç‰©è¶…è¿‡æœ€å¤§å…è®¸æ€»è´¨é‡ç™¾åˆ†ä¹‹ä¸‰åä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äº”åçš„ï¼Œæˆ–è€…è¿åè§„å®šè½½å®¢çš„ï¼› é©¾é©¶ä¸æŒ‰è§„å®šå®‰è£…æœºåŠ¨è½¦å·ç‰Œçš„æœºåŠ¨è½¦ä¸Šé“è·¯è¡Œé©¶çš„ï¼› åœ¨é“è·¯ä¸Šè½¦è¾†å‘ç”Ÿæ•…éšœã€äº‹æ•…åœè½¦åï¼Œä¸æŒ‰è§„å®šä½¿ç”¨ç¯å…‰æˆ–è€…è®¾ç½®è­¦å‘Šæ ‡å¿—çš„ï¼› é©¾é©¶æœªæŒ‰è§„å®šå®šæœŸè¿›è¡Œå®‰å…¨æŠ€æœ¯æ£€éªŒçš„å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†ä¸Šé“è·¯è¡Œé©¶ï¼› é©¾é©¶æ ¡è½¦ä¸Šé“è·¯è¡Œé©¶å‰ï¼Œæœªå¯¹æ ¡è½¦è½¦å†µæ˜¯å¦ç¬¦åˆå®‰å…¨æŠ€æœ¯è¦æ±‚è¿›è¡Œæ£€æŸ¥ï¼Œæˆ–è€…é©¾é©¶å­˜åœ¨å®‰å…¨éšæ‚£çš„æ ¡è½¦ä¸Šé“è·¯è¡Œé©¶çš„ï¼› è¿ç»­é©¾é©¶è½½è´§æ±½è½¦è¶…è¿‡ 4 å°æ—¶æœªåœè½¦ä¼‘æ¯æˆ–è€…åœè½¦ä¼‘æ¯æ—¶é—´å°‘äº 20 åˆ†é’Ÿçš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é«˜é€Ÿå…¬è·¯ä¸Šè¡Œé©¶ä½äºè§„å®šæœ€ä½æ—¶é€Ÿçš„ã€‚ è®°ä¸€åˆ†çš„ç›¸å…³æƒ…å½¢ é©¾é©¶æ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šè¡Œé©¶è¶…è¿‡è§„å®šæ—¶é€Ÿç™¾åˆ†ä¹‹åä»¥ä¸Šæœªè¾¾åˆ°ç™¾åˆ†ä¹‹äºŒåçš„ï¼› é©¾é©¶æœºåŠ¨è½¦ä¸æŒ‰è§„å®šä¼šè½¦ï¼Œæˆ–è€…åœ¨é«˜é€Ÿå…¬è·¯ã€åŸå¸‚å¿«é€Ÿè·¯ä»¥å¤–çš„é“è·¯ä¸Šä¸æŒ‰è§„å®šå€’è½¦ã€æ‰å¤´çš„ï¼› é©¾é©¶æœºåŠ¨è½¦ä¸æŒ‰è§„å®šä½¿ç”¨ç¯å…‰çš„ï¼› é©¾é©¶æœºåŠ¨è½¦è¿åç¦ä»¤æ ‡å¿—ã€ç¦æ­¢æ ‡çº¿æŒ‡ç¤ºçš„ï¼› é©¾é©¶æœºåŠ¨è½¦è½½è´§é•¿åº¦ã€å®½åº¦ã€é«˜åº¦è¶…è¿‡è§„å®šçš„ï¼› é©¾é©¶è½½è´§æ±½è½¦è½½ç‰©è¶…è¿‡æœ€å¤§å…è®¸æ€»è´¨é‡æœªè¾¾åˆ°ç™¾åˆ†ä¹‹ä¸‰åçš„ï¼› é©¾é©¶æœªæŒ‰è§„å®šå®šæœŸè¿›è¡Œå®‰å…¨æŠ€æœ¯æ£€éªŒçš„å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†ä»¥å¤–çš„æœºåŠ¨è½¦ä¸Šé“è·¯è¡Œé©¶çš„ï¼› é©¾é©¶æ“…è‡ªæ”¹å˜å·²ç™»è®°çš„ç»“æ„ã€æ„é€ æˆ–è€…ç‰¹å¾çš„è½½è´§æ±½è½¦ä¸Šé“è·¯è¡Œé©¶çš„ï¼› é©¾é©¶æœºåŠ¨è½¦åœ¨é“è·¯ä¸Šè¡Œé©¶æ—¶ï¼ŒæœºåŠ¨è½¦é©¾é©¶äººæœªæŒ‰è§„å®šç³»å®‰å…¨å¸¦çš„ï¼› é©¾é©¶æ‘©æ‰˜è½¦ï¼Œä¸æˆ´å®‰å…¨å¤´ç›”çš„ã€‚ è®°åˆ†å¯¹ç…§è®°å¿†è¡¨ è¶…å‘˜ ä»¥ä¸‹è½¦å‹åˆ†ç±»ç»Ÿä¸€å½’ç±»ä¸ºä»¥ä¸‹ç®€ç§°ï¼š å¤§è½¦ï¼šæ ¡è½¦ã€å…¬è·¯å®¢è¿æ±½è½¦ã€æ—…æ¸¸å®¢è¿æ±½è½¦ï¼› ä¸­è½¦ï¼š7 åº§ä»¥ä¸Šè½½å®¢æ±½è½¦ï¼› å°è½¦ï¼šé™¤äº†ä»¥ä¸Šç±»åˆ«çš„å…¶ä»–è½½å®¢æœºåŠ¨è½¦ã€‚ è½¦å‹\\ç¨‹åº¦ 20% ä»¥ä¸‹ 20% åˆ° 50% 50% åˆ° 100% 100% ä»¥ä¸Š å¤§è½¦ 6 12 12 12 ä¸­è½¦ 6 9 12 å°è½¦ 3 6 12 è¶…é€Ÿ è¡¨æ ¼ä¸­æ ‡é»‘çš„è¡¨ç¤ºåœ¨é«˜é€Ÿã€åŸå¸‚å¿«é€Ÿè·¯ä¸Šè¡Œé©¶çš„æƒ…å½¢ï¼Œæœªæ ‡é»‘è¡¨ç¤ºåœ¨æ™®é€šå…¬è·¯ä¸Šè¡Œé©¶çš„æƒ…å½¢ã€‚ä»¥ä¸‹è½¦å‹åˆ†ç±»ç»Ÿä¸€å½’ç±»ä¸ºä»¥ä¸‹ç®€ç§°ï¼š å¤§è½¦ï¼šæ ¡è½¦ã€ä¸­å‹ä»¥ä¸Šè½½å®¢è½½è´§æ±½è½¦ã€å±é™©ç‰©å“è¿è¾“è½¦è¾†ï¼› å°è½¦ï¼šé™¤äº†ä»¥ä¸Šç±»åˆ«çš„å…¶ä»–è½½å®¢æœºåŠ¨è½¦ã€‚ è½¦å‹\\ç¨‹åº¦ 10% åˆ° 20% 20% åˆ° 50% 50% åˆ° 100% 100% ä»¥ä¸Š å¤§è½¦ 1ï¼Œ6 6ï¼Œ12 9ï¼Œ12 9ï¼Œ12 å°è½¦ 3ï¼Œ6 6ï¼Œ12 6ï¼Œ12 è¶…é‡ è½¦å‹\\ç¨‹åº¦ 30% ä»¥ä¸‹ 30% åˆ° 50% 50% ä»¥ä¸Š è½½è´§æ±½è½¦ 1 3 6","categories":[{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://skinyi.github.io/categories/%E7%94%9F%E6%B4%BB/"},{"name":"é©¾é©¶","slug":"ç”Ÿæ´»/é©¾é©¶","permalink":"https://skinyi.github.io/categories/%E7%94%9F%E6%B4%BB/%E9%A9%BE%E9%A9%B6/"}],"tags":[{"name":"è®°åˆ†","slug":"è®°åˆ†","permalink":"https://skinyi.github.io/tags/%E8%AE%B0%E5%88%86/"},{"name":"é©¾ç…§","slug":"é©¾ç…§","permalink":"https://skinyi.github.io/tags/%E9%A9%BE%E7%85%A7/"},{"name":"å¼€è½¦","slug":"å¼€è½¦","permalink":"https://skinyi.github.io/tags/%E5%BC%80%E8%BD%A6/"},{"name":"æ³•å¾‹æ³•è§„","slug":"æ³•å¾‹æ³•è§„","permalink":"https://skinyi.github.io/tags/%E6%B3%95%E5%BE%8B%E6%B3%95%E8%A7%84/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹ Linux ä¸‰å‰‘å®¢","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹ Linux ä¸‰å‰‘å®¢","date":"2022-04-07T06:08:05.796Z","updated":"2022-06-09T01:35:34.635Z","comments":true,"path":"2022-04-07-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹ Linux ä¸‰å‰‘å®¢.html","link":"","permalink":"https://skinyi.github.io/2022-04-07-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%20Linux%20%E4%B8%89%E5%89%91%E5%AE%A2.html","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼ RegExp ä¸€ä¸ªåœ¨çº¿å›¾å½¢åŒ–è§£é‡Šæ­£åˆ™è¡¨è¾¾å¼çš„å·¥å…·ç½‘ç«™ã€‚æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„ linux å‘½ä»¤ä¸»è¦æœ‰ï¼šgrepã€sedã€awkã€findã€exprç­‰ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸€èˆ¬ä»¥ä¸€ç³»åˆ—æ ¼å¼æ§åˆ¶å­—ç¬¦æ¥åŒ¹é…å…·æœ‰ç‰¹å®šè§„å¾‹å’Œæ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¦‚ç”µè¯å·ç ã€ç”µå­é‚®ä»¶åœ°å€ç­‰ã€‚ æ­£åˆ™è¯­æ³•é€ŸæŸ¥è¡¨ï¼š ç¬¦å· æ”¯æŒçš„è¯­æ³• æè¿° å½’ç±» å¼€å§‹ã€ç»“æŸåŒ¹é…æ§åˆ¶ ^ Basic RegExp è¡¨ç¤ºä»¥å®ƒåé¢çš„è¡¨è¾¾å¼å¼€å¤´æ‰åŒ¹é… $ Basic RegExp è¡¨ç¤ºä»¥å®ƒå‰é¢çš„è¡¨è¾¾å¼ç»“å°¾æ‰åŒ¹é… å½’ç±» ä¸€äº›ç‰¹æ®Šå­—ç¬¦çš„æ„ä¹‰ . Basic RegExp è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆä¸åŒ¹é… \\nã€\\rï¼‰ ? Extended RegExp è¡¨ç¤ºèµ·ä¸€ä¸ªè¡¨è¾¾å¼åŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡ * Basic RegExp è¡¨ç¤ºå‰ä¸€ä¸ªè¡¨è¾¾å¼åŒ¹é…é›¶æ¬¡æˆ–å¤šæ¬¡ + Extended RegExp è¡¨ç¤ºå‰ä¸€ä¸ªè¡¨è¾¾å¼åŒ¹é…ä¸€æ¬¡æˆ–å¤šæ¬¡ | Extended RegExp è¡¨ç¤ºåœ¨å…¶åˆ†éš”çš„ä¸¤ä¸ªè¡¨è¾¾å¼ä¹‹é—´è¿›è¡Œé€‰æ‹© \\ è¡¨ç¤ºå°†ä¸‹ä¸ªå­—ç¬¦è¿›è¡Œè½¬ä¹‰ () Extended RegExp æ ‡è®°ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸ [] Basic RegExp æ ‡è®°ä¸€ä¸ªä¸­æ‹¬å·è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸ {} Extended RegExp æ ‡è®°é™å®šç¬¦è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸ å½’ç±» Basic RegExp é™¤ * + ? çš„é™å®šç¬¦ï¼Œn å–éè´Ÿæ•´æ•° {n} Extended RegExp è¡¨ç¤ºç²¾ç¡®åŒ¹é… n æ¬¡ {n,} Extended RegExp è¡¨ç¤ºæœ€å°‘åŒ¹é… n æ¬¡ {n,m} Extended RegExp n&lt;mï¼Œè¡¨ç¤ºåŒ¹é… n åˆ° m æ¬¡ å½’ç±» [] é™å®šçš„æ™®é€šå­—ç¬¦ [anychars] Basic RegExp è¡¨ç¤ºåŒ¹é…å…¶ä¸­åˆ—ä¸¾çš„ä»»ä¸€å­—ç¬¦ [^anychars] Basic RegExp è¡¨ç¤ºåŒ¹é…é™¤äº†å…¶ä¸­åˆ—ä¸¾çš„ä»»æ„å­—ç¬¦ [A-Z] Basic RegExp è¡¨ç¤ºåŒ¹é…æ‰€æœ‰å¤§å†™å­—æ¯ä¸­çš„ä¸€ä¸ª å½’ç±» å¸¸è§è½¬ä¹‰å­—ç¬¦ \\s\\S Basic RegExp \\s åŒ¹é…æ‰€æœ‰ç©ºç™½å­—ç¬¦ã€\\S åŒ¹é…æ‰€æœ‰éç©ºç™½å­—ç¬¦ \\w Basic RegExp ç›¸å½“äº [A-Za-z0-9]ï¼ŒåŒ¹é…å¤§å†™å­—æ¯ã€å°å†™å­—æ¯æˆ– 0 åˆ° 9 ä¸­çš„ä¸€ä¸ª \\d Basic RegExp åŒ¹é… 0 åˆ° 9 ä¸­çš„ä¸€ä¸ªæ•° \\t Basic RegExp åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ \\v Basic RegExp åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ \\r Basic RegExp åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ \\f Basic RegExp åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ * å’Œ + é™å®šç¬¦éƒ½æ˜¯è´ªå©ªçš„ï¼Œå³ä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…å­—ç¬¦ï¼ˆæœ€é•¿å­ä¸²ï¼‰ï¼Œåœ¨å®ƒä»¬åé¢åŠ ä¸Š ï¼Ÿé™å®šç¬¦å¹¶æŒ‡å®šä½¿ç”¨ Perl æ­£åˆ™æ¨¡å¼å®ç°éè´ªå©ªæˆ–æœ€å°å­—ä¸²åŒ¹é…ã€‚ ç‰¹æ®Šç¬¦å·è¦åŒ¹é…æœ¬èº«ï¼Œéœ€è¿›è¡Œè½¬ä¹‰ã€‚ ä½¿ç”¨ grep + æ­£åˆ™æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ 1234567891011121314151617grep, egrep, fgrep - æ‰“å°åŒ¹é…ç»™å®šæ¨¡å¼çš„è¡Œ# ç”¨æ³•æ ¼å¼grep [options] PATTERN [FILE...]grep [options] [-e PATTERN | -f FILE] [FILE...]# å¸¸è§é€‰é¡¹-A NUM, --after-context=NUM # æ‰“å°å‡ºåŒ¹é…çš„è¡Œä¹‹åçš„ä¸‹æ–‡ NUM è¡Œ -B NUM, --before-context=NUM # æ‰“å°å‡ºåŒ¹é…çš„è¡Œä¹‹å‰çš„ä¸Šæ–‡ NUM è¡Œ-C NUM, --context=NUM # æ‰“å°é™¤åŒ¹é…è¡Œä¹‹å‰å’Œä¹‹åçš„ä¸Šä¸‹æ–‡ NUM è¡Œ-c NUM, --count # æ‰“å°å‡ºåŒ¹é…çš„æ•°é‡è€Œä¸æ˜¯åŒ¹é…çš„å†…å®¹ï¼Œé…åˆ -v ä¸ºä¸åŒ¹é…çš„æ•°é‡-E, --extended-regexp # ä½¿ç”¨æ‹“å±•æ­£åˆ™è¿›è¡Œè§£é‡ŠåŒ¹é…-P, --perl-regexp # ä½¿ç”¨ perl æ­£åˆ™è¿›è¡Œè§£é‡ŠåŒ¹é…-o, --only-matching # åªæ˜¾ç¤ºåŒ¹é…ä¸­çš„è¡Œä¸­ä¸æ¨¡å¼ç›¸åŒ¹é…çš„éƒ¨åˆ†-v, --invert-match # åªé€‰æ‹©ä¸åŒ¹é…çš„è¡Œï¼ˆåé€‰ï¼‰-w, --word-regexp # åªé€‰æ‹©å«æœ‰èƒ½ç»„æˆå®Œæ•´çš„è¯çš„åŒ¹é…çš„è¡Œã€‚åˆ¤æ–­æ–¹æ³•æ˜¯åŒ¹é…çš„å­å­—ç¬¦ä¸²å¿…é¡»æ˜¯ä¸€è¡Œçš„å¼€å§‹ï¼Œ# æˆ–è€…æ˜¯åœ¨ä¸€ä¸ªä¸å¯èƒ½æ˜¯è¯çš„ç»„æˆçš„å­—ç¬¦ä¹‹åã€‚ä¸æ­¤ç›¸ä¼¼ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€è¡Œçš„ç»“æŸï¼Œæˆ–è€…æ˜¯# åœ¨ä¸€ä¸ªä¸å¯èƒ½æ˜¯è¯çš„ç»„æˆçš„å­—ç¬¦ä¹‹å‰ã€‚è¯çš„ç»„æˆå­—ç¬¦æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œè¿˜æœ‰ä¸‹åˆ’çº¿ã€‚ ğŸŸ¢grep é»˜è®¤æ”¯æŒ Basic RegExp è¯­æ³•ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’é€‰é¡¹ -E ä»¥æ”¯æŒæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼ˆç›¸å½“äº egrep å‘½ä»¤ï¼‰æˆ– -P ä»¥æ”¯æŒ Perl è¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚ 123456789101112131415# æµ‹è¯•æ–‡ä»¶å†…å®¹[skinyi@fedora ~]$ cat -n lyrics.txt 1 Fly me to the moon 2 3 Fly me to the mo0n 4 And let me play @mong the stars 5 (I want you)Let me see what Spring is like 0n Jupiter and Mars 6 In other words,hold my hand 7 _In other words,darling,kiss me 8 Fill m9 heart with song 9 And 1et me sing forever more10 (Because)You are all I long for All I worship and adOre11 in other words,please be true12 in other words,I love you13 12345678910111213# è¿‡æ»¤ç©ºè¡Œ -v åé€‰ -n è¾“å‡ºè¡Œå·[skinyi@fedora ~]$ grep -nv &#x27;^$&#x27; lyrics.txt 1:Fly me to the moon3:Fly me to the mo0n4:And let me play @mong the stars5:(I want you)Let me see what Spring is like 0n Jupiter and Mars6:In other words,hold my hand7:_In other words,darling,kiss me8:Fill m9 heart with song9:And 1et me sing forever more10:(Because)You are all I long for All I worship and adOre11:in other words,please be true12:in other words,I love you 12345678910111213# å»æ‰ä»¥æŸä¸ªå­—ç¬¦å¼€å¤´çš„è¡Œï¼ˆå¸¸ç”¨æ¥å»æ³¨é‡Šï¼‰[skinyi@fedora ~]$ grep -nv &#x27;^(&#x27; lyrics.txt 1:Fly me to the moon2:3:Fly me to the mo0n4:And let me play @mong the stars6:In other words,hold my hand7:_In other words,darling,kiss me8:Fill m9 heart with song9:And 1et me sing forever more11:in other words,please be true12:in other words,I love you13: 1234567# åŒ¹é…ä»¥ i å¼€å¤´ï¼Œe ç»“å°¾çš„æœ€çŸ­å­ä¸²ï¼Œ-P æŒ‡å®šä½¿ç”¨ perl è¯­è¨€çš„æ­£åˆ™è¯­æ³•ï¼Œæ”¯æŒéè´ªå©ªå†™æ³•[skinyi@fedora ~]$ egrep -no &#x27;^i.+?e&#x27; lyrics.txt # ä¸èƒ½è¾¾åˆ°ç›®çš„ 11:in other words,please be true12:in other words,I love[skinyi@fedora ~]$ grep -no -P &#x27;^i.+?e&#x27; lyrics.txt # å¯è¾¾åˆ°ç›®çš„ 11:in othe12:in othe ä½¿ç”¨ sed å‘½ä»¤æµå¼çš„å¤„ç†æ–‡æœ¬æ–‡ä»¶ sed -r æ”¯æŒæ‰©å±•æ­£åˆ™ã€‚Sedæ˜¯ä¸€ä¸ªæµå¼ç¼–è¾‘å™¨ã€‚æµå¼ç¼–è¾‘å™¨æ˜¯ç”¨æ¥åœ¨è¾“å…¥æµï¼ˆä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç®¡é“è¾“å…¥ï¼‰ä¸­å®ŒæˆåŸºæœ¬æ–‡æœ¬è½¬æ¢çš„å·¥å…·ã€‚ sed å‘½ä»¤ä¼šæ ¹æ®è„šæœ¬å‘½ä»¤æ¥å¤„ç†æ–‡æœ¬æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¿™äº›å‘½ä»¤è¦ä¹ˆä»å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼Œè¦ä¹ˆå­˜å‚¨åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œæ­¤å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š æ¯æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ï¼› æ ¹æ®æä¾›çš„è§„åˆ™å‘½ä»¤åŒ¹é…å¹¶ä¿®æ”¹æ•°æ®ã€‚æ³¨æ„ï¼Œsed é»˜è®¤ä¸ä¼šç›´æ¥ä¿®æ”¹æºæ–‡ä»¶æ•°æ®ï¼Œè€Œæ˜¯ä¼šå°†æ•°æ®å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­ï¼Œä¿®æ”¹ä¹Ÿä»…é™äºç¼“å†²åŒºä¸­çš„æ•°æ®ï¼› å°†æ‰§è¡Œç»“æœè¾“å‡ºï¼› å½“ä¸€è¡Œæ•°æ®åŒ¹é…å®Œæˆåï¼Œå®ƒä¼šç»§ç»­è¯»å–ä¸‹ä¸€è¡Œæ•°æ®ï¼Œå¹¶é‡å¤ 1-3 çš„è¿‡ç¨‹ï¼Œç›´åˆ°å°†æ–‡ä»¶ä¸­æ‰€æœ‰è¡Œçš„æ•°æ®å¤„ç†å®Œæ¯•ã€‚ 123456789sed - æ–‡æœ¬ç­›é€‰å’Œæ ¼å¼è½¬æ¢çš„æµå¼ç¼–è¾‘å™¨# ç”¨æ³•æ ¼å¼sed [é€‰é¡¹]... &#123;è„šæœ¬ï¼ˆè‹¥æ²¡æœ‰å…¶ä»–è„šæœ¬ï¼‰&#125; [è¾“å…¥æ–‡ä»¶]...# å¸¸è§é€‰é¡¹-e è„šæœ¬, --expression=è„šæœ¬ # æ·»åŠ  è„šæœ¬ åˆ°ç¨‹åºçš„å¤„ç†å·¥ä½œæµåˆ—è¡¨-f è„šæœ¬æ–‡ä»¶, --file=è„šæœ¬æ–‡ä»¶ # æ·»åŠ  è„šæœ¬æ–‡ä»¶ åˆ°ç¨‹åºçš„å¤„ç†å·¥ä½œæµåˆ—è¡¨-i [æ‰©å±•å], --in-place[=æ‰©å±•å] # ç›´æ¥ä¿®æ”¹æ–‡ä»¶ï¼ˆå¦‚æœæŒ‡å®šæ‹“å±•ååˆ™å¤‡ä»½æ–‡ä»¶ï¼‰-E, -r, --regexp-extended # åœ¨è„šæœ¬æ¨¡å¼ä¸­ä½¿ç”¨æ‹“å±•æ­£åˆ™-n, --quiet, --silent # å–æ¶ˆè‡ªåŠ¨æ‰“å°æ¨¡å¼ç©ºé—´ 12345678910111213141516171819# æµ‹è¯•æ–‡æœ¬[skinyi@fedora ~]$ cat -n lyrics.txt 1 My whole world changed from the moment I met you 2 And it would never be the same 3 Felt like I knew that I always loved you 4 From the moment I heard your name 5 6 Everything was perfect, I knew this love was worth it 7 Our own miracle in the making 8 And till this world stops turning 9 Iâ€™ll still be here waiting and waiting to make that vow that Iâ€™ll... 10 11 Iâ€™ll be by your side 12 Till the day I die 13 Iâ€™ll be waiting till I hear you say I do 14 Something old, something new 15 Something borrowed, something blue 16 Iâ€™ll be waiting till I hear you say I do 17 æ‰“å°å†…å®¹ sed å‘½ä»¤å®ç°æ–‡ä»¶å†…å®¹æ‰“å°é‡‡ç”¨çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š[address][/&#123;front-&#125;pattern/,/&#123;back-pattern/&#125;]pã€‚å…¶ä¸­ address è¡¨ç¤ºæŒ‡å®šè¦æ“ä½œçš„å…·ä½“è¡Œï¼Œ2 æ¡æ–œçº¿å†…å®ç°æŒ‡å®šæ¨¡å¼å†…å®¹çš„æ‰“å°ï¼Œ3 æ¡æ–œçº¿åˆ†éš”ä¸”åŒ…å›´çš„å¯æŒ‡å®šä¸€å®šèŒƒå›´çš„å†…å®¹çš„æŸ¥æ‰¾ï¼ˆè‹¥åæ¨¡å¼æ— æ³•åŒ¹é…åˆ™ä¼šä¸€ç›´æ‰“å°åˆ°æ–‡ä»¶æœ«å°¾ï¼‰ã€‚ 123456# æŸ¥æ‰¾ met å’Œ name ä¹‹é—´çš„å†…å®¹[skinyi@fedora ~]$ sed -nr &#x27;/\\smet\\s/,/\\sname\\s?/p&#x27; lyrics.txt My whole world changed from the moment I met youAnd it would never be the sameFelt like I knew that I always loved youFrom the moment I heard your name 1234567# ä¸æ˜¾ç¤ºç©ºè¡Œå’Œä»¥ I å¼€å¤´çš„è¡Œï¼Œå¸¸ç”¨æ¥è¿›è¡Œé…ç½®æ–‡ä»¶çš„è¿‡æ»¤ï¼ˆI æ›¿ä¸º #ï¼‰[skinyi@fedora ~]$ sed -nr &#x27;/^$|I/!p&#x27; lyrics.txt And it would never be the sameOur own miracle in the makingAnd till this world stops turningSomething old, something newSomething borrowed, something blue ğŸ”´æ³¨æ„ï¼š! ä»£è¡¨æ‰§è¡Œåæ“ä½œï¼Œæ¯”å¦‚ !p ä»£è¡¨åŒ¹é…çš„å†…å®¹ä¸æ‰“å°ï¼ˆä¸åŒ¹é…çš„æ‰“å°ï¼‰ï¼Œ!d ä»£è¡¨åŒ¹é…çš„å†…å®¹ä¸åˆ é™¤ï¼ˆä¸åŒ¹é…çš„åˆ é™¤ï¼‰ã€‚ æŸ¥æ‰¾å¹¶æ›¿æ¢ sed å‘½ä»¤å®ç°æ–‡ä»¶å†…å®¹æŸ¥æ‰¾å¹¶æ›¿æ¢é‡‡ç”¨çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š[address]s/pattern/replacement/flagsã€‚å…¶ä¸­ï¼š address è¡¨ç¤ºæŒ‡å®šè¦æ“ä½œçš„å…·ä½“è¡Œï¼› pattern æŒ‡çš„æ˜¯éœ€è¦æ›¿æ¢çš„å†…å®¹ï¼› replacement æŒ‡çš„æ˜¯è¦æ›¿æ¢çš„æ–°å†…å®¹ï¼› flags ç”¨æ¥å®ç°ä¸€äº›ç‰¹å®šåŠŸèƒ½ã€‚ flags æ ‡è®° åŠŸèƒ½ n n ä¸º 1~512 ä¹‹é—´çš„æ•°å­—ï¼Œè¡¨ç¤ºæŒ‡å®šè¦æ›¿æ¢çš„å­—ç¬¦ä¸²å‡ºç°ç¬¬å‡ æ¬¡æ—¶æ‰è¿›è¡Œæ›¿æ¢ï¼Œä¾‹å¦‚ï¼Œä¸€è¡Œä¸­æœ‰ 3 ä¸ª Aï¼Œä½†ç”¨æˆ·åªæƒ³æ›¿æ¢ç¬¬äºŒä¸ª Aï¼Œè¿™æ˜¯å°±ç”¨åˆ°è¿™ä¸ªæ ‡è®° g å¯¹æ•°æ®ä¸­æ‰€æœ‰åŒ¹é…åˆ°çš„å†…å®¹è¿›è¡Œæ›¿æ¢ï¼Œå¦‚æœæ²¡æœ‰ gï¼Œåˆ™åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŒ¹é…æˆåŠŸæ—¶åšæ›¿æ¢æ“ä½œã€‚ä¾‹å¦‚ï¼Œä¸€è¡Œæ•°æ®ä¸­æœ‰ 3 ä¸ª Aï¼Œåˆ™åªä¼šæ›¿æ¢ç¬¬ä¸€ä¸ª A p ä¼šæ‰“å°ä¸æ›¿æ¢å‘½ä»¤ä¸­æŒ‡å®šçš„æ¨¡å¼åŒ¹é…çš„è¡Œã€‚æ­¤æ ‡è®°é€šå¸¸ä¸ -n é€‰é¡¹ä¸€èµ·ä½¿ç”¨ w file å°†ç¼“å†²åŒºä¸­çš„å†…å®¹å†™åˆ°æŒ‡å®šçš„ file æ–‡ä»¶ä¸­ &amp; ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹è¿›è¡Œæ›¿æ¢ \\n åŒ¹é…ç¬¬ n ä¸ªå­ä¸²ï¼Œè¯¥å­ä¸²ä¹‹å‰åœ¨ pattern ä¸­ç”¨ () æŒ‡å®š \\ è½¬ä¹‰ï¼ˆè½¬ä¹‰æ›¿æ¢éƒ¨åˆ†åŒ…å«ï¼š&amp;ã€\\ ç­‰ï¼‰ 12345678910# å°†æ‰€æœ‰å‡ºç°çš„ do æ›¿æ¢ä¸º willï¼ˆä¸ä¿®æ”¹æºæ–‡ä»¶ï¼‰å¹¶æ¯”è¾ƒ[skinyi@fedora ~]$ sed &#x27;s/do/will/g&#x27; lyrics.txt | colordiff lyrics.txt -13c13&lt; Iâ€™ll be waiting till I hear you say I do---&gt; Iâ€™ll be waiting till I hear you say I will16c16&lt; Iâ€™ll be waiting till I hear you say I do---&gt; Iâ€™ll be waiting till I hear you say I will 123# å°†ç¬¬ 4 è¡Œçš„ heard æ”¹ä¸º knew å¹¶ä»…è¾“å‡ºä¿®æ”¹çš„è¡Œï¼ˆä¸ä¿®æ”¹æºæ–‡ä»¶ï¼‰[skinyi@fedora ~]$ sed -n &#x27;4s/heard/knew/p&#x27; lyrics.txtFrom the moment I knew your name 123# å°†ç¬¬ 13 è¡Œçš„ç¬¬ä¸‰ä¸ª I æ”¹ä¸º we å¹¶ä»…è¾“å‡ºä¿®æ”¹çš„è¡Œï¼ˆä¸ä¿®æ”¹æºæ–‡ä»¶ï¼‰[skinyi@fedora ~]$ sed -n &#x27;13s/I/we/3p&#x27; lyrics.txtIâ€™ll be waiting till I hear you say we do ğŸ”µæ³¨æ„ï¼šåŒ¹é…æ¨¡å¼å­—ç¬¦ä¸²åŒ…å« / æ—¶éœ€è¦è¿›è¡Œè½¬ä¹‰ã€‚ æ¡ˆä¾‹ï¼šä»…æ‰“å°ç½‘å¡ ens160 çš„ ip 12[skinyi@fedora gh-pages]$ ip addr show ens160 | sed -nr &#x27;4s#(^.*t )(.*)(/.*$)#\\2#gp&#x27; # \\2 è¡¨ç¤ºç¬¬äºŒç»„192.168.30.128 åˆ é™¤æ–‡ä»¶ä¸­çš„ç‰¹å®šè¡Œï¼ˆå•è¡Œæˆ–è¿ç»­è¡Œï¼‰ sed å‘½ä»¤å®ç°åˆ é™¤æ–‡ä»¶ä¸­çš„ç‰¹å®šè¡Œçš„åŸºæœ¬æ ¼å¼ä¸ºï¼š[address]dï¼Œå…¶ä¸­ address è¡¨ç¤ºæŒ‡å®šè¦æ“ä½œçš„å…·ä½“è¡Œï¼Œå½“ä¸æŒ‡å®šåœ°å€æ—¶ä»£è¡¨åˆ é™¤æ‰€æœ‰è¡Œã€‚ ä»¥ä¸‹ä¾‹å­è¿˜æ˜¯ä»¥ä¸Šè¿° lyrics.txt æ–‡ä»¶ä¸ºèŒƒä¾‹ã€‚ 123# åˆ é™¤æ‰€æœ‰è¡Œï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰[skinyi@fedora ~]$ sed &#x27;d&#x27; lyrics.txt[skinyi@fedora ~]$ 1234# åˆ é™¤ç¬¬ 12 è¡Œï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰[skinyi@fedora ~]$ sed &#x27;12d&#x27; lyrics.txt | cdiff lyrics.txt - # alias cdiff=&#x27;colordiff&#x27;ï¼Œä¸‹åŒ12d11&lt; Till the day I die 123456# åˆ é™¤ç¬¬ 11 åˆ° 13 è¡Œï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰[skinyi@fedora ~]$ sed &#x27;11,13d&#x27; lyrics.txt | cdiff lyrics.txt -11,13d10&lt; Iâ€™ll be by your side&lt; Till the day I die&lt; Iâ€™ll be waiting till I hear you say I do 1234567891011# åˆ é™¤ç¬¬ 10 è¡Œåˆ°æœ€åä¸€è¡Œï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰[skinyi@fedora ~]$ sed &#x27;10,$d&#x27; lyrics.txt | cdiff lyrics.txt - # $ä»£è¡¨æœ€åä¸€è¡Œçš„è¡Œå·10,17d9&lt; &lt; Iâ€™ll be by your side&lt; Till the day I die&lt; Iâ€™ll be waiting till I hear you say I do&lt; Something old, something new&lt; Something borrowed, something blue&lt; Iâ€™ll be waiting till I hear you say I do&lt; å¢åŠ å†…å®¹ï¼ˆä»¥è¡Œä¸ºå•ä½ï¼‰ sed å‘½ä»¤å®ç°æ–‡ä»¶ä¸­å¢åŠ ç‰¹å®šå†…å®¹è¡Œçš„åŸºæœ¬æ ¼å¼ä¸ºï¼šsed [address]&#123;a|n&#125;\\new_contentï¼Œå…¶ä¸­ a ä»£è¡¨å‘æŒ‡å®šä½ç½®åé¢æ’å…¥å†…å®¹ã€i ä»£è¡¨å‘æŒ‡å®šä½ç½®å‰é¢æ’å…¥å†…å®¹ã€address è¡¨ç¤ºæŒ‡å®šè¦æ“ä½œçš„å…·ä½“è¡Œï¼Œä¸æŒ‡å®šåˆ™åœ¨æ¯è¡Œå‰é¢æˆ–åé¢æ·»åŠ å†…å®¹ã€‚ 123456789101112# ç»™æ¯è¡Œåé¢æ·»åŠ  ----------------------------------------------------ï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰ï¼Œå¹¶æŸ¥çœ‹å‰ 10 è¡Œ[skinyi@fedora ~]$ sed &#x27;a\\-------------------------------------------------&#x27; lyrics.txt | head -10My whole world changed from the moment I met you-------------------------------------------------And it would never be the same-------------------------------------------------Felt like I knew that I always loved you-------------------------------------------------From the moment I heard your name-------------------------------------------------------------------------------------------------- 1234567# ç»™ç¬¬ 1 è¡Œå‰å¢åŠ  911 - I Doï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰ï¼Œå¹¶æŸ¥çœ‹å‰ 5 è¡Œ[skinyi@fedora ~]$ sed &#x27;1i\\911 - I Do&#x27; lyrics.txt | head -5911 - I DoMy whole world changed from the moment I met youAnd it would never be the sameFelt like I knew that I always loved youFrom the moment I heard your name 1234567# æ·»åŠ å¤šè¡Œå¯ä»¥ä½¿ç”¨ \\n è½¬ä¹‰å­—ç¬¦ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š[skinyi@fedora ~]$ sed &#x27;1i\\I Do\\n911&#x27; lyrics.txt | head -5I Do911My whole world changed from the moment I met youAnd it would never be the sameFelt like I knew that I always loved you æ›¿æ¢æ•´è¡Œ sed å‘½ä»¤å®ç°æ–‡ä»¶ä¸­æ›¿æ¢æŸè¡Œçš„å†…å®¹çš„åŸºæœ¬æ ¼å¼ä¸ºï¼šsed [address]c\\new_contentï¼Œå…¶ä¸­ address è¡¨ç¤ºæŒ‡å®šè¦æ“ä½œçš„å…·ä½“è¡Œï¼Œä¸æŒ‡å®šåˆ™ä¼šå°†æ¯è¡Œçš„å†…å®¹éƒ½æ›¿æ¢æˆæ–°è¡Œã€‚ 12345# æ›´æ”¹é¦–è¡Œå†…å®¹ä¸º Your partial heart got broken from the moment you left meï¼ˆä»…åœ¨ç¼“å†²åŒºï¼‰å¹¶æŸ¥çœ‹å‰ä¸‰è¡Œ[skinyi@fedora ~]$ sed &#x27;1c\\Your partial heart got broken from the moment you left me&#x27; lyrics.txt | head -3Your partial heart got broken from the moment you left meAnd it would never be the sameFelt like I knew that I always loved you ä½¿ç”¨ awk å®ç°æ–‡æœ¬æ‰«æå¤„ç† AWK æ˜¯ä¸€é—¨å®ç°æ–‡æœ¬æ‰«æä¸å¤„ç†çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¸¸ç”¨æ¥å®ç°æ–‡æœ¬è¿‡æ»¤ã€ç»Ÿè®¡ã€è®¡ç®—ç­‰ã€‚awk å°†æ–‡æœ¬æ–‡ä»¶æŒ‰ç…§æŒ‡å®šï¼ˆæˆ–é»˜è®¤ï¼‰çš„åˆ†éš”ç¬¦æŠ½è±¡æˆä¸€ä¸ªä¸å¤ªä¸¥æ ¼çš„è¡¨æ ¼ï¼ˆæ¯åˆ—ä¸ä¸€å®šç­‰é•¿ï¼‰ï¼Œç»§è€Œå®ç°å¯¹æ–‡æœ¬çš„ç²¾ç¡®å¤„ç†ï¼Œawk æŠ½è±¡å’Œè¡¨æ ¼çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š è¡¨æ ¼æ¦‚å¿µ awk ä¸­çš„æ¦‚å¿µ awk é»˜è®¤åˆ†éš”ç¬¦ awk å†…ç½®å˜é‡åŠä½œç”¨ è¡Œ Row è®°å½• Record æ¢è¡Œ \\n NR æŒ‡å®šè®°å½•å· åˆ— Column å­—æ®µ Feild ç©ºç™½å­—ç¬¦ \\s NF è·å–åˆ—æ•° 12345678# ç”¨æ³•æ ¼å¼awk - æ¨¡å¼æ‰«æå¤„ç†å·¥å…·awk [ options ] -f program-file [ - ] file ...awk [ options ] [ - ] program-text file ...## awk ç¨‹åºä¸­çš„ BEGIN&#123;&#125;ã€END&#123;&#125; åˆ†åˆ«æ§åˆ¶è¯»å–æ–‡ä»¶ä¹‹å‰å’Œè¯»å–æ–‡ä»¶ç»“æŸçš„è¿‡ç¨‹ã€‚# å¸¸è§é€‰é¡¹-v var=new_var # ä¿®æ”¹ awk å†…ç½®å˜é‡çš„å–å€¼ï¼Œå¦‚ï¼š-v OFS=:ï¼ˆæ‰“å°å­—æ®µæ—¶ä»¥å†’å·åˆ†éš”ï¼‰-F fs, --field-separator fs # æŒ‡å®š fs ä½œä¸ºæ¯åˆ—çš„åˆ†éš”ç¬¦ï¼Œç›¸å½“äº -v FS=fsã€‚ ç”¨æ³•ç¤ºä¾‹ 123456789101112# æ‰“å° 1 åˆ° 3 è¡Œçš„å†…å®¹[skinyi@fedora ~]$ awk &#x27;NR==1,NR==3 &#123;print&#125;&#x27; lyrics.txt My whole world changed from the moment I met youAnd it would never be the sameFelt like I knew that I always loved you# æ‰“å° 2 å’Œ 6 è¡Œçš„å†…å®¹[skinyi@fedora ~]$ awk &#x27;NR==2 || NR==6 &#123;print&#125;&#x27; lyrics.txt And it would never be the sameEverything was perfect, I knew this love was worth it# æ‰“å°ä»¥ Everything å¼€å¤´çš„è¡Œ[skinyi@fedora ~]$ awk &#x27;/^Everything/&#123;print&#125;&#x27; lyrics.txt Everything was perfect, I knew this love was worth it","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰","date":"2022-04-01T06:40:56.259Z","updated":"2022-04-07T05:59:22.604Z","comments":true,"path":"2022-04-01-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸‰ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-04-01-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%B8%89%EF%BC%89.html","excerpt":"","text":"Shell æ¡ä»¶æµ‹è¯• æ¡ä»¶æµ‹è¯•åªä¼šå¾—åˆ°çœŸä¸å‡ä¸¤ç§ç»“æœï¼Œå¸¸ä¸ if åˆ¤æ–­è¯­å¥ç»“åˆè¿›è¡Œå…·æœ‰ä¸€å®šå¤æ‚é€»è¾‘çš„å·¥ä½œã€‚ä»¥ä¸‹æ˜¯ shell æ¡ä»¶æµ‹è¯•ä¸­ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„è¯­æ³•ï¼š æ¡ä»¶æµ‹è¯•è¿”å› 0 æ—¶è¡¨ç¤ºçœŸï¼Œè¿”å›å…¶ä»–é 0 å€¼æ—¶è¡¨ç¤ºå‡ï¼Œè·Ÿå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸ä¸€è‡´ï¼ è¯­æ³• æè¿° test &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; åˆ©ç”¨ test å‘½ä»¤è¿›è¡Œæ¡ä»¶æµ‹è¯•ï¼Œæ³¨æ„ test å‘½ä»¤å’Œå‚æ•°ä¹‹é—´å­˜åœ¨ç©ºæ ¼ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] æ¨èã€‚ç­‰ä»·äºä¸Šæ¡è¯­æ³•ï¼Œæ³¨æ„å·¦å³ä¸­æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å­˜åœ¨ç©ºæ ¼ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] æ‰©å±•è¯­æ³•ï¼Œè¾ƒæ–°ï¼Œéƒ¨åˆ†è§£é‡Šå™¨å¯èƒ½ä¸æ”¯æŒï¼Œæ³¨æ„å·¦å³åŒä¸­æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å­˜åœ¨ç©ºæ ¼ ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) ä¸€èˆ¬ç”¨äº if è¯­å¥ï¼Œå·¦å³åŒå°æ‹¬å·å’Œè¡¨è¾¾å¼ä¹‹é—´å¯ä»¥ä¸å­˜åœ¨ç©ºæ ¼ test &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; å’Œ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] è¯­æ³• è¿™ä¸¤ç§è¯­æ³•éœ€è¦è®°å¿†ä¸€äº›æ¶‰åŠæ–‡ä»¶ã€é€»è¾‘åˆ¤æ–­ä½¿ç”¨çš„ç‰¹æ®Šé€‰é¡¹ç¬¦å·ï¼Œå°†å…¶æ•´ç†å¦‚ä¸‹ï¼š æ–‡ä»¶æµ‹è¯•è¯­æ³• æ–‡ä»¶æµ‹è¯•è¯­æ³• æè¿° å½’ç±» æ–‡ä»¶å­˜åœ¨ã€ç±»å‹åˆ¤æ–­ -e pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨æ—¶è¿”å›çœŸ -s filename å½“ filename å­˜åœ¨å¹¶ä¸”æ–‡ä»¶å¤§å°å¤§äº 0 æ—¶è¿”å›çœŸ -f filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å¸¸è§„æ–‡ä»¶æ—¶è¿”å›çœŸ -d pathname å½“ pathname å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•æ—¶è¿”å›çœŸ -b filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å—æ–‡ä»¶æ—¶è¿”å›çœŸ -c filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å­—ç¬¦æ–‡ä»¶æ—¶è¿”å›çœŸ -S filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯ socket æ—¶è¿”å›çœŸ -p filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯å‘½åç®¡é“æ—¶è¿”å›çœŸ -h filename å½“ filename å­˜åœ¨å¹¶ä¸”æ˜¯ç¬¦å·é“¾æ¥æ–‡ä»¶æ—¶è¿”å›çœŸ (æˆ– -L filename) -t fd å½“ fd æ˜¯ä¸ç»ˆç«¯è®¾å¤‡ç›¸å…³è”çš„æ–‡ä»¶æè¿°ç¬¦æ—¶è¿”å›çœŸ å½’ç±» æ–‡ä»¶æƒé™ä½åˆ¤æ–­ -r pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯è¯»æ—¶è¿”å›çœŸ -w pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯å†™æ—¶è¿”å›çœŸ -x pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”å¯æ‰§è¡Œæ—¶è¿”å›çœŸ -u pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº† SUID ä½æ—¶è¿”å›çœŸ -g pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº† SGID ä½æ—¶è¿”å›çœŸ -k pathname å½“ç”± pathname æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨å¹¶ä¸”è®¾ç½®äº†&quot;ç²˜æ»&quot;ä½æ—¶è¿”å›çœŸ -O pathname å½“ç”± pathname å­˜åœ¨å¹¶ä¸”è¢«å½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ· id çš„ç”¨æˆ·æ‹¥æœ‰æ—¶è¿”å›çœŸ(å­—æ¯ O å¤§å†™) -G pathname å½“ç”± pathname å­˜åœ¨å¹¶ä¸”å±äºå½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ· id çš„ç”¨æˆ·çš„ç”¨æˆ·ç»„æ—¶è¿”å›çœŸ å½’ç±» ä¸¤ä¸ªæ–‡ä»¶çš„æ¯”è¾ƒ file1 -nt file2 file1 æ¯” file2 æ–°æ—¶è¿”å›çœŸ file1 -ot file2 file1 æ¯” file2 æ—§æ—¶è¿”å›çœŸ file1 -ef file2 file1 å’Œ file2 æ˜¯åŒä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥æ—¶è¿”å›çœŸ é€»è¾‘æµ‹è¯•è¯­æ³• é€»è¾‘æµ‹è¯•è¯­æ³• æè¿° -a é€»è¾‘ä¸ï¼Œæ“ä½œç¬¦ä¸¤è¾¹å‡ä¸ºçœŸï¼Œç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚ -o é€»è¾‘éï¼Œæ“ä½œç¬¦ä¸¤è¾¹ä¸€è¾¹ä¸ºçœŸï¼Œç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚ ! å–éï¼Œæ¡ä»¶ä¸ºå‡ï¼Œç»“æœä¸ºçœŸã€‚ å¸¸è§å­—ç¬¦ä¸²æµ‹è¯•è¯­æ³• å¸¸è§å­—ç¬¦ä¸²æµ‹è¯•è¯­æ³• æè¿° -z string å­—ç¬¦ä¸² string ä¸ºç©ºä¸²(é•¿åº¦ä¸º0)æ—¶è¿”å›çœŸ -n string å­—ç¬¦ä¸² string ä¸ºéç©ºä¸²æ—¶è¿”å›çœŸ str1 = str2 å­—ç¬¦ä¸² str1 å’Œå­—ç¬¦ä¸² str2 ç›¸ç­‰æ—¶è¿”å›çœŸ str1 == str2 åŒ = str1 != str2 å­—ç¬¦ä¸² str1 å’Œå­—ç¬¦ä¸² str2 ä¸ç›¸ç­‰æ—¶è¿”å›çœŸ str1 &lt; str2 æŒ‰å­—å…¸é¡ºåºæ’åºï¼Œå­—ç¬¦ä¸² str1 åœ¨å­—ç¬¦ä¸² str2 ä¹‹å‰ str1 &gt; str2 æŒ‰å­—å…¸é¡ºåºæ’åºï¼Œå­—ç¬¦ä¸² str1 åœ¨å­—ç¬¦ä¸² str2 ä¹‹å å¸¸è§æ•°å€¼æµ‹è¯•è¯­æ³• å¸¸è§æ•°å€¼æµ‹è¯•è¯­æ³• æè¿° int1 -eq int2 å¦‚æœ int1 ç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -ne int2 å¦‚æœ int1 ä¸ç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -lt int2 å¦‚æœ int1 å°äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -le int2 å¦‚æœ int1 å°äºç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -gt int2 å¦‚æœ int1 å¤§äº int2ï¼Œåˆ™è¿”å›çœŸ int1 -ge int2 å¦‚æœ int1 å¤§äºç­‰äº int2ï¼Œåˆ™è¿”å›çœŸ å•ä¸­æ‹¬å·è¯­æ³•å¼•ç”¨å˜é‡é™¤äº†è¦ä½¿ç”¨ $ ç¬¦å·è¿˜éœ€è¦ç”¨å¼•å·å°†å˜é‡æ‹¬èµ·æ¥ã€‚ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³• å¤§éƒ¨åˆ†æƒ…å½¢ä¸‹ï¼ŒåŒä¸­æ‹¬å·è¯­æ³•ä¸ test å’Œå•ä¸­æ‹¬å·è¯­æ³•é€šç”¨ï¼Œä½†æ˜¯ä»å­˜åœ¨ä»¥ä¸‹åŒºåˆ«ï¼š é€»è¾‘æµ‹è¯• [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­ä½¿ç”¨ &amp;&amp;ã€|| è¡¨ç¤ºé€»è¾‘ä¸å’Œé€»è¾‘éï¼Œä½†åœ¨ [ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ] è¯­æ³•ä¸­ä½¿ç”¨ -a å’Œ -o è¿ç®—ç¬¦ã€‚ é€šé…ç¬¦å’Œæ­£åˆ™ [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­æ”¯æŒä½¿ç”¨é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼ã€‚ å­—ç¬¦ä¸² [[ &lt;æµ‹è¯•è¡¨è¾¾å¼&gt; ]] è¯­æ³•ä¸­åŒ¹é…å­—ç¬¦ä¸²æˆ–é€šé…ç¬¦ä¸éœ€è¦å¼•å·æ‹¬èµ·æ¥ã€‚ ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) è¯­æ³• ((&lt;æµ‹è¯•è¡¨è¾¾å¼&gt;)) åªæ”¯æŒç®—æœ¯è¿ç®—æ¯”è¾ƒã€‚ æ¡ˆä¾‹ï¼šåˆ¤æ–­ç£ç›˜æ˜¯å¦æŒ‚è½½ä¸”æŒ‚è½½ç‚¹å¯¹å½“å‰ç”¨æˆ·æ˜¯å¦å¯è¯»å¯å†™ check_disk.sh123456789#!/bin/shdev_name=&quot;sdb1&quot;dev_path=&quot;/dev/$dev_name&quot;mnt_path=&quot;/mnt/data&quot;if [ -b &quot;$dev_path&quot; -a -r &quot;$mnt_path&quot; -a -w &quot;$mnt_path&quot; ]; then echo &quot;ç£ç›˜ $dev_path å·²æŒ‚è½½ä¸”å½“å‰ç”¨æˆ·å¯è¯»å†™ï¼&quot;else echo &quot;ç£ç›˜æœªæŒ‚è½½æˆ–å¯¹å½“å‰ç”¨æˆ·ä¸å¯è¯»æˆ–ä¸å¯å†™ï¼&quot;fi Shell åˆ†æ”¯è¯­å¥ç»“æ„ if åˆ¤æ–­è¯­å¥ if è¯­å¥æ”¯æŒå•åˆ†æ”¯å’Œå¤šåˆ†æ”¯é€‰æ‹©ç»“æ„ï¼Œå•/åŒåˆ†æ”¯è¯­å¥çš„ä¸€èˆ¬æ ¼å¼æ˜¯ï¼š 12345if æ¡ä»¶; then æ¡ä»¶ä¸ºçœŸæ‰§è¡Œçš„è¯­å¥else æ¡ä»¶ä¸ºå‡æ‰§è¡Œçš„è¯­å¥ # å•åˆ†æ”¯æ—¶ä¸ç”¨ else çš„éƒ¨åˆ†fi å¯¹äºå¤šåˆ†æ”¯ï¼š 123456789if æ¡ä»¶1; then æ¡ä»¶1æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥elif æ¡ä»¶2; then æ¡ä»¶2æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥elif æ¡ä»¶n; then æ¡ä»¶næˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥else ä»¥ä¸Šæ¡ä»¶éƒ½ä¸æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥fi ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ï¼Œæ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨ break å…³é”®å­—è¿›è¡Œè·³å‡ºã€‚ æ¡ˆä¾‹ï¼šç¼–å†™è„šæœ¬ç›‘æµ‹å¯ç”¨å‰©ä½™å†…å­˜å¹¶å‘é‚®ä»¶æŠ¥è­¦ è¦æ±‚ï¼š å½“å†…å­˜å¯ç”¨å¤§å°å°äº 100m æ—¶å‘é‚®ä»¶è¿›è¡ŒæŠ¥è­¦ï¼› å°†è„šæœ¬åŠ å…¥ crontab ä»»åŠ¡ï¼Œå®šæ—¶æ¯ 30 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ check_mem.sh123456#!/bin/shmem_free=`free -m|awk &#x27;NR==2 &#123;print $NF&#125;&#x27;`if test $mem_free -lt &#x27;100&#x27;; then local msg=&quot;å½“å‰å¯ç”¨å†…å­˜ä¸º $&#123;mem_free&#125;mï¼Œå·²ä¸è¶³ 100mï¼&quot; echo msg | mail -s &#x27;æœåŠ¡å™¨å†…å­˜å‘Šè­¦&#x27; user@mailsrv.comfi æ‰§è¡Œ crontab -eï¼Œå†™å…¥å®šæ—¶ä»»åŠ¡ï¼š 1* /30 * * * * /bin/bash /path/to/scripts/check_mem.sh case in åˆ¤æ–­è¯­å¥ Case in è¯­å¥ä¸€èˆ¬ç”¨äºå¤šåˆ†æ”¯ä¸”åˆ¤æ–­æ¡ä»¶è¾ƒç®€å•çš„åˆ†æ”¯è¯­å¥ç»“æ„ã€‚Case in è¯­å¥çš„ä¸€èˆ¬æ ¼å¼æ˜¯ï¼š 12345678910111213case è¡¨è¾¾å¼ in åŒ¹é…æ¨¡å¼1) åŒ¹é…æ¨¡å¼1æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; åŒ¹é…æ¨¡å¼2) åŒ¹é…æ¨¡å¼2æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; åŒ¹é…æ¨¡å¼n) åŒ¹é…æ¨¡å¼næˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥ ;; *) å…¶ä»–åŒ¹é…æ¨¡å¼éƒ½ä¸æˆç«‹æ—¶æ‰§è¡Œçš„è¯­å¥esac å…¶ä¸­ï¼Œè¡¨è¾¾å¼æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå˜é‡ã€ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­¦è®¡ç®—è¡¨è¾¾å¼ï¼Œæˆ–è€…æ˜¯å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œåªè¦èƒ½å¤Ÿå¾—åˆ°è¡¨è¾¾å¼çš„å€¼å°±å¯ä»¥ï¼›åŒ¹é…æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼›;; çš„ä½œç”¨ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ case è¯­å¥ä¸­çš„ breakï¼›*) çš„ä½œç”¨ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ case è¯­å¥ä¸­çš„ defaultã€‚ æ¡ˆä¾‹ï¼šæ¨¡æ‹Ÿå®ç°æœåŠ¡å¯åœã€é‡å¯ã€æŸ¥è¯¢çš„ç®¡ç†è„šæœ¬ service.sh12345678910111213141516171819#!/bin/shcase $1 in start) echo &quot;æœåŠ¡å¯åŠ¨æˆåŠŸï¼&quot; ;; stop) echo &quot;æœåŠ¡åœæ­¢æˆåŠŸï¼&quot; ;; restart) echo &quot;é‡å¯æœåŠ¡æˆåŠŸï¼&quot; ;; status) echo &quot;å‘ƒã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&quot; ;; *) echo &quot;Usage: $0 &#123;start|stop|restart|status&#125;&quot; exit 1esacexit 0 Shell å¾ªç¯è¯­å¥ç»“æ„ for å¾ªç¯ 12345# list æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥æ˜¯æ•°å­—æˆ–å­—ç¬¦ä¸²åºåˆ—ï¼Œå…ƒç´ ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€for $variable in &#123;list&#125; # æˆ– &#123;start..end..step&#125;ï¼Œå¦‚ &#123;1..100..2&#125;è¡¨ç¤ºä»1éƒ½100ï¼Œæ¯æ¬¡è‡ªå¢ 2 do do_something...done ç±»ä¼¼ C è¯­è¨€ï¼š 1234for (( expression1;expression2;expression3 ))do do_something...done ä¾‹å­ï¼š 123456789101112131415161718192021# å¾ªç¯åˆ—è¡¨for i in 1 2 3 4 5 6 7 8do echo $idone# å¾ªç¯åºåˆ—ï¼Œè‡ªå®šä¹‰æ­¥é•¿for i in &#123;1..10..2&#125;do echo $idone# ç±»ä¼¼ C è¯­è¨€for (( i=1;i&lt;10;++i ))do echo $idone# éå†æ•°ç»„array=(1 2 3 4 5) # å®šä¹‰æ•°ç»„for i in $&#123;array[*]&#125;do echo $idone while å¾ªç¯ 1234while [è¡¨è¾¾å¼]do do_something...done until å¾ªç¯ 1234until [è¡¨è¾¾å¼]do do_something...done å¾ªç¯ç»“æ„ä¹Ÿå¯ä»¥ä½¿ç”¨ break,continue å…³é”®å­—è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚ å‡½æ•° åŸºæœ¬æ ¼å¼ï¼š 12345678910111213141516171819# å®šä¹‰å‡½æ•°ï¼Œfunctionã€return å…³é”®å­—å¯çœç•¥ ## æ ‡å‡†å†™æ³•function func_name()&#123; do_something... return ret_val&#125;## çœç•¥èŠ±æ‹¬å·function func_name( do_something... return ret_val)## ä¸€èˆ¬å†™æ³•func_name()&#123; do_something... retuen ret_val&#125;# è°ƒç”¨å‡½æ•°ï¼Œå…¶ä¸­ arg1 arg2 ... argN éƒ½æ˜¯å‚æ•°func_name arg1 arg2 ... argN# å¿…é¡»å…ˆå®šä¹‰å†è°ƒç”¨ åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œä¸€æŠŠå°† shell çš„å‡½æ•°å®šä¹‰å’Œå‡½æ•°è°ƒç”¨åˆ†å¸ƒåœ¨ä¸¤ä¸ªè„šæœ¬æ–‡ä»¶ä¸­ï¼Œæ­¤è¡Œä¸ºæœ‰ç‚¹ç±»ä¼¼ C è¯­è¨€ç¼–ç¨‹ä¸­è®¾ç½®å¤´æ–‡ä»¶çš„è¡Œä¸ºï¼Œå…¶åˆè¡·æ˜¯æ¨¡å—åŒ–ç¼–ç¨‹ã€‚ def_func.sh1234function my_func()&#123; echo &quot;å•ç‹¬å®šä¹‰çš„å‡½æ•°ã€‚&quot; return 0&#125; è°ƒç”¨ç‹¬ç«‹å®šä¹‰çš„å‡½æ•°ï¼š exec_func.sh123456#!/bin/shfunc_path=&quot;/path/to/def_func.sh&quot;# åˆ¤æ–­å‡½æ•°æ–‡ä»¶æ˜¯å¦å­˜åœ¨[ -f func_path ] &amp;&amp; . func_path || &#123;echo &quot;æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š$func_path&quot; 2&gt;&amp;1; exit 1&#125;# è°ƒç”¨å‡½æ•°my_func å‡½æ•°å†…éƒ¨ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šå˜é‡ï¼Œå¯è¿›è¡Œä¼ é€’çš„å‚æ•°ç­‰çš„å¤„ç†ï¼Œå¯å‚è€ƒè°ƒç”¨ shell è„šæœ¬æ—¶å†…éƒ¨çš„ç‰¹æ®Šå˜é‡ï¼Œè„šæœ¬çš„ç‰¹æ®Šå˜é‡ä¸ä¼šè¢«å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç»§æ‰¿ï¼Œéœ€è¦å±‚å±‚ä¼ é€’ã€‚ è°ƒè¯• shell è„šæœ¬ åˆ©ç”¨ bash -x æ˜¾ç¤ºè„šæœ¬æ‰§è¡Œè¿‡ç¨‹ 12345678910111213141516171819202122232425[skinyi@fedora ~]$ bash -x check_website_status.sh baidu.com+ req_url=+ req_timeout=5+ req_fails=0+ req_alert_fails=10+ req_wait_time=1+ check_parameters baidu.com+ &#x27;[&#x27; 1 -ne 1 &#x27;]&#x27;+ req_url=baidu.com+ check_status+ true+ curl --head --connect-timeout 5 -s -f baidu.com -o /dev/null+ &#x27;[&#x27; 0 -ne 0 &#x27;]&#x27;++ date --rfc-3339=seconds+ local &#x27;date=2022-04-07 13:43:55+08:00&#x27;+ echo &#x27;2022-04-07 13:43:55 æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚&#x27;2022-04-07 13:43:55 æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚+ sleep 1+ true+ curl --head --connect-timeout 5 -s -f baidu.com -o /dev/null+ &#x27;[&#x27; 0 -ne 0 &#x27;]&#x27;++ date --rfc-3339=seconds+ local &#x27;date=2022-04-07 13:43:56+08:00&#x27;+ echo &#x27;2022-04-07 13:43:56 æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚&#x27;2022-04-07 13:43:56 æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚ ä½¿ç”¨ set -x å’Œ set +x åŒ…å›´è¦è°ƒè¯•çš„ä»£ç å— 1234567891011[skinyi@fedora ~]$ cat more_than_3.sh #!/bin/shstr_count=0for word in $@;do set -x if [ `expr length $word` -gt 3 ]; then let str_count+=1 fi set +xdoneecho &quot;å¤§äº 3 çš„æ‹¼éŸ³/å•è¯ä¸ªæ•°ä¸ºï¼š$str_count&quot; æ‰§è¡Œè„šæœ¬ï¼š 1234567891011121314151617181920212223242526272829[skinyi@fedora ~]$ ./more_than_3.sh ni bu shi zhen zheng de kuai le++ expr length ni+ &#x27;[&#x27; 2 -gt 3 &#x27;]&#x27;+ set +x++ expr length bu+ &#x27;[&#x27; 2 -gt 3 &#x27;]&#x27;+ set +x++ expr length shi+ &#x27;[&#x27; 3 -gt 3 &#x27;]&#x27;+ set +x++ expr length zhen+ &#x27;[&#x27; 4 -gt 3 &#x27;]&#x27;+ let str_count+=1+ set +x++ expr length zheng+ &#x27;[&#x27; 5 -gt 3 &#x27;]&#x27;+ let str_count+=1+ set +x++ expr length de+ &#x27;[&#x27; 2 -gt 3 &#x27;]&#x27;+ set +x++ expr length kuai+ &#x27;[&#x27; 4 -gt 3 &#x27;]&#x27;+ let str_count+=1+ set +x++ expr length le+ &#x27;[&#x27; 2 -gt 3 &#x27;]&#x27;+ set +xå¤§äº 3 çš„æ‹¼éŸ³/å•è¯ä¸ªæ•°ä¸ºï¼š3","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰","date":"2022-03-30T08:03:08.891Z","updated":"2022-04-07T02:26:16.026Z","comments":true,"path":"2022-03-30-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆäºŒï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-03-30-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%BA%8C%EF%BC%89.html","excerpt":"","text":"å¼•ç”¨å‘½ä»¤çš„ç»“æœ `command` $(command) ä¾‹ï¼š 1234[skinyi@fedora ~]$ echo &quot;å½“å‰æ—¥æœŸæ˜¯ï¼š`date`&quot;å½“å‰æ—¥æœŸæ˜¯ï¼š2022å¹´ 03æœˆ 31æ—¥ æ˜ŸæœŸå›› 11:13:50 CST[skinyi@fedora ~]$ echo &quot;å½“å‰ç”¨æˆ·çš„ id æ˜¯ï¼š$(id -u)&quot;å½“å‰ç”¨æˆ·çš„ id æ˜¯ï¼š1000 Shell è¿ç®—ç¬¦ Shell å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸åŒï¼ŒShell ä¸èƒ½ç›´æ¥è¿›è¡Œç®—æ•°è¿ç®—ï¼Œå¿…é¡»ä½¿ç”¨æ•°å­¦è®¡ç®—å‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯ Shell ä¸­ä½¿ç”¨çš„ç®—æ•°è¿ç®—ç¬¦ï¼š Shell ç®—æ•°è¿ç®—ç¬¦ æ„ä¹‰ï¼ˆå¸¦ * ä»£è¡¨å¸¸ç”¨ï¼‰ +ã€- åŠ æ³•ï¼ˆæˆ–æ­£å·ï¼‰ã€å‡æ³•ï¼ˆæˆ–è´Ÿå·ï¼‰ * *ã€/ã€% ä¹˜æ³•ã€é™¤æ³•ã€å–ä½™ï¼ˆå–æ¨¡ï¼‰ * ** å¹‚è¿ç®— * ++ã€-- è‡ªå¢ã€è‡ªå‡ * !ã€&amp;&amp;ã€|| é€»è¾‘éï¼ˆå–åï¼‰ã€é€»è¾‘ä¸ï¼ˆandï¼‰ã€é€»è¾‘æˆ–ï¼ˆorï¼‰ * &lt;ã€&lt;=ã€&gt;ã€&gt;= å°äºã€å°äºç­‰äºã€å¤§äºã€å¤§äºç­‰äº ==ã€!=ã€= ç›¸ç­‰ã€ä¸ç­‰ã€å¯¹äºå­—ç¬¦ä¸² = ä¹Ÿå¯è¡¨ç¤ºç›¸å½“äº * &lt;&lt;ã€&gt;&gt; å·¦ç§»ä½ã€å³ç§»ä½ ~ã€|ã€&amp;ã€^ æŒ‰ä½å–åã€æŒ‰ä½å¼‚æˆ–ã€æŒ‰ä½ä¸ã€æŒ‰ä½æˆ– =ã€+=ã€-=ã€*=ã€/=ã€%= èµ‹å€¼è¿ç®—ç¬¦ï¼Œa+=1 ç›¸å½“äº a=a+1ï¼Œåé¢ç±»æ¨ * è¦æƒ³è®©æ•°å­¦è®¡ç®—å‘æŒ¥ä½œç”¨ï¼Œå¿…é¡»ä½¿ç”¨æ•°å­¦è®¡ç®—å‘½ä»¤ï¼ŒShell ä¸­å¸¸ç”¨çš„æ•°å­¦è®¡ç®—å‘½ä»¤å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ Shell è¿ç®—æ“ä½œç¬¦ä¸è¿ç®—å‘½ä»¤ æ„ä¹‰ (()) ç”¨äºæ•´æ•°è¿ç®—çš„å¸¸ç”¨è¿ç®—ç¬¦ï¼Œæ•ˆç‡å¾ˆé«˜ let ç”¨äºæ•´æ•°è¿ç®—ï¼Œç±»ä¼¼äºâ€(())â€œ expr å¯ç”¨äºæ•´æ•°è¿ç®—ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é¢å¤–åŠŸèƒ½ bc Linux ä¸‹çš„ä¸€ä¸ªè®¡ç®—å™¨ç¨‹åºï¼ˆé€‚åˆæ•´æ•°åŠå°æ•°è¿ç®—ï¼‰ $[] ç”¨äºæ•´æ•°è¿ç®— awk awk æ—¢å¯ä»¥ç”¨äºæ•´æ•°è¿ç®—ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°æ•°è¿ç®— declare å®šä¹‰å˜é‡å€¼å’Œå±æ€§ï¼Œ-i å‚æ•°å¯ä»¥ç”¨äºå®šä¹‰æ•´å‹å˜é‡ï¼Œåšè¿ç®— (()) è¿ç®—ç¬¦ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112131415161718# å®šä¹‰å˜é‡ï¼š[skinyi@fedora ~]$ i=1# é”™è¯¯ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ i=((i+1));echo $ibash: æœªé¢„æœŸçš„ç¬¦å·â€œ(â€é™„è¿‘æœ‰è¯­æ³•é”™è¯¯[skinyi@fedora ~]$ echo ((i+1))bash: æœªé¢„æœŸçš„ç¬¦å·â€œ(â€é™„è¿‘æœ‰è¯­æ³•é”™è¯¯# æ­£ç¡®ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ i=$((i+1));echo $i2[skinyi@fedora ~]$ ((i=i+1));echo $i3[skinyi@fedora ~]$ i=$((i&gt;1));echo $i1[skinyi@fedora ~]$ ((i=i&gt;1));echo $i0[skinyi@fedora ~]$ echo $((i&lt;1))1 æ€»ç»“ï¼š å†…éƒ¨èµ‹å€¼ï¼ˆä¸ç›´æ¥å¼•ç”¨ï¼‰ï¼š((var=è¡¨è¾¾å¼))ï¼› å¤–éƒ¨èµ‹å€¼ï¼ˆç›´æ¥å¼•ç”¨ï¼‰ï¼švar=$((è¡¨è¾¾å¼))ã€echo $((è¡¨è¾¾å¼))ã€‚ let æŒ‡ä»¤ ç”¨æ³•ç¤ºä¾‹ï¼š 1234567891011121314# æ­£ç¡®ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ let num=1+1; echo $num2[skinyi@fedora ~]$ let num=num+2; echo $num4[skinyi@fedora ~]$ let num+=2; echo $num6# é”™è¯¯ç¤ºä¾‹ï¼š[skinyi@fedora ~]$ let num=2&gt;1; echo $num2 # æ— æ³•æ ¹æ®æ¯”è¾ƒç»“æœèµ‹å€¼[skinyi@fedora ~]$ let num**2; echo $num2 # åªèƒ½æ˜¯ä»¥èµ‹å€¼çš„å½¢å¼è¿›è¡Œè®¡ç®—[skinyi@fedora ~]$ let num=$((2&gt;1)); echo $num1 # ä»…ç”¨åŒæ‹¬å·å°±èƒ½å®ç°æ•ˆæœï¼Œç”¨ let å†—ä½™ æ¡ˆä¾‹ï¼šç›‘æµ‹ç½‘ç«™æœåŠ¡çš„å­˜æ´»çŠ¶æ€ ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç½‘ç«™æœåŠ¡å­˜æ´»æ£€æµ‹çš„è„šæœ¬ï¼Œå…¶åŸç†æ˜¯å¯¹ç½‘ç«™å®šæ—¶å‘é€ head è¯·æ±‚ä»¥ç¡®è®¤ç½‘ç«™æœåŠ¡å¯ç”¨ï¼Œå½“è¯·æ±‚å¤±è´¥æ¬¡æ•°è¾¾åˆ°ä¸€å®šæ¬¡æ•°åç»™å½“å‰ç³»ç»Ÿç”¨æˆ·å‘é€é‚®ä»¶å‘ŠçŸ¥ç½‘ç«™æœåŠ¡å‡ºäº†é—®é¢˜å¹¶é€€å‡ºè„šæœ¬çš„æ‰§è¡Œã€‚è¦æƒ³å†ä¸¥æ ¼äº›å¯ä»¥è€ƒè™‘è®¤ä¸ºä¸€å®šå‘¨æœŸå†…è¾¾åˆ°æœ€å¤§å¤±è´¥æ¬¡æ•°æ‰è®¤ä¸ºç½‘ç«™æŒ‚äº†ï¼Œè¿˜æœ‰åœ¨è„šæœ¬ä¼ å‚æ—¶å¯ä»¥è¿›è¡Œ url æ ¼å¼çš„æ­£åˆ™æ£€æŸ¥ï¼Œå½“ç„¶è¿™é‡Œåªæ˜¯ä¸ªå°æ¡ˆä¾‹ï¼Œä¸»è¦è¿˜æ˜¯å°†ä¹‹å‰å­¦åˆ°çš„æ²¡å­¦åˆ°çš„ä¸œè¥¿éƒ½ç”¨äº†ä¸€éï¼ŒåŠ æ·±è®°å¿†ã€‚ check_website_status.sh12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/bin/sh## Check web service statusreq_url=&#x27;&#x27; # è¯·æ±‚çš„ç½‘å€ urlreq_timeout=&#x27;5&#x27; # è¯·æ±‚è¶…æ—¶æ—¶é—´req_fails=&#x27;0&#x27; # æœ€å¤§å°è¯•è¯·æ±‚æ¬¡æ•°req_alert_fails=&#x27;10&#x27; # è§¦å‘æŠ¥è­¦çš„æœ€å¤§å°è¯•æ¬¡æ•°req_wait_time=&#x27;1&#x27; # æ¯æ¬¡è¯·æ±‚é—´éš”æ—¶é—´check_parameters()&#123; if [ $# -ne 1 ]; then printf &quot;é”™è¯¯ï¼šæœªæŒ‡å®šæˆ–æŒ‡å®šäº†å¤šä¸ªå‚æ•°ï¼\\nç”¨æ³•ï¼š$0 &lt;url&gt;\\n&quot; 2&gt;&amp;1 exit 1 else req_url=$1 fi&#125;send_mail_alert()&#123; if [ $req_fails -ge $req_alert_fails ]; then local mail_message=&quot;è‡ªè„šæœ¬å¯åŠ¨ä»¥æ¥å…±å‘ç”Ÿäº†$&#123;req_fails&#125;æ¬¡å¤±è´¥çš„è¯·æ±‚ï¼Œå·²è¾¾æœ€å¤§å¤±è´¥ä¸Šé™ï¼Œè¯·åŠæ—¶è¿›è¡Œäººå·¥æ£€æŸ¥å¤„ç†ã€‚\\n&quot; echo -e $mail_message | mail -s &quot;è­¦å‘Šï¼šä½ çš„ç½‘ç«™æœåŠ¡å¯èƒ½å·²ç»ä¸å¯ç”¨&quot; $USER exit 0 # å‘é€é‚®ä»¶åå°±é€€å‡ºï¼Œé˜²æ­¢é‚®ä»¶è½°ç‚¸ fi&#125;check_status()&#123; while true; do local date=`date --rfc-3339=seconds` # ä½¿ç”¨ head è¯·æ±‚æ¥è¿›è¡Œç½‘ç«™æ˜¯å¦å­˜æ´»æ£€æµ‹ curl --head --connect-timeout $&#123;req_timeout&#125; -s -f $&#123;req_url&#125; -o /dev/null # è‹¥å‘½ä»¤è¿”å›é 0 åˆ™è¡¨æ˜è¯·æ±‚å¤±è´¥ if [ $? -ne 0 ]; then let req_fails+=1 # è¯·æ±‚å¤±è´¥æ¬¡æ•°è‡ªå¢ echo &quot;$&#123;date%+*&#125; æ—¶è¿›è¡Œäº†ä¸€æ¬¡å¤±è´¥çš„è¯·æ±‚&quot; send_mail_alert # è°ƒç”¨æŠ¥è­¦åˆ¤æ–­æ˜¯å¦æŠ¥è­¦ else echo &quot;$&#123;date%+*&#125; æ—¶è¿›è¡Œäº†ä¸€æ¬¡æˆåŠŸçš„è¯·æ±‚&quot; fi # æ¯æ¬¡è¯·æ±‚é—´éš”ä¸€æ®µæ—¶é—´ sleep $req_wait_time done&#125;check_parameters $@ # å‡½æ•°ä¸ä¼šç»§æ‰¿ shell è„šæœ¬çš„å‚æ•°ï¼Œè°ƒç”¨æ—¶éœ€è¿›è¡Œä¼ å‚check_status expr å‘½ä»¤ ä½¿ç”¨ expr --help å‘½ä»¤æŸ¥çœ‹ expr å‘½ä»¤å¸®åŠ©ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546[skinyi@fedora ~]$ expr --helpç”¨æ³•ï¼šexpr è¡¨è¾¾å¼ æˆ–ï¼šexpr é€‰é¡¹ --help æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º --version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡ºå°†è¡¨è¾¾å¼çš„å€¼åˆ—å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œåˆ†éš”ç¬¦ä¸‹é¢çš„ç©ºè¡Œå¯æå‡ç®—å¼ä¼˜å…ˆçº§ã€‚å¯ç”¨çš„è¡¨è¾¾å¼æœ‰ï¼š ARG1 | ARG2 è‹¥ARG1 çš„å€¼ä¸ä¸º 0 æˆ–è€…ä¸ºç©ºï¼Œåˆ™è¿”å› ARG1ï¼Œå¦åˆ™è¿”å› ARG2 ARG1 &amp; ARG2 è‹¥ä¸¤è¾¹çš„å€¼éƒ½ä¸ä¸º 0 æˆ–ä¸ºç©ºï¼Œåˆ™è¿”å› ARG1ï¼Œå¦åˆ™è¿”å› 0 ARG1 &lt; ARG2 ARG1 å°äº ARG2 ARG1 &lt;= ARG2 ARG1 å°äºæˆ–ç­‰äº ARG2 ARG1 = ARG2 ARG1 ç­‰äº ARG2 ARG1 != ARG2 ARG1 ä¸ç­‰äº ARG2 ARG1 &gt;= ARG2 ARG1 å¤§äºæˆ–ç­‰äº ARG2 ARG1 &gt; ARG2 ARG1 å¤§äº ARG2 ARG1 + ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸åŠ ä¹‹å’Œ ARG1 - ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸å‡ä¹‹å·® ARG1 * ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸ä¹˜ä¹‹ç§¯ ARG1 / ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸é™¤ä¹‹å•† ARG1 % ARG2 è®¡ç®— ARG1 ä¸ ARG2 ç›¸é™¤ä¹‹ä½™æ•° å­—ç¬¦ä¸² : è¡¨è¾¾å¼ å®šä½å­—ç¬¦ä¸²ä¸­åŒ¹é…è¡¨è¾¾å¼çš„æ¨¡å¼ match å­—ç¬¦ä¸² è¡¨è¾¾å¼ ç­‰äº&quot;å­—ç¬¦ä¸² : è¡¨è¾¾å¼&quot; substr å­—ç¬¦ä¸² åç§»é‡ é•¿åº¦ æ›¿æ¢å­—ç¬¦ä¸²çš„å­ä¸²ï¼Œåç§»çš„æ•°å€¼ä» 1 èµ·è®¡ index å­—ç¬¦ä¸² å­—ç¬¦ åœ¨å­—ç¬¦ä¸²ä¸­å‘ç°å­—ç¬¦çš„åœ°æ–¹å»ºç«‹ä¸‹æ ‡ï¼Œæˆ–è€…æ ‡0 length å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„é•¿åº¦ + è®°å· å°†ç»™å®šè®°å·è§£æä¸ºå­—ç¬¦ä¸²ï¼Œå³ä½¿å®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼ â€œmatchâ€æˆ–è¿ç®—ç¬¦&quot;/&quot;é‚£æ ·çš„å…³é”®å­— ( è¡¨è¾¾å¼ ) ç»™å®š&lt;è¡¨è¾¾å¼&gt;çš„å€¼è¯·æ³¨æ„æœ‰è®¸å¤šè¿ç®—æ“ä½œç¬¦éƒ½å¯èƒ½éœ€è¦ç”± shell å…ˆå®æ–½è½¬ä¹‰ã€‚å¦‚æœå‚ä¸è¿ç®—çš„ ARG è‡ªå˜é‡éƒ½æ˜¯æ•°å­—ï¼Œæ¯”è¾ƒç¬¦å°±ä¼šè¢«è§†ä½œæ•°å­¦ç¬¦å·ï¼Œå¦åˆ™å°±æ˜¯å¤šä¹‰çš„ã€‚æ¨¡å¼åŒ¹é…ä¼šè¿”å›&quot;\\&quot;å’Œ&quot;\\&quot;ä¹‹é—´è¢«åŒ¹é…çš„å­å­—ç¬¦ä¸²æˆ–ç©º(null)ï¼›å¦‚æœæœªä½¿ç”¨&quot;\\&quot;å’Œ&quot;\\&quot;ï¼Œåˆ™ä¼šè¿”å›åŒ¹é…å­—ç¬¦æ•°é‡æˆ–æ˜¯ 0ã€‚è‹¥è¡¨è¾¾å¼çš„å€¼æ—¢ä¸æ˜¯ç©ºä¹Ÿä¸æ˜¯ 0ï¼Œé€€å‡ºçŠ¶æ€å€¼ä¸º 0ï¼›è‹¥è¡¨è¾¾å¼çš„å€¼ä¸ºç©ºæˆ–ä¸º 0ï¼Œé€€å‡ºçŠ¶æ€å€¼ä¸º 1ã€‚å¦‚æœè¡¨è¾¾å¼çš„å¥æ³•æ— æ•ˆï¼Œåˆ™ä¼šåœ¨å‡ºé”™æ—¶è¿”å›é€€å‡ºçŠ¶æ€å€¼ 3ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627# ä½¿ç”¨æ—¶æœ€å¥½éƒ½è¿›è¡Œè½¬ä¹‰é˜²æ­¢ä¸ shell ç‰¹æ®Šå«ä¹‰ç¬¦å·å†²çª[skinyi@fedora ~]$ expr 1 + 34[skinyi@fedora ~]$ expr 2 \\* 36[skinyi@fedora ~]$ expr 2 * 3expr: è¯­æ³•é”™è¯¯ï¼šæœªé¢„æœŸçš„å‚æ•°[skinyi@fedora ~]$ expr 2 \\+ 57# expr match æ¨¡å¼åŒ¹é…ï¼Œè¾“å‡ºåŒ¹é…å­—ç¬¦ä¸ªæ•°[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*&quot;9[skinyi@fedora ~]$ expr match .bashrc.d &quot;.*\\.d&quot;9[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*b&quot;2[skinyi@fedora ~]$ expr .bashrc.d \\: &quot;.*p&quot;0[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao wodexinjiumizui0[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao zhiyaoni8[skinyi@fedora ~]$ expr match zhiyaoniqingqingyixiao zhini0# expr length è·å–å­—ç¬¦ä¸²é•¿åº¦[skinyi@fedora ~]$ expr length 1234567899 æ¡ˆä¾‹ï¼šå‚æ•°ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶çš„åå­—ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ mp3 æ–‡ä»¶ check_mp3.sh123#!/bin/sh# &amp;&amp; åˆ†éš”çš„ä¸¤æ¡è¯­å¥å‰é¢çš„æ‰§è¡ŒæˆåŠŸï¼ˆé€€å‡ºç ä¸º 0ï¼‰åæ‰æ‰§è¡Œåé¢çš„è¯­å¥ï¼Œ||åä¹‹expr &quot;$1&quot; &quot;:&quot; &quot;.*\\.mp3\\$&quot; 2&gt;&gt;/dev/null &amp;&amp; echo &quot;è¿™æ˜¯ä¸ª mp3 æ–‡ä»¶&quot; || echo &quot;è¿™ä¸æ˜¯ mp3 æ–‡ä»¶&quot; æ¡ˆä¾‹ï¼šå‚æ•°ä¼ å…¥ä¸€å¥è¯ï¼ˆæ‹¼éŸ³æˆ–å•è¯ï¼‰ï¼Œåˆ¤æ–­å…¶é•¿åº¦å¤§äº 3 çš„æ‹¼éŸ³ã€å•è¯ä¸ªæ•° count_more_than_3.sh12345678#!/bin/shstr_count=0for word in $@; do if [ `expr length $word` -gt 3 ]; then let str_count+=1 fidoneecho &quot;å¤§äº 3 çš„æ‹¼éŸ³/å•è¯ä¸ªæ•°ä¸ºï¼š$str_count&quot; bc å‘½ä»¤ bc å‘½ä»¤é»˜è®¤æ˜¯ä»¥äº¤äº’æ¨¡å¼è¿è¡Œçš„ï¼Œå³æ‰§è¡Œ bc å‘½ä»¤ä¼šç›´æ¥è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—å¹¶å¾—åˆ°ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ç®¡é“æ¥ä¼ é€’å•ä¸ªè¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ã€‚bc åŒæ—¶æ”¯æŒæ•´æ•°å’Œå°æ•°è®¡ç®—ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 1234[skinyi@fedora ~]$ echo 4.0/2.0 | bc2[skinyi@fedora ~]$ echo 9/3 | bc3 æ¡ˆä¾‹ï¼šè®¡ç®— 1 åˆ° 100 çš„å’Œ 1234567891011#!/bin/sh# echo &#123;1..100&#125; ä¼šæ‰“å°ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦çš„ 1 åˆ° 100 çš„æ•°å­—# tr å‘½ä»¤ï¼šç”¨äºè½¬æ¢æˆ–åˆ é™¤æ–‡ä»¶ä¸­çš„å­—ç¬¦ï¼Œ`tr &#x27; &#x27; &#x27;+&#x27;` ä»£è¡¨å°†è¾“å…¥ä¸­çš„ç©ºæ ¼è½¬æ¢ä¸º + å†è¾“å‡ºecho &quot;1 åˆ° 100 çš„å’Œæ˜¯ $(echo &#123;1..100&#125; | tr &#x27; &#x27; &#x27;+&#x27; | bc)ã€‚&quot;# æˆ–è€…# seq ç”¨äºç”Ÿæˆåºåˆ—ï¼Œ-s é€‰é¡¹æŒ‡å®šåˆ†éš”ç¬¦ä¸º +echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ seq -s &#x27;+&#x27; 100 | bcã€‚&quot;# ä½¿ç”¨åŒæ‹¬å·echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ $((`seq -s &#x27;+&#x27; 100`))ã€‚&quot;# ä½¿ç”¨ exprï¼Œæ³¨æ„è¿™æ¬¡çš„åˆ†éš”ç¬¦echo &quot;1 åˆ° 100 çš„å’Œæ˜¯ $(seq -s &#x27; + &#x27; 100 | xargs expr)ã€‚&quot; awk å‘½ä»¤ ç”¨æ³•ç¤ºä¾‹ï¼š 123456[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1+$2&#125;&#x27;6.6[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1*$2&#125;&#x27;10.08[skinyi@fedora ~]$ echo &quot;4.2 2.4&quot; | awk &#x27;&#123;print $1+4*$2&#125;&#x27;13.8 $[è¡¨è¾¾å¼] $[è¡¨è¾¾å¼] ä»…èƒ½ç”¨äºæ•´æ•°è¿ç®—ï¼Œç”¨æ³•ç¤ºä¾‹ï¼š 1234567[skinyi@fedora ~]$ echo $[2**2]4[skinyi@fedora ~]$ echo $[2+2+2]6[skinyi@fedora ~]$ num=5[skinyi@fedora ~]$ echo $[num+2+2]9 read æŒ‡ä»¤ read æŒ‡ä»¤ç”¨äºä»æ ‡å‡†è¾“å…¥è®¾å¤‡ä¸­è¯»å–è¾“å…¥ã€‚ 12345678910111213141516171819202122232425262728293031323334[skinyi@fedora ~]$ read --helpread: read [-ers] [-a æ•°ç»„] [-d åˆ†éš”ç¬¦] [-i ç¼“å†²åŒºæ–‡å­—] [-n è¯»å–å­—ç¬¦æ•°] [-N è¯»å–å­—ç¬¦æ•°] [-p æç¤ºç¬¦] [-t è¶…æ—¶] [-u æ–‡ä»¶æè¿°ç¬¦] [åç§° ...] ä»æ ‡å‡†è¾“å…¥è¯»å–ä¸€è¡Œå¹¶å°†å…¶åˆ†ä¸ºä¸åŒçš„åŸŸã€‚ ä»æ ‡å‡†è¾“å…¥è¯»å–å•ç‹¬çš„ä¸€è¡Œï¼Œæˆ–è€…å¦‚æœä½¿ç”¨äº† -u é€‰é¡¹ï¼Œä»æ–‡ä»¶æè¿°ç¬¦ FD ä¸­è¯»å–ã€‚ è¯¥è¡Œè¢«åˆ†å‰²æˆåŸŸï¼Œå¦‚åŒè¯è¯­åˆ†å‰²ä¸€æ ·ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªè¯è¢«èµ‹å€¼ç»™ç¬¬ä¸€ä¸ª NAME å˜é‡ï¼Œç¬¬äºŒ ä¸ªè¯è¢«èµ‹å€¼ç»™ç¬¬äºŒä¸ª NAME å˜é‡ï¼Œå¦‚æ­¤ç»§ç»­ï¼Œç›´åˆ°å‰©ä¸‹æ‰€æœ‰çš„è¯è¢«èµ‹å€¼ç»™æœ€åä¸€ä¸ª NAME å˜é‡ã€‚åªæœ‰ $IFS å˜é‡ä¸­çš„å­—ç¬¦è¢«è®¤ä½œæ˜¯è¯è¯­åˆ†éš”ç¬¦ã€‚ å¦‚æœæ²¡æœ‰æä¾› NAME å˜é‡ï¼Œåˆ™è¯»å–çš„è¡Œè¢«å­˜æ”¾åœ¨ REPLY å˜é‡ä¸­ã€‚ é€‰é¡¹ï¼š -a array å°†è¯è¯­èµ‹å€¼ç»™ ARRAY æ•°ç»„å˜é‡çš„åºåˆ—ä¸‹æ ‡æˆå‘˜ï¼Œä»é›¶å¼€å§‹ -d delim æŒç»­è¯»å–ç›´åˆ°è¯»å…¥ DELIM å˜é‡ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ -e ä½¿ç”¨ Readline è·å–è¡Œ -i text ä½¿ç”¨ TEXT æ–‡æœ¬ä½œä¸º Readline çš„åˆå§‹æ–‡å­— -n nchars è¯»å– nchars ä¸ªå­—ç¬¦ä¹‹åè¿”å›ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¯»å–æ¢è¡Œç¬¦ã€‚ ä½†æ˜¯åˆ†éš”ç¬¦ä»ç„¶æœ‰æ•ˆï¼Œå¦‚æœé‡åˆ°åˆ†éš”ç¬¦ä¹‹å‰è¯»å–äº†ä¸è¶³ nchars ä¸ªå­—ç¬¦ã€‚ -N nchars åœ¨å‡†ç¡®è¯»å–äº† nchars ä¸ªå­—ç¬¦ä¹‹åè¿”å›ï¼Œé™¤éé‡åˆ°æ–‡ä»¶ç»“æŸç¬¦æˆ–è€…è¯»è¶…æ—¶ï¼Œ ä»»ä½•çš„åˆ†éš”ç¬¦éƒ½è¢«å¿½ç•¥ -p prompt åœ¨å°è¯•è¯»å–ä¹‹å‰è¾“å‡º PROMPT æç¤ºç¬¦å¹¶ä¸”ä¸å¸¦ æ¢è¡Œç¬¦ -r ä¸å…è®¸åæ–œæ è½¬ä¹‰ä»»ä½•å­—ç¬¦ -s ä¸å›æ˜¾ç»ˆç«¯çš„ä»»ä½•è¾“å…¥ -t timeout å¦‚æœåœ¨ TIMEOUT ç§’å†…æ²¡æœ‰è¯»å–ä¸€ä¸ªå®Œæ•´çš„è¡Œåˆ™è¶…æ—¶å¹¶ä¸”è¿”å›å¤±è´¥ã€‚ TMOUT å˜é‡çš„å€¼æ˜¯é»˜è®¤çš„è¶…æ—¶æ—¶é—´ã€‚TIMEOUT å¯ä»¥æ˜¯å°æ•°ã€‚ å¦‚æœ TIMEOUT æ˜¯ 0ï¼Œé‚£ä¹ˆä»…å½“åœ¨æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦ä¸Šè¾“å…¥æœ‰æ•ˆçš„æ—¶å€™ï¼Œ read æ‰è¿”å›æˆåŠŸï¼›å¦åˆ™å®ƒå°†ç«‹åˆ»è¿”å›è€Œä¸å°è¯•è¯»å–ä»»ä½•æ•°æ®ã€‚ å¦‚æœè¶…è¿‡äº†è¶…æ—¶æ—¶é—´ï¼Œåˆ™è¿”å›çŠ¶æ€ç å¤§äº 128 -u fd ä»æ–‡ä»¶æè¿°ç¬¦ FD ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯æ ‡å‡†è¾“å…¥ é€€å‡ºçŠ¶æ€ï¼š è¿”å›ç ä¸ºé›¶ï¼Œé™¤éé‡åˆ°äº†æ–‡ä»¶ç»“æŸç¬¦ã€è¯»è¶…æ—¶ï¼ˆä¸”è¿”å›ç ä¸å¤§äº128ï¼‰ã€ å‡ºç°äº†å˜é‡èµ‹å€¼é”™è¯¯æˆ–è€…æ— æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº† -u é€‰é¡¹ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š 123456789101112[skinyi@fedora ~]$ read -p &quot;ç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š&quot; -t 5 nameç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š[skinyi@fedora ~]$[skinyi@fedora ~]$ read -p &quot;ç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼š&quot; -t 5 nameç»™ä½ äº”ç§’æ—¶é—´è¾“å…¥ä½ çš„åå­—ï¼šskinyi[skinyi@fedora ~]$ echo $nameskinyi[skinyi@fedora ~]$ read -p &quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼š&quot; name age ;echo &quot;$name $age&quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼šskinyi # æœªè¾“å…¥çš„å˜é‡é»˜è®¤ä¸ºç©ºskinyi [skinyi@fedora ~]$ read -p &quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼š&quot; name age ;echo &quot;$name $age&quot;è¾“å…¥ä½ çš„åå­—å’Œå¹´é¾„ï¼šskinyi 18skinyi 18","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰","slug":"Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰","date":"2022-03-29T01:39:48.733Z","updated":"2022-04-22T05:51:31.666Z","comments":true,"path":"2022-03-29-Shell | é‡å­¦ Shell ç¼–ç¨‹ä¹‹åŸºç¡€å›é¡¾ï¼ˆä¸€ï¼‰.html","link":"","permalink":"https://skinyi.github.io/2022-03-29-Shell%20|%20%E9%87%8D%E5%AD%A6%20Shell%20%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE%EF%BC%88%E4%B8%80%EF%BC%89.html","excerpt":"","text":"Shebang Shebang æ˜¯æŒ‡å‡ºç°åœ¨ Shell è„šæœ¬æ–‡ä»¶ç¬¬ä¸€è¡Œä¸­çš„å‰ä¸¤ä¸ªå­—ç¬¦ #!ï¼Œç”¨ä»¥æŒ‡å®šå‘½ä»¤è§£é‡Šå™¨ï¼Œä¾‹å¦‚ï¼š #!/bin/sh ä¼šä½¿ç”¨ /bin/shï¼Œå³ bash(sh æ˜¯ bash çš„ä¸€ä¸ªè½¯è¿æ¥)è§£é‡Šå™¨æ‰§è¡Œè„šæœ¬å†…å®¹ï¼› #!/usr/bin/python ä¼šä½¿ç”¨ python è§£é‡Šå™¨å»æ‰§è¡Œè„šæœ¬å†…å®¹ï¼› #!/usr/bin/env NAMEï¼Œæ˜¯ä¸€ç§åœ¨ä¸åŒå¹³å°ä¸Šéƒ½èƒ½æ‰¾åˆ° NAME è§£é‡Šå™¨ï¼Œå¹¶ç”¨ NAME è§£é‡Šå™¨æ‰§è¡Œè„šæœ¬å†…å®¹çš„å†™æ³•ã€‚ ğŸŸ¢ ä¸€äº›ç»†èŠ‚ï¼š å¦‚æœè„šæœ¬æ²¡æœ‰æŒ‡å®š shebangï¼Œè„šæœ¬æ‰§è¡Œçš„æ—¶å€™ï¼Œé»˜è®¤ç”¨å½“å‰ shell å»è§£é‡Šè„šæœ¬ï¼Œå³ $SHELL ç¯å¢ƒå˜é‡ï¼› å¦‚æœ shebang æŒ‡å®šäº†å¯æ‰§è¡Œçš„è§£é‡Šå™¨ï¼Œå¦‚ /bin/bashã€/usr/bin/pythonï¼Œé‚£ä¹ˆè„šæœ¬åœ¨æ‰§è¡Œæ—¶ï¼Œæ–‡ä»¶åä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™è§£é‡Šå™¨ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼Œåˆ™ä¼šæŠ¥é”™ï¼š&quot;bad interpreter: Permission denied&quot;ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆåˆ™ä¼šå¿½ç•¥æ­¤æŒ‡å®šçš„è§£é‡Šå™¨ï¼Œç»§è€Œè½¬äº¤ç»™å½“å‰çš„ shell å»æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼› å¦‚æœ shebang æŒ‡å®šçš„è§£é‡Šå™¨ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ &quot;bad interpreter: No such file or directory&quot;ï¼› shebang æŒ‡å®šè§£é‡Šå™¨éœ€å†™å…¶ç»å¯¹è·¯å¾„ï¼ˆå¦‚ï¼š#!/bin/bashï¼‰ï¼Œæ‰¾å¯»è§£é‡Šå™¨çš„è¿‡ç¨‹ä¸ä¼šåœ¨ $PATH ç¯å¢ƒå˜é‡ä¸­æ‰¾ï¼› å¦‚æœä½¿ç”¨ bash script.sh è¿™æ ·çš„å‘½ä»¤æ¥æ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¸­ shebang æ‰€æŒ‡å®šçš„è§£é‡Šå™¨ä¼šè¢«å¿½ç•¥è€Œä½¿ç”¨å‘½ä»¤æ˜¾å¼æŒ‡å®šçš„ bashã€‚ æ‰§è¡Œè„šæœ¬ æ‰§è¡Œä¸€ä¸ªè„šæœ¬ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼Œä»¥æ‰§è¡Œ script.sh è„šæœ¬ä¸ºä¾‹ï¼š bash script.sh æˆ– sh script.shï¼Œè¢«æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶å¯ä»¥æ²¡æœ‰å¯æ‰§è¡Œæƒé™ï¼Œæˆ–è€…è„šæœ¬æ²¡æœ‰æŒ‡å®š shebang æ—¶å¯ä½¿ç”¨ï¼› ä½¿ç”¨ ç»å¯¹/ç›¸å¯¹ è·¯å¾„æ‰§è¡Œè„šæœ¬ï¼Œè¢«æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™ï¼› source script.sh æˆ–è€… . script.shï¼Œåœ¨å½“å‰ Shell è¿›ç¨‹ä¸­æ‰§è¡Œè„šæœ¬ï¼ˆä¸äº§ç”Ÿå­ Shell è¿›ç¨‹ï¼‰ï¼› å°‘è§ç”¨æ³•ï¼šsh &lt; script.shã€‚ ä¸€äº›å¸¸è§çš„å…¶ä»– shell è§£é‡Šå™¨ï¼š /bin/sh /bin/bash /sbin/nologin /usr/bin/sh /usr/bin/bash /usr/sbin/nologin /bin/tcsh /bin/csh /bin/dash å½“å‰ç³»ç»Ÿæ”¯æŒçš„è§£é‡Šå™¨ç±»å‹å¯ä»¥æ‰§è¡Œ cat /etc/shells å‘½ä»¤æŸ¥çœ‹ã€‚ä¸è¿‡æœ€å—æ¬¢è¿çš„è§£é‡Šå™¨è¿˜æ˜¯ bash è§£é‡Šå™¨ã€‚bash è§£é‡Šå™¨æ”¯æŒä»¥ä¸‹ç‰¹æ€§ï¼š æ–‡ä»¶è·¯å¾„ tab é”®è¡¥å…¨ å‘½ä»¤è¡¥å…¨ å¿«æ·é”® ctrl + aã€eã€uã€kã€l é€šé…ç¬¦ å†å²å‘½ä»¤ å‘½ä»¤åˆ«å å‘½ä»¤è¡Œå±•å¼€ Shell å˜é‡ Shell è¯­è¨€æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œå¦‚å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ä¹Ÿæœ‰å˜é‡çš„æ¦‚å¿µã€‚ å®šä¹‰å˜é‡ 123\\$ NAME=&quot;VALUE&quot; # é»˜è®¤æ‰€æœ‰å˜é‡ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸èƒ½æŒ‡å®šç±»å‹\\$ echo $&#123;NAME&#125;\\$ VALUE å…³äºå•å¼•å·ã€åŒå¼•å·ã€åå¼•å·ç”¨æ³•çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼š 123456789\\$ date=&quot;2020-03-29 20:24:56 CST&quot; \\$ VAR=&#x27;$&#123;date&#125;&#x27;;echo $&#123;VAR&#125;\\$ $date # å•å¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¸è§£æå˜é‡åŠå‘½ä»¤ç»“æœ\\$ VAR=&quot;$&#123;date&#125;&quot;;echo $&#123;VAR&#125;\\$ 2020-03-29 20:24:56 CST # åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¼šè§£æå˜é‡å’Œå‘½ä»¤ç»“æœ\\$ VAR=`date`;echo $&#123;VAR&#125;\\$ 2022å¹´ 03æœˆ 30æ—¥ æ˜ŸæœŸä¸‰ 08:58:33 CST # åå¼•å·ä»£è¡¨æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶å–å¾—å‘½ä»¤çš„ç»“æœ\\$ VAR=&quot;`date`&quot;;echo $&#123;VAR&#125;\\$ 2022å¹´ 03æœˆ 30æ—¥ æ˜ŸæœŸä¸‰ 09:01:14 CST # åŒå¼•å·ä¹Ÿä¼šè§£æåå¼•å·æ‰§è¡Œçš„ç»“æœ å˜é‡æ›¿æ¢åŠå¼•ç”¨ 12345\\$ NAME=&quot;ANOTHER_VALUE&quot;\\$ echo $&#123;NAME&#125;\\$ ANOTHER_VALUE\\$ echo $NAME # çœç•¥èŠ±æ‹¬å·\\$ ANOTHER_VALUE å˜é‡åå‘½åè§„èŒƒ è§åçŸ¥æ„ï¼Œé¿å…ä½¿ç”¨ä¿ç•™å…³é”®å­— å˜é‡åç»„æˆå¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ä»¥åŠä¸‹åˆ’çº¿ ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å· å˜é‡åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ å˜é‡çš„ä½œç”¨åŸŸ å±€éƒ¨å˜é‡ï¼šåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨çš„å˜é‡ å…¨å±€å˜é‡ï¼šåªèƒ½åœ¨å½“å‰ Shell è¿›ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡ ç¯å¢ƒå˜é‡ï¼šå¯ä»¥åœ¨å­ Shell è¿›ç¨‹ä¸­ä½¿ç”¨çš„å˜é‡ ğŸ”µ æ³¨æ„ç‚¹ï¼š ä¸åŒäºå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ŒShell å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡çš„ä½œç”¨åŸŸæ˜¯å…¨å±€çš„ï¼Œå³æ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„è¿›ç¨‹å†…å¯è§ï¼ˆä¸ç­‰åŒäºè„šæœ¬å†…éƒ¨å¯è§ï¼Œå› ä¸ºä½¿ç”¨ source å¯ä»¥åœ¨ä¸€ä¸ª Shell è¿›ç¨‹å†…æ‰§è¡Œå¤šä¸ªè„šæœ¬ï¼‰ï¼Œè¦å®ç°ä»…åœ¨å‡½æ•°å†…éƒ¨å¯è§éœ€ä½¿ç”¨ local å…³é”®å­—ï¼Œå¦‚ï¼šlocal var=&quot;something&quot; å…¨å±€å˜é‡åªåœ¨å½“å‰ Shell è¿›ç¨‹å¯è§ï¼Œå¯¹å…¶ä»–è¿›ç¨‹ã€å­è¿›ç¨‹éƒ½ä¸å¯è§ï¼Œå½“ä½¿ç”¨ export å‘½ä»¤å°†å˜é‡è¿›è¡Œå¯¼å‡ºåï¼Œçˆ¶ Shell è¿›ç¨‹çš„è¢«å¯¼å‡ºçš„å˜é‡å°†ä¼šå¯¹å­è¿›ç¨‹å¯è§ï¼Œè¯¥å˜é‡å³è¢«ç§°ä½œç¯å¢ƒå˜é‡ çˆ¶ Shell è¿›ç¨‹é€€å‡ºåï¼Œæ­¤ç¯å¢ƒå˜é‡ä¼šæ¶ˆå¤±ï¼Œå¦‚è¦å®šä¹‰ä¸€äº›å¸¸ç”¨çš„ç¯å¢ƒå˜é‡å¹¶åœ¨å¯åŠ¨æ¯ä¸ª Shell è¿›ç¨‹æ—¶è‡ªåŠ¨å®šä¹‰å®ƒä»¬ï¼Œæ­¤æ—¶å°±éœ€å°†å®ƒä»¬å†™åœ¨ç‰¹å®šçš„é…ç½®æ–‡ä»¶é‡Œ ä¸€äº›ç‰¹æ®Šå˜é‡ å˜é‡ æè¿° $0 å½“å‰è„šæœ¬çš„æ–‡ä»¶å $n(n&gt;=1) ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚ï¼ˆn ä»£è¡¨æ˜¯ç¬¬å‡ ä¸ªä¼ é€’çš„å‚æ•°ï¼Œæ•°å­—ï¼‰ $# ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚ $* ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè¢«å¼•å·æ‹¬èµ·æ¥æ—¶æ‰€æœ‰å‚æ•°è§†ä½œä¸€ä¸ªæ•´ä½“ã€‚ $@ ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œè¢«å¼•å·æ‹¬èµ·æ¥æ—¶æ¯ä¸ªå‚æ•°è§†ä½œä¸€ä¸ªæ•´ä½“ï¼Œå¯éå†æ¯ä¸ªå‚æ•°ã€‚ $? ä¸Šä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼ã€‚ $$ å½“å‰ Shell è¿›ç¨‹ IDã€‚å¯¹äº Shell è„šæœ¬ï¼Œå°±æ˜¯è„šæœ¬æ‰€åœ¨çš„è¿›ç¨‹ IDã€‚ $! ä¸Šä¸€æ¬¡åå°è¿›ç¨‹çš„ PIDã€‚ $_ è·å–ä¸Šæ¬¡æ‰§è¡Œå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚ 123456789101112131415161718192021[skinyi@fedora ~]$ cat test.sh#!/bin/shecho &#x27;ä½¿ç”¨&quot;$*&quot;æ‰“å°å‚æ•°ï¼š&#x27;for var in &quot;$*&quot;do echo &quot;$var&quot;doneecho &#x27;ä½¿ç”¨&quot;$@&quot;æ‰“å°å‚æ•°ï¼š&#x27;for var in &quot;$@&quot;do echo &quot;$var&quot;done[skinyi@fedora ~]$ bash test.sh a b c dä½¿ç”¨&quot;$*&quot;æ‰“å°å‚æ•°ï¼ša b c dä½¿ç”¨&quot;$@&quot;æ‰“å°å‚æ•°ï¼šabcd ğŸŸ¢ ä¸€èˆ¬æ¥è¯´ï¼Œç¨‹åºã€å‘½ä»¤çš„è¿”å›å€¼ä¸º 0 æ—¶ä»£è¡¨å‘½ä»¤æˆåŠŸæ‰§è¡Œå®Œæˆï¼Œè¿”å›å…¶ä»–å€¼å³ä»£è¡¨å‘ç”Ÿäº†é”™è¯¯ï¼Œå¯ä»¥æ ¹æ®è¿”å›å€¼å»æŸ¥è¯¢ç›¸åº”çš„æ–‡æ¡£è¿›è¡Œæ’é”™è°ƒè¯•ã€‚å¯¹äº Shell æ¥è¯´ï¼Œå‡½æ•°çš„è¿”å›å€¼è·Ÿ Cã€JAVA ä¹‹ç±»çš„å‡½æ•°è¿”å›å€¼çš„æ„ä¹‰å’Œä½œç”¨æ˜¯ä¸åŒçš„ã€‚ æŸ¥çœ‹ç¯å¢ƒå˜é‡ set declare env export æ¡ˆä¾‹ï¼šåˆ¤æ–­ä¼ å…¥å‚æ•°ä¸ªæ•°ã€‚ 123456789[skinyi@fedora ~]$ cat test.sh#!/bin/sh[ &quot;$#&quot; -ne &quot;2&quot; ] &amp;&amp; &#123; echo &quot;Expect 2 args!&quot; exit 112&#125;[skinyi@fedora ~]$ bash test.sh 1Expect 2 args! Bash å†…å»ºå‘½ä»¤ å¯ä»¥ä½¿ç”¨ compgen -b æŸ¥çœ‹æ‰€æœ‰ shell å†…å»ºå‘½ä»¤ã€‚shell å†…å»ºå‘½ä»¤é™„åŠ åœ¨ bash å‘½ä»¤ä¸­ï¼Œå› æ­¤å®ƒä»¬æ˜¯éš bash è¿›ç¨‹å¸¸é©»å†…å­˜çš„ï¼Œå†…å»ºå‘½ä»¤æ‰§è¡Œä¸€èˆ¬ä¸éœ€è¦åˆ›å»ºå­è¿›ç¨‹ã€‚ å‘½ä»¤ ä½œç”¨ echo å°†æŒ‡å®šå­—ç¬¦ä¸²è¾“å‡ºåˆ° STDOUT eval å°†æŒ‡å®šçš„å‚æ•°æ‹¼æ¥æˆä¸€ä¸ªå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œè¯¥å‘½ä»¤ exec ç”¨æŒ‡å®šå‘½ä»¤æ›¿æ¢ shell è¿›ç¨‹ export è®¾ç½®å­ shell è¿›ç¨‹å¯ç”¨çš„å˜é‡ read ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªå˜é‡ shift å°†ä½ç½®å‚æ•°ä¾æ¬¡å‘ä¸‹é™ä¸€ä¸ªä½ç½® alias ä¸ºæŒ‡å®šå‘½ä»¤å®šä¹‰ä¸€ä¸ªåˆ«å getopts åˆ†ææŒ‡å®šçš„ä½ç½®å‚æ•° let è®¡ç®—ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼ä¸­çš„æ¯ä¸ªå‚æ•° local åœ¨å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ readonly ä» STDIN è¯»å–ä¸€è¡Œæ•°æ®å¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„å˜é‡ readarray ä» STDIN è¯»å–æ•°æ®è¡Œå¹¶å°†å…¶æ”¾å…¥ç´¢å¼•æ•°ç»„ test åŸºäºæŒ‡å®šæ¡ä»¶è¿”å›é€€å‡ºçŠ¶æ€ç  0 æˆ– 1 trap å¦‚æœæ”¶åˆ°äº†æŒ‡å®šçš„ç³»ç»Ÿä¿¡å·ï¼Œæ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ wait ç­‰å¾…æŒ‡å®šçš„è¿›ç¨‹å®Œæˆï¼Œå¹¶è¿”å›é€€å‡ºçŠ¶æ€ç  echo 12345678# å¸¸ç”¨é€‰é¡¹-n ä¸æ¢è¡Œè¾“å‡º-e è§£æå­—ç¬¦ä¸²ä¸­çš„æ ¼å¼åŒ–å­—ç¬¦ï¼Œç­‰åŒäº `printf` å‘½ä»¤çš„æ•ˆæœ# æ ¼å¼åŒ–å­—ç¬¦\\n æ¢è¡Œ\\r å›è½¦\\t åˆ¶è¡¨ç¬¦\\b é€€æ ¼ eval 12345# ä¾‹å­[skinyi@fedora ~]$ set 11 22 33 44 # é€šè¿‡ set å‘½ä»¤è®¾ç½® $1, $2, $3, $4[skinyi@fedora ~]$ echo $4 # è¾“å‡º $4 çš„å€¼ï¼Œå³ 44[skinyi@fedora ~]$ echo &#x27;$&#x27;$# # æ­¤æ—¶ä¼šè¾“å‡º $4 è€Œé $4 çš„å€¼[skinyi@fedora ~]$ eval echo &#x27;$&#x27;$# # æ­¤æ—¶ä¼šè¾“å‡º $4 çš„å€¼ 44 åŸç†ï¼ševal ä¼šæŠŠå‚æ•°è¿›è¡Œæ‰«ææ‹¼æ¥å†æ‰§è¡Œï¼Œå³ä¸Šè¿°ä¾‹å­æœ€åä¸€æ¡å‘½ä»¤ä¼šå…ˆæ‰«æå¾—åˆ° echo $4ï¼Œç„¶åå†å»æ‰§è¡Œã€‚ exec exec ä¼šåœ¨å½“å‰è¿›ç¨‹ä¸­ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤è€Œä¸ä¼šåˆ›å»ºå­è¿›ç¨‹ï¼Œå› æ­¤å½“æ‰§è¡Œçš„å‘½ä»¤é€€å‡ºåè¯¥è¿›ç¨‹ä¹Ÿä¼šè¢«é”€æ¯ï¼Œå³æ•ˆæœæ˜¯åŸæœ¬çš„ bash è¿›ç¨‹â€œä¸è§äº†â€ã€‚ 1234[skinyi@fedora ~]$ sudo su -[root@fedora ~]\\# exec whoamiroot[skinyi@fedora ~]$ Shell å­ä¸² å­—ä¸² æè¿° ${var} è¿”å›å˜é‡ var çš„å€¼ ${@var} è¿”å›å˜é‡ var çš„å€¼çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œæ³¨æ„@æ›¿æ¢ä¸º# ${var:start} è¿”å›å˜é‡ var çš„ start ä¸ªå­—ç¬¦ä¹‹åçš„æ‰€æœ‰å­—ç¬¦ ${var:start:length} è¿”å›å˜é‡ var çš„ start ä¸ªå­—ç¬¦ä¹‹åé•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸² ${var#word} è¿”å›å˜é‡ var â€æå¤´â€œï¼ˆæœ€çŸ­åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var##word} è¿”å›å˜é‡ var â€æå¤´â€œï¼ˆæœ€é•¿åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var%word} è¿”å›å˜é‡ var â€å»å°¾â€œï¼ˆæœ€çŸ­åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var%%word} è¿”å›å˜é‡ var â€å»å°¾â€œï¼ˆæœ€é•¿åŒ¹é…ï¼‰åçš„å­å­—ç¬¦ä¸² ${var/pattern/string} è¿”å›å˜é‡ var ç»å•æ¬¡åŒ¹é… pattern å¹¶ä½¿ç”¨ string æ›¿æ¢åçš„å€¼ ${var//pattern/string} è¿”å›å˜é‡ var ç»å¤šæ¬¡åŒ¹é… pattern å¹¶ä½¿ç”¨ string æ›¿æ¢åçš„å€¼ ${var:-word} æœªå®šä¹‰å˜é‡ var æˆ–å€¼ä¸ºç©ºæ—¶è¿”å› wordï¼Œå¦åˆ™ç›´æ¥è¿”å› var çš„å€¼ ${var:=word} æœªå®šä¹‰å˜é‡ var æˆ–å€¼ä¸ºç©ºæ—¶è¿”å› wordï¼ŒåŒæ—¶å°† word èµ‹å€¼ç»™ var ${var:+word} å½“å˜é‡ var å·²èµ‹å€¼æ—¶æ‰è¿”å› word è¿›è¡Œæ›¿æ¢ï¼Œå¦åˆ™ä¸æ›¿æ¢ ${var:?MASSAGE} å½“å˜é‡ var å·²èµ‹å€¼æ—¶æ‰è¿”å› var çš„å€¼ï¼Œå¦åˆ™è¾“å‡º MASSAGE åˆ° STDERR å­ä¸²å¤„ç†ç¤ºä¾‹ï¼š 12345678910111213141516171819[skinyi@fedora ~]$ var=&quot;abcdefghi&quot;[skinyi@fedora ~]$ echo $&#123;var&#125;abcdefghi[skinyi@fedora ~]$ echo $&#123;#var&#125;9[skinyi@fedora ~]$ echo $&#123;var:2&#125;cdefghi[skinyi@fedora ~]$ echo $&#123;var:0-5&#125; # ä»å³æ•°ç¬¬äº”ä¸ªå¼€å§‹è¾“å‡ºefghi[skinyi@fedora ~]$ echo $&#123;var:2:4&#125;cdef[skinyi@fedora ~]$ echo $&#123;var:0-4:2&#125; # ä»å³æ•°ç¬¬å››ä¸ªå¼€å§‹è¾“å‡ºä¸¤ä¸ªå­—ç¬¦fg[skinyi@fedora ~]$ echo $&#123;var#a*d&#125;efghi[skinyi@fedora ~]$ echo $&#123;var%e*i&#125;abcd[skinyi@fedora ~]$ echo $&#123;var/cde/edc&#125;abedcfghi æ¡ˆä¾‹â€”â€”æ‰¹é‡æ–‡ä»¶åä¿®æ”¹ 12345678910111213141516171819202122# å‡†å¤‡å·¥ä½œï¼šäº§ç”Ÿå®éªŒæ•°æ®[skinyi@fedora case]$ touch file_&#123;1..5&#125;_draft.&#123;jpg,png&#125; &amp;&amp; lsfile_1_draft.jpg file_2_draft.jpg file_3_draft.jpg file_4_draft.jpg file_5_draft.jpgfile_1_draft.png file_2_draft.png file_3_draft.png file_4_draft.png file_5_draft.png[skinyi@fedora case]$ mv file_2_draft.jpg file_2_finished.jpg[skinyi@fedora case]$ mv file_2_draft.png file_2_delete.png[skinyi@fedora case]$ lsfile_1_draft.jpg file_2_delete.png file_3_draft.jpg file_4_draft.jpg file_5_draft.jpgfile_1_draft.png file_2_finished.jpg file_3_draft.png file_4_draft.png file_5_draft.png[skinyi@fedora case]$# ä»»åŠ¡ä¸€ï¼šå°†æ‰€æœ‰ç»“å°¾ä¸º draft çš„ jpg æ–‡ä»¶é‡æ–°å‘½åï¼Œå»æ‰ç»“å°¾çš„ _draft åç¼€[skinyi@fedora case]$ for filename in `ls *draft.jpg`; do mv $filename $&#123;filename/_draft/&#125;; \\done; lsfile_1_draft.png file_2_delete.png file_3_draft.png file_4_draft.png file_5_draft.pngfile_1.jpg file_2_finished.jpg file_3.jpg file_4.jpg file_5.jpg[skinyi@fedora case]$# ä»»åŠ¡äºŒï¼šå°†æ‰€æœ‰å¼€å¤´ä¸º file ä¸”ç»“å°¾ä¸º draft çš„ png æ–‡ä»¶é‡æ–°å‘½åï¼Œä¿®æ”¹ä¸º pic_&#123;n&#125;_undo.png çš„å½¢å¼[skinyi@fedora case]$ for filename in `ls *draft.png`; do tmp=$&#123;filename/draft/undo&#125;; \\mv $filename $&#123;tmp/file/pic&#125;; done; lsfile_1.jpg file_2_finished.jpg file_4.jpg pic_1_undo.png pic_4_undo.pngfile_2_delete.png file_3.jpg file_5.jpg pic_3_undo.png pic_5_undo.png[skinyi@fedora case]$ Shell æ‰©å±•å˜é‡ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940# æœªå®šä¹‰ undefined å˜é‡ï¼Œå®šä¹‰ defined å˜é‡çš„å€¼ä¸º defined[skinyi@fedora case]$ echo $undefined[skinyi@fedora case]$ defined=&quot;defined&quot;[skinyi@fedora case]$# var2=$&#123;var1:-word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:-&quot;not defined&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;not defined[skinyi@fedora case]$ res=$&#123;defined:-&quot;not defined&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$# var2=$&#123;var1:=word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:=&quot;will defined&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;will definedwill defined[skinyi@fedora case]$ res=$&#123;defined:=&quot;will redefined?&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$ unset undefined # é”€æ¯ undefined å˜é‡[skinyi@fedora case]$ echo $undefined[skinyi@fedora case]$# var2=$&#123;var1:+word&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:+&quot;something&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;[skinyi@fedora case]$ res=$&#123;defined:+&quot;something&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;definedsomething# var2=$&#123;var1:?MASSAGE&#125; ç”¨æ³•ç¤ºä¾‹[skinyi@fedora case]$ res=$&#123;undefined:?&quot;undefined is not defined!&quot;&#125;;printf &quot;$undefined\\n$res\\n&quot;bash: undefined: undefined is not defined! # ç¨‹åºç«‹å³è¿”å›ï¼Œæ²¡æœ‰æ‰§è¡Œåé¢çš„è¯­å¥[skinyi@fedora case]$ res=$&#123;undefined:?&#125; # ä¹Ÿå¯ä¸æŒ‡å®šæŠ¥é”™ä¿¡æ¯ï¼Œä¼šæœ‰é»˜è®¤çš„ stderr ä¿¡æ¯bash: undefinedï¼šå‚æ•°ä¸ºç©ºæˆ–æœªè®¾ç½®[skinyi@fedora case]$ res=$&#123;defined:?&quot;undefined is not defined!&quot;&#125;;printf &quot;$defined\\n$res\\n&quot;defineddefined[skinyi@fedora case]$ å‘½ä»¤åˆ—è¡¨ã€è¿›ç¨‹åˆ—è¡¨ã€è¿›ç¨‹åˆ†ç»„ å‘½ä»¤åˆ—è¡¨ï¼Œç¤ºä¾‹ï¼špwd; ls; ... ç›´æ¥æ‰§è¡Œï¼Œä¸èƒ½æ”¾åˆ°åå°è¿›ç¨‹ è¿›ç¨‹åˆ—è¡¨ï¼Œç¤ºä¾‹ï¼š(pwd; ls; ...) åœ¨å­ shell ä¸­æ‰§è¡Œç„¶åè¿”å›çˆ¶ shell è¿›ç¨‹åˆ†ç»„ï¼Œç¤ºä¾‹ï¼š{pwd; ls; ...} ä¸ä¼šå¯åŠ¨å­ shellï¼Œä¸å‘½ä»¤åˆ—è¡¨ä¸€æ ·ï¼Œåªæ˜¯ç»™å‘½ä»¤è¿›è¡Œäº†åˆ†ç»„ ğŸŸ¢ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ BASH_SUBSHELL æ¥åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯å­ Shellï¼Œè‹¥è¯¥å˜é‡çš„å€¼ä¸º 0ï¼Œåˆ™ä»£è¡¨è‡ªå·±ä¸æ˜¯ subshellï¼Œè‹¥ä¸ºå…¶ä»–å€¼åˆ™æ˜¯ã€‚ ğŸŸ¢ åˆ›å»ºå­ shell æ—¶æ–°å»ºå­è¿›ç¨‹ä½†å­è¿›ç¨‹ç”± bash ç»´æŠ¤ï¼Œåªèƒ½é€šè¿‡ $BASHPID è·å–PIDï¼Œä¸çˆ¶è¿›ç¨‹å…±ç”¨åŒä¸€ä¸ª POSIX è¯­ä¹‰ä¸‹çš„ PID ä¸ PPIDã€‚æœ¬è´¨ä¸Šå®ç°äº†å¤šè¿›ç¨‹ã€‚ 12345678910111213141516[skinyi@fedora ~]$ pwd; ls; echo $BASH_SUBSHELL/home/skinyicase gh-pages package-lock.json test.sh0[skinyi@fedora ~]$ (pwd; ls; echo $BASH_SUBSHELL)/home/skinyicase gh-pages package-lock.json test.sh1[skinyi@fedora ~]$ echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;(echo $BASH_SUBSHELL;)))))012345[skinyi@fedora ~]$","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"}]},{"title":"Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯","slug":"Docker | Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯","date":"2022-03-21T05:27:20.144Z","updated":"2022-03-24T14:51:08.422Z","comments":true,"path":"2022-03-21-Docker | Docker å®¹å™¨çš„æœ¬è´¨åŠåº•å±‚æŠ€æœ¯.html","link":"","permalink":"https://skinyi.github.io/2022-03-21-Docker%20|%20Docker%20%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8F%8A%E5%BA%95%E5%B1%82%E6%8A%80%E6%9C%AF.html","excerpt":"","text":"å®¹å™¨çš„æœ¬è´¨ å®¹å™¨æœ¬èº«æ˜¯ä¸€ç§è¿›ç¨‹éš”ç¦»æŠ€æœ¯ã€‚å®¹å™¨ä¸ºè¿›ç¨‹æä¾›äº†ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå®¹å™¨å†…çš„è¿›ç¨‹æ— æ³•è®¿é—®å®¹å™¨å¤–çš„è¿›ç¨‹ã€‚ä»¥è¿è¡Œä¸€ä¸ª ubuntu å®¹å™¨ä¸ºä¾‹ï¼š 12[root@localhost ~]\\# docker run -it ubunturoot@d304e6f37918:\\# top # æ‰§è¡Œ top å‘½ä»¤ åœ¨ä¸»æœºä¸ŠæŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ï¼š 1234567[root@localhost ~]\\# ps -ef# ......root 3630 3629 0 13:48 pts/0 00:00:00 docker run -it ubunturoot 3648 1 0 13:48 ? 00:00:00 /usr/bin/containerd-shim-runc-v2 -namespace moby -id d304e6f3791808ca34c8f8361da22root 3674 3648 0 13:48 pts/0 00:00:00 bashroot 3775 3674 0 13:49 pts/0 00:00:00 top# ...... å…¶ä¸­ç¬¬ä¸€æ¡è®°å½•æ˜¯å¯åŠ¨è¯¥å®¹å™¨æ—¶çš„å‘½ä»¤ï¼Œå…¶çˆ¶è¿›ç¨‹æ˜¯æ‰§è¡Œè¯¥å‘½ä»¤çš„ bash è¿›ç¨‹ï¼›ç¬¬äºŒæ¡è®°å½•æ˜¯è¯¥å®¹å™¨çš„è¿›ç¨‹ï¼Œå…¶çˆ¶è¿›ç¨‹æ˜¯ systemd è¿›ç¨‹ï¼Œç”± systemd è¿›ç¨‹ç›´æ¥æ‰§è¡Œ containerd-shim-runc-v2 å‘½ä»¤å¯åŠ¨å®¹å™¨çš„è¿›ç¨‹ï¼›ç¬¬ä¸‰æ¡è®°å½•è¡¨æ˜è¯¥å®¹å™¨çš„è¿›ç¨‹è‡ªåŠ¨å¯åŠ¨ä¸€ä¸ª bash è¿›ç¨‹ç”¨ä»¥æ¥å—ç”¨æˆ·çš„æŒ‡ä»¤ï¼›ç¬¬å››æ¡è®°å½•è¡¨æ˜åœ¨è¯¥ bash è¿›ç¨‹ä¸­æ‰§è¡Œäº† top å‘½ä»¤ã€‚ è¿›ç¨‹éš”ç¦» ä»¥ä¸Šç¤ºä¾‹å°è¯äº†å®¹å™¨çš„æœ¬è´¨æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå®¹å™¨ä¸­çš„è¿›ç¨‹æ˜¯å®¹å™¨è¿›ç¨‹çš„å­è¿›ç¨‹æˆ–å­å­è¿›ç¨‹ã€‚ä½†å¦‚ä½•è¡¨æ˜è¯¥å®¹å™¨è¿›ç¨‹æ˜¯ä¸å…¶ä»–è¿›ç¨‹éš”ç¦»çš„å‘¢ï¼Ÿåœ¨ä¸Šè¿° Ubuntu å®¹å™¨ä¸­æ‰§è¡Œ ps -ef å‘½ä»¤ï¼š 1234root@baf49ec287bb:\\# ps -efUID PID PPID C STIME TTY TIME CMDroot 1 0 0 06:15 pts/0 00:00:00 bashroot 9 1 0 06:15 pts/0 00:00:00 ps -ef å¯ä»¥çœ‹åˆ°è¯¥å®¹å™¨çš„ bash è¿›ç¨‹çš„ PID ç«Ÿç„¶æ˜¯ 1 è€Œä¸æ˜¯å’Œä¸»æœºä¸€æ ·æ˜¯ systemd è¿›ç¨‹ï¼Œè€Œåœ¨ä¸»æœºä¸Šå…¶è¿›ç¨‹å·æ˜¯ 3674ï¼Œç”±æ­¤å¯ä»¥è§†ä½œè¯¥å®¹å™¨è¿›ç¨‹é‡Œçš„å­è¿›ç¨‹è®¤ä¸ºè‡ªå·±è¿è¡Œåœ¨ä¸€ä¸ªâ€œä¸ä¸–éš”ç»â€çš„æ“ä½œç³»ç»Ÿä¸–ç•Œé‡Œã€‚ æ–‡ä»¶ç³»ç»Ÿéš”ç¦» åœ¨è¯¥å®¹å™¨å†…éƒ¨æ‰§è¡Œï¼š 123456789101112131415161718root@baf49ec287bb:\\# ls -l /devtotal 0crw--w----. 1 root tty 136, 0 Mar 21 06:42 consolelrwxrwxrwx. 1 root root 11 Mar 21 06:15 core -&gt; /proc/kcorelrwxrwxrwx. 1 root root 13 Mar 21 06:15 fd -&gt; /proc/self/fdcrw-rw-rw-. 1 root root 1, 7 Mar 21 06:15 fulldrwxrwxrwt. 2 root root 40 Mar 21 06:15 mqueuecrw-rw-rw-. 1 root root 1, 3 Mar 21 06:15 nulllrwxrwxrwx. 1 root root 8 Mar 21 06:15 ptmx -&gt; pts/ptmxdrwxr-xr-x. 2 root root 0 Mar 21 06:15 ptscrw-rw-rw-. 1 root root 1, 8 Mar 21 06:15 randomdrwxrwxrwt. 2 root root 40 Mar 21 06:15 shmlrwxrwxrwx. 1 root root 15 Mar 21 06:15 stderr -&gt; /proc/self/fd/2lrwxrwxrwx. 1 root root 15 Mar 21 06:15 stdin -&gt; /proc/self/fd/0lrwxrwxrwx. 1 root root 15 Mar 21 06:15 stdout -&gt; /proc/self/fd/1crw-rw-rw-. 1 root root 5, 0 Mar 21 06:15 ttycrw-rw-rw-. 1 root root 1, 9 Mar 21 06:15 urandomcrw-rw-rw-. 1 root root 1, 5 Mar 21 06:15 zero å¯ä»¥å‘ç°è¯¥å®¹å™¨çš„è®¾å¤‡æ–‡ä»¶ä¸­æ²¡æœ‰ä¸»æœºä¸­çš„ç¡¬ç›˜ block æ–‡ä»¶ï¼Œè¿™æ˜¯ç”±äºè¯¥å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ˜¯å’Œä¸»æœºä¸ä¸€æ ·çš„ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿã€‚é‚£ä¹ˆå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿåœ¨å“ªå„¿å‘¢ï¼Ÿä½¿ç”¨ docker inspect å®¹å™¨å|å®¹å™¨ID å‘½ä»¤å¹¶æŸ¥çœ‹è¾“å‡ºçš„ GraphDriver å­—æ®µæ¥æ‰¾åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶åœ¨ä¸»æœºä¸­çš„ä½ç½®ã€‚ 123456789[skinyi@localhost ~]\\$ sudo docker inspect -f &#x27;&#123;&#123;json .GraphDriver&#125;&#125;&#x27; ubuntu | jq&#123; &quot;Data&quot;: &#123; &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/merged&quot;, &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/diff&quot;, &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/work&quot; &#125;, &quot;Name&quot;: &quot;overlay2&quot;&#125; è¯¥å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä½ç½®å°±åœ¨ä¸»æœºä¸Š UpperDir å±æ€§æ‰€æŒ‡å‘çš„ä½ç½®ã€‚ä¸»æœºå¦èµ·ç»ˆç«¯åœ¨è¯¥ç›®å½•ä¸‹æ‰¾åˆ°å®¹å™¨çš„ dev ç›®å½•ï¼Œå¹¶ ls -l ä¼šå‘ç°è¯¥ç›®å½•æ˜¯ç©ºçš„ï¼Œå…¶å®è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºå®¹å™¨ä¸­è¯¥ç›®å½•æ˜¯å†…å­˜æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†è€ŒæœªæŒä¹…åŒ–åˆ°ä¸»æœºç¡¬ç›˜ä¸­ã€‚ æ–‡ä»¶éš”ç¦»çš„æœ¬è´¨æŠ€æœ¯æ˜¯ä½¿ç”¨ chroot ç³»ç»Ÿè°ƒç”¨ï¼Œè¯¥ç³»ç»Ÿè°ƒç”¨ç”¨äºå°†ä¸€ä¸ªè¿›ç¨‹åŠå…¶å­è¿›ç¨‹çš„æ ¹ç›®å½•æ”¹å˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–°ä½ç½®ï¼Œå¹¶è®©è¿™äº›è¿›ç¨‹åªèƒ½è®¿é—®åˆ°è¯¥ç›®å½•ï¼Œæ­¤åŠŸèƒ½çš„åˆè¡·æ˜¯ä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ç‹¬ç«‹çš„ç£ç›˜ç©ºé—´ã€‚ æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿåˆ›å»ºå®¹å™¨æ‰€è¿›è¡Œçš„æ“ä½œï¼š 123456[root@localhost ~]\\# cd /var/lib/docker/overlay2/7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5/[root@localhost 7472d22959e652e97acb49e6de5dd704bd2fb46de0f35d12a7b0cfbba1655cb5]\\# chroot diffroot@localhost:\\# ls bin boot dev etc home lib lib32 lib64 libx32 media mnt opt proc root run sbin srv sys tmp usr varroot@localhost:\\# pwd/ æ­¤æ—¶æ— æ³•æ‰§è¡Œ ps -ef å‘½ä»¤ï¼Œå› ä¸ºå…¶å†…å­˜æ–‡ä»¶ç³»ç»Ÿè¿˜æ²¡æœ‰æŒ‚è½½ã€‚ä½†æˆ‘ä»¬çš„å®éªŒå¯ä»¥åˆ°æ­¤ä¸ºæ­¢ã€‚ Linux å‘½åç©ºé—´æŠ€æœ¯ åé¢çš„å®¹å™¨æŠ€æœ¯çš„å®ç°åŸºæœ¬ä¸Šéƒ½ç¦»ä¸å¼€ Linux çš„ Namespace æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯æ˜¯ Linux æä¾›çš„å†…æ ¸çº§ç¯å¢ƒéš”ç¦»çš„æ–¹æ³•ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹çš„ç³»ç»Ÿéš”ç¦»èƒ½åŠ›ï¼š Mount Namespace æä¾›ç£ç›˜æŒ‚è½½ç‚¹å’Œæ–‡ä»¶ç³»ç»Ÿçš„éš”ç¦»èƒ½åŠ› IPC Namespace æä¾›è¿›ç¨‹é—´é€šä¿¡éš”ç¦»çš„èƒ½åŠ› Network Namespace æä¾›ç½‘ç»œéš”ç¦»èƒ½åŠ› UTS Namespace æä¾›ä¸»æœºååŠä¸»æœºåŸŸçš„éš”ç¦»èƒ½åŠ› PID Namespace æä¾›è¿›ç¨‹éš”ç¦»èƒ½åŠ› User Namespace æä¾›ç”¨æˆ·éš”ç¦»èƒ½åŠ› åœ¨ä¸»æœºä¸ŠæŸ¥çœ‹å®¹å™¨çš„ bash è¿›ç¨‹ã€ä¸»æœºçš„ bash è¿›ç¨‹ä»¥åŠä¸»æœº systemd è¿›ç¨‹çš„å‘½åç©ºé—´ï¼š 123456789101112131415161718192021222324252627282930313233343536[root@localhost ~]\\# ls -l /proc/3674/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 cgroup -&gt; &#x27;cgroup:[4026532847]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 ipc -&gt; &#x27;ipc:[4026532777]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 mnt -&gt; &#x27;mnt:[4026532775]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:41 net -&gt; &#x27;net:[4026532780]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid -&gt; &#x27;pid:[4026532778]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid_for_children -&gt; &#x27;pid:[4026532778]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 uts -&gt; &#x27;uts:[4026532776]&#x27;[root@localhost ~]\\# ls -l /proc/self/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 cgroup -&gt; &#x27;cgroup:[4026531835]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 ipc -&gt; &#x27;ipc:[4026531839]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 mnt -&gt; &#x27;mnt:[4026531840]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 net -&gt; &#x27;net:[4026532000]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 pid_for_children -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:42 uts -&gt; &#x27;uts:[4026531838]&#x27;[root@localhost ~]\\# ls -l /proc/1/nsæ€»ç”¨é‡ 0lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:05 cgroup -&gt; &#x27;cgroup:[4026531835]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 ipc -&gt; &#x27;ipc:[4026531839]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 mnt -&gt; &#x27;mnt:[4026531840]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 net -&gt; &#x27;net:[4026532000]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 pid -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:50 pid_for_children -&gt; &#x27;pid:[4026531836]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 time -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 15:50 time_for_children -&gt; &#x27;time:[4026531834]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 user -&gt; &#x27;user:[4026531837]&#x27;lrwxrwxrwx. 1 root root 0 3æœˆ 21 13:42 uts -&gt; &#x27;uts:[4026531838]&#x27; å¯ä»¥å‘ç°ä¸»æœºçš„ bash è¿›ç¨‹å’Œ systemd è¿›ç¨‹å®Œå…¨ä¸€è‡´ï¼Œä½†å®¹å™¨ä¸­çš„è¿›ç¨‹å’Œä¸»æœºè¿›ç¨‹ä¸­çš„å­˜åœ¨éƒ¨åˆ†å·®åˆ«ã€‚å‘½åç©ºé—´ä¸­è¿˜åŒ…å« cgroup å‘½åç©ºé—´ï¼Œè¿™æ¶‰åŠåˆ° Linux ç®¡ç†ç¡¬ä»¶èµ„æºåˆ†é…çš„ä¸€ç§æŠ€æœ¯ã€‚ CGroup æ§åˆ¶ç»„ CGroup æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§å¯ä»¥é™åˆ¶ã€è®°å½•ã€éš”ç¦»è¿›ç¨‹ç»„æ‰€ä½¿ç”¨çš„è®¡ç®—èµ„æºï¼ˆCPUã€å†…å­˜ã€I/O ç­‰ï¼‰çš„æœºåˆ¶ã€‚CGroup æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š é™åˆ¶è¿›ç¨‹ç»„å¯ä»¥ä½¿ç”¨çš„èµ„æºæ•°é‡ è¿›ç¨‹ç»„çš„ä¼˜å…ˆçº§æ§åˆ¶ è®°å½•è¿›ç¨‹ç»„ä½¿ç”¨çš„èµ„æºæ•°é‡ è¿›ç¨‹ç»„éš”ç¦» è¿›ç¨‹ç»„æ§åˆ¶ å®¹å™¨æŠ€æœ¯ä½¿ç”¨ CGroup æŠ€æœ¯é™åˆ¶å®¹å™¨å¯¹ä¸»æœºèµ„æºçš„ä½¿ç”¨ã€‚ Containerd å®¹å™¨è¿è¡Œæ—¶ Containerd æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥ä¸šçº§å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…¶è„±èƒäº docker çš„ libcontainerd åç»å¼€æºç‹¬ç«‹ä»¥åŠä¸æ–­å®Œå–„ä» RunC å‘å±•åˆ°ç°åœ¨çš„ Containerdï¼ˆè°·æ­ŒåŠå…¶ä»–å¤§å‚çš„ä¸€ç³»åˆ—æ“ä½œä¸‹ï¼‰ã€‚ç°åœ¨è°·æ­Œçš„ K8S é»˜è®¤é›†æˆçš„å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒå·²ç»æ˜¯ Containerdï¼Œè€Œä¸æ˜¯åŸæœ¬çš„ Dockerï¼ŒDocker ç°åœ¨æ›´å¤šä»£è¡¨çš„å…¶å®æ˜¯æ“çºµ Containerd çš„ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°","slug":"äº‘è®¡ç®— | äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°","date":"2022-03-13T02:02:31.486Z","updated":"2022-03-14T13:17:58.484Z","comments":true,"path":"2022-03-13-äº‘è®¡ç®— | äº‘è®¡ç®—ä¸é˜¿é‡Œäº‘ ACP æ¦‚è¿°.html","link":"","permalink":"https://skinyi.github.io/2022-03-13-%E4%BA%91%E8%AE%A1%E7%AE%97%20|%20%E4%BA%91%E8%AE%A1%E7%AE%97%E4%B8%8E%E9%98%BF%E9%87%8C%E4%BA%91%20ACP%20%E6%A6%82%E8%BF%B0.html","excerpt":"","text":"äº‘è®¡ç®—ä¸è™šæ‹ŸåŒ–æ¦‚è¿° äº‘è®¡ç®— äº‘è®¡ç®—æ˜¯ä¸€ç§æ¨¡å‹ï¼Œå®ƒå¯ä»¥å®ç°éšæ—¶éšåœ°ã€ä¾¿æ·åœ°ã€éšéœ€åº”å˜åœ°ä»å¯é…ç½®è®¡ç®—èµ„æºå…±äº«æ± ä¸­è·å–æ‰€éœ€çš„èµ„æºï¼ˆä¾‹å¦‚ï¼Œç½‘ç»œã€æœåŠ¡å™¨ã€å­˜å‚¨ã€åº”ç”¨åŠæœåŠ¡ï¼‰ï¼Œèµ„æºèƒ½å¤Ÿå¿«é€Ÿä¾›åº”å¹¶é‡Šæ”¾ï¼Œä½¿ç®¡ç†èµ„æºçš„å·¥ä½œé‡å’Œä¸æœåŠ¡æä¾›å•†çš„äº¤äº’å‡å°åˆ°æœ€ä½é™åº¦ã€‚ äº‘è®¡ç®—äº”å¤§ç‰¹å¾ï¼š On-Demand Self-Service æŒ‰éœ€è‡ªåŠ©æœåŠ¡ Rapid Elasticity å¿«é€Ÿå¼¹æ€§ä¼¸ç¼© Resource Pooling èµ„æºåŒ–æ±  Measured Service å¯è®¡é‡æœåŠ¡ Broad Network Access å¹¿æ³›ç½‘ç»œæ¥å…¥ äº‘è®¡ç®—çš„å››å¤§éƒ¨ç½²æ¨¡å¼ï¼š Private Cloud: ç§æœ‰äº‘ Public Cloud: å…¬æœ‰äº‘ï¼ˆé˜¿é‡Œäº‘ ECSï¼‰ Community Cloud: ç¤¾åŒºäº‘ï¼ˆåŒ»è¯è¡Œä¸šäº‘ã€è¿è¾“è¡Œä¸šäº‘ã€é‡‘èè¡Œä¸šäº‘ï¼‰ Hybrid Cloud: æ··åˆäº‘ï¼ˆé‡‡ç”¨ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šä¸Šè¿°éƒ¨ç½²æ¨¡å¼éƒ¨ç½²ï¼‰ äº‘è®¡ç®—çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè™šæ‹ŸåŒ–å…¶å®ä¸»è¦æä¾›äº† Iaas æ¨¡å¼çš„æœåŠ¡ï¼Œäº‘è®¡ç®—çš„å…¶ä»–æœåŠ¡æ¨¡å¼éƒ½æ˜¯åœ¨ IaaS çš„åŸºç¡€ä¸Šå‘å±•è€Œæ¥çš„ã€‚ äº‘è®¡ç®—çš„ä¸‰ç§æœåŠ¡æ¨¡å¼ï¼š IaaS(Infrastructure as a Service) åŸºç¡€è®¾æ–½å³æœåŠ¡: å‡ºç§Ÿå¤„ç†èƒ½åŠ›ã€å­˜å‚¨ç©ºé—´ã€ç½‘ç»œå¸¦å®½ç­‰åŸºæœ¬è®¡ç®—èµ„æºï¼Œå¦‚ï¼šäºšé©¬é€Š EC2ã€å¼¹æ€§äº‘æœåŠ¡å™¨ PaaS(Platform as a Service) å¹³å°å³æœåŠ¡ï¼šä¸ºå®¢æˆ·å¼€å‘çš„åº”ç”¨ç¨‹åºæä¾›å¯éƒ¨ç½²çš„äº‘æœåŠ¡ï¼Œå¦‚ï¼šMicrosoft Azureã€æ•°æ®åº“æœåŠ¡ SaaS(Software as a Service) è½¯ä»¶å³æœåŠ¡ï¼šåœ¨ç½‘ç»œä¸Šæä¾›å¯ç›´æ¥ä½¿ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¦‚ï¼šOffice 365ã€å„ç§äº‘ APP äº‘è®¡ç®—çš„å…«ä¸ªé€šç”¨ç‰¹ç‚¹ï¼šå¤§è§„æ¨¡ã€å¼¹æ€§è®¡ç®—ã€æ ‡å‡†åŒ–ã€åœ°ç†åˆ†å¸ƒã€è™šæ‹ŸåŒ–ã€é¢å‘æœåŠ¡ã€ä½æˆæœ¬ã€é«˜å®‰å…¨æ€§ã€‚ äº‘è®¡ç®—çš„å‘å±•å†ç¨‹ï¼š äº‘è®¡ç®— 1.0 è®¡ç®—è™šæ‹ŸåŒ– äº‘è®¡ç®— 2.0 è½¯ä»¶å®šä¹‰ä¸æ•´åˆ äº‘è®¡ç®— 3.0 äº‘åŸç”Ÿä¸é‡æ„ä¸šåŠ¡ è™šæ‹ŸåŒ– è™šæ‹ŸåŒ–æ˜¯æŒ‡ä¸€ç§å°†ç¡¬ä»¶è½¬å˜ï¼ˆæŠ½è±¡ï¼‰ä¸ºè½¯ä»¶çš„æŠ€æœ¯ã€‚è™šæ‹ŸåŒ–æ˜¯èµ„æºçš„é€»è¾‘è¡¨ç¤ºï¼Œå…¶ä¸å—ç‰©ç†é™åˆ¶çš„çº¦æŸã€‚è™šæ‹ŸåŒ–åˆ›å»ºäº†ä¸€å±‚éš”ç¦»å±‚ï¼ŒæŠŠç¡¬ä»¶å’Œä¸Šå±‚åº”ç”¨åˆ†ç¦»å¼€æ¥ï¼Œå…è®¸åœ¨ä¸€ä¸ªç¡¬ä»¶èµ„æºä¸Šè¿è¡Œå¤šä¸ªé€»è¾‘åº”ç”¨ã€‚ å¸¸è§çš„è™šæ‹ŸåŒ–ï¼šæœåŠ¡å™¨è™šæ‹ŸåŒ–ã€ç½‘ç»œè™šæ‹ŸåŒ–ã€å­˜å‚¨è™šæ‹ŸåŒ–ã€æ¡Œé¢è™šæ‹ŸåŒ–ç­‰ã€‚å…¶ä¸­æœåŠ¡å™¨è™šæ‹ŸåŒ–çš„ç»“æ„è‡ªä¸‹è€Œä¸Šåˆ†åˆ«æ˜¯ï¼šå®¿ä¸»æœºã€å®¿ä¸»æœºæ“ä½œç³»ç»Ÿã€Hypervisorã€å®¢æˆ·æœºã€å®¢æˆ·æœºæ“ä½œç³»ç»Ÿã€‚ Hypervisorï¼šè™šæ‹ŸæœºæŠ€æœ¯çš„æ ¸å¿ƒã€è™šæ‹ŸåŒ–å±‚çš„å…·ä½“å®ç°ã€‚ åˆ›é€ å¹¶è¿è¡Œè™šæ‹Ÿæœºçš„è½¯ä»¶ã€å›ºä»¶æˆ–è€…ç¡¬ä»¶ï¼› ä»¥è½¯ä»¶çš„æ–¹å¼ï¼Œå®ç°ä¸€å¥—å’Œç‰©ç†ä¸»æœºç¯å¢ƒå®Œå…¨ä¸€æ ·çš„è™šæ‹Ÿç¯å¢ƒï¼Œç‰©ç†ä¸»æœºæœ‰çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜ã€ç½‘ç»œ IOã€è®¾å¤‡ IO ç­‰éƒ½æœ‰ï¼› ç›¸å½“äºç‰©ç†ä¸»æœºçš„èµ„æºè¿›è¡Œåˆ’åˆ†å’Œéš”ç¦»ï¼Œä¾›ä¸Šå±‚ä½¿ç”¨ï¼ˆå…±äº«ç¡¬ä»¶ï¼‰ã€‚ ä¸»æµ Hypervisor äº§å“ï¼šVMware ESXiã€Microsoft Hyper-Vã€Linux KVMã€Red Hat Enterprise Virtualization(RHEV)ã€Citrix XenServerã€Oracle VMã€VMware Workstationã€VMware Playerã€VMware Fusion. æ ¹æ®åœ¨æ•´ä¸ªç³»ç»Ÿä¸­çš„ä½ç½®ä¸åŒï¼Œè™šæ‹ŸåŒ–æ¶æ„åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š å¯„å±…è™šæ‹ŸåŒ–æ¶æ„ï¼šå¯„å±…è™šæ‹ŸåŒ–æ¶æ„æŒ‡åœ¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¹‹ä¸Šå®‰è£…å’Œè¿è¡Œè™šæ‹ŸåŒ–ç¨‹åºï¼Œä¾èµ–äºå®¿ä¸»æ“ä½œç³»ç»Ÿå¯¹è®¾å¤‡çš„æ”¯æŒå’Œç‰©ç†èµ„æºçš„ç®¡ç†ã€‚ï¼ˆVMwareï¼‰ è£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„ï¼šè£¸é‡‘å±è™šæ‹ŸåŒ–æ¶æ„æŒ‡ç›´æ¥åœ¨ç¡¬ä»¶ä¸Šé¢å®‰è£…è™šæ‹ŸåŒ–è½¯ä»¶ï¼Œå†åœ¨å…¶ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ï¼Œä¾èµ–è™šæ‹Ÿå±‚å†…æ ¸å’ŒæœåŠ¡å™¨æ§åˆ¶å°è¿›è¡Œç®¡ç†ã€‚ï¼ˆé˜¿é‡Œäº‘å¼¹æ€§è£¸é‡‘å±æœåŠ¡å™¨ï¼ŒECS Bare Metal Instanceï¼‰ æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„ï¼šæ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„åœ¨æ“ä½œç³»ç»Ÿå±‚é¢å¢åŠ è™šæ‹ŸæœåŠ¡å™¨åŠŸèƒ½ã€‚æ“ä½œç³»ç»Ÿè™šæ‹ŸåŒ–æ¶æ„æŠŠå•ä¸ªçš„æ“ä½œç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªå®¹å™¨ï¼Œä½¿ç”¨å®¹å™¨ç®¡ç†å™¨æ¥è¿›è¡Œç®¡ç†ã€‚å®¿ä¸»æ“ä½œç³»ç»Ÿè´Ÿè´£åœ¨å¤šä¸ªè™šæ‹ŸæœåŠ¡å™¨ï¼ˆå³å®¹å™¨ï¼‰ä¹‹é—´åˆ†é…ç¡¬ä»¶èµ„æºï¼Œå¹¶ä¸”è®©è¿™äº›æœåŠ¡å™¨å½¼æ­¤ç‹¬ç«‹ã€‚ï¼ˆdockerï¼‰ æ··åˆè™šæ‹ŸåŒ–æ¶æ„å°†ä¸€ä¸ªå†…æ ¸çº§é©±åŠ¨å™¨æ’å…¥åˆ°å®¿ä¸»æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚è¿™ä¸ªé©±åŠ¨å™¨ä½œä¸ºè™šæ‹Ÿç¡¬ä»¶ç®¡ç†å™¨æ¥åè°ƒè™šæ‹Ÿæœºå’Œå®¿ä¸»æ“ä½œç³»ç»Ÿä¹‹é—´çš„ç¡¬ä»¶è®¿é—®ã€‚ï¼ˆKVMï¼‰ æœåŠ¡å™¨è™šæ‹ŸåŒ–æŠ€æœ¯çš„åˆ†ç±»ï¼š æŒ‰ç…§è™šæ‹Ÿå¯¹è±¡æ¥åˆ†å¯åˆ†ä¸ºï¼šCPU è™šæ‹ŸåŒ–ã€å†…å­˜è™šæ‹ŸåŒ–ã€I/O è™šæ‹ŸåŒ–ï¼› æŒ‰ç…§è™šæ‹ŸåŒ–ç¨‹åº¦åˆ†ï¼šå…¨è™šæ‹ŸåŒ–ã€åŠè™šæ‹ŸåŒ–ã€ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ã€‚ è™šæ‹ŸåŒ–çš„ç‰¹ç‚¹ï¼š åˆ†åŒºï¼šåœ¨å•ä¸€ç‰©ç†æœåŠ¡å™¨ä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœº éš”ç¦»ï¼šåœ¨å•ä¸€ç‰©ç†æœåŠ¡å™¨ä¸Šçš„å¤šä¸ªè™šæ‹Ÿæœºä¹‹é—´ç›¸äº’éš”ç¦» å°è£…ï¼šæ•´ä¸ªè™šæ‹Ÿæœºæ‰§è¡Œç¯å¢ƒå°è£…åœ¨ç‹¬ç«‹æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ç§»åŠ¨æ–‡ä»¶çš„æ–¹å¼æ¥è¿ç§»è¯¥è™šæ‹Ÿæœº ç›¸å¯¹äºç¡¬ä»¶éš”ç¦»ï¼šè™šæ‹Ÿæœºæ— éœ€ä¿®æ”¹ï¼Œå³å¯åœ¨ä»»ä½•æœåŠ¡å™¨ä¸Šè¿è¡Œ CPU è™šæ‹ŸåŒ– CPU è™šæ‹ŸåŒ–åˆ†ä¸º CPU å…¨è™šæ‹ŸåŒ–æŠ€æœ¯ã€CPU åŠè™šæ‹ŸåŒ–æŠ€æœ¯ä»¥åŠ CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚CPUçš„è™šæ‹ŸåŒ–æŠ€æœ¯å¯ä»¥å•CPUæ¨¡æ‹Ÿå¤šCPUå¹¶è¡Œï¼Œå…è®¸ä¸€ä¸ªå¹³å°åŒæ—¶è¿è¡Œå¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ç›¸äº’ç‹¬ç«‹çš„ç©ºé—´å†…è¿è¡Œè€Œäº’ä¸å½±å“ï¼Œä»è€Œæ˜¾è‘—æé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡ã€‚ CPU å…¨è™šæ‹ŸåŒ– CPU å…¨è™šæ‹ŸåŒ–ä¸»è¦é‡‡ç”¨ä¼˜å…ˆçº§å‹ç¼©æŠ€æœ¯ï¼ˆRing Compressionï¼‰å’Œ äºŒè¿›åˆ¶ä»£ç ç¿»è¯‘æŠ€æœ¯ï¼ˆBinary Translationï¼‰ã€‚ä¼˜å…ˆçº§å‹ç¼©æŠ€æœ¯è®© VMM å’Œ Guest è¿è¡Œåœ¨ä¸åŒçš„ç‰¹æƒçº§ä¸‹ã€‚ å¯¹ X86 æ¶æ„è€Œè¨€ï¼Œå³ VMM è¿è¡Œåœ¨æœ€é«˜ç‰¹æƒçº§åˆ« Ring 0 ä¸‹ï¼ŒGuest OS è¿è¡Œåœ¨Ring 1 ä¸‹ï¼Œç”¨æˆ·åº”ç”¨è¿è¡Œåœ¨ Ring 3 ä¸‹ã€‚å› æ­¤ Guest OS çš„æ ¸å¿ƒæŒ‡ä»¤æ— æ³•ç›´æ¥ä¸‹è¾¾ åˆ°è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶æ‰§è¡Œï¼Œè€Œæ˜¯éœ€è¦ç»è¿‡ VMM çš„æ•è·å’Œæ¨¡æ‹Ÿæ‰§è¡Œï¼ˆéƒ¨åˆ†éš¾ä»¥è™šæ‹ŸåŒ–çš„æŒ‡ä»¤éœ€è¦é€šè¿‡ Binary TranslationæŠ€æœ¯è¿›è¡Œè½¬æ¢ï¼‰ã€‚ CPU åŠè™šæ‹ŸåŒ– CPU åŠè™šæ‹ŸåŒ–ä¸»è¦é‡‡ç”¨ Hypercall æŠ€æœ¯ã€‚Guest OS çš„éƒ¨åˆ†ä»£ç è¢«æ”¹å˜ï¼Œä»è€Œä½¿ Guest OS ä¼šå°†å’Œç‰¹æƒæŒ‡ä»¤ç›¸å…³çš„æ“ä½œéƒ½è½¬æ¢ä¸ºå‘ç»™ VMM çš„ Hypercallï¼ˆè¶…çº§è°ƒç”¨ï¼‰ï¼Œç”± VMM ç»§ç»­è¿›è¡Œå¤„ç†ã€‚è€ŒHypercall æ”¯æŒçš„æ‰¹å¤„ç†å’Œå¼‚æ­¥è¿™ä¸¤ç§ä¼˜åŒ–æ–¹å¼ï¼Œä½¿å¾—é€šè¿‡ Hypercall èƒ½å¾—åˆ°è¿‘ä¼¼äºç‰©ç†æœºçš„é€Ÿåº¦ã€‚ CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ– CPU ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ç›®å‰ä¸»è¦æœ‰ Intel çš„ VT-x å’Œ AMD çš„ AMD-V è¿™ä¸¤ç§æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³éƒ½æ˜¯é€šè¿‡å¼•å…¥æ–°çš„æŒ‡ä»¤å’Œè¿è¡Œæ¨¡å¼ï¼Œä½¿ VMM å’Œ Guest OS åˆ†åˆ«è¿è¡Œåœ¨ä¸åŒæ¨¡å¼ï¼ˆROOT æ¨¡å¼å’Œé ROOT æ¨¡å¼ï¼‰ä¸‹ï¼Œä¸” Guest OS è¿è¡Œåœ¨ Ring 0 ä¸‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒGuest OS çš„æ ¸å¿ƒæŒ‡ä»¤å¯ä»¥ç›´æ¥ä¸‹è¾¾åˆ°è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶æ‰§è¡Œï¼Œè€Œä¸éœ€è¦ç»è¿‡ VMMã€‚å½“ Guest OS æ‰§è¡Œåˆ°ç‰¹æ®ŠæŒ‡ä»¤çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ° VMMï¼Œè®© VMM æ¥å¤„ç†ç‰¹æ®ŠæŒ‡ä»¤ã€‚ å†…å­˜è™šæ‹ŸåŒ– å†…å­˜è™šæ‹ŸåŒ–çš„äº§ç”Ÿæºäº VMM ä¸å®¢æˆ·ç³»ç»Ÿåœ¨å¯¹ç‰©ç†å†…å­˜çš„è®¤è¯†ä¸Šå­˜åœ¨å†²çªï¼Œé€ æˆç‰©ç†å†…å­˜çœŸæ­£æ‹¥æœ‰è€…â€”â€” VMM å¿…é¡»å¯¹ç³»ç»Ÿè®¿é—®çš„å†…å­˜è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„è™šæ‹ŸåŒ–ã€‚ å†…å­˜å…¨è™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡ä½¿ç”¨å½±å­é¡µè¡¨ï¼ˆShadow Page Tableï¼‰å®ç°è™šæ‹ŸåŒ–ã€‚ VMM ä¸ºæ¯ä¸ªGuest éƒ½ç»´æŠ¤ä¸€ä¸ªå½±å­é¡µè¡¨ï¼Œå½±å­é¡µè¡¨ç»´æŠ¤è™šæ‹Ÿåœ°å€ï¼ˆVAï¼‰åˆ°æœºå™¨åœ°å€ï¼ˆMAï¼‰çš„æ˜ å°„å…³ç³»ã€‚è€Œ Guest é¡µè¡¨ç»´æŠ¤ VA åˆ°å®¢æˆ·æœºç‰©ç†åœ°å€ï¼ˆGPAï¼‰çš„æ˜ å°„å…³ç³»ã€‚ å½“ VMM æ•è·åˆ° Guest é¡µè¡¨çš„ä¿®æ”¹åï¼ŒVMM ä¼šæŸ¥æ‰¾è´Ÿè´£ GPA åˆ° MA æ˜ å°„çš„ P2M é¡µè¡¨æˆ–è€…å“ˆå¸Œå‡½æ•°ï¼Œæ‰¾åˆ°ä¸è¯¥ GPA å¯¹åº”çš„ MAï¼Œå†å°† MA å¡«å……åˆ°çœŸæ­£åœ¨ç¡¬ä»¶ä¸Šèµ·ä½œç”¨çš„å½±å­é¡µè¡¨ï¼Œä»è€Œå½¢æˆ VA åˆ° MA çš„æ˜ å°„å…³ç³»ã€‚è€Œ Guest çš„é¡µè¡¨åˆ™æ— éœ€å˜åŠ¨ã€‚ å†…å­˜åŠè™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡ä½¿ç”¨é¡µè¡¨å†™å…¥æ³•å®ç°è™šæ‹ŸåŒ–ã€‚ Guest OS åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µè¡¨æ—¶ï¼Œä¼šå‘ VMM æ³¨å†Œè¯¥é¡µè¡¨ã€‚ä¹‹ååœ¨ Guest è¿è¡Œçš„æ—¶å€™ï¼ŒVMM å°†ä¸æ–­çš„ç®¡ç†å’Œç»´æŠ¤è¿™ä¸ªè¡¨ï¼Œä½¿ Guest ä¸Šé¢çš„ç¨‹åºèƒ½ç›´æ¥è®¿é—®åˆ°åˆé€‚çš„åœ°å€ã€‚ å†…å­˜ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–æŠ€æœ¯ é€šè¿‡æ‰©å±•é¡µè¡¨ EPTï¼ˆextended page tableï¼‰å®ç°è™šæ‹ŸåŒ–ã€‚ EPT é€šè¿‡ä½¿ç”¨ç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä½¿å…¶èƒ½åœ¨åŸæœ‰çš„é¡µè¡¨çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ª EPT é¡µè¡¨ï¼Œç”¨äºè®°å½• GPA åˆ° MA çš„æ˜ å°„å…³ç³»ã€‚VMM é¢„å…ˆæŠŠ EPT é¡µè¡¨è®¾ç½®åˆ° CPU ä¸­ã€‚ Guest ä¿®æ”¹ Guest é¡µè¡¨ï¼Œæ— éœ€ VMM å¹²é¢„ã€‚åœ°å€è½¬æ¢æ—¶ï¼ŒCPU è‡ªåŠ¨æŸ¥æ‰¾ä¸¤å¼ é¡µè¡¨å®Œæˆ Guest è™šæ‹Ÿåœ°å€åˆ°æœºå™¨åœ°å€çš„è½¬æ¢ï¼Œä»è€Œé™ä½æ•´ä¸ªå†…å­˜è™šæ‹ŸåŒ–æ‰€éœ€çš„å¼€é”€ã€‚ é˜¿é‡Œäº‘åŠé˜¿é‡Œäº‘äº‘è®¡ç®—è®¤è¯ é˜¿é‡Œäº‘ ACP è®¤è¯æ˜¯é¢å‘ä½¿ç”¨é˜¿é‡Œäº‘äº‘è®¡ç®—äº§å“çš„æ¶æ„ã€å¼€å‘ã€è¿ç»´äººå‘˜çš„ä¸“ä¸šæŠ€æœ¯è®¤è¯ï¼Œä¸»è¦æ¶‰åŠé˜¿é‡Œäº‘çš„è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€å®‰å…¨ç±»çš„æ ¸å¿ƒäº§å“ã€‚è¯¥è®¤è¯åœ¨ 2020 å¹´ 1 æœˆ 15 æ—¥ä¹‹ååœ¨åŸæœ‰é€šè¿‡çº¿ä¸‹æœºè€ƒçš„è¦æ±‚ä¹‹ä¸Šæ–°å¢äº†å®Œæˆå‰ç½®å®éªŒçš„è¦æ±‚ï¼Œå…¶çº¿ä¸‹æœºè€ƒé¢˜åˆ†å•é€‰ï¼ˆ70 é“ï¼‰å’Œå¤šé€‰ï¼ˆ30 é“ï¼‰ä¸¤ç§é¢˜å‹ï¼Œæ¯é¢˜ 1 åˆ†ï¼Œæ€»åˆ† 100 åˆ†ï¼Œè€ƒç”Ÿéœ€è¾¾åˆ° 80 åˆ†ä»¥ä¸Šæ‰ç®—é€šè¿‡ã€‚ å…·ä½“è¦æ±‚å¯å‚è§å®˜æ–¹è€ƒè¯•å¤§çº²ã€‚ é˜¿é‡Œäº‘äº‘è®¡ç®—ç›¸å…³æ¦‚å¿µ ECS äº‘æœåŠ¡å™¨ ECS(Elastic Compute Service) æ˜¯ä¸€ç§ç®€å•é«˜æ•ˆã€å¤„ç†èƒ½åŠ›å¯å¼¹æ€§ä¼¸ç¼©çš„è®¡ç®—æœåŠ¡ã€‚å¸®åŠ©æ‚¨æ„å»ºæ›´ç¨³å®šã€å®‰å…¨çš„åº”ç”¨ï¼Œæå‡è¿ç»´æ•ˆç‡ï¼Œé™ä½ITæˆæœ¬ï¼Œä½¿æ‚¨æ›´ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡åˆ›æ–°ã€‚ SLB è´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡SLBï¼ˆServer Load Balancerï¼‰æ˜¯ä¸€ç§å¯¹æµé‡è¿›è¡ŒæŒ‰éœ€åˆ†å‘çš„æœåŠ¡ï¼Œé€šè¿‡å°†æµé‡åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨æ¥æ‰©å±•åº”ç”¨ç³»ç»Ÿçš„ååèƒ½åŠ›ï¼Œå¹¶ä¸”å¯ä»¥æ¶ˆé™¤ç³»ç»Ÿä¸­çš„å•ç‚¹æ•…éšœï¼Œæå‡åº”ç”¨ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚é˜¿é‡Œäº‘è´Ÿè½½å‡è¡¡SLBåˆ†ä¸ºä¸¤ç±»ï¼šä¼ ç»Ÿå‹è´Ÿè½½å‡è¡¡CLBå’Œåº”ç”¨å‹è´Ÿè½½å‡è¡¡ALBã€‚ Auto Scaling å¼¹æ€§ä¼¸ç¼© å¼¹æ€§ä¼¸ç¼©ï¼ˆAuto Scalingï¼‰æ˜¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚å’Œç­–ç•¥è‡ªåŠ¨è°ƒæ•´è®¡ç®—èƒ½åŠ›ï¼ˆå³å®ä¾‹æ•°é‡ï¼‰çš„æœåŠ¡ã€‚æ‚¨å¯ä»¥æŒ‡å®šå®ä¾‹çš„ç±»å‹ï¼Œå³ECSå®ä¾‹æˆ–ECIå®ä¾‹ã€‚åœ¨ä¸šåŠ¡éœ€æ±‚å¢é•¿æ—¶ï¼Œå¼¹æ€§ä¼¸ç¼©è‡ªåŠ¨å¢åŠ æŒ‡å®šç±»å‹çš„å®ä¾‹ï¼Œæ¥ä¿è¯è®¡ç®—èƒ½åŠ›ï¼›åœ¨ä¸šåŠ¡éœ€æ±‚ä¸‹é™æ—¶ï¼Œå¼¹æ€§ä¼¸ç¼©è‡ªåŠ¨å‡å°‘æŒ‡å®šç±»å‹çš„å®ä¾‹ï¼Œæ¥èŠ‚çº¦æˆæœ¬ã€‚å¼¹æ€§ä¼¸ç¼©ä¸ä»…é€‚åˆä¸šåŠ¡é‡ä¸æ–­æ³¢åŠ¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ä¹Ÿé€‚åˆä¸šåŠ¡é‡ç¨³å®šçš„åº”ç”¨ç¨‹åºã€‚ OSS å¯¹è±¡å­˜å‚¨ é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSï¼ˆObject Storage Serviceï¼‰æ˜¯ä¸€æ¬¾æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ï¼Œå¯æä¾›99.9999999999%ï¼ˆ12ä¸ª9ï¼‰çš„æ•°æ®æŒä¹…æ€§ï¼Œ99.995%çš„æ•°æ®å¯ç”¨æ€§ã€‚å¤šç§å­˜å‚¨ç±»å‹ä¾›é€‰æ‹©ï¼Œå…¨é¢ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚ OSSå…·æœ‰ä¸å¹³å°æ— å…³çš„RESTful APIæ¥å£ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„APIã€SDKæ¥å£æˆ–è€…OSSè¿ç§»å·¥å…·è½»æ¾åœ°å°†æµ·é‡æ•°æ®ç§»å…¥æˆ–ç§»å‡ºé˜¿é‡Œäº‘OSSã€‚æ•°æ®å­˜å‚¨åˆ°é˜¿é‡Œäº‘OSSä»¥åï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ ‡å‡†å­˜å‚¨ï¼ˆStandardï¼‰ä½œä¸ºç§»åŠ¨åº”ç”¨ã€å¤§å‹ç½‘ç«™ã€å›¾ç‰‡åˆ†äº«æˆ–çƒ­ç‚¹éŸ³è§†é¢‘çš„ä¸»è¦å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æˆæœ¬æ›´ä½ã€å­˜å‚¨æœŸé™æ›´é•¿çš„ä½é¢‘è®¿é—®å­˜å‚¨ï¼ˆInfrequent Accessï¼‰ã€å½’æ¡£å­˜å‚¨ï¼ˆArchiveï¼‰ã€å†·å½’æ¡£å­˜å‚¨ï¼ˆCold Archiveï¼‰ä½œä¸ºä¸ç»å¸¸è®¿é—®æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚ CDN å†…å®¹åˆ†å‘ç½‘ç»œ é˜¿é‡Œäº‘å†…å®¹åˆ†å‘ç½‘ç»œCDNï¼ˆContent Delivery Networkï¼‰æ˜¯å»ºç«‹å¹¶è¦†ç›–åœ¨æ‰¿è½½ç½‘ä¹‹ä¸Šï¼Œç”±éå¸ƒå…¨çƒçš„è¾¹ç¼˜èŠ‚ç‚¹æœåŠ¡å™¨ç¾¤ç»„æˆçš„åˆ†å¸ƒå¼ç½‘ç»œã€‚é˜¿é‡Œäº‘CDNèƒ½åˆ†æ‹…æºç«™å‹åŠ›ï¼Œé¿å…ç½‘ç»œæ‹¥å¡ï¼Œç¡®ä¿åœ¨ä¸åŒåŒºåŸŸã€ä¸åŒåœºæ™¯ä¸‹åŠ é€Ÿç½‘ç«™å†…å®¹çš„åˆ†å‘ï¼Œæé«˜èµ„æºè®¿é—®é€Ÿåº¦ã€‚ VPC ä¸“æœ‰ç½‘ç»œ ä¸“æœ‰ç½‘ç»œæ˜¯æ‚¨ä¸“æœ‰çš„äº‘ä¸Šç§æœ‰ç½‘ç»œã€‚æ‚¨å¯ä»¥å®Œå…¨æŒæ§è‡ªå·±çš„ä¸“æœ‰ç½‘ç»œï¼Œä¾‹å¦‚é€‰æ‹©IPåœ°å€èŒƒå›´ã€é…ç½®è·¯ç”±è¡¨å’Œç½‘å…³ç­‰ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±å®šä¹‰çš„ä¸“æœ‰ç½‘ç»œä¸­ä½¿ç”¨é˜¿é‡Œäº‘èµ„æºï¼Œå¦‚äº‘æœåŠ¡å™¨ã€äº‘æ•°æ®åº“RDSå’Œè´Ÿè½½å‡è¡¡ç­‰ã€‚ äº‘ç›¾å’Œäº‘ç›‘æ§ äº‘ç›¾å’Œäº‘ç›‘æ§æ˜¯æŒ‡é˜¿é‡Œæ¨å‡ºçš„é’ˆå¯¹äº‘äº§å“çš„å®‰å…¨é˜²å¾¡ä»¥åŠç›‘æµ‹ç³»ç»Ÿã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"ACP","slug":"å­¦ä¹ /ACP","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/ACP/"}],"tags":[{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"},{"name":"ACP","slug":"ACP","permalink":"https://skinyi.github.io/tags/ACP/"},{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"https://skinyi.github.io/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"https://skinyi.github.io/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"}]},{"title":"å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°","slug":"Excel | å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°","date":"2022-03-05T12:51:48.680Z","updated":"2022-03-13T02:17:58.370Z","comments":true,"path":"2022-03-05-Excel | å®‡å®™çš„å°½å¤´æ˜¯è€ƒå…¬ä¹‹è¯è¯´ vlookup å‡½æ•°.html","link":"","permalink":"https://skinyi.github.io/2022-03-05-Excel%20|%20%E5%AE%87%E5%AE%99%E7%9A%84%E5%B0%BD%E5%A4%B4%E6%98%AF%E8%80%83%E5%85%AC%E4%B9%8B%E8%AF%9D%E8%AF%B4%20vlookup%20%E5%87%BD%E6%95%B0.html","excerpt":"","text":"åºŸè¯ è¿™ç¯‡æ–‡ç« æ„æ€äº†å¾ˆä¹…äº†ï¼Œå¥ˆä½•å»å¤–åœ°å‡ºå·®åŠ ç­ä»Šå¤©æ‰æŠ½å‡ºæ™šä¸Šçš„æ—¶é—´æ¥å†™ï¼Œåšç§ä¼çš„ç¤¾ç•œç¡®å®æ²¡æœ‰å…¬åŠ¡å‘˜å®‰é€¸ã€‚å®å¤å…¬åŠ¡å‘˜æ‹›è€ƒå…¬å‘Šåˆšå‘å¸ƒï¼Œä»Šæ—¥å¤´æ¡ä¾¿æ¨é€è¿‡æ¥äº†æ–°é—»ï¼Œæˆ‘ä¹Ÿå°±å…³æ³¨äº†ä¸‹ã€‚æˆªè‡³ 3 æœˆ 2 æ—¥ 10 ç‚¹ï¼Œå®å¤æŠ¥åäººæ•°è¾¾åˆ°äº† 73095 äººï¼Œç¤¾ä¼šå‘å±•è´«å¯Œå·®è·æ‹‰å¤§ä»¥åŠè¿‘å¹´ç–«æƒ…å½±å“ä¸‹äººä»¬è¿½æ±‚å®‰ç¨³é¥­ç¢—çš„è§‚å¿µæ„ˆå‘æ·±å…¥äººå¿ƒäº†ã€‚ç”Ÿæ´»å®‰ç¨³ã€å·¥ä½œä½“é¢çš„ä½“åˆ¶å†…äººå‘˜åœ¨å©šæ‹å¸‚åœºéƒ½æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œæ¯å½“æˆ‘å¦ˆæ‰‹æœºé‡Œçš„å¿«æ‰‹ç›´æ’­é—´æ“ç€æ–¹è¨€çš„åª’å©†è¯´â€œè¿™å®¶å¥³å­æƒ³æ‰¾ä¸ªä½“åˆ¶å†…çš„å‘¢â€ï¼Œèº«åœ¨æ´»å¤šé’±å°‘çš„ç§ä¼çš„æˆ‘çš„å¯‚å¯çš„å†…å¿ƒé¡¿æ—¶å“‡å‡‰å“‡å‡‰çš„ã€‚äºæ˜¯æˆ‘å†³å®šçœ‹çœ‹ä»Šå¹´çš„æŠ¥è€ƒäººæ•°æ‰“ç®—æ‰“ç®—ï¼Œä¸è¡Œå°±äº‰å–ä¸ªä»¥ååšæˆ‘ç°åœ¨å…¬å¸ç”²æ–¹çˆ¸çˆ¸çš„æœºä¼šï¼Œæƒ³ç€æˆ‘ä»¥ååˆéš¾æˆ‘ç°åœ¨åŒäº‹æ—¶çš„å¨é£ï¼Œå˜´è§’ä¸ç¦ä¸Šæ‰¬äº†èµ·æ¥ã€‚ é—®é¢˜çš„æå‡º æš—ä¸­è§‚å¯Ÿåˆ°äº† 3 æœˆ 2 æ—¥ï¼ŒæŠ¥åæˆªæ­¢çš„æœ€åä¸€å¤©ï¼Œ10 ç‚¹å‡ºäº†æœ€åä¸€æ¬¡çš„æŠ¥è€ƒäººæ•°å…¬ç¤ºã€‚ç»Ÿè®¡äº†ä¸‹æœ€é«˜ç¼´è´¹æ‹›è€ƒæ¯”çš„èŒä½æ˜¯ 437:1 çš„æ°‘é©é“¶å·å¸‚å§”å‘˜ä¼šä¸€çº§ç§‘å‘˜ï¼Œä¹Ÿä¸çŸ¥é“è¿™ä¸ªèŒä½æœ‰ä»€ä¹ˆå¸å¼•äººçš„åœ°æ–¹ã€‚æˆ‘ä¹Ÿæ ¹æ®æˆ‘è‡ªèº«çš„æƒ³æ³•ï¼Œå°†èŒä½è¿‡æ»¤äº†ä¸€éï¼Œæœ€ç»ˆç­›å‡ºæ¥çš„å¤§è‡´è‡ªèº«æ¡ä»¶ä¸å—é™å¯æŠ¥çš„èŒä½æœ‰ 25 ä¸ªï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¦å†³å®šæŠ¥å“ªä¸ªäº†ï¼Œæˆ‘æƒ³ç€æ ¹æ®ç¼´è´¹æ‹›è€ƒæ¯”é€‰æœ€ä½çš„é‚£ä¸ªç«äº‰ä¼šå°ä¸€äº›ã€‚è¦ä» 25 ä¸ªèŒä½ä¸­ä¸€ä¸€æ¯”å¯¹ç®—ç¼´è´¹æ‹›è€ƒæ¯”å¹¶è¿›è¡Œæ¯”è¾ƒç¡®å®æœ‰ç‚¹è´¹åŠ²ï¼Œå¦‚æœèƒ½è®¡ç®—æœºè¾…åŠ©çš„å®Œæˆè¿™ä¸ªä»»åŠ¡ä¼šæ›´å¥½äº›ã€‚ é—®é¢˜åˆ†æ æˆ‘æ¯”å¯¹äº†è¿™ä¸¤å¼ è¡¨ï¼Œå‘ç°ä»–ä»¬æœ‰ä¸¤ä¸ªå…±åŒçš„åˆ—ï¼šèŒä½åç§°å’ŒèŒä½ä»£ç ã€‚çœ‹åˆ°èŒä½ä»£ç ï¼Œä½œä¸ºæŠ€æœ¯äººå‘˜çš„æˆ‘æƒ³åˆ°äº†ä¸»é”®å’Œ SQLã€‚å¦‚æœèƒ½åœ¨ Excel ä¸­æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œæˆ‘ä¸Šé¢çš„é—®é¢˜ä¸éš¾è§£å†³è€Œä¸”å¼ºå¤§çš„ Excel ä¹Ÿç¡®å®å†…ç½®äº†å¯¹ SQL çš„æ”¯æŒï¼Œä½†å…¶å®åƒæˆ‘ç°åœ¨çš„é—®é¢˜æ ¹æœ¬ç”¨ä¸ç€è¿™ä¹ˆå¤æ‚çš„æ–¹æ³•ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ç”¨ Excel æ•°æ®å¤„ç†çš„å‡½æ•°å¤§æ³•ã€‚ ä»¥ä¸Šé—®é¢˜çš„è§£å†³æ€è·¯å¯ä»¥è¢«åˆ†è§£ä¸ºï¼š1. ä»è¡¨äºŒæ ¹æ®è¡¨ä¸€ç­›é€‰å‡ºæ¥çš„èŒä½ä»£ç ï¼ˆèŒä½åç§°ä¹Ÿè¡Œï¼Œä½†æˆ‘è¿˜æ˜¯ä¹ æƒ¯ç”¨å¯ä»¥æ ‡è¯†å”¯ä¸€æ€§çš„ä»£ç ä¸²ï¼‰æŸ¥å‡ºç¼´è´¹äººæ•°å’Œæ‹›è€ƒäººæ•°å¹¶è®°å½•åœ¨è¡¨ä¸€ï¼›2. åœ¨è¡¨ä¸€è®¡ç®—ç¼´è´¹å’Œæ‹›è€ƒäººæ•°çš„æ¯”ä¾‹ï¼›3. è¡¨ä¸€æ ¹æ®æ­¤æ¯”ä¾‹è¿›è¡Œæ’åºï¼›4. ä»è¡¨ä¸€æ ¹æ®æ’åºç»“æœç»¼åˆè‡ªèº«å…¶ä»–æ„æ„¿é€‰æ‹©æŠ¥è€ƒèŒä½ã€‚ ä»¥ä¸Šè§£å†³æ–¹æ³•ä¸­æœ€éš¾çš„å…¶å®æ˜¯ç¬¬ä¸€æ­¥ï¼Œå…¶ä»–æ–¹æ³•ä¸­æ¶‰åŠçš„è®¡ç®—å’Œæ’åºéƒ½ååˆ†ç®€å•ã€‚å¾ˆå¤šäººéƒ½ä¸å¤ªä¼šç”¨åˆ° Excel æä¾›çš„ä¸€ä¸ªå¼ºå¤§çš„æŸ¥æ‰¾å‡½æ•° vlookup å¯ä»¥æ»¡è¶³æ­¥éª¤ä¸€çš„éœ€è¦ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªå‡½æ•°çš„ä»‹ç»ï¼š VLOOKUP(lookup_value,table_array,col_index_num,[range_lookup]) æŒ‰è¡ŒæŸ¥æ‰¾è¡¨æ ¼æˆ–åŒºåŸŸå†…å®¹ å…¶ä¸­å„å‚æ•°çš„æ„ä¹‰æ˜¯ï¼š lookup_valueï¼šè¦æŸ¥æ‰¾çš„å€¼ï¼Œä¹Ÿè¢«ç§°ä¸ºæŸ¥é˜…å€¼ï¼ˆè¯¥å‚æ•°æ—¢å¯ä»¥æ˜¯å•å…ƒæ ¼ä¹Ÿå¯ä»¥æ˜¯å®šå€¼ï¼‰ã€‚ table_arrayï¼šæŸ¥é˜…å€¼æ‰€åœ¨çš„åŒºåŸŸã€‚ éœ€æ³¨æ„ï¼šæŸ¥é˜…å€¼åº”è¯¥å§‹ç»ˆä½äºæ‰€åœ¨åŒºåŸŸçš„ç¬¬ä¸€åˆ—ï¼Œè¿™æ · VLOOKUP æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥é˜…å€¼ä½äºå•å…ƒæ ¼ C2 å†…ï¼Œé‚£ä¹ˆä½ çš„åŒºåŸŸåº”è¯¥ä»¥ C å¼€å¤´ã€‚ col_index_numï¼šåŒºåŸŸä¸­åŒ…å«è¿”å›å€¼çš„åˆ—å·ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŒ‡å®š B2ï¼šD11 ä½œä¸ºåŒºåŸŸï¼Œåˆ™åº”è¯¥å°† B è®¡ä¸ºç¬¬ä¸€åˆ—ï¼Œå°† C ä½œä¸ºç¬¬äºŒåˆ—ï¼Œä»¥æ­¤ç±»æ¯”ã€‚ range_lookupï¼šï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦è¿”å›å€¼çš„è¿‘ä¼¼åŒ¹é…ï¼Œå¯ä»¥æŒ‡å®š TRUEï¼›å¦‚æœéœ€è¦è¿”å›å€¼çš„ç²¾ç¡®åŒ¹é…ï¼Œåˆ™æŒ‡å®š FALSEã€‚ å¦‚æœæ²¡æœ‰æŒ‡å®šä»»ä½•å†…å®¹ï¼Œé»˜è®¤å€¼å°†å§‹ç»ˆä¸º TRUE æˆ–è¿‘ä¼¼åŒ¹é…ã€‚ è§£å†³æ­¥éª¤ äº†è§£è¿™ä¸ªå‡½æ•°ä¹‹åå°±å¾ˆç®€å•äº†ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨è¡¨ä¸€æ‰€åœ¨çš„å·¥ä½œç°¿æ–°å»ºå·¥ä½œè¡¨ï¼Œå°†è¡¨äºŒçš„å†…å®¹å¤åˆ¶è¿‡å»ï¼Œå¦‚å›¾ï¼š åœ¨èŒä½è¡¨æ–°å»ºåˆ—ï¼šç¼´è´¹äººæ•°ã€ç¼´è´¹æ‹›è€ƒæ¯”ã€‚èŒä½è¡¨çš„ç»“æ„å°±å˜æˆäº†ï¼š â—¢ A B C D E F G H I J K L M N O P 1 åºå· æ‹›è€ƒå•ä½ éƒ¨é—¨åŠèŒä½ èŒä½ç®€ä»‹ èŒä½ä»£ç  æ‹›è€ƒäººæ•° ä¸“ä¸šè¦æ±‚ å­¦å†è¦æ±‚ å­¦ä½è¦æ±‚ æ”¿æ²»é¢è²Œ å…¶ä»–æ¡ä»¶ å¤‡æ³¨ ç”³è®ºè¯•å·ç±»å‹ è”ç³»ç”µè¯ ç¼´è´¹äººæ•° ç¼´è´¹æ‹›è€ƒæ¯” 308 304 çŸ³å˜´å±±å¸‚ çŸ³å˜´å±±å¸‚å¸‚ç›´éƒ¨é—¨ä¸€çº§ç§‘å‘˜ï¼ˆä¸€ï¼‰ è´Ÿè´£ç»¼åˆç®¡ç†æœåŠ¡ã€ä¿¡æ¯åŒ–å»ºè®¾ã€å·¥ç¨‹å»ºè®¾é¡¹ç›®è§„åˆ’ã€é¡¹ç›®å®¡æ‰¹ç­‰å·¥ä½œ 017001 2 è®¡ç®—æœºç±»ã€ç”µå­ä¿¡æ¯ç±»ã€å»ºç­‘ç±»ã€æ°´åˆ©ç±» æœ¬ç§‘åŠä»¥ä¸Š å­¦å£«åŠä»¥ä¸Š ä¸é™ é™ç”·æ€§ åˆå¹¶èŒä½ï¼šå¸‚äººåŠ›èµ„æºå’Œç¤¾ä¼šä¿éšœå±€1äººã€æ°‘æ”¿å±€1äººã€å›¢å¸‚å§”ï¼ˆå‚ç…§å…¬åŠ¡å‘˜æ³•ç®¡ç†ç¾¤å›¢æœºå…³ï¼‰1äººã€å°±ä¸šåˆ›ä¸šæœåŠ¡å±€ï¼ˆå‚ç…§å…¬åŠ¡å‘˜æ³•ç®¡ç†äº‹ä¸šå•ä½ï¼‰1äºº Aå· 0952-2012332 0952-2218747 140 70 ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ç„¶åå°±å¯ä»¥ç”¨ vlookup å‡½æ•°è‡ªåŠ¨ä»ç»Ÿè®¡è¡¨æ ¹æ®èŒä½ä»£ç æŸ¥æ‰¾åˆ°å¯¹åº”èŒä½çš„ç¼´è´¹äººæ•°ã€‚ç®€å•èµ·è§ï¼Œå¯ä»¥ç”¨ Excel çš„å‡½æ•°å‘å¯¼æ‰‹åŠ¨å¯è§†åŒ–çš„é€‰æ‹©æˆ–ç¡®å®šå‡ºå‡½æ•°çš„å‚æ•°ï¼Œä»èœå•æ é€‰ä¸­ï¼šå…¬å¼-æ’å…¥å‡½æ•°ï¼Œåœ¨æœç´¢å‡½æ•°å¯¹è¯æ¡†é‡Œè¾“å…¥ vlookup å¹¶ç‚¹å‡»è½¬åˆ°ï¼Œç„¶åç¡®ä¿ä»é€‰æ‹©å‡½æ•°ä¸­é€‰ä¸­ vlookup åç‚¹å‡»ç¡®å®šã€‚ ç‚¹å‡»æ¯é¡¹å‚æ•°åé¢çº¢åœˆé‡Œçš„æŒ‰é’®å°±å¯ä»¥åœ¨å·¥ä½œè¡¨ä¸­é€‰æ‹©å‚æ•°æˆ–å‚æ•°èŒƒå›´ï¼š æœ€ç»ˆå®Œæ•´å‡½æ•°å½¢å¼æ˜¯ï¼š=VLOOKUP(E308,ç»Ÿè®¡è¡¨!D2:I765,6,0)ï¼Œæ„æ€æ˜¯ä»ç»Ÿè®¡è¡¨çš„ D2 åˆ° I765 çš„å•å…ƒæ ¼èŒƒå›´å†…å¯¹æ¯” D åˆ—çš„å€¼æ˜¯å¦ä¸º E308 é‡Œçš„å€¼ï¼Œè‹¥ç²¾ç¡®åŒ¹é…åˆ™è¿”å›è¯¥å•å…ƒæ ¼æ‰€é€‰èŒƒå›´çš„ç¬¬å…­è¡Œçš„å€¼ä¸ºè¯¥å‡½æ•°çš„ç»“æœã€‚ è§‚å¯Ÿä¹‹åå‘ç°å¯¹åº”æ­£ç¡®ï¼Œç„¶åå°±å¯ä»¥ç”¨ Excel å¼ºå¤§çš„å¡«å……å·¥å…·å°†å…¶ä»–èŒä½çš„ç¼´è´¹äººæ•°ä¹Ÿæ ¹æ®ç¬¬ä¸€ä¸ªç­›é€‰å‡ºæ¥çš„å²—ä½å¡«å……è¿›å»ã€‚åœ¨æˆ‘çš„æ“ä½œä¸­ï¼Œå¡«å……åçš„å‡½æ•°è™½ç„¶æœ‰é—®é¢˜ä½†å·¥ä½œè‰¯å¥½ï¼Œå› ä¸ºèŒä½è¡¨å’Œç»Ÿè®¡è¡¨çš„èŒä½è¡¨çš„æ’åºæ˜¯å¯¹åº”çš„ï¼Œæ­¤æ—¶è‹¥åœ¨æœªå¯¹åº”çš„æƒ…å†µä¸‹å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæœ‰çš„å•å…ƒæ ¼å¯èƒ½ä¼šå‡ºç° #N/A å€¼ã€‚ é—®é¢˜æ€è€ƒ é€ æˆä¸Šè¿°é—®é¢˜çš„åŸå› æ˜¯æˆ‘ä»¬æœªé”å®š table_array å‚æ•°çš„æ‰€é€‰èŒƒå›´çš„è¡Œå€¼ï¼Œæ¯æ¬¡å¾€ä¸‹ä¸‹æ‹‰å¡«å……ç»Ÿè®¡èŒƒå›´çš„è¡Œå€¼éƒ½ä¼šè‡ªå¢ï¼Œå¦‚æˆ‘åœ¨ä¸‹é¢éšä¾¿é€‰ä¸­çš„ä¸€ä¸ªå¡«å……åçš„å•å…ƒæ ¼çš„å…¬å¼å˜æˆäº†ï¼š=VLOOKUP(E615,ç»Ÿè®¡è¡¨!D486:I1249,6,0)ï¼Œè¿™åœ¨æ— åºæƒ…å†µä¸‹ä¼šå‡ºé”™ã€‚ ä¸ºäº†ä½¿è¯¥å‚æ•°å›ºå®šï¼Œå¯ä»¥å€ŸåŠ© $ ç¬¦å·è¿›è¡Œé™å®šï¼Œè¿™æ ·æ¯æ¬¡å¡«å……æ—¶è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸å˜çš„äº†ã€‚ äºæ˜¯ï¼Œç­›é€‰åçš„èŒä½è¡¨çš„ç¬¬ä¸€è¡Œçš„å…¬å¼å¯ä»¥å†™æˆï¼š=VLOOKUP(E308,ç»Ÿè®¡è¡¨!D$2:I$765,6,0)ï¼Œç„¶åå†å¾€ä¸‹å¡«å……ã€‚å†é€‰ä¸­åˆšæ‰å¡«å……çš„å…¬å¼ï¼Œå…¶å˜æˆäº†ï¼š=VLOOKUP(E615,ç»Ÿè®¡è¡¨!D$2:I$765,6,0)ï¼Œè¿™æ ·å°±æ¯”è¾ƒç²¾å‡†äº†ã€‚ è®¡ç®—ç¼´è´¹æ‹›è€ƒæ¯”ï¼Œä»¥ç­›é€‰åçš„èŒä½è¡¨çš„ç¬¬ä¸€è¡Œä¸ºä¾‹ï¼š=O308/F308ã€‚ç„¶åç”¨æ’åºå·¥å…·æ’åºå°±å®Œæˆä»»åŠ¡äº†ã€‚ è¿˜æ˜¯åºŸè¯ çœ‹äº†æœ€åçš„ç»“æœï¼Œä¸ä»…æ„Ÿå¹ç°åœ¨çš„å…¬åŠ¡å‘˜è€ƒè¯•è¶Šæ¥è¶Šå·ï¼Œæˆ‘ä¼°è®¡æˆ‘ä¹Ÿå°†åªä¼šæ˜¯é™ªè€ƒå‘˜ä¸­çš„ä¸€å‘˜ã€‚ç”±æ­¤çœ‹æ¥è¿˜æ˜¯å†é’»ç ”é’»ç ” Excel çš„ SQL æŸ¥è¯¢åŠŸèƒ½æ¯”è¾ƒç°å®ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Office","slug":"å­¦ä¹ /Office","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Office/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Excel","slug":"Excel","permalink":"https://skinyi.github.io/tags/Excel/"},{"name":"Office","slug":"Office","permalink":"https://skinyi.github.io/tags/Office/"},{"name":"é¿å…åŠ ç­","slug":"é¿å…åŠ ç­","permalink":"https://skinyi.github.io/tags/%E9%81%BF%E5%85%8D%E5%8A%A0%E7%8F%AD/"},{"name":"å°‘åŠ ç­","slug":"å°‘åŠ ç­","permalink":"https://skinyi.github.io/tags/%E5%B0%91%E5%8A%A0%E7%8F%AD/"}]},{"title":"Docker Run å‘½ä»¤è¯¦è§£","slug":"Docker | Docker Run å‘½ä»¤è¯¦è§£","date":"2022-03-01T12:31:09.667Z","updated":"2022-03-28T06:09:02.646Z","comments":true,"path":"2022-03-01-Docker | Docker Run å‘½ä»¤è¯¦è§£.html","link":"","permalink":"https://skinyi.github.io/2022-03-01-Docker%20|%20Docker%20Run%20%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html","excerpt":"","text":"Docker åœ¨éš”ç¦»çš„å®¹å™¨ä¸­è¿è¡Œè¿›ç¨‹ã€‚å®¹å™¨æ˜¯åœ¨ä¸»æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ã€‚ä¸»æœºå¯ä»¥æ˜¯æœ¬åœ°æˆ–è¿œç¨‹çš„ã€‚å½“æ‰§è¡Œ docker run æ—¶ï¼Œè¿è¡Œçš„å®¹å™¨è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºå®ƒæœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œå’Œè‡ªå·±çš„ç‹¬ç«‹äºä¸»æœºçš„è¿›ç¨‹æ ‘ã€‚ ä»¥ä¸‹ä»‹ç»äº†å¦‚ä½•åœ¨è¿è¡Œæ—¶ä½¿ç”¨ docker run å‘½ä»¤å®šä¹‰å®¹å™¨çš„èµ„æºã€‚ docker run å‘½ä»¤çš„ä¸€èˆ¬å½¢å¼ åŸºæœ¬çš„ docker run å‘½ä»¤é‡‡ç”¨ä»¥ä¸‹å½¢å¼ï¼š 1\\$ docker run [é€‰é¡¹] IMAGE[:æ ‡ç­¾|@æ‘˜è¦] [å‘½ä»¤] [å‚æ•°...] docker run å‘½ä»¤å¿…é¡»æŒ‡å®šä»ä¸­ç”Ÿæˆå®¹å™¨çš„é•œåƒã€‚é•œåƒå¼€å‘äººå‘˜å¯ä»¥å®šä¹‰ä¸ä»¥ä¸‹å†…å®¹ç›¸å…³çš„é•œåƒé»˜è®¤å€¼ï¼š åˆ†ç¦»æˆ–å‰å°è¿è¡Œï¼› å®¹å™¨æ ‡è¯†ï¼› ç½‘ç»œè®¾ç½®ï¼› å¯¹CPUå’Œå†…å­˜çš„è¿è¡Œæ—¶çº¦æŸã€‚ é€šè¿‡ docker run [é€‰é¡¹] ç”¨æˆ·å¯ä»¥æ·»åŠ æˆ–è¦†ç›–å¼€å‘äººå‘˜è®¾ç½®çš„é•œåƒé»˜è®¤å€¼ã€‚æ­¤å¤–ï¼Œç”¨æˆ·å¯ä»¥è¦†ç›–å‡ ä¹æ‰€æœ‰ç”± Docker è¿è¡Œæ—¶æœ¬èº«è®¾ç½®çš„é»˜è®¤å€¼ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œdocker run æ¯”ä»»ä½•å…¶ä»– Docker å‘½ä»¤éƒ½æœ‰æ›´å¤šé€‰é¡¹ã€‚ ğŸŸ¢ æ ¹æ®ä½ çš„ Docker ç³»ç»Ÿé…ç½®ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ docker run å‘½ä»¤å‰é¢åŠ ä¸Š sudo ä»¥ç¡®ä¿å‘½ä»¤æ­£å¸¸æ‰§è¡Œç”Ÿæ•ˆã€‚ä¸ºäº†é¿å…åœ¨ docker å‘½ä»¤ä¸­ä½¿ç”¨ sudoï¼Œä½ çš„ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º docker çš„ Unix ç»„å¹¶å‘å…¶ä¸­æ·»åŠ  docker æ“ä½œç”¨æˆ·ã€‚ ä»…ç”¨æˆ·å¯æŒ‡å®šçš„é€‰é¡¹ ä»…æ‰§è¡Œ docker run å‘½ä»¤çš„ç”¨æˆ·å¯æŒ‡å®šä»¥ä¸‹å‘½ä»¤æ‰§è¡Œæ—¶çš„é€‰é¡¹ï¼š ç‹¬ç«‹è¿›ç¨‹æˆ–å‰å°æ‰§è¡Œ ç‹¬ç«‹è¿›ç¨‹ï¼ˆ-d é€‰é¡¹ï¼‰ å‰å°æ‰§è¡Œ å®¹å™¨æ ‡è¯† åç§°ï¼ˆ--name é€‰é¡¹ï¼‰ PID å€¼ IPC è®¾ç½®ï¼ˆ--ipcï¼‰ ç½‘ç»œè®¾ç½® é‡å¯ç­–ç•¥ï¼ˆ--restartï¼‰ æ¸…ç†ï¼ˆ--rmï¼‰ è¿è¡Œæ—¶èµ„æºçº¦æŸ è¿è¡Œæ—¶ç‰¹æƒåŠ Linux capabilities ç‹¬ç«‹è¿›ç¨‹æˆ–å‰å°æ‰§è¡Œ å½“å¯åŠ¨äº†ä¸€ä¸ª Docker å®¹å™¨ï¼Œä½ å¿…é¡»å…ˆå†³å®šä½ æ˜¯å¦æƒ³åœ¨åå°ä»¥â€œåˆ†ç¦»â€çš„æ¨¡å¼æˆ–è€…é»˜è®¤åœ¨å‰å°è¿è¡Œå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ -d[=&lt;true|false&gt;] é€‰é¡¹æ¥æŒ‡å®šåˆ†ç¦»å¼æ¨¡å¼ï¼Œå®¹å™¨ä¼šåœ¨åå°è¿è¡Œå¹¶æ‰“å°å‡ºè¯¥å®¹å™¨çš„ idã€‚ æ ¹æ®è®¾è®¡ï¼Œå½“ç”¨äºè¿è¡Œå®¹å™¨çš„æ ¹è¿›ç¨‹é€€å‡ºæ—¶ï¼Œä»¥åˆ†ç¦»æ¨¡å¼å¯åŠ¨çš„å®¹å™¨ä¹Ÿä¼šé€€å‡ºï¼Œé™¤éä½ è¿˜æŒ‡å®šäº† -rm é€‰é¡¹ã€‚å¦‚æœå°† -d ä¸ -rm ä¸€èµ·ä½¿ç”¨ï¼Œå½“å®¹å™¨é€€å‡ºæˆ–å®ˆæŠ¤ç¨‹åºé€€å‡ºæ—¶(æ— è®ºå“ªä¸ªå…ˆé€€å‡º)ï¼Œå®¹å™¨å°†è¢«åˆ é™¤ã€‚ ä¸è¦å‘åˆ†ç¦»æ¨¡å¼è¿è¡Œçš„å®¹å™¨ä¼ é€’ service xxx start çš„å‘½ä»¤ã€‚å¦‚ä»¥ä¸‹å‘½ä»¤å°è¯•åˆ›å»ºå®¹å™¨åå¯åŠ¨ nginx æœåŠ¡ã€‚ 1\\$ docker run -d -p 80:80 my_image service nginx start å³ä½¿è¿™ä¹Ÿä¼šæˆåŠŸçš„å¯åŠ¨å®¹å™¨å†…éƒ¨çš„ nginx æœåŠ¡ï¼Œä½†æ˜¯å®ƒä¸ç¬¦åˆåˆ†ç¦»çš„å®¹å™¨èŒƒä¾‹ï¼Œå› ä¸ºéšç€æ ¹è¿›ç¨‹ï¼ˆservice nginx startï¼‰çš„é€€å‡ºï¼Œåˆ†ç¦»å¼å®¹å™¨ä¹Ÿä¼šè·Ÿç€åœæ­¢ï¼Œä»è€Œå¯¼è‡´ nginx æœåŠ¡å¯åŠ¨äº†å´ä¸èƒ½ç”¨ã€‚è¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹å¦‚ nginx web æœåŠ¡å™¨åº”è¯¥æŒ‰ç…§ä¸‹è¿°æ–¹æ³•ï¼š 1\\$ docker run -d -p 80:80 my_image nginx -g &#x27;daemon off;&#x27; è¦ä½¿ç”¨åˆ†ç¦»çš„å®¹å™¨è¿›è¡Œè¾“å…¥/è¾“å‡ºåˆ™å¿…é¡»ä½¿ç”¨ç½‘ç»œè¿æ¥æˆ–å…±äº«å·ï¼Œå› ä¸ºè¯¥å®¹å™¨ä¸ä¼šç›‘å¬è¿è¡Œ docker run çš„å‘½ä»¤è¡Œã€‚ ä¸ºäº†å°†åˆ†ç¦»å‡ºå»çš„å®¹å™¨è½¬è‡³å‰å°è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ docker attach å‘½ä»¤ã€‚å°†è¿è¡Œäºå‰å°çš„å®¹å™¨åˆ‡è‡³åå°è¿è¡Œå¯ä»¥ä½¿ç”¨ Ctrl + p + q å¿«æ·é”®ã€‚ å‰å°è¿è¡Œ åœ¨å‰å°æ¨¡å¼ä¸‹ï¼ˆé»˜è®¤æ¨¡å¼å½“æœªæŒ‡å®š -d é€‰é¡¹ï¼‰ï¼Œdocker run å¯ä»¥å¯åŠ¨å®¹å™¨ä¸­çš„è¿›ç¨‹å¹¶ä¸”å°†å½“å‰ç»ˆç«¯é™„åŠ åˆ°è¯¥è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºä»¥åŠæ ‡å‡†é”™è¯¯æµä¸­ã€‚å®ƒç”šè‡³å¯ä»¥â€œå‡è£…â€æˆä¸ºä¸€ä¸ª TTY ä¼šè¯ï¼ˆå¦‚å¤§å¤šæ•°å‘½ä»¤è¡Œå¯æ‰§è¡Œæ–‡ä»¶æœŸæœ›çš„é‚£æ ·ï¼‰å¹¶ä¸”ä¼ é€’ä¿¡å·ã€‚ä»¥ä¸‹è¿™äº›é€‰é¡¹éƒ½æ˜¯å¯é…ç½®çš„ï¼š -a=[] ï¼šé™„åŠ åˆ°æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œ / æˆ–æ ‡å‡†é”™è¯¯æµ -t ï¼šåˆ†é…ä¸€ä¸ªä¼ª TTY --sig-proxy=trueï¼šå°†æ‰€æœ‰æ”¶åˆ°çš„ä¿¡å·ä»£ç†åˆ°è¿›ç¨‹(ä»…é™éTTYæ¨¡å¼) -i ï¼šå³ä½¿æ²¡æœ‰è¿æ¥ï¼Œä¹Ÿä¿æŒæ ‡å‡†è¾“å…¥æµæ‰“å¼€ å¦‚æœä½ æ²¡æœ‰æŒ‡å®š -a é€‰é¡¹ï¼ŒDocker å°±ä¼šå°†è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€é”™è¯¯æµé™„åŠ åˆ°å½“å‰ç»ˆç«¯ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ -a é€‰é¡¹æŒ‡å®šå“ªä¸ªæµè¿›è¡Œé™„åŠ ï¼Œæ¯”å¦‚ï¼š 1\\$ docker run -a stdin -a stdout -i -t ubuntu /bin/bash å¯¹äºäº¤äº’å¼è¿›ç¨‹ï¼ˆå¦‚å‘½ä»¤è¡Œ shellï¼‰ï¼Œå¿…é¡»ä¸€èµ·æŒ‡å®š -i å’Œ -t é€‰é¡¹æ¥ä¸ºå®¹å™¨è¿›ç¨‹åˆ†é…ä¸€ä¸ª TTYï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹å¸¸è¢«ç®€å†™ä¸º -itã€‚å½“å®¢æˆ·ç«¯ä»ç®¡é“ä¸­æ¥æ”¶æ ‡å‡†è¾“å…¥æµæ—¶æŒ‡å®š -t é€‰é¡¹é€šå¸¸æ˜¯è¢«ç¦æ­¢çš„ï¼Œæ¯”å¦‚ï¼š 1\\$ echo test | docker run -i busybox cat ğŸ”´ æ³¨æ„ï¼šåœ¨å®¹å™¨ä¸­è¿è¡Œçš„ PID ä¸º 1 çš„è¿›ç¨‹ä¼šè¢« Linux ç‰¹æ®Šçœ‹å¾…ï¼šå®ƒä¼šå¿½ç•¥ä»»ä½•ä¿¡å·çš„é»˜è®¤è¡Œä¸ºã€‚æœ€ç»ˆå°±ä¼šå¯¼è‡´æ”¶åˆ° SIGINT å’Œ SIGTERM ä¿¡å·çš„è¿›ç¨‹ä¸ä¼šç»ˆæ­¢é™¤éå®ƒè¢«ç¼–ç è¿›è¡ŒæŒ‡å®šã€‚ å®¹å™¨æ ‡è¯† å®¹å™¨åç§°ï¼ˆ--nameï¼‰ ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼æ¥æ ‡è¯†å®¹å™¨ï¼š æ ‡è¯†ç¬¦ç±»å‹ ä¾‹å­ UUID é•¿æ ‡è¯†ç¬¦ â€œf78375b1c487e03c9438c729345e54db9d20cfa2ac1fc3494b6eb60872e74778â€ UUID çŸ­æ ‡è¯†ç¬¦ â€œf78375b1c487â€ åç§° â€œevil_ptolemyâ€ å…¶ä¸­ï¼ŒUUID æ ‡è¯†ç¬¦ç”± Docker å®ˆæŠ¤ç¨‹åºç”Ÿæˆã€‚å¦‚æœæœªé€šè¿‡ --name é€‰é¡¹æ¥ç»™å®¹å™¨èµ‹äºˆåç§°ï¼Œåˆ™å®ˆæŠ¤ç¨‹åºä¼šç”Ÿæˆä¸€ä¸²éšæœºå­—ç¬¦æ¥è‡ªåŠ¨å‘½åè¯¥å®¹å™¨ã€‚ç»™å®¹å™¨è¿›è¡Œæœ‰æ„ä¹‰çš„å‘½åæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ã€‚å¦‚æœä½ åˆ¶å®šäº†å®¹å™¨çš„åç§°ï¼Œå°±å¯ä»¥åœ¨ Docker ç½‘ç»œä¸­å¼•ç”¨å®¹å™¨æ—¶ä½¿ç”¨å®ƒï¼Œä¸è®ºæ˜¯å‰å°è¿˜æ˜¯åå°è¿è¡Œçš„å®¹å™¨ã€‚ é»˜è®¤ç½‘æ¡¥ç½‘ç»œä¸Šçš„å®¹å™¨å¿…é¡»è¢«é“¾æ¥ä»¥é€šè¿‡åç§°è¿›è¡Œé€šä¿¡ã€‚ æœ€åï¼Œä¸ºäº†ä¾¿äºè‡ªåŠ¨åŒ–ï¼Œä½ å¯ä»¥è®© Docker å°†å®¹å™¨çš„ ID å†™å…¥åˆ°ä½ é€‰æ‹©çš„æ–‡ä»¶ä¸­ã€‚è¿™ç±»ä¼¼äºä¸€äº›ç¨‹åºä¼šå°†è‡ªèº«è¿›ç¨‹ ID å†™å…¥åˆ°æ–‡ä»¶ä¸­å»ï¼Œæ­£å¦‚ä½ è§è¿‡çš„ PID æ–‡ä»¶ã€‚ 1--cidfile=&quot;&quot;ï¼šå°†å®¹å™¨ ID å†™å…¥æ–‡ä»¶ é•œåƒ[:æ ‡ç­¾] è™½ç„¶ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯ä¸€ç§æ ‡è¯†å®¹å™¨çš„æ–¹æ³•ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡å°† image[:tag] æ·»åŠ åˆ°å‘½ä»¤ä¸­æ¥æŒ‡å®šæ‚¨æƒ³è¦è¿è¡Œå®¹å™¨çš„é•œåƒç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼šdocker run ubuntu:14.04ã€‚ é•œåƒ[@æ‘˜è¦] ä½¿ç”¨ v2 æˆ–æ›´é«˜ç‰ˆæœ¬é•œåƒæ ¼å¼çš„é•œåƒæœ‰ä¸€ä¸ªç§°ä¸ºæ‘˜è¦çš„å†…å®¹å¯å¯»å€æ ‡è¯†ç¬¦ã€‚åªè¦ç”¨äºç”Ÿæˆé•œåƒçš„è¾“å…¥ä¸å˜ï¼Œæ‘˜è¦å€¼å°±æ˜¯å¯é¢„æµ‹å’Œå¯å‚è€ƒçš„ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨åœ¨è¿è¡Œ alpine é•œåƒæ—¶ä½¿ç”¨äº† sha256:9cacb71397b640ECA97488cf08582AE4068513101088e9f96c9814bfda95e0 æ‘˜è¦ï¼š 1\\$ docker run alpine@sha256:9cacb71397b640eca97488cf08582ae4e4068513101088e9f96c9814bfda95e0 date PID è®¾ç½®ï¼ˆ--pidï¼‰ --pid=&quot;&quot; ï¼šä¸ºå®¹å™¨è®¾ç½® PIDï¼ˆè¿›ç¨‹ï¼‰ å‘½åç©ºé—´æ¨¡å¼ã€‚å¯é€‰å€¼ï¼šcontainer:&lt;name|id&gt;ï¼šåŠ å…¥å…¶ä»–å®¹å™¨çš„ PID å‘½åç©ºé—´ï¼›hostï¼šä½¿ç”¨å®¹å™¨ä¸­çš„ä¸»æœºçš„ PID å‘½åç©ºé—´ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å®¹å™¨éƒ½å¯ç”¨äº† PID å‘½åç©ºé—´ã€‚ PID å‘½åç©ºé—´æä¾›äº†è¿›ç¨‹çš„åˆ†ç¦»ã€‚PID å‘½åç©ºé—´åˆ é™¤äº†ç³»ç»Ÿè¿›ç¨‹çš„è§†å›¾ï¼Œå¹¶å…è®¸é‡ç”¨è¿›ç¨‹ IDï¼ŒåŒ…æ‹¬ pid 1ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›ä½ çš„å®¹å™¨å…±äº«ä¸»æœºçš„è¿›ç¨‹åç§°ç©ºé—´ï¼ŒåŸºæœ¬ä¸Šå…è®¸å®¹å™¨å†…çš„è¿›ç¨‹çœ‹åˆ°ç³»ç»Ÿä¸Šçš„æ‰€æœ‰è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åƒ strace æˆ– gdb è¿™æ ·çš„è°ƒè¯•å·¥å…·æ„å»ºä¸€ä¸ªå®¹å™¨ï¼Œä½†æ˜¯åœ¨è°ƒè¯•å®¹å™¨ä¸­çš„è¿›ç¨‹æ—¶ï¼Œä½ å¸Œæœ›ä½¿ç”¨è¿™äº›å·¥å…·ã€‚ ä¾‹å­ï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œ `htop` åˆ›å»º Dockerfile: 123FROM alpine:latestRUN apk add --update htop &amp;&amp; rm -rf /var/cache/apk/*CMD [&quot;htop&quot;] æ„å»ºæ­¤ Dockerfile å¹¶å°†é•œåƒæ ‡è®°ä¸º myhtopï¼š 1\\$ docker build -t myhtop . ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨å®¹å™¨ä¸­è¿è¡Œ htop å‘½ä»¤ï¼š 1\\$ docker run -it --rm --pid=host myhtop åŠ å…¥å…¶ä»–å¯ä»¥è¢«ç”¨æ¥è°ƒè¯•è¯¥å®¹å™¨çš„ pid å‘½åç©ºé—´ã€‚ ä¾‹å­ å¼€å¯ä¸€ä¸ªè¿è¡Œ redis æœåŠ¡çš„å®¹å™¨ï¼š 1\\$ docker run --name myredis -d redis é€šè¿‡è¿è¡Œå«æœ‰ strace çš„å…¶ä»–å®¹å™¨æ¥è°ƒè¯• redis å®¹å™¨ï¼š 12\\$ docker run -it --pid=container:my-redis my_strace_docker_image bash\\$ strace -p 1 UTS è®¾ç½®ï¼ˆ--utsï¼‰ --uts=&quot;&quot; : è®¾ç½®å®¹å™¨çš„ UTS å‘½åç©ºé—´ã€‚å¯é€‰å€¼ï¼šhost å€¼ä»£è¡¨ä½¿ç”¨ä¸»æœºçš„ uts å€¼ã€‚ UTS å‘½åç©ºé—´å‚æ•°è®¾ç½®æ—¨åœ¨ä½¿å®¹å™¨è¿›ç¨‹å¯¹äºè¿è¡Œäºç›®æ ‡ uts è®¾ç½®ä¸­çš„ç›®æ ‡è¿›ç¨‹çš„ä¸»æœºåå’ŒåŸŸå¯è§ã€‚é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æŒ‡å®šäº† --network=host å‘½åç©ºé—´çš„å®¹å™¨ï¼Œéƒ½æœ‰è‡ªå·±çš„ uts å‘½åç©ºé—´ã€‚--uts=host å°†ä¼šä½¿å®¹å™¨ä½¿ç”¨å’Œä¸»æœºä¸€æ ·çš„ uts å‘½åç©ºé—´ã€‚åœ¨æŒ‡å®šäº† --uts=host è®¾ç½®åå°†ä¸èƒ½å†å•ç‹¬æŒ‡å®š --hostname å’Œ --domainname è®¾ç½®ã€‚ å¦‚æœå¸Œæœ›å®¹å™¨çš„ä¸»æœºåéšç€ä¸»æœºçš„ä¸»æœºåçš„æ›´æ”¹è€Œæ›´æ”¹ï¼Œå³å®¹å™¨ä¸ä¸»æœºå…±äº«ä¸»æœºåï¼Œæ›´å¥½çš„åšæ³•æ˜¯ä»å®¹å™¨ä¸­æ›´æ”¹ä¸»æœºçš„ä¸»æœºåã€‚ IPC è®¾ç½®ï¼ˆ--ipcï¼‰ --ipc=&quot;MODE&quot; : è®¾ç½®å®¹å™¨çš„ IPC æ¨¡å¼ å¯ä»¥æ¥å—ä»¥ä¸‹å€¼ï¼š å€¼ æè¿° ä¸æŒ‡å®š ä½¿ç”¨å®ˆæŠ¤ç¨‹åºé»˜è®¤è®¾ç½® none ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ï¼Œä¸”ä¸æŒ‚è½½ /dev/shm private ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ shareable ä½¿ç”¨è‡ªå·±ç§æœ‰çš„ IPC å‘½åç©ºé—´ï¼Œä½†å…è®¸ä¸å…¶ä»–å®¹å™¨å…±äº«æ­¤å‘½åç©ºé—´ container: &lt;_name-or-ID_&gt; åŠ å…¥å…¶ä»–è®¾ç½®äº† --ipc=shareable çš„å®¹å™¨çš„å‘½åç©ºé—´ï¼ˆéœ€æŒ‡å®šå®¹å™¨åæˆ– IDï¼‰ host ä½¿ç”¨ä¸»æœºçš„ IPC å‘½åç©ºé—´ dockerd å®ˆæŠ¤ç¨‹åºé»˜è®¤ä¼šä½¿ç”¨ --ipc=private æˆ– --ipc=shareable è®¾ç½®ï¼Œå…·ä½“å–å†³äº dockerd å®ˆæŠ¤ç¨‹åºçš„ç‰ˆæœ¬åŠé…ç½®ã€‚ IPC(POSIX/SysV IPC) å‘½åç©ºé—´æä¾›äº†ä¸åŒå‘½åç©ºé—´ä¸‹çš„å…±äº«å†…å­˜æ®µã€ä¿¡å·é‡ä»¥åŠæ¶ˆæ¯é˜Ÿåˆ—çš„éš”ç¦»æœºåˆ¶ã€‚ å…±äº«å†…å­˜æ®µæ˜¯ç”¨äºä»¥å†…å­˜çš„é€Ÿåº¦åŠ é€Ÿè¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹æ³•ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰é€šè¿‡ç®¡é“æˆ–ç½‘ç»œå †æ ˆçš„æ–¹æ³•ã€‚å…±äº«å†…å­˜é€šå¸¸ç”¨äºæ¶‰åŠç§‘å­¦è®¡ç®—æˆ–é‡‘èæœåŠ¡ç­‰çš„æ•°æ®åº“å’Œæ„å»ºçš„å¯¹é«˜æ€§èƒ½æœ‰è¦æ±‚çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„è¿™ç±»åº”ç”¨ç¨‹åºè¢«æ‹†åˆ†æˆå¤šä¸ªå®¹å™¨å°±è¦è€ƒè™‘å¯èƒ½éœ€è¦å…±äº«è¿™äº›å®¹å™¨ä¹‹é—´çš„ IPC æœºåˆ¶ï¼Œåšæ³•æ˜¯å¯¹ä¸»å®¹å™¨ä½¿ç”¨ --ipc=shareable çš„è®¾ç½®ã€å…¶ä»–å®¹å™¨ä½¿ç”¨ --ipc=container:&lt;ä¸»å®¹å™¨åæˆ–å…¶ ID&gt; çš„è®¾ç½®ã€‚ ç½‘ç»œè®¾ç½® --dns=[] : ä¸ºå®¹å™¨æŒ‡å®šåŸŸåæœåŠ¡å™¨ --network=&quot;bridge&quot; : æŒ‡å®šå®¹å™¨æ¥å…¥ç½‘ç»œçš„æ–¹å¼ï¼Œå¯é€‰å€¼ï¼šbridge åœ¨é»˜è®¤çš„ Docker ç½‘æ¡¥ä¸Šåˆ›å»ºç½‘ç»œæ ˆï¼ˆé»˜è®¤ï¼‰ï¼›none ä¸è”ç½‘ï¼›container:&lt;name|id&gt; å¤ç”¨ç°æœ‰å®¹å™¨çš„ç½‘ç»œæ ˆï¼›host ä½¿ç”¨ Dockr ä¸»æœºçš„ç½‘ç»œæ ˆï¼›&lt;network-name&gt;|&lt;network-id&gt; è¿æ¥è‡³ç”¨æˆ·è‡ªå®šä¹‰çš„ç½‘ç»œã€‚ --network-alias=[] : ä¸ºå®¹å™¨æ·»åŠ ç½‘ç»œèŒƒå›´çš„åˆ«å --add-host=&quot;&quot; : åœ¨ /etc/hosts ä¸Šè‡ªåŠ¨æ·»åŠ ä¸€è¡Œè®°å½• (host:IP) --mac-address=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ MAC åœ°å€ --ip=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ IPv4 åœ°å€ --ip6=&quot;&quot; : æŒ‡å®šå®¹å™¨ç‰©ç†è®¾å¤‡çš„ IPv6 åœ°å€ --link-local-ip=[] : æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨çš„ç‰©ç†è®¾å¤‡çš„é“¾è·¯çš„æœ¬åœ° IPv4 æˆ– IPv6 åœ°å€ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å®¹å™¨éƒ½ä¼šå¯ç”¨ç½‘ç»œä¸”å¯¹ç½‘ç»œå‡ºå£ä¸åšä»»ä½•é™åˆ¶ã€‚å¯ä»¥é€šè¿‡æŒ‡å®š --network none é€‰é¡¹æ¥ç¦ç”¨å®¹å™¨çš„ç½‘ç»œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»…é€šè¿‡æ–‡ä»¶ã€æ ‡å‡†è¾“å…¥è¾“å‡ºæµæ¥è¿›è¡Œ I/Oã€‚ è¦å®ç°ä¸åŒå®¹å™¨ä¹‹é—´çš„äº’é€šåªèƒ½é€šè¿‡é»˜è®¤çš„ç½‘æ¡¥æ¨¡å¼è®¾ç½®ï¼Œé“¾æ¥ç‰¹æ€§æ˜¯ä¸€ç§ç»å…¸çš„ç‰¹æ€§ï¼Œæ›´æ¨èä½¿ç”¨åŸºäºé“¾æ¥ç‰¹æ€§çš„ Docker ç½‘ç»œé©±åŠ¨ã€‚ ä½ çš„å®¹å™¨ä¼šé»˜è®¤ä½¿ç”¨ä¸»æœºè®¾ç½®çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æŒ‡å®š --dns=&lt;DNS&gt; é€‰é¡¹æ¥æŒ‡å®šå®¹å™¨ç½‘ç»œçš„ DNS è®¾ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨ä¼šæ ¹æ®è‡ªèº«åˆ†é…çš„ ip åœ°å€æ¥ç”Ÿæˆè‡ªå·±çš„ MAC åœ°å€ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š --mac-address=&lt;MAC&gt; é€‰é¡¹ï¼ˆMAC åœ°å€çš„åˆ†éš”ç¬¦ä½¿ç”¨è‹±æ–‡å†’å·ï¼Œå¦‚ 12:34:56:78:9a:bcï¼‰æ¥æ˜¾å¼æŒ‡å®šå®¹å™¨çš„ MAC åœ°å€ã€‚éœ€æ³¨æ„ Docker ä¸ä¼šè¿›è¡Œæ‰‹åŠ¨åˆ†é…çš„ MAC åœ°å€çš„å”¯ä¸€æ€§æ£€æŸ¥ã€‚ Network:none å®¹å™¨ä¸ä¼šæœ‰åˆ°å¤–éƒ¨ç½‘ç»œçš„è™šæ‹Ÿè®¾å¤‡åŠè·¯ç”±ï¼Œä½†å†…éƒ¨ä»ä¼šæœ‰ä¸€ä¸ªå›ç¯æ¥å£ã€‚ Network:bridge å°†ç½‘ç»œè®¾ç½®ä¸ºæ¡¥æ¥æ¨¡å¼åï¼Œå®¹å™¨å°†ä½¿ç”¨ docker çš„é»˜è®¤ç½‘ç»œè®¾ç½®ã€‚åœ¨ä¸»æœºä¸Šè®¾ç½®ä¸€ä¸ªæ¡¥ï¼Œé€šå¸¸å‘½åä¸º docker0ï¼Œå°†ä¸ºå®¹å™¨åˆ›å»ºä¸€å¯¹ veth æ¥å£ã€‚vethå¯¹çš„ä¸€ç«¯å°†ä¿ç•™åœ¨è¿æ¥åˆ°ç½‘æ¡¥çš„ä¸»æœºä¸Šï¼Œè€Œ veth å¯¹çš„å¦ä¸€ç«¯é™¤äº†æ”¾åœ¨ç¯å›æ¥å£ä¹‹å¤–ï¼Œè¿˜å°†æ”¾åœ¨å®¹å™¨çš„å‘½åç©ºé—´å†…ä»¥ä¸ºç½‘æ¡¥ç½‘ç»œä¸Šçš„å®¹å™¨åˆ†é…ä¸€ä¸ªIP åœ°å€ï¼Œæµé‡å°†é€šè¿‡è¯¥ç½‘æ¡¥è·¯ç”±åˆ°è¯¥å®¹å™¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯ä»¥é€šè¿‡å®ƒä»¬çš„ IP åœ°å€è¿›è¡Œé€šä¿¡ã€‚è¦é€šè¿‡åå­—äº¤æµï¼Œå®ƒä»¬å¿…é¡»è¿æ¥åœ¨ä¸€èµ·ã€‚ Network:host å°†ç½‘ç»œè®¾ç½®ä¸ºä¸»æœºæ¨¡å¼åï¼Œå®¹å™¨å°†å…±äº«ä¸»æœºçš„ç½‘ç»œå †æ ˆï¼Œå¹¶ä¸”æ¥è‡ªä¸»æœºçš„æ‰€æœ‰æ¥å£å°†å¯¹å®¹å™¨å¯ç”¨ã€‚å®¹å™¨çš„ä¸»æœºåå°†ä¸ä¸»æœºç³»ç»Ÿä¸Šçš„ä¸»æœºåç›¸åŒ¹é…ã€‚è¯·æ³¨æ„ --mac-address é€‰é¡¹åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹æ— æ•ˆã€‚å³ä½¿åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å®¹å™¨ä¹Ÿæœ‰è‡ªå·±çš„ UTS å‘½åç©ºé—´ã€‚å› æ­¤ï¼Œåœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹å…è®¸ä½¿ç”¨ --hostname å’Œ --domainname é€‰é¡¹ï¼Œå®ƒä»¬åªä¼šæ›´æ”¹å®¹å™¨å†…çš„ä¸»æœºåå’ŒåŸŸåã€‚ä¸ --hostname ç±»ä¼¼ï¼Œå¯ä»¥åœ¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸‹ä½¿ç”¨ --add-hostã€--dnsã€--dns-search å’Œ --dns-option é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹å°†ä¼šæ›´æ–°å®¹å™¨ä¸­çš„ /etc/hosts æˆ– /etc/resolv.confã€‚ä¸ä¼šå¯¹ä¸»æœºä¸Šçš„ /etc/hosts å’Œ /etc/resolv.conf è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ ä¸é»˜è®¤ç½‘æ¡¥æ¨¡å¼ç›¸æ¯”ï¼Œä¸»æœºæ¨¡å¼æä¾›äº†æ˜æ˜¾æ›´å¥½çš„ç½‘ç»œæ€§èƒ½ï¼Œå› ä¸ºå®ƒä½¿ç”¨ä¸»æœºçš„æœ¬æœºç½‘ç»œå †æ ˆï¼Œè€Œç½‘æ¡¥å¿…é¡»é€šè¿‡ dockerd å®ˆæŠ¤ç¨‹åºç»å†ä¸€çº§è™šæ‹ŸåŒ–ã€‚å½“å®¹å™¨çš„ç½‘ç»œæ€§èƒ½è‡³å…³é‡è¦æ—¶ï¼Œä¾‹å¦‚ç”Ÿäº§è´Ÿè½½å¹³è¡¡å™¨æˆ–é«˜æ€§èƒ½ Web æœåŠ¡å™¨ï¼Œå»ºè®®ä»¥æ­¤æ¨¡å¼è¿è¡Œå®¹å™¨ã€‚ ğŸ”µ æ³¨æ„ï¼š--network=&quot;host&quot; ç»™äºˆå®¹å™¨å¯¹æœ¬åœ°ç³»ç»ŸæœåŠ¡ï¼ˆå¦‚ D-busï¼‰çš„å®Œå…¨è®¿é—®æƒï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ã€‚ Network:container å°†ç½‘ç»œè®¾ç½®ä¸ºå®¹å™¨æ¨¡å¼åï¼Œä¸€ä¸ªå®¹å™¨å°†å…±äº«å¦ä¸€ä¸ªå®¹å™¨çš„ç½‘ç»œå †æ ˆã€‚å¦ä¸€ä¸ªå®¹å™¨çš„åç§°å¿…é¡»ä»¥ --network container:&lt;åç§°|id&gt; çš„æ ¼å¼æä¾›ã€‚æ³¨æ„ --add-hostã€--hostnameã€--dnsã€--dns-searchã€--dns-option å’Œ --mac-address åœ¨å®¹å™¨ç½‘ç»œæ¨¡å¼ä¸­æ— æ•ˆï¼Œè€Œ --publishã€--publish-allã€--expose åœ¨å®¹å™¨ç½‘ç»œæ¨¡å¼ä¸­ä¹Ÿæ— æ•ˆã€‚ ä»¥ä¸‹ç¤ºä¾‹è¿è¡Œ redis å®¹å™¨ï¼Œå°† redis ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºï¼Œç„¶åè¿è¡Œ redis-cli å‘½ä»¤å¹¶é€šè¿‡æœ¬åœ°ä¸»æœºæ¥å£è¿æ¥åˆ°RedisæœåŠ¡å™¨ã€‚ 12\\$ docker run -d --name redis example/redis --bind 127.0.0.1\\$ docker run --rm -it --network container:redis example/redis-cli -h 127.0.0.1 ç”¨æˆ·å®šä¹‰çš„ç½‘ç»œ ä½ å¯ä»¥ä½¿ç”¨ Docker ç½‘ç»œé©±åŠ¨ç¨‹åºæˆ–å¤–éƒ¨ç½‘ç»œé©±åŠ¨ç¨‹åºæ’ä»¶æ¥åˆ›å»ºç½‘ç»œã€‚ä½ å¯ä»¥å°†å¤šä¸ªå®¹å™¨è¿æ¥åˆ°åŒä¸€ç½‘ç»œã€‚ä¸€æ—¦è¿æ¥åˆ°ç”¨æˆ·å®šä¹‰çš„ç½‘ç»œï¼Œè¿™äº›å®¹å™¨å°±å¯ä»¥ä»…ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨çš„ IP åœ°å€æˆ–åŸŸåè½»æ¾åœ°è¿›è¡Œé€šä¿¡ã€‚ å¯¹äºæ”¯æŒå¤šä¸»æœºè¿æ¥çš„è¦†ç›–ç½‘ç»œæˆ–è‡ªå®šä¹‰æ’ä»¶ï¼Œè¿æ¥åˆ°åŒä¸€å¤šä¸»æœºç½‘ç»œä½†ä»ä¸åŒå¼•æ“å¯åŠ¨çš„å®¹å™¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨å†…ç½®ç½‘æ¡¥ç½‘ç»œé©±åŠ¨ç¨‹åºåˆ›å»ºç½‘ç»œï¼Œå¹¶åœ¨åˆ›å»ºçš„ç½‘ç»œä¸­è¿è¡Œå®¹å™¨ï¼š 12\\$ docker network create -d bridge my-net\\$ docker run --network=my-net -itd --name=container3 busybox ç®¡ç† /etc/hosts æ–‡ä»¶ ä½ çš„å®¹å™¨å°†åœ¨ /etc/hosts ä¸­åŒ…å«ä¸€äº›è¡Œï¼Œè¿™äº›è¡Œå®šä¹‰äº†å®¹å™¨æœ¬èº«çš„ä¸»æœºåä»¥åŠ localhost å’Œå…¶ä»–ä¸€äº›å¸¸è§å†…å®¹ã€‚--add-host æ ‡å¿—å¯ç”¨äºå‘ /etc/hosts æ·»åŠ é¢å¤–çš„è¡Œã€‚ 123456789\\$ docker run -it --add-host db-static:86.75.30.9 ubuntu cat /etc/hosts127.0.0.1 localhost::1 localhost ip6-localhost ip6-loopbackfe00::0 ip6-localnetff00::0 ip6-mcastprefixff02::1 ip6-allnodesff02::2 ip6-allrouters86.75.30.9 db-static172.17.0.2 af78fbac55c9 å¦‚æœä¸€ä¸ªå®¹å™¨è¿æ¥åˆ°é»˜è®¤æ¡¥æ¥ç½‘ç»œå¹¶ä¸å…¶ä»–å®¹å™¨é“¾æ¥ï¼Œåˆ™è¯¥å®¹å™¨çš„ /etc/hosts æ–‡ä»¶å°†ä½¿ç”¨é“¾æ¥å®¹å™¨çš„åç§°è¿›è¡Œæ›´æ–°ã€‚ ğŸ”µ æ³¨æ„ï¼šç”±äº Docker å¯èƒ½ä¼šå®æ—¶æ›´æ–°å®¹å™¨çš„ /etc/hosts æ–‡ä»¶ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°å®¹å™¨å†…çš„è¿›ç¨‹æœ€ç»ˆè¯»å–ç©ºçš„æˆ–ä¸å®Œæ•´çš„ /etc/hosts æ–‡ä»¶çš„æƒ…å†µã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†æ¬¡é‡è¯•è¯»å–åº”è¯¥å¯ä»¥è§£å†³é—®é¢˜ã€‚ é‡å¯ç­–ç•¥ï¼ˆ--restartï¼‰ ä½¿ç”¨ docker run ä¸Šçš„ --restart æ ‡å¿—å¯ä»¥æŒ‡å®šå®¹å™¨çš„é‡å¯ç­–ç•¥ï¼Œå†³å®šå®¹å™¨åœ¨é€€å‡ºæ—¶åº”ä¸åº”è¯¥ä»¥åŠå¦‚ä½•é‡å¯ã€‚ å½“é‡å¯ç­–ç•¥åœ¨å®¹å™¨ä¸Šè¢«æ¿€æ´»æ—¶ï¼Œå®ƒå°†åœ¨ docker ps ä¸­æ˜¾ç¤ºä¸º Up æˆ– Restartingã€‚ä½¿ç”¨ docker events æŸ¥çœ‹é‡å¯ç­–ç•¥çš„æ•ˆæœä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ç­–ç•¥ æ•ˆæœ no ï¼ˆé»˜è®¤ï¼‰å®¹å™¨é€€å‡ºåä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚ on-failure[:max-retries] å½“å®¹å™¨é€€å‡ºå¹¶è¿”å›ä¸€ä¸ªéé›¶çŠ¶æ€å€¼æ—¶å°è¯•é‡å¯ï¼Œå¯ä»¥æŒ‡å®šæœ€å¤§é‡è¯•æ¬¡æ•°ã€‚ always æ— è®ºé€€å‡ºçŠ¶æ€å¦‚ä½•ï¼Œéƒ½è¦é‡å¯å®¹å™¨ã€‚å½“æŒ‡å®š always æ—¶ï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹å°†å°è¯•æ— é™æœŸåœ°é‡æ–°å¯åŠ¨å®¹å™¨ã€‚æ— è®ºå®¹å™¨çš„å½“å‰çŠ¶æ€å¦‚ä½•ï¼Œå®¹å™¨ä¹Ÿæ€»æ˜¯åœ¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å¯åŠ¨ã€‚ unless-stopped æ— è®ºé€€å‡ºçŠ¶æ€å¦‚ä½•ï¼Œéƒ½è¦é‡å¯å®¹å™¨ï¼ŒåŒ…æ‹¬åœ¨å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œé™¤éå®¹å™¨åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹åœæ­¢ä¹‹å‰å¤„äºåœæ­¢çŠ¶æ€ã€‚ åœ¨æ¯æ¬¡é‡æ–°å¯åŠ¨ä¹‹å‰ï¼Œå¢åŠ å»¶è¿Ÿ(ä» 100 æ¯«ç§’å¼€å§‹ï¼Œæ˜¯ä¹‹å‰å»¶è¿Ÿçš„ä¸¤å€),ä»¥é˜²æ­¢æœåŠ¡å™¨æ´ªæµã€‚è¿™æ„å‘³ç€å®ˆæŠ¤è¿›ç¨‹å°†ç­‰å¾… 100 æ¯«ç§’ï¼Œç„¶å 200 æ¯«ç§’ï¼Œ400ï¼Œ800ï¼Œ1600ï¼Œç­‰ç­‰ï¼Œç›´åˆ°è¾¾åˆ°å¤±è´¥æé™ï¼Œæœ€å¤§å»¶è¿Ÿ1åˆ†é’Ÿï¼Œæˆ–è€…å½“æ‚¨æ‰§è¡Œ docker stop æˆ– docker rm -f å®¹å™¨ã€‚ å¦‚æœå®¹å™¨æˆåŠŸé‡å¯(å®¹å™¨å¯åŠ¨å¹¶è¿è¡Œè‡³å°‘ 10 ç§’)ï¼Œå»¶è¿Ÿå°†é‡ç½®ä¸ºé»˜è®¤å€¼100æ¯«ç§’ã€‚ ä½¿ç”¨å¤±è´¥æ—¶ç­–ç•¥æ—¶ï¼Œæ‚¨å¯ä»¥æŒ‡å®š Docker å°è¯•é‡æ–°å¯åŠ¨å®¹å™¨çš„æœ€å¤§æ¬¡æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker å°†æ°¸è¿œå°è¯•é‡æ–°å¯åŠ¨å®¹å™¨ã€‚å¯ä»¥é€šè¿‡ docker inspect è·å¾—å®¹å™¨çš„(å°è¯•)é‡å¯æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œè·å–å®¹å™¨â€œmy-containerâ€çš„é‡å¯æ¬¡æ•°: 1\\$ docker inspect -f &quot;&#123;&#123; .RestartCount &#125;&#125;&quot; my-container æˆ–è€…è·å¾—ä¸Šæ¬¡å®¹å™¨(é‡æ–°)å¯åŠ¨çš„æ—¶é—´: 1\\$ docker inspect -f &quot;&#123;&#123; .State.StartedAt &#125;&#125;&quot; my-container å°† --restart (é‡æ–°å¯åŠ¨ç­–ç•¥)ä¸ --rm (æ¸…ç†)æ ‡å¿—ç»“åˆä½¿ç”¨ä¼šå¯¼è‡´é”™è¯¯ã€‚å®¹å™¨é‡å¯æ—¶ï¼Œè¿æ¥çš„å®¢æˆ·ç«¯ä¼šæ–­å¼€è¿æ¥ã€‚ è‡ªåŠ¨æ¸…ç†ï¼ˆ--rmï¼‰ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿå³ä½¿åœ¨å®¹å™¨é€€å‡ºåä»ç„¶å­˜åœ¨ã€‚è¿™ä½¿å¾—è°ƒè¯•å®¹æ˜“å¾—å¤š(å› ä¸ºæ‚¨å¯ä»¥æ£€æŸ¥æœ€ç»ˆçŠ¶æ€),å¹¶ä¸”åœ¨é»˜è®¤æƒ…å†µä¸‹ä¿ç•™æ‰€æœ‰æ•°æ®ã€‚ä½†æ˜¯å¦‚æœä½ è¿è¡Œçš„æ˜¯çŸ­æœŸå‰å°è¿›ç¨‹ï¼Œè¿™äº›å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¼šä¸æ–­å †ç§¯èµ·æ¥ã€‚ç›¸åï¼Œå¦‚æœæ‚¨å¸Œæœ› Docker åœ¨å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†å®¹å™¨å¹¶åˆ é™¤æ–‡ä»¶ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥æ·»åŠ  --rm æ ‡å¿—: --rm=false: å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£","slug":"Linux | RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£","date":"2022-03-01T10:35:41.028Z","updated":"2022-03-05T12:58:15.221Z","comments":true,"path":"2022-03-01-Linux | RHCE è€ƒè¯•åŠçº¢å¸½ä¼ä¸š Linux äº†è§£.html","link":"","permalink":"https://skinyi.github.io/2022-03-01-Linux%20|%20RHCE%20%E8%80%83%E8%AF%95%E5%8F%8A%E7%BA%A2%E5%B8%BD%E4%BC%81%E4%B8%9A%20Linux%20%E4%BA%86%E8%A7%A3.html","excerpt":"","text":"ğŸ”´ æ­¤æ–‡ç« ç”±ä¹‹å‰çš„ Typora ç¬”è®°è¿ç§»è¿‡æ¥ï¼Œå†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚ RHCE8.0 è¯¾ç¨‹åŠè€ƒè¯•ä»£ç  ç›¸è¾ƒäº RHCE7 ï¼Œåœ¨ EX200 è€ƒè¯•ä¸­ï¼ŒRHCE8 å¢åŠ äº† SHELL è„šæœ¬ï¼ˆRH254ï¼‰ã€ç³»ç»Ÿè°ƒä¼˜ï¼ˆRH442ï¼‰ä»¥åŠ RHEL8 æ–°ç‰¹æ€§çš„ä¸€äº›è€ƒå¯Ÿï¼›åœ¨ EX294 è€ƒè¯•ä¸­ï¼ŒRHCE7 è€ƒå¯Ÿä¸€äº›å¸¸è§çš„ Service çš„æ­å»ºéƒ¨ç½²ä½¿ç”¨ï¼Œå¦‚ï¼šNFSã€SAMBAã€DNSç­‰ï¼Œè€Œåœ¨ RHCE8 è€ƒè¯•ä¸­åˆ™ä¸»è¦è€ƒå¯Ÿ Ansible è‡ªåŠ¨åŒ–å·¥å…·çš„æ“ä½œï¼Œä¸å†åŒ…å«å¸¸è§æœåŠ¡ã€‚ è¯¾ç¨‹ä»£ç  è€ƒè¯•ä»£ç  è€ƒè¯•å†…å®¹ è€ƒè¯•å½¢å¼ è€ƒè¯•æ—¶é•¿ RH124 EX200 ä»¥ç³»ç»Ÿç®¡ç†æ“ä½œä¸ºä¸»ï¼Œå¦‚ï¼šæ–‡ä»¶ç³»ç»Ÿã€ç”¨æˆ·æ“ä½œã€æƒé™æ“ä½œã€ç£ç›˜æ“ä½œç­‰ æœºè€ƒå®éªŒ 2.5h RH134 RH294 EX294 å…¨æ˜¯å…³äº Ansible è‡ªåŠ¨åŒ–å·¥å…·çš„æŠ€èƒ½æ“ä½œ 4h æ­å»ºæ—¥å¸¸ç»ƒä¹ ç¯å¢ƒ ğŸŸ¢ æ‰€éœ€å‰æœŸå‡†å¤‡å·¥ä½œï¼š å·²å®‰è£… VMWare Workstation è™šæ‹Ÿæœºï¼Œå¹¶åœ¨ bios ä¸­å¼€å¯äº†è™šæ‹ŸåŒ–ç›¸å…³çš„å¼€å…³ï¼› å·²ä¸‹è½½å¥½ RHEL8 Linux æ“ä½œç³»ç»Ÿ iso é•œåƒï¼› ç»ƒä¹ ç¯å¢ƒè™šæ‹Ÿæœºä»¥ NAT æ¨¡å¼å’Œå®¿ä¸»æœºè¿›è¡Œç½‘ç»œè¿æ¥ï¼Œä½¿ç”¨çš„è™šæ‹Ÿç½‘å¡æ˜¯ VMNet8 ã€‚ è™šæ‹Ÿæœºå®‰è£… RHEL8.3 æ“ä½œç³»ç»Ÿ â€‹å¦‚å›¾ï¼Œè™šæ‹Ÿæœºçš„é…ç½®å¦‚ä¸‹ï¼Œå¯æ ¹æ®è‡ªå·±ä¸ªäººç¡¬ä»¶è®¾å¤‡æƒ…å†µæŒ‰éœ€è°ƒæ•´ã€‚ è™šæ‹Ÿæœºè½¯ä»¶é€‰æ‹©å¦‚ä¸‹ï¼š è®¾ç½® root ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·åå¼€å§‹å®‰è£…ï¼Œç­‰å¾…è¿›åº¦æ¡è·‘å®Œé‡å¯è™šæ‹Ÿæœºï¼Œé‡å¯ååŒæ„ Redhat çš„ EULAï¼Œé€‰æ‹© FINISH CONFIGURATION è¿›å…¥å›¾å½¢ç•Œé¢ã€‚å›¾å½¢ç•Œé¢é»˜è®¤ä¸ºåˆšæ‰åˆ›å»ºçš„æ™®é€šç”¨æˆ·ï¼Œæ–°å®‰è£…çš„ RHEL è¿˜éœ€è¦è¿›è¡Œä¸€äº›ç³»ç»Ÿçº§çš„é…ç½®æ‰è¡Œã€‚ åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦ç™»é™† root è´¦æˆ·æ¥é…ç½®æˆ‘ä»¬æ–°å®‰è£…çš„æ“ä½œç³»ç»Ÿã€‚ä¸‹å›¾ä¸ºä½¿ç”¨ root ç”¨æˆ·ç™»é™†åçš„ç•Œé¢ã€‚ å®‰è£…å®Œæ“ä½œç³»ç»Ÿåçš„é…ç½® é…ç½®ç½‘ç»œè®¾ç½® â€‹ä½¿ç”¨ ip addr show å‘½ä»¤æ¥æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„ç½‘ç»œé…ç½®ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š ğŸŸ¢ å…¶å®ƒç½‘å¡è®¾å¤‡ä»‹ç»ï¼š lo è™šæ‹Ÿç½‘å¡è®¾å¤‡ï¼Œ lo æ˜¯ä¸»æœºç”¨äºå‘è‡ªèº«å‘é€é€šä¿¡çš„ä¸€ä¸ªç‰¹æ®Šåœ°å€ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç›®çš„åœ°å€ï¼‰ï¼Œå…¶ ip ä¸º 127.0.0.1 ï¼› virbr0 æ˜¯ KVM é»˜è®¤åˆ›å»ºçš„ä¸€ä¸ªç½‘æ¡¥ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºè¿æ¥å…¶ä¸Šçš„è™šæ‹Ÿæœºç½‘å¡æä¾› NAT è®¿é—®å¤–ç½‘çš„åŠŸèƒ½ï¼Œå¯æä¾› DHCP æœåŠ¡ï¼Œå…¶é»˜è®¤ ip ä¸º 192.168.122.1ã€‚æ­¤è™šæ‹Ÿè®¾å¤‡è¢«å¼ºåˆ¶åˆ é™¤åé‡å¯ç³»ç»Ÿè¿˜ä¼šå†æ¬¡åˆ›å»ºï¼Œå¦‚éœ€å¸è½½é¡»ä½¿ç”¨ KVM è™šæ‹ŸåŒ–ç®¡ç†å·¥å…·ï¼› birbr0-nic, åŒä¸Šç”± KVM æœåŠ¡åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ brctl å‘½ä»¤è¿›è¡Œç®¡ç†ã€‚ å…¶ä¸­ ens160 æ‰æ˜¯è¿æ¥å¤–ç½‘æ‰€éœ€è¦çš„ç½‘å¡è®¾å¤‡ã€‚å¯ä»¥çœ‹åˆ°æ­¤ç½‘å¡æ²¡æœ‰ç»‘å®š ip åœ°å€ï¼Œä½†è™šæ‹Ÿæœºè½¯ä»¶æ˜¯è®¾ç½®çš„ NAT ä¸”å·²å¼€å¯äº† DHCP æœåŠ¡ï¼Œå› æ­¤å¯¼è‡´æ­¤é—®é¢˜çš„åŸå› å¯èƒ½æ˜¯æˆ‘ä»¬çš„ç½‘å¡è®¾å¤‡æ²¡æœ‰å¯åŠ¨æˆ–å¯ç”¨ã€‚éœ€è¦æ£€æŸ¥æ­¤ç½‘å¡è®¾å¤‡çš„é…ç½®æ–‡ä»¶ï¼Œå…¶è·¯å¾„ä¸ºï¼š/etc/sysconfig/network-scripts/ifcfg-ens160ï¼ˆå¯ä»¥æ¨æ–­ RHEL çš„ç½‘å¡é…ç½®æ–‡ä»¶åç§°éƒ½æ˜¯ç”± &quot;ifcfg-&quot; å’Œç½‘å¡åç»„æˆçš„ï¼‰ï¼Œä½¿ç”¨ vim ç¼–è¾‘å™¨æ¥ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415TYPE=Ethernet # ç½‘ç»œç±»å‹ï¼šä»¥å¤ªç½‘PROXY_METHOD=none # ç½‘ç»œä»£ç†æ–¹æ³•BROWSER_ONLY=no BOOTPROTO=dhcp # æ¿€æ´»è®¾å¤‡ä½¿ç”¨çš„åœ°å€é…ç½®åè®®ï¼šdhcp,static,none,bootpDEFROUTE=yes # ipv4 é»˜è®¤è·¯ç”±è®¾å¤‡ï¼šyes,noIPV4_FAILURE_FATAL=noIPV6INIT=yes # åˆå§‹åŒ– ipv6 åè®®æ ˆï¼šyes,noIPV6_AUTOCONF=yes # è‡ªåŠ¨é…ç½® ipv6ï¼šyes,noIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens160 # ç½‘å¡åUUID=74e066fb-4f82-4422-ae3f-570dd2fca5a5 DEVICE=ens160 # åº”ç”¨åˆ°çš„è®¾å¤‡ï¼ˆå’Œ HWADDR å¿…é¡»ç•™ä¸€ä¸ªï¼Œåè€…æŒ‡ç½‘å¡ç‰©ç†åœ°å€ï¼‰ONBOOT=no # å¼€æœºåè‡ªåŠ¨æ¿€æ´»æ­¤è®¾å¤‡ ğŸŸ¢ Linux ç½‘ç»œé…ç½®è¯´æ˜ï¼š ç½‘å¡çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network-scripts/ifcfg-ç½‘å¡å è·¯ç”±ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/network-scripts/route-ç½‘å¡å ç½‘ç»œç›¸å…³è¯´æ˜å‚è€ƒ/usr/share/doc/initscripts-version/sysconfig.txt éœ€è¦å°† ONBOOT=no æ›´æ”¹ä¸º ONBOOT=yes ä»¥ä½¿æ­¤ç½‘å¡å¼€æœºå°±æ¿€æ´»å¯ç”¨ï¼Œé‡å¯è™šæ‹Ÿæœºï¼ŒéªŒè¯ç½‘å¡æ˜¯å¦å·²ç»è‡ªåŠ¨æ¿€æ´»ï¼ˆè‡ªåŠ¨è·å¾—äº† ip åœ°å€åˆ™é…ç½®æˆåŠŸï¼‰ã€‚ ä½¿ç”¨ Xshell è¿œç¨‹ç™»é™† â€‹åœ¨ Xshell é‡Œæ–°å»ºè¿æ¥ï¼Œè¿›è¡Œé…ç½®å³å¯è¿œç¨‹ç™»é™†åˆ°æ­¤è™šæ‹Ÿæœºã€‚ RHEL å’Œ CentOS çš„åŒºåˆ« ç®€ç§° ä¸­æ–‡å…¨ç§° å­˜åœ¨ä»˜è´¹ ä»˜è´¹å›æŠ¥ ç‰¹ç‚¹ RHEL çº¢å¸½ä¼ä¸š Linux æ“ä½œç³»ç»Ÿ æ˜¯ è·å¾—æŠ€æœ¯æ”¯æŒ ç¨³å®šï¼Œæœ€å…ˆè·å¾— Bug ä¿®å¤ CentOS ç¤¾åŒºä¼ä¸šæ“ä½œç³»ç»Ÿ å¦ - å«æœ‰ä¸€äº›æ–°ç‰¹æ€§ï¼Œæ¯”è¾ƒç¨³å®šï¼Œå»¶è¿Ÿè·å¾— Bug ä¿®å¤","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"}]},{"title":"Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤","slug":"Docker | Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤","date":"2022-02-27T14:03:20.637Z","updated":"2022-03-01T13:16:25.044Z","comments":true,"path":"2022-02-27-Docker | Docker å‘½ä»¤æ‰‹å†ŒåŠå¸¸ç”¨å¸®åŠ©å‘½ä»¤.html","link":"","permalink":"https://skinyi.github.io/2022-02-27-Docker%20|%20Docker%20%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4.html","excerpt":"","text":"å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨æ ¼ å‘½ä»¤ ç”¨é€” docker version æŸ¥çœ‹ docker å®¢æˆ·ç«¯åŠæœåŠ¡ç«¯ï¼ˆdocker å¼•æ“ï¼‰çš„ç‰ˆæœ¬åŠç¯å¢ƒä¿¡æ¯ docker info æŸ¥çœ‹ docker çš„ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯é…ç½®ã€é•œåƒä¸å®¹å™¨æ•°é‡ä»¥åŠä¸€äº›å…¶ä»–å¸¸è§é…ç½® docker [å‘½ä»¤] --help æŸ¥çœ‹ docker [å‘½ä»¤] ä½¿ç”¨çš„å¸®åŠ©ä¿¡æ¯ï¼Œæ¯”å¦‚ docker image --help Docker å‘½ä»¤é€ŸæŸ¥æ‰‹å†Œåœ°å€ï¼šhttps://docs.docker.com/engine/reference/run/ ã€‚ å¸¸ç”¨å¸®åŠ©å‘½ä»¤ä»‹ç» docker version æŸ¥çœ‹ docker ç‰ˆæœ¬ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031[skinyi@fedora ~]\\$ sudo docker version[sudo] skinyi çš„å¯†ç ï¼šClient: Docker Engine - Community Version: 20.10.12 API version: 1.41 Go version: go1.16.12 Git commit: e91ed57 Built: Mon Dec 13 11:46:03 2021 OS/Arch: linux/amd64 Context: default Experimental: trueServer: Docker Engine - Community Engine: Version: 20.10.12 API version: 1.41 (minimum version 1.12) Go version: go1.16.12 Git commit: 459d0df Built: Mon Dec 13 11:43:48 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.12 GitCommit: 7b11cfaabd73bb80907dd23182b9347b4245eb5d runc: Version: 1.0.2 GitCommit: v1.0.2-0-g52b36a2 docker-init: Version: 0.19.0 GitCommit: de40ad0 docker info æŸ¥çœ‹ docker çš„ç³»ç»Ÿä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657[skinyi@fedora ~]\\$ sudo docker info[sudo] skinyi çš„å¯†ç ï¼šClient: Context: default Debug Mode: false Plugins: app: Docker App (Docker Inc., v0.9.1-beta3) buildx: Docker Buildx (Docker Inc., v0.7.1-docker) scan: Docker Scan (Docker Inc., v0.12.0)Server: Containers: 2 Running: 0 Paused: 0 Stopped: 2 Images: 1 Server Version: 20.10.12 Storage Driver: overlay2 Backing Filesystem: xfs Supports d_type: true Native Overlay Diff: true userxattr: false Logging Driver: json-file Cgroup Driver: systemd Cgroup Version: 2 Plugins: Volume: local Network: bridge host ipvlan macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog Swarm: inactive Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux Default Runtime: runc Init Binary: docker-init containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d runc version: v1.0.2-0-g52b36a2 init version: de40ad0 Security Options: seccomp Profile: default cgroupns Kernel Version: 5.16.8-200.fc35.x86_64 Operating System: Fedora Linux 35 (Server Edition) OSType: linux Architecture: x86_64 CPUs: 2 Total Memory: 3.788GiB Name: fedora ID: I5R6:5NIE:OTIL:XBI4:R6WP:5XSO:BZTG:QGV6:6RHG:OU7U:P3EP:JTEC Docker Root Dir: /var/lib/docker Debug Mode: false Registry: https://index.docker.io/v1/ Labels: Experimental: false Insecure Registries: 127.0.0.0/8 Live Restore Enabled: false docker [å‘½ä»¤] --help æŸ¥çœ‹ docker [å‘½ä»¤] çš„å¸®åŠ©ä¿¡æ¯ 123456789101112131415161718192021[skinyi@fedora ~]\\$ docker image --helpUsage: docker image COMMANDManage imagesCommands: build Build an image from a Dockerfile history Show the history of an image import Import the contents from a tarball to create a filesystem image inspect Display detailed information on one or more images load Load an image from a tar archive or STDIN ls List images prune Remove unused images pull Pull an image or a repository from a registry push Push an image or a repository to a registry rm Remove one or more images save Save one or more images to a tar archive (streamed to STDOUT by default) tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGERun &#x27;docker image COMMAND --help&#x27; for more information on a command. 123456789101112131415161718[skinyi@fedora ~]$ sudo docker container list --helpUsage: docker container ls [OPTIONS]List containersAliases: ls, ps, listOptions: -a, --all Show all containers (default shows just running) -f, --filter filter Filter output based on conditions provided --format string Pretty-print containers using a Go template -n, --last int Show n last created containers (includes all states) (default -1) -l, --latest Show the latest created container (includes all states) --no-trunc Don&#x27;t truncate output -q, --quiet Only display container IDs -s, --size Display total file sizes docker å­å‘½ä»¤åŠŸèƒ½ç®€ä»‹ å­å‘½ä»¤ æè¿° docker attach å°†æœ¬åœ°æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œé”™è¯¯æµé™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker build ä» Dockerfile æ„å»ºä¸€ä¸ªé•œåƒ docker builder ç®¡ç†é•œåƒæ„å»ºå™¨ docker checkpoint ç®¡ç†æ£€æŸ¥ç‚¹ docker commit ä»ä¸€ä¸ªå®¹å™¨çš„æ‰€æœ‰æ›´æ”¹åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ docker config ç®¡ç† Docker çš„é…ç½® docker container ç®¡ç†å®¹å™¨ docker context ç®¡ç† docker ä¸Šä¸‹æ–‡ docker cp åœ¨å®¹å™¨å’Œæœ¬åœ°å­˜å‚¨ä¹‹é—´æ‹·è´æ–‡ä»¶æˆ–ç›®å½• docker create åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ docker diff ç›‘è§†å®¹å™¨ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•çš„å˜åŒ– docker events ä» docker å®ˆæŠ¤æœåŠ¡ä¸Šè·å–å®æ—¶äº‹ä»¶ docker exec åœ¨ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤ docker export å°†ä¸€ä¸ªå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä»¥ tar åŒ…çš„å½¢å¼å¯¼å‡º docker history å±•ç¤ºä¸€ä¸ªé•œåƒçš„æäº¤å†å² docker image ç®¡ç† docker é•œåƒ docker images åˆ—å‡ºé•œåƒ docker import ä» tar åŒ…ä¸­å¯¼å…¥å†…å®¹æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿé•œåƒ docker info æ˜¾ç¤ºç³»ç»ŸèŒƒå›´çš„ä¿¡æ¯ docker inspect è¿”å› docker å¯¹è±¡çš„åº•å±‚ä¿¡æ¯ docker kill æ€æ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿è¡Œä¸­çš„å®¹å™¨ docker load ä»ä¸€ä¸ª tar åŒ…æˆ–æ ‡å‡†è¾“å…¥æ¥åŠ è½½é•œåƒ docker login ç™»å½• Docker registry docker logout ç™»å‡º Docker registry docker logs è·å–ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿— docker manifest ç®¡ç† Docker é•œåƒæ¸…å•å’Œæ¸…å•åˆ—è¡¨","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½","slug":"Docker | Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½","date":"2022-02-27T13:03:47.405Z","updated":"2022-03-21T06:22:59.708Z","comments":true,"path":"2022-02-27-Docker | Docker ä»‹ç»ä»¥åŠå®‰è£…ä¸å¸è½½.html","link":"","permalink":"https://skinyi.github.io/2022-02-27-Docker%20|%20Docker%20%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD.html","excerpt":"","text":"Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚ Docker å®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://docs.docker.com/ã€‚åœ¨å…¶å®˜ç½‘ä¸Šå…³äº docker çš„æ•´ä½“æ¶æ„ä»‹ç»å¯ä»¥æ‰¾åˆ°è¿™å¼ å›¾ï¼š å¯ä»¥çœ‹å‡º docker æ•´ä½“æ˜¯æ¨¡å—åŒ–ã€ä½è€¦åˆä¸”éµå¾ª C/S æ¶æ„çš„ï¼Œæ„æˆå®ƒçš„æ˜¯åŠŸèƒ½ä¸åŒçš„ç»„ä»¶ï¼Œä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç»„ä»¶çš„åŠŸèƒ½çš„æ¢³ç†ã€‚ Docker ç»„ä»¶ä»‹ç» Docker Daemonï¼šDocker å®ˆæŠ¤è¿›ç¨‹ï¼ˆdockerdï¼‰ç›‘å¬ Docker API è¯·æ±‚å¹¶ç®¡ç† Docker å¯¹è±¡ï¼Œä¾‹å¦‚é•œåƒã€å®¹å™¨ã€ç½‘ç»œå’Œå­˜å‚¨å·ã€‚å®ˆæŠ¤è¿›ç¨‹è¿˜å¯ä»¥ä¸å…¶ä»–å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ä»¥ç®¡ç† Docker æœåŠ¡ã€‚ Docker Clientï¼šDocker å®¢æˆ·ç«¯ï¼ˆdockerï¼‰æ˜¯è®¸å¤š Docker ç”¨æˆ·ä¸ Docker äº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å½“ä½ ä½¿ç”¨ docker run ç­‰å‘½ä»¤æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†è¿™äº›å‘½ä»¤å‘é€ç»™ dockerdï¼Œdockerd ä¼šæ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚ docker å‘½ä»¤ä½¿ç”¨ Docker APIã€‚Docker å®¢æˆ·ç«¯å¯ä»¥ä¸å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ã€‚ Docker Desktopï¼šæ˜¯ä¸€ä¸ªæ˜“äºå®‰è£…çš„åº”ç”¨ç¨‹åºï¼Œé€‚ç”¨äº Mac æˆ– Windows ç¯å¢ƒï¼Œèƒ½å¤Ÿæ„å»ºå’Œå…±äº«å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡ã€‚Docker Desktop åŒ…æ‹¬ Docker å®ˆæŠ¤ç¨‹åº (dockerd)ã€Docker å®¢æˆ·ç«¯ (docker)ã€Docker Composeã€Docker Content Trustã€Kubernetes å’Œ Credential Helperã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Docker æ¡Œé¢ã€‚ Docker Registriesï¼šDocker ä»“åº“å­˜å‚¨ Docker æ˜ åƒï¼ˆDocker Imageï¼‰ã€‚DockerHub æ˜¯ä¸€ä¸ªä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨çš„å…¬å…±ä»“åº“ï¼Œå¹¶ä¸” Docker é»˜è®¤é…ç½®ä¸ºåœ¨ DockerHub ä¸ŠæŸ¥æ‰¾é•œåƒã€‚ç”šè‡³å¯ä»¥å®šåˆ¶è¿è¡Œè‡ªå·±çš„ç§æœ‰ä»“åº“ã€‚ å½“ä½¿ç”¨ docker pull æˆ– docker run å‘½ä»¤æ—¶ï¼Œå°†ä»ç³»ç»Ÿæ‰€é…ç½®çš„é•œåƒä»“åº“ä¸­æå–æ‰€éœ€çš„é•œåƒã€‚å½“ä½¿ç”¨ docker push å‘½ä»¤æ—¶ï¼Œä½ å®šåˆ¶çš„é•œåƒä¼šè¢«æ¨é€åˆ°ä½ é…ç½®çš„é•œåƒä»“åº“ä¸­ã€‚ Docker Objectsï¼šå½“ä½¿ç”¨ Docker æ—¶ï¼Œä¼šæ¶‰åŠåˆ°åˆ›å»ºå’Œä½¿ç”¨å›¾åƒã€å®¹å™¨ã€ç½‘ç»œã€å·ã€æ’ä»¶å’Œå…¶ä»–å¯¹è±¡ã€‚ä»¥ä¸‹ç®€è¦æ¦‚è¿°å…¶ä¸­ä¸€äº›å¯¹è±¡ã€‚ Docker Image Docker é•œåƒæ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ï¼Œå…¶ä¸­åŒ…å«åˆ›å»º Docker å®¹å™¨æ—¶çš„è¯´æ˜ã€‚é€šå¸¸ï¼Œä¸€ä¸ªé•œåƒåŸºäºå¦ä¸€ä¸ªé•œåƒï¼Œå¹¶é™„å¸¦æœ‰ä¸€äº›é¢å¤–çš„è‡ªå®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªåŸºäº ubuntu é•œåƒçš„é•œåƒï¼Œä½†ä¼šå®‰è£… Apache Web æœåŠ¡å™¨å’Œä¸€äº›ä½ çš„åº”ç”¨ç¨‹åºï¼Œè¯¥é•œåƒè¿˜åŒ…å«ä½¿ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„é…ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚ ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„é•œåƒï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨å…¶ä»–äººåˆ›å»ºå¹¶åœ¨ä»“åº“ä¸­å‘å¸ƒçš„é•œåƒã€‚è¦æ„å»ºä½ è‡ªå·±çš„é•œåƒï¼Œä½ éœ€è¦ä½¿ç”¨ç®€å•çš„è¯­æ³•åˆ›å»ºä¸€ä¸ª Dockerfileï¼Œç”¨äºå®šä¹‰åˆ›å»ºå’Œè¿è¡Œé•œåƒæ‰€éœ€çš„æ­¥éª¤ã€‚Dockerfile ä¸­çš„æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåœ¨é•œåƒä¸­åˆ›å»ºä¸€ä¸ªå±‚ã€‚å½“ä½ æ›´æ”¹ Dockerfile å¹¶é‡å»ºæ˜ åƒæ—¶ï¼Œä»…é‡å»ºé‚£äº›å·²æ›´æ”¹çš„å±‚ã€‚ä¸å…¶ä»–è™šæ‹ŸåŒ–æŠ€æœ¯ç›¸æ¯”ï¼Œè¿™æ˜¯ä½¿é•œåƒå¦‚æ­¤è½»é‡ã€å°å·§å’Œå¿«é€Ÿçš„éƒ¨åˆ†åŸå› ã€‚ Docker Container Docker å®¹å™¨æ˜¯é•œåƒçš„å¯è¿è¡Œå®ä¾‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ Docker API æˆ– CLI åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚ä½ å¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œå°†å­˜å‚¨é™„åŠ åˆ°å®ƒï¼Œç”šè‡³å¯ä»¥æ ¹æ®å…¶å½“å‰çŠ¶æ€åˆ›å»ºæ–°çš„é•œåƒã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¹å™¨ä¸å…¶ä»–å®¹å™¨ä»¥åŠå…¶å®¿ä¸»æœºçš„éš”ç¦»ç›¸å¯¹è¾ƒå¥½ã€‚ä½ å¯ä»¥æ§åˆ¶å®¹å™¨çš„ç½‘ç»œã€å­˜å‚¨å’Œå…¶ä»–åº•å±‚å­ç³»ç»Ÿä¸å…¶ä»–å®¹å™¨æˆ–å®¿ä¸»æœºçš„éš”ç¦»ç¨‹åº¦ã€‚ ä¸€ä¸ªå®¹å™¨ç”±å…¶é•œåƒä»¥åŠä½ åœ¨åˆ›å»ºæˆ–å¯åŠ¨å®ƒæ—¶æä¾›ç»™å®ƒçš„ä»»ä½•é…ç½®é€‰é¡¹è¿›è¡Œå®šä¹‰ã€‚å½“å®¹å™¨è¢«ç§»é™¤æ—¶ï¼Œä»»ä½•æœªå­˜å‚¨åœ¨æŒä¹…å­˜å‚¨ä¸­çš„çŠ¶æ€æ›´æ”¹éƒ½ä¼šæ¶ˆå¤±ã€‚ â€‹Docker ä¸‰å¤§æ ¸å¿ƒç»„ä»¶æŒ‡çš„æ˜¯ï¼šDocker Imageã€Docker Container ä»¥åŠ Docker Registryã€‚ Docker è¿è¡Œç¤ºä¾‹ ä»¥ä¸‹å‘½ä»¤è¿è¡Œ ubuntu å®¹å™¨ï¼Œä»¥äº¤äº’æ–¹å¼é™„åŠ åˆ°æœ¬åœ°å‘½ä»¤è¡Œä¼šè¯ï¼Œå¹¶è¿è¡Œ /bin/bashã€‚ 1[skinyi@fedora ~]\\$ sudo docker run -i -t ubuntu /bin/bash ^ å®‰è£… Docker åå¦‚ä¸åšå…¶ä»–é…ç½®åˆ™ docker run å‘½ä»¤åªèƒ½ä½¿ç”¨ root æƒé™æ¥æ‰§è¡Œã€‚ å½“ä½ è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼ˆå‡è®¾ä½ ä½¿ç”¨çš„æ˜¯é»˜è®¤é•œåƒä»“åº“é…ç½®ï¼‰ï¼š å¦‚æœä½ åœ¨æœ¬åœ°æ²¡æœ‰ ubuntu æ˜ åƒï¼ŒDocker ä¼šä»ä½ é…ç½®çš„é•œåƒä»“åº“ï¼ˆé»˜è®¤ DockerHubï¼‰ä¸­æå–å®ƒï¼Œå°±åƒä½ æ‰‹åŠ¨è¿è¡Œ docker pull ubuntu ä¸€æ ·ï¼› Docker ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œå°±åƒä½ æ‰‹åŠ¨è¿è¡Œäº† docker container create å‘½ä»¤ä¸€æ ·ï¼› Docker ä¸ºè¯¥å®¹å™¨åˆ†é…ä¸€ä¸ªè¯»å†™æ–‡ä»¶ç³»ç»Ÿï¼Œä½œä¸ºè¯¥å®¹å™¨çš„åº•å±‚ï¼Œè¿™å…è®¸æ­£åœ¨è¿è¡Œçš„å®¹å™¨åœ¨å…¶æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶å’Œç›®å½•ï¼› ç”±äºæ²¡æœ‰æŒ‡å®šä»»ä½•å…¶ä»–çš„ç½‘ç»œé€‰é¡¹ï¼ŒDocker ä¼šåˆ›å»ºä¸€ä¸ªç½‘ç»œæ¥å£æ¥å°†è¯¥å®¹å™¨è¿æ¥åˆ°é»˜è®¤ç½‘ç»œï¼ŒåŒ…æ‹¬ä¸ºå®¹å™¨åˆ†é… IP åœ°å€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®¹å™¨å¯ä»¥ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œè¿æ¥è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œã€‚ Docker å¯åŠ¨å®¹å™¨å¹¶æ‰§è¡Œ /bin/bashã€‚ç”±äºå®¹å™¨ä»¥äº¤äº’æ–¹å¼è¿è¡Œå¹¶é™„åŠ åˆ°æ‚¨çš„ç»ˆç«¯ï¼ˆ-i å’Œ -t é€‰é¡¹ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨å°†è¾“å‡ºè®°å½•åˆ°ç»ˆç«¯æ—¶ä½¿ç”¨é”®ç›˜æä¾›è¾“å…¥ã€‚ å½“ä½ é”®å…¥ exit å‘½ä»¤ä»¥ç»ˆæ­¢ /bin/bash å‘½ä»¤æ—¶ï¼Œå®¹å™¨ä¼šåœæ­¢ä½†ä¸ä¼šè¢«åˆ é™¤ï¼Œä½ å¯ä»¥é‡æ–°å¯åŠ¨æˆ–åˆ é™¤å®ƒã€‚ Docker çš„å®‰è£…ä¸å¸è½½ ä¸ªäººå­¦ä¹ ä½¿ç”¨æ“ä½œç³»ç»Ÿä¸ºï¼šFedora 35ï¼ŒFedora ç‰ˆæœ¬ç›®å‰ä»…æ”¯æŒ Fedora 34 å’Œ Fedora 35ã€‚ 12345678910111213141516171819202122[skinyi@fedora ~]\\$ cat /etc/os-releaseNAME=&quot;Fedora Linux&quot;VERSION=&quot;35 (Server Edition)&quot;ID=fedoraVERSION_ID=35VERSION_CODENAME=&quot;&quot;PLATFORM_ID=&quot;platform:f35&quot;PRETTY_NAME=&quot;Fedora Linux 35 (Server Edition)&quot;ANSI_COLOR=&quot;0;38;2;60;110;180&quot;LOGO=fedora-logo-iconCPE_NAME=&quot;cpe:/o:fedoraproject:fedora:35&quot;HOME_URL=&quot;https://fedoraproject.org/&quot;DOCUMENTATION_URL=&quot;https://docs.fedoraproject.org/en-US/fedora/f35/system-administrators-guide/&quot;SUPPORT_URL=&quot;https://ask.fedoraproject.org/&quot;BUG_REPORT_URL=&quot;https://bugzilla.redhat.com/&quot;REDHAT_BUGZILLA_PRODUCT=&quot;Fedora&quot;REDHAT_BUGZILLA_PRODUCT_VERSION=35REDHAT_SUPPORT_PRODUCT=&quot;Fedora&quot;REDHAT_SUPPORT_PRODUCT_VERSION=35PRIVACY_POLICY_URL=&quot;https://fedoraproject.org/wiki/Legal:PrivacyPolicy&quot;VARIANT=&quot;Server Edition&quot;VARIANT_ID=server Fedora æ“ä½œç³»ç»Ÿ Docker å®‰è£…æ–‡æ¡£ï¼šhttps://docs.docker.com/engine/install/fedora/ã€‚ å¸è½½æ—§ç‰ˆæœ¬ 12345678[skinyi@fedora ~]\\$ sudo dnf remove docker \\ docker-client \\ docker-client-lastest \\ docker-common \\ docker-lastest-logrotate \\ docker-selinux \\ docker-engine-selinux \\ docker-engine ä½¿ç”¨è½¯ä»¶ä»“åº“è¿›è¡Œ Doker çš„å®‰è£… â€‹å®‰è£… dnf-plugins-core æ’ä»¶ã€‚ 1[skinyi@fedora ~]$ sudo dnf -y install dnf-plugins-core â€‹æ·»åŠ  docker çš„å®˜æ–¹è½¯ä»¶ä»“åº“ã€‚ 12[skinyi@fedora ~]$ sudo dnf config-manager --add-repo \\ https://download.docker.com/linux/fedora/docker-ce.repo å®‰è£… Docker å¼•æ“ 1[skinyi@fedora ~]$ sudo dnf install docker-ce docker-ce-cli containerd.io å¯åŠ¨å¹¶éªŒè¯ Docker æ˜¯å¦æˆåŠŸå®‰è£… 1234567891011121314151617181920212223[skinyi@fedora ~]$ sudo systemctl start docker[skinyi@fedora ~]$ sudo docker run hello-worldHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/ å®ç°é root æƒé™æ‰§è¡Œ docker å‘½ä»¤æˆ–è€…å®ç°ä¸€äº›å…¶ä»–å®‰è£…åçš„ä¼˜åŒ–å¯ä»¥å‚é˜…ï¼šhttps://docs.docker.com/engine/install/linux-postinstall/ã€‚ å¸è½½ Docker å¼•æ“ 12[skinyi@fedora ~]$ sudo dnf remove docker-ce docker-ce-cli containerd.io[skinyi@fedora ~]$ sudo rm -rf /var/lib/docker /var/lib/containerd å¯åŠ¨ Docker æ—¶çš„æ‰§è¡Œè¿‡ç¨‹ å¯åŠ¨è¿‡ç¨‹ä¸­çš„æ³¨æ„ç‚¹ï¼š Docker ä¼˜å…ˆä½¿ç”¨çš„å­˜å‚¨é©±åŠ¨ä¸º Overlay2ï¼› åŠ è½½å®¹å™¨æ—¶ä¼šè®¾ç½®å®¹å™¨çš„ç½‘ç»œï¼Œå¹¶åˆ›å»ºè™šæ‹Ÿç½‘ç»œæ¥å£ docker0ï¼Œè¯¥æ¥å£ä½¿ç”¨æ¡¥æ¥æ¨¡å¼æ¥å…¥ç½‘ç»œï¼Œå¹¶åœ¨å®¿ä¸»æœºé˜²ç«å¢™ä¸­é…ç½®ä¸€ä¸ª docker zoneï¼› Docker çš„å®ˆæŠ¤ç¨‹åº dockerd åˆå§‹åŒ–æˆåŠŸåä¼šå¯åŠ¨ docker åº”ç”¨å®¹å™¨å¼•æ“ï¼Œç„¶å docker å¼•æ“é€šè¿‡ç›‘å¬ /run/docker.sock å¥—æ¥å­—å®ç°å®¢æˆ·ç«¯ä¸å®ˆæŠ¤ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"}]},{"title":"ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢","slug":"Hexo | ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢","date":"2022-02-21T14:23:11.437Z","updated":"2022-08-30T01:20:16.348Z","comments":true,"path":"2022-02-21-Hexo | ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢.html","link":"","permalink":"https://skinyi.github.io/2022-02-21-Hexo%20|%20%E4%BD%BF%E7%94%A8%20Hexo%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html","excerpt":"","text":"ä¸€ç›´ä»¥æ¥éƒ½æœ‰æ­å»ºä¸ªäººç½‘ç«™æˆ–è€…è¯´åšå®¢çš„æƒ³æ³•ï¼Œä»Šå¤©ç»ˆäºæŠŠè¿™ä»¶äº‹åšæˆäº†ï¼Œæ„Ÿè°¢ Github å„å¤§ä»£ç æ‰˜ç®¡å¹³å°çš„ GitHub XXX Pages æœåŠ¡ï¼Œä½¿æˆ‘ä»¬å³ä½¿æ²¡æœ‰å…¬ç½‘æœåŠ¡å™¨ä¹Ÿèƒ½æ­ä¸ªäººäººå¯è®¿é—®çš„é™æ€ä¸ªäººç½‘ç«™ï¼Œè€Œä¸”æ— éœ€ä»»ä½•è´¹ç”¨ã€‚å½“ç„¶å›½å†…ç äº‘ä¹Ÿæœ‰è¿™é¡¹æœåŠ¡ï¼Œç”±äºä¸€äº›ç†ç”±æˆ‘æ²¡æœ‰åœ¨é‚£ä¸Šé¢å¼„ï¼Œ Github Pages ç”±äºå›½å†…è®¿é—®é€Ÿåº¦å¤ªæ…¢äº†ï¼Œæˆ‘å°±åœ¨ç äº‘ä¸Šé¢ä¹Ÿåˆ›å»ºäº†ä»“åº“ï¼Œç„¶è€Œå¯ç”¨ Pages åŠŸèƒ½éœ€è¦å®åè®¤è¯ã€‚è¨€å½’æ­£ä¼ ï¼ŒæŒ‰ç…§ Hexo ç¤¾åŒºçš„æƒ¯ä¾‹ä»¥åŠæ­£å¥½ä½œä¸ºè‡ªå·±å¯¹æ­å»ºä¸ªäººç½‘ç«™è¿‡ç¨‹çš„è®°å½•ï¼Œæˆ‘çš„ä¸ªäººç½‘ç«™ä¸Šçš„ç¬¬ä¸€ç¯‡æ–‡ç« å°±æ‰“ç®—å†™å†™è¿™ä¸ªæ­å»ºåšå®¢çš„è¿‡ç¨‹ã€‚ å‡†å¤‡å·¥ä½œ æ­å»ºåšå®¢æ‰€éœ€çš„ç¯å¢ƒå’Œå®˜ç½‘åœ°å€å¦‚ä¸‹ï¼š åç§° ä½œç”¨ å®˜ç½‘ Nodejs Hexo åšå®¢æ¡†æ¶ä¾èµ–çš„å¼€å‘ç¯å¢ƒ https://nodejs.org/en/ Git æ¨é€åšå®¢è‡³ github æˆ–å…¶ä»–ä¸€äº›ä»£ç æ‰˜ç®¡ https://git-scm.com/ Hexo å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ https://hexo.io/zh-cn/ Purer theme ä¸€æ¬¾ç®€æ´é«˜æ•ˆçš„å“åº”å¼ä¸ªäººåšå®¢ä¸»é¢˜ https://github.com/fengkx/hexo-theme-purer åšå®¢ç³»ç»Ÿå¹³å°ç¯å¢ƒæ­å»ºåœ¨æˆ‘çš„ Fedora 35 è™šæ‹Ÿæœºä¸Šã€‚ 12[skinyi@localhost ~]$ uname -aLinux localhost.localdomain 5.16.9-200.fc35.x86_64 #1 SMP PREEMPT Fri Feb 11 16:29:17 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux å®‰è£…æ­¥éª¤ æˆ‘éå¸¸å»ºè®®ä½ æŒ‰ç…§æˆ‘ä¸Šé¢æ‰€ç»™çš„è¡¨æ ¼æ¥è®¿é—®å®˜æ–¹æ–‡æ¡£æ¥åˆ†æ­¥è¿›è¡Œéƒ¨ç½²ã€‚å®˜æ–¹æ–‡æ¡£æ°¸è¿œä¸ä¼šè¿‡æ—¶è€Œä¸”è¯¦å°½ï¼Œä¼šæœ€å¤§ç¨‹åº¦ä¸Šè§£å†³ä½ çš„ç–‘è™‘ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¯¹æ­¤æ¬¡éƒ¨ç½²è¿‡ç¨‹çš„ä¸€æ¬¡è®°å½•ï¼Œå…¶ä¸­ä¼šç€é‡è®°å½•æˆ‘çš„éƒ¨ç½²è¿‡ç¨‹ä¸­è¸©è¿‡çš„ä¸€äº›å‘ã€‚ å®‰è£… Nodejs ä½¿ç”¨ Linux ç³»ç»Ÿæˆ‘ä¸ªäººæ¯”è¾ƒå€¾å‘äºä»è½¯ä»¶ä»“åº“è·å¾—è½¯ä»¶ï¼Œä½†æ˜¯è½¯ä»¶ä»“åº“é‡Œçš„è½¯ä»¶ä¸ä¸€å®šä¼šæ˜¯æœ€æ–°ç‰ˆçš„ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¯ä»¥ä½¿æˆ‘ä»¬çœå»è‡ªå·±ç¼–è¯‘ã€é…ç½®çš„æ—¶é—´ã€‚Nodejs å®˜ç½‘ä¸Šçš„ä¸‹è½½é¡µé¢é‡Œçš„ Linux äºŒè¿›åˆ¶ç‰ˆæœ¬æ˜¯å‹ç¼©åŒ…ï¼Œè¦ä»è½¯ä»¶ä»“åº“è·å¾—å®ƒçš„è¯éœ€è¦ç‚¹å‡»ä¸‹é¢çš„ Installing Node.js via package manager é“¾æ¥æ¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ æ ¹æ®æ–‡æ¡£çš„æè¿°ï¼ŒFedora 35 å¯ä»¥é€šè¿‡å®‰è£… dnf è½¯ä»¶æ¨¡å—çš„æ–¹å¼æ¥è¿›è¡Œå®‰è£…ï¼Œå¯ä»¥å…ˆçœ‹çœ‹ä»“åº“é‡Œå·²æœ‰çš„è½¯ä»¶æµç‰ˆæœ¬ï¼š 1234567891011121314151617[skinyi@localhost ~]$ dnf module list nodejsä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:08:01 å‰ï¼Œæ‰§è¡Œäº 2022å¹´02æœˆ23æ—¥ æ˜ŸæœŸä¸‰ 18æ—¶50åˆ†04ç§’ã€‚Fedora Modular 35 - x86_64Name Stream Profiles Summary nodejs 12 default, development, minimal Javascript runtime nodejs 14 default, development, minimal Javascript runtime nodejs 15 default, development, minimal Javascript runtime nodejs 16 default, development, minimal Javascript runtime Fedora Modular 35 - x86_64 - UpdatesName Stream Profiles Summary nodejs 12 default, development, minimal Javascript runtime nodejs 14 common, development, minimal Javascript runtime nodejs 15 default, development, minimal Javascript runtime nodejs 16 [e] common, development, minimal Javascript runtime æç¤ºï¼š[d]é»˜è®¤ï¼Œ[e]å·²å¯ç”¨ï¼Œ[x]å·²ç¦ç”¨ï¼Œ[i]å·²å®‰è£… Hexo å®˜æ–¹æ–‡æ¡£ä¸­å»ºè®® Nodejs ç‰ˆæœ¬ä½¿ç”¨ Nodejs 12.0 åŠä»¥ä¸Šç‰ˆæœ¬çš„ï¼Œåœ¨è¿™é‡Œæˆ‘é€‰æ‹©å®‰è£… Nodejs 16 ç‰ˆæœ¬çš„ã€‚ 1[skinyi@localhost ~]$ sudo dnf module install nodejs:16 å®‰è£…å®ŒæˆåæŸ¥çœ‹ Nodejs ç‰ˆæœ¬å·ï¼š 12[skinyi@localhost ~]$ node -vv16.14.0 ä»ä»“åº“å®‰è£…å®Œæˆåï¼Œéœ€è¦å‡çº§ npm ç‰ˆæœ¬ä»¥åŠä¸ºäº†ä¸ç”¨ä»¥ root æƒé™æ‰§è¡Œ npm å‘½ä»¤ï¼Œéœ€è¦æ›´æ”¹ npm çš„é…ç½®ï¼š 1234# åœ¨å½“å‰ç”¨æˆ·ä¸»ç›®å½•åˆ›å»º npm å…¨å±€å®‰è£…ç›®å½•[skinyi@localhost ~]$ mkdir ~/.npm-global# é…ç½® npm ä½¿ç”¨åˆšæ‰å»ºçš„ç›®å½•è·¯å¾„[skinyi@localhost ~]$ npm config set prefix &#x27;~/.npm-global&#x27; æ·»åŠ  ~/.npm-global/bin è·¯å¾„åˆ°ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼š 12[skinyi@localhost ~]$ echo &#x27;export PATH=~/.npm-global/bin:$PATH&#x27; &gt;&gt; ~/.bash_rc[skinyi@localhost ~]$ source ~/.bash_rc å®‰è£…Git ä½¿ç”¨ dnf åŒ…ç®¡ç†å™¨å®‰è£… Gitï¼š 1[skinyi@localhost ~]$ sudo dnf install git-core git å…¨å±€é…ç½®ï¼Œå¦‚æœéœ€è¦é€šè¿‡ git å°†åšå®¢éƒ¨ç½²åˆ° Github Pages ä¸Šï¼Œéœ€è¦é…ç½® git çš„ä¸€äº›å…¨å±€è®¾ç½®ï¼š 12[skinyi@localhost ~]$ git config --global user.name &quot;github ä¸Šçš„ç”¨æˆ·å&quot;[skinyi@localhost ~]$ git config --global user.email &quot;æ³¨å†Œ github è´¦å·ä½¿ç”¨çš„é‚®ç®±&quot; å®‰è£… Hexo ä»¥ä¸Šä¾èµ–è½¯ä»¶å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥è¿›è¡Œ Hexo çš„å®‰è£…äº†ï¼š 1[skinyi@localhost ~]$ npm install -g hexo-cli åœ¨å·¥ä½œç›®å½•é‡Œåˆå§‹åŒ–è‡ªå·±çš„åšå®¢é¡¹ç›®ï¼š 1234[skinyi@localhost ~]$ hexo init blog[skinyi@localhost ~]$ cd blog[skinyi@localhost blog]$ npm install[skinyi@localhost blog]$ hexo server å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æœ¬åœ°åœ°å€ï¼šhttp://127.0.0.1:4000 æ¥é¢„è§ˆç”Ÿæˆçš„åšå®¢ç½‘ç«™ï¼Œè‹¥è¦åœ¨å¤–éƒ¨è®¿é—®çš„è¯éœ€è¦é€šè¿‡é˜²ç«å¢™å¼€æ”¾ 4000 ç«¯å£ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚ æ›´æ¢åšå®¢ä¸»é¢˜ ä» Hexo ä¸»é¢˜åˆ—è¡¨é‡Œç­›é€‰äº†ä¸€åœˆåæˆ‘ç»ˆäºé€‰ä¸­äº†æ­¤æ—¶ç”¨çš„è¿™æ¬¾ä¸»é¢˜ï¼Œå®ƒçš„ Github é“¾æ¥æ˜¯ï¼šhttps://github.com/fengkx/hexo-theme-purer ï¼Œå¦‚æœä½ ä¹Ÿå–œæ¬¢è¿™æ¬¾ä¸»é¢˜ï¼Œå¯ä»¥é€šè¿‡é¡¹ç›®ä¸»é¡µçš„çš„è¯´æ˜æ–‡æ¡£æ¥äº†è§£å®ƒçš„å®‰è£…ã€é…ç½®åŠä½¿ç”¨ï¼Œä¸è¿‡å»ºè®®ä½ åœ¨çœ‹ä½œè€…çš„æ–‡æ¡£å‰å…ˆå¤§è‡´çœ‹ä¸‹ Hexo çš„ä½¿ç”¨æ–‡æ¡£æ¥äº†è§£äº†è§£ Hexo çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œè¿™æ ·çœ‹ä½œè€…çš„æ–‡æ¡£å†ä¸Šæ‰‹å°±æ¯”è¾ƒå®¹æ˜“äº†ã€‚ è¿™æ¬¾ä¸»é¢˜æ˜¯åŸºäº EJS å’Œ Tailwind CSS æ„å»ºçš„ï¼Œä»¥åè‹¥æœ‰å…´è¶£æ„å»ºè‡ªå·±çš„ä¸»é¢˜å¯ä»¥å‚è€ƒä½¿ç”¨è¿™ä¸¤ç§æŠ€æœ¯ã€‚ ä¸‹è½½ä¸»é¢˜æ–‡ä»¶ æˆ‘æ²¡æœ‰æŒ‰ç…§å®˜æ–¹ä½¿ç”¨ git clone åŒæ­¥çš„æ–¹æ³•æ¥ä¸‹è½½ä¸»é¢˜ï¼Œç›´æ¥é€šè¿‡ä¸‹è½½ä»“åº“æºç çš„æ–¹å¼ä¸‹è½½ä¸‹æ¥ã€‚gh-pages æ˜¯æˆ‘çš„æ•´ä¸ªåšå®¢é¡¹ç›®çš„ä¸»ç›®å½•ã€‚ 123[skinyi@localhost gh-pages]$ wget -c https://github.com/fengkx/hexo-theme-purer/archive/refs/heads/master.zip -O themes/[skinyi@localhost gh-pages]$ unzip themes/master.zip[skinyi@localhost gh-pages]$ mv themes/hexo-theme-purer-master themes/purer æ–‡æ¡£ä¸­ä¸ºäº†é¿å…ç”±äºä¸»é¢˜æ›´æ–°è€Œå¯¼è‡´åŸæœ‰çš„ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶å¤±æ•ˆæ•…è€Œé€‰æ‹©æŠŠä¸»é¢˜çš„ _config.yml æ”¾åœ¨ä¸»é¢˜å¤–é¢å¹¶å–åä¸º _config.theme.ymlï¼Œåœ¨è¿›è¡Œç¼–è¯‘æ—¶å°†æ­¤æ–‡ä»¶çš„å†…å®¹å†™è¿›ä¸»é¢˜åº•ä¸‹çš„ _config.ymlã€‚è™½ç„¶æˆ‘ä¹‹åä¸ä¼šæ›´æ–°è¿™ä¸ªä¸»é¢˜ä½†æ˜¯æˆ‘è¿˜æ˜¯æŒ‰ç…§æ–‡æ¡£é‡Œçš„åšäº†ï¼Œåªä¸è¿‡æˆ‘èµ·çš„åå­—ä¸º _config.purer.ymlã€‚ å°† purer ä¸»é¢˜ä¸‹çš„ _config.example.yml å¤åˆ¶åˆ°é¡¹ç›®ä¸»ç›®å½•ä¸‹ã€‚ç„¶åç¼–è¾‘ package.json çš„å†…å®¹å¦‚ä¸‹ï¼š 12[skinyi@localhost gh-pages]$ cp themes/purer/_config.example.yml _config.purer.yml[skinyi@localhost gh-pages]$ code package.json package.json123456789&#123; &quot;scripts&quot;: &#123; &quot;theme&quot;: &quot;cat ./_config.purer.yml &gt; ./themes/purer/_config.yml &quot;, &quot;build&quot;: &quot;npm run theme &amp;&amp; hexo generate&quot;, &quot;clean&quot;: &quot;hexo clean&quot;, &quot;deploy&quot;: &quot;npm run theme &amp;&amp; hexo deploy&quot;, &quot;server&quot;: &quot;npm run theme &amp;&amp; hexo server&quot; &#125;,&#125; é…ç½®ä¸»é¢˜ å®‰è£…åŠé…ç½®æ’ä»¶ é¦–å…ˆå¯é€‰çš„å·¥ä½œæ˜¯å¸è½½ä¸éœ€è¦æˆ–ä¸æ¨èçš„æ¸²æŸ“å™¨ï¼š 12[skinyi@localhost gh-pages]$ npm uninstall hexo-renderer-stylus[skinyi@localhost gh-pages]$ npm uninstall hexo-renderer-marked å®‰è£… markdown-it æ¸²æŸ“å™¨ä»¥åŠå…¶ä»–å¸¸ç”¨æ’ä»¶ï¼š 12345678# markdown-it æ¸²æŸ“å™¨[skinyi@localhost gh-pages]$ npm i -S hexo-renderer-markdown-it# æ”¯æŒä»post_assert_folder ç”¨ markdown å¼•å…¥å›¾ç‰‡[skinyi@localhost gh-pages]$ npm i -S hexo-asset-image# æ”¯æŒ emoji[skinyi@localhost gh-pages]$ npm i -S markdown-it-emoji# æ”¯æŒæ•°å­¦å…¬å¼[skinyi@localhost gh-pages]$ npm i -S @iktakahiro/markdown-it-katex ç”±äº hexo-renderer-markdown-it é»˜è®¤ä¸ç”Ÿæˆ h1 çš„é”šç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼Œåœ¨æ’ä»¶å¯¹è±¡é‡Œå°†åˆšæ‰æ·»åŠ çš„ä¸¤ä¸ªæ’ä»¶åŠ è¿›å»: _config.yml123456789101112131415markdown: html: true xhtmlOut: true breaks: true langPrefix: linkify: true typographer: quotes: â€œâ€â€˜â€™ anchors: level: 1 permalink: false separator: &#x27;-&#x27; plugins: - &#x27;@iktakahiro/markdown-it-katex&#x27; - markdown-it-emoji åˆ›å»ºå¸¸è§é¡µé¢ åœ¨ é¡¹ç›®ä¸»ç›®å½•/source ä¸‹æŒ‰éœ€æ·»åŠ  categoriesã€tagsã€repositoriesã€linksã€about ç›®å½•ï¼Œè¿™äº›åˆ†åˆ«å¯¹åº”åšå®¢æ¡†æ¶ä¸­çš„åˆ†ç±»é¡µã€æ ‡ç­¾é¡µã€ä»“åº“é¡µï¼ˆä¸»é¢˜ç‹¬æœ‰ï¼‰ã€å‹é“¾é¡µã€å…³äºé¡µã€‚ç„¶ååœ¨å…¶ä¸­åˆ›å»ºå¯¹åº”çš„ index.md æ–‡ä»¶ã€‚ æˆ‘çš„é¡¹ç›®æ²¡æœ‰è¦å‹é“¾é¡µï¼Œæ•…æœ€ç»ˆç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 12345678910111213141516171819[skinyi@localhost gh-pages]$ tree -L 2 sourcesourceâ”œâ”€â”€ aboutâ”‚ â””â”€â”€ index.mdâ”œâ”€â”€ categoriesâ”‚ â””â”€â”€ index.mdâ”œâ”€â”€ imagesâ”‚ â”œâ”€â”€ avatar.jpgâ”‚ â””â”€â”€ favicon.pngâ”œâ”€â”€ _postsâ”‚ â”œâ”€â”€ ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢.mdâ”‚ â””â”€â”€ imagesâ”œâ”€â”€ README.mdâ”œâ”€â”€ repositoryâ”‚ â””â”€â”€ index.mdâ””â”€â”€ tags â””â”€â”€ index.md7 directories, 8 files å¦‚æœä½ äº‹å…ˆçœ‹è¿‡ Hexo çš„æ–‡æ¡£ï¼Œä½ å°±ä¼šçŸ¥é“ _post ç›®å½•å­˜æ”¾çš„æ˜¯å†™å¥½çš„æ–‡ç« ä»¥åŠæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ index.md éœ€è¦æ·»åŠ  front-matterã€‚ä»¥å†…å®¹ç¨å¾®å¤šçš„ about ç›®å½•çš„ front-matter ä¸ºä¾‹ï¼š 1234567---title: å…³äºdescription: ä¸ªäººç®€ä»‹layout: aboutsidebar: customdate: 2022-02-22 20:55:00--- å…¶ä»–ç›®å½•çš„ front-matter å¯ä»¥å‚è€ƒä¸»é¢˜ä½œè€…æ–‡æ¡£ä¸­çš„ Demo é“¾æ¥ã€‚ å®šåˆ¶ä¸»é¢˜é…ç½® æ¥ä¸‹æ¥éœ€è¦ä¿®æ”¹é¡¹ç›®ä¸»ç›®å½•ä¸‹çš„ _config_purer.yml æ–‡ä»¶æ¥å®šåˆ¶è‡ªå·±çš„ä¸»é¢˜ï¼Œè¿™ä¸ªå‚ç…§ä¸»é¢˜æ–‡æ¡£æŒ‰ç…§è‡ªå·±çš„å¿ƒæ„å®šåˆ¶å°±æˆï¼Œæˆ‘æ²¡æœ‰è¦å‹é“¾å’Œä¹¦å•é¡µé¢ã€‚ å†™ä½œ æ‰€æœ‰å·²ç»å‘è¡¨çš„æ–‡ç« éƒ½åœ¨é¡¹ç›®ç›®å½•çš„ source/_posts å­ç›®å½•ä¸‹ï¼ŒHexo åŒæ ·æ”¯æŒæ·»åŠ è‰ç¨¿ï¼Œè‰ç¨¿ç›®å½•é‡Œçš„æ–‡ç« é»˜è®¤ä¸ä¼šæ¸²æŸ“å‡ºæ¥ã€‚å¯¹æˆ‘æ¥è¯´æ‡’å¾—ä½¿ç”¨è‰ç¨¿äº†ï¼Œå› ä¸ºå¹ç‰›æ ¹æœ¬ä¸éœ€è¦æ‰“è‰ç¨¿ã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢ VSCode é‡Œè¾¹å†™è¾¹æƒ³ï¼Œå†™å®Œåå†éƒ¨ç½²å°±å¯ä»¥äº†ï¼Œæ ¹æœ¬ä¸éœ€è¦è‰ç¨¿ã€‚ åšæ–‡æ˜¯ä»¥ markdown æ ¼å¼ç¼–å†™çš„ï¼Œå¥½åœ¨è¿™é—¨è¯­è¨€çš„å­¦ä¹ æˆæœ¬å¹¶ä¸é«˜ï¼Œå¤šå†™å¤šç”¨å¤šè®°å°±å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†ä½¿ç”¨éœ€è¦ï¼Œæ¯”è¾ƒå†·é—¨çš„æ ¼å¼éœ€è¦ç”¨çš„æ—¶å€™å†æŸ¥ä¹ŸèŠ±è´¹ä¸äº†å¤ªé•¿æ—¶é—´ã€‚ éƒ¨ç½²æ–‡ç«  åšå®¢ç½‘ç«™æ­å»ºèµ·æ¥äº†éœ€è¦éƒ¨ç½²åˆ°å…¬ç½‘ä¸Šæ‰èƒ½è¢«ä»–äººçœ‹åˆ°ï¼Œä½†æ˜¯å…¬ç½‘ IP ä»¥åŠæœåŠ¡å™¨éœ€è¦èŠ±è´¹ä¸å°çš„ç»æµæˆæœ¬ï¼Œå¥½åœ¨ä¸€äº›ä»£ç æ‰˜ç®¡ç½‘ç«™éƒ½æä¾›äº† XXX Pages æœåŠ¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨å›½å†…çš„å¹³å°ä¸Šå¯ç”¨ Pages æœåŠ¡ä¸€èˆ¬éƒ½éœ€è¦è¿›è¡Œå®åè®¤è¯ï¼Œè€Œåœ¨ Github Pages ä¸Šéƒ¨ç½²ä¸éœ€è¦è¿›è¡Œå®åã€‚ ä½¿ç”¨ git çš„æ–¹å¼è¿›è¡Œåšå®¢éƒ¨ç½²å¯ä»¥å®‰è£… hexo æ’ä»¶ hexo-deployer-gitï¼š 1[skinyi@localhost gh-pages]$ npm install hexo-deployer-git --save åœ¨ _config.yml ä¸­ä¿®æ”¹é…ç½®ï¼š 1234567deploy: type: git repo: github: &lt;github ä»“åº“åœ°å€&gt; # å¦‚ https://github.com/xxx/xxx.github.io gitee: &lt;gitee ä»“åº“åœ°å€&gt; # å¦‚ https://gitee.com/xxx/xxx branch: [ä»£ç åˆ†æ”¯] # å¦‚ master message: [æäº¤ä¿¡æ¯] ç”Ÿæˆç«™ç‚¹æ–‡ä»¶å¹¶æ¨é€è‡³è¿œç¨‹ä»“åº“ï¼š 1[skinyi@localhost gh-pages]$ hexo clean &amp;&amp; hexo deploy é€šè¿‡ Git æ–¹å¼æäº¤æ—¶å»ºè®®åœ¨æœ¬åœ°ç”Ÿæˆå…¬ç§é’¥å¯¹å¹¶å°†ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶æ·»åŠ åˆ°è¿œç¨‹ä»“åº“çš„å…¬é’¥åˆ—è¡¨é‡Œï¼Œç„¶åæ¯æ¬¡æäº¤æ—¶å°±å¯ä»¥é€šè¿‡éªŒè¯å…¬ç§å¯†é’¥å¯¹çš„æ–¹å¼è€Œä¸ç”¨æ¯æ¬¡éƒ½è¾“ç”¨æˆ·ååŠå¯†ç ã€‚ åˆ°è¿™é‡ŒåŸºæœ¬ç®—æ˜¯ä»‹ç»å®Œäº†æ‰€æœ‰çš„æ­å»ºæ­¥éª¤ï¼Œä¹‹åæˆ‘ä¼šæŠŠæˆ‘åœ¨ Typora é‡Œå†™çš„æ‰€æœ‰å­¦ä¹ ç¬”è®°éƒ½æ¬è¿åˆ°è¿™ä¸ªåšå®¢ä¸­ï¼Œå½“ç„¶è¿™ä¸ªç½‘ç«™çš„å†…å®¹å¹¶ä¸å±€é™äºä¸€äº›è·ŸæŠ€æœ¯ç›¸å…³çš„ä¸œè¥¿ï¼Œæˆ‘å¹¶ä¸ç¡®å®šæˆ‘å†™çš„è¿™äº›ä¸œè¥¿ä¼šä¸ä¼šæœ‰äººçœ‹ï¼Œæˆ‘ä¹Ÿæ‰“ç®—å†™ä¸€äº›æŠ€æœ¯åšå®¢ä»¥å¤–çš„ä¸œè¥¿ï¼Œä¸ç®¡ä»¥åæ€ä¹ˆæ ·ã€å†™äº›ä»€ä¹ˆï¼Œå°±æ´»åœ¨å½“ä¸‹ã€äº«å—å¹¶è®°å½•ç”Ÿæ´»å§ã€‚","categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"æ‚é¡¹","slug":"å­¦ä¹ /æ‚é¡¹","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/%E6%9D%82%E9%A1%B9/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://skinyi.github.io/tags/Javascript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://skinyi.github.io/tags/Nodejs/"},{"name":"Hexo","slug":"Hexo","permalink":"https://skinyi.github.io/tags/Hexo/"},{"name":"Markdown","slug":"Markdown","permalink":"https://skinyi.github.io/tags/Markdown/"}]}],"categories":[{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/"},{"name":"Linux","slug":"å­¦ä¹ /Linux","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Linux/"},{"name":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","permalink":"https://skinyi.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"},{"name":"è¿ç§»æ–‡ç« ","slug":"è¿ç§»æ–‡ç« ","permalink":"https://skinyi.github.io/categories/%E8%BF%81%E7%A7%BB%E6%96%87%E7%AB%A0/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://skinyi.github.io/categories/%E7%94%9F%E6%B4%BB/"},{"name":"é©¾é©¶","slug":"ç”Ÿæ´»/é©¾é©¶","permalink":"https://skinyi.github.io/categories/%E7%94%9F%E6%B4%BB/%E9%A9%BE%E9%A9%B6/"},{"name":"Shell","slug":"å­¦ä¹ /Shell","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Shell/"},{"name":"Docker","slug":"å­¦ä¹ /Docker","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Docker/"},{"name":"ACP","slug":"å­¦ä¹ /ACP","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/ACP/"},{"name":"Office","slug":"å­¦ä¹ /Office","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/Office/"},{"name":"æ‚é¡¹","slug":"å­¦ä¹ /æ‚é¡¹","permalink":"https://skinyi.github.io/categories/%E5%AD%A6%E4%B9%A0/%E6%9D%82%E9%A1%B9/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://skinyi.github.io/tags/Linux/"},{"name":"RHEL","slug":"RHEL","permalink":"https://skinyi.github.io/tags/RHEL/"},{"name":"RHCE","slug":"RHCE","permalink":"https://skinyi.github.io/tags/RHCE/"},{"name":"è®¤è¯è€ƒè¯•","slug":"è®¤è¯è€ƒè¯•","permalink":"https://skinyi.github.io/tags/%E8%AE%A4%E8%AF%81%E8%80%83%E8%AF%95/"},{"name":"è®°åˆ†","slug":"è®°åˆ†","permalink":"https://skinyi.github.io/tags/%E8%AE%B0%E5%88%86/"},{"name":"é©¾ç…§","slug":"é©¾ç…§","permalink":"https://skinyi.github.io/tags/%E9%A9%BE%E7%85%A7/"},{"name":"å¼€è½¦","slug":"å¼€è½¦","permalink":"https://skinyi.github.io/tags/%E5%BC%80%E8%BD%A6/"},{"name":"æ³•å¾‹æ³•è§„","slug":"æ³•å¾‹æ³•è§„","permalink":"https://skinyi.github.io/tags/%E6%B3%95%E5%BE%8B%E6%B3%95%E8%A7%84/"},{"name":"Shell","slug":"Shell","permalink":"https://skinyi.github.io/tags/Shell/"},{"name":"Bash","slug":"Bash","permalink":"https://skinyi.github.io/tags/Bash/"},{"name":"è„šæœ¬ç¼–ç¨‹","slug":"è„šæœ¬ç¼–ç¨‹","permalink":"https://skinyi.github.io/tags/%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"},{"name":"Docker","slug":"Docker","permalink":"https://skinyi.github.io/tags/Docker/"},{"name":"å®¹å™¨","slug":"å®¹å™¨","permalink":"https://skinyi.github.io/tags/%E5%AE%B9%E5%99%A8/"},{"name":"è™šæ‹ŸåŒ–","slug":"è™šæ‹ŸåŒ–","permalink":"https://skinyi.github.io/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/"},{"name":"ACP","slug":"ACP","permalink":"https://skinyi.github.io/tags/ACP/"},{"name":"äº‘è®¡ç®—","slug":"äº‘è®¡ç®—","permalink":"https://skinyi.github.io/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"https://skinyi.github.io/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"},{"name":"Excel","slug":"Excel","permalink":"https://skinyi.github.io/tags/Excel/"},{"name":"Office","slug":"Office","permalink":"https://skinyi.github.io/tags/Office/"},{"name":"é¿å…åŠ ç­","slug":"é¿å…åŠ ç­","permalink":"https://skinyi.github.io/tags/%E9%81%BF%E5%85%8D%E5%8A%A0%E7%8F%AD/"},{"name":"å°‘åŠ ç­","slug":"å°‘åŠ ç­","permalink":"https://skinyi.github.io/tags/%E5%B0%91%E5%8A%A0%E7%8F%AD/"},{"name":"Javascript","slug":"Javascript","permalink":"https://skinyi.github.io/tags/Javascript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://skinyi.github.io/tags/Nodejs/"},{"name":"Hexo","slug":"Hexo","permalink":"https://skinyi.github.io/tags/Hexo/"},{"name":"Markdown","slug":"Markdown","permalink":"https://skinyi.github.io/tags/Markdown/"}]}